var requirejs, require, define;
if (function (global) {
        function isFunction(e) {
            return "[object Function]" === ostring.call(e)
        }

        function isArray(e) {
            return "[object Array]" === ostring.call(e)
        }

        function each(e, t) {
            if (e) {
                var n;
                for (n = 0; n < e.length && (!e[n] || !t(e[n], n, e)); n += 1) ;
            }
        }

        function eachReverse(e, t) {
            if (e) {
                var n;
                for (n = e.length - 1; n > -1 && (!e[n] || !t(e[n], n, e)); n -= 1) ;
            }
        }

        function hasProp(e, t) {
            return hasOwn.call(e, t)
        }

        function getOwn(e, t) {
            return hasProp(e, t) && e[t]
        }

        function eachProp(e, t) {
            var n;
            for (n in e) if (hasProp(e, n) && t(e[n], n)) break
        }

        function mixin(e, t, n, r) {
            return t && eachProp(t, function (t, i) {
                !n && hasProp(e, i) || (!r || "object" != typeof t || !t || isArray(t) || isFunction(t) || t instanceof RegExp ? e[i] = t : (e[i] || (e[i] = {}), mixin(e[i], t, n, r)))
            }), e
        }

        function bind(e, t) {
            return function () {
                return t.apply(e, arguments)
            }
        }

        function scripts() {
            return document.getElementsByTagName("script")
        }

        function defaultOnError(e) {
            throw e
        }

        function getGlobal(e) {
            if (!e) return e;
            var t = global;
            return each(e.split("."), function (e) {
                t = t[e]
            }), t
        }

        function makeError(e, t, n, r) {
            var i = new Error(t + "\nhttp://requirejs.org/docs/errors.html#" + e);
            return i.requireType = e, i.requireModules = r, n && (i.originalError = n), i
        }

        function newContext(e) {
            function trimDots(e) {
                var t, n;
                for (t = 0; t < e.length; t++) if (n = e[t], "." === n) e.splice(t, 1), t -= 1; else if (".." === n) {
                    if (0 === t || 1 === t && ".." === e[2] || ".." === e[t - 1]) continue;
                    t > 0 && (e.splice(t - 1, 2), t -= 2)
                }
            }

            function normalize(e, t, n) {
                var r, i, a, s, c, d, l, u, f, h, p, m, v = t && t.split("/"), g = o.map, b = g && g["*"];
                if (e && (e = e.split("/"), l = e.length - 1, o.nodeIdCompat && jsSuffixRegExp.test(e[l]) && (e[l] = e[l].replace(jsSuffixRegExp, "")), "." === e[0].charAt(0) && v && (m = v.slice(0, v.length - 1), e = m.concat(e)), trimDots(e), e = e.join("/")), n && g && (v || b)) {
                    a = e.split("/");
                    e:for (s = a.length; s > 0; s -= 1) {
                        if (d = a.slice(0, s).join("/"), v) for (c = v.length; c > 0; c -= 1) if (i = getOwn(g, v.slice(0, c).join("/")), i && (i = getOwn(i, d))) {
                            u = i, f = s;
                            break e
                        }
                        !h && b && getOwn(b, d) && (h = getOwn(b, d), p = s)
                    }
                    !u && h && (u = h, f = p), u && (a.splice(0, f, u), e = a.join("/"))
                }
                return r = getOwn(o.pkgs, e), r ? r : e
            }

            function removeScript(e) {
                isBrowser && each(scripts(), function (t) {
                    return t.getAttribute("data-requiremodule") === e && t.getAttribute("data-requirecontext") === r.contextName ? (t.parentNode.removeChild(t), !0) : void 0
                })
            }

            function hasPathFallback(e) {
                var t = getOwn(o.paths, e);
                return t && isArray(t) && t.length > 1 ? (t.shift(), r.require.undef(e), r.makeRequire(null, {skipMap: !0})([e]), !0) : void 0
            }

            function splitPrefix(e) {
                var t, n = e ? e.indexOf("!") : -1;
                return n > -1 && (t = e.substring(0, n), e = e.substring(n + 1, e.length)), [t, e]
            }

            function makeModuleMap(e, t, n, i) {
                var a, o, s, c, d = null, l = t ? t.name : null, f = e, h = !0, v = "";
                return e || (h = !1, e = "_@r" + (p += 1)), c = splitPrefix(e), d = c[0], e = c[1], d && (d = normalize(d, l, i), o = getOwn(u, d)), e && (d ? v = o && o.normalize ? o.normalize(e, function (e) {
                    return normalize(e, l, i)
                }) : -1 === e.indexOf("!") ? normalize(e, l, i) : e : (v = normalize(e, l, i), c = splitPrefix(v), d = c[0], v = c[1], n = !0, a = r.nameToUrl(v))), s = !d || o || n ? "" : "_unnormalized" + (m += 1), {
                    prefix: d,
                    name: v,
                    parentMap: t,
                    unnormalized: !!s,
                    url: a,
                    originalName: f,
                    isDefine: h,
                    id: (d ? d + "!" + v : v) + s
                }
            }

            function getModule(e) {
                var t = e.id, n = getOwn(s, t);
                return n || (n = s[t] = new r.Module(e)), n
            }

            function on(e, t, n) {
                var r = e.id, i = getOwn(s, r);
                !hasProp(u, r) || i && !i.defineEmitComplete ? (i = getModule(e), i.error && "error" === t ? n(i.error) : i.on(t, n)) : "defined" === t && n(u[r])
            }

            function onError(e, t) {
                var n = e.requireModules, r = !1;
                t ? t(e) : (each(n, function (t) {
                    var n = getOwn(s, t);
                    n && (n.error = e, n.events.error && (r = !0, n.emit("error", e)))
                }), r || req.onError(e))
            }

            function takeGlobalQueue() {
                globalDefQueue.length && (each(globalDefQueue, function (e) {
                    var t = e[0];
                    "string" == typeof t && (r.defQueueMap[t] = !0), l.push(e)
                }), globalDefQueue = [])
            }

            function cleanRegistry(e) {
                delete s[e], delete c[e]
            }

            function breakCycle(e, t, n) {
                var r = e.map.id;
                e.error ? e.emit("error", e.error) : (t[r] = !0, each(e.depMaps, function (r, i) {
                    var a = r.id, o = getOwn(s, a);
                    !o || e.depMatched[i] || n[a] || (getOwn(t, a) ? (e.defineDep(i, u[a]), e.check()) : breakCycle(o, t, n))
                }), n[r] = !0)
            }

            function checkLoaded() {
                var e, n, i = 1e3 * o.waitSeconds, s = i && r.startTime + i < (new Date).getTime(), d = [], l = [],
                    u = !1, f = !0;
                if (!t) {
                    if (t = !0, eachProp(c, function (e) {
                            var t = e.map, r = t.id;
                            if (e.enabled && (t.isDefine || l.push(e), !e.error)) if (!e.inited && s) hasPathFallback(r) ? (n = !0, u = !0) : (d.push(r), removeScript(r)); else if (!e.inited && e.fetched && t.isDefine && (u = !0, !t.prefix)) return f = !1
                        }), s && d.length) return e = makeError("timeout", "Load timeout for modules: " + d, null, d), e.contextName = r.contextName, onError(e);
                    f && each(l, function (e) {
                        breakCycle(e, {}, {})
                    }), s && !n || !u || !isBrowser && !isWebWorker || a || (a = setTimeout(function () {
                        a = 0, checkLoaded()
                    }, 50)), t = !1
                }
            }

            function callGetModule(e) {
                hasProp(u, e[0]) || getModule(makeModuleMap(e[0], null, !0)).init(e[1], e[2])
            }

            function removeListener(e, t, n, r) {
                e.detachEvent && !isOpera ? r && e.detachEvent(r, t) : e.removeEventListener(n, t, !1)
            }

            function getScriptData(e) {
                var t = e.currentTarget || e.srcElement;
                return removeListener(t, r.onScriptLoad, "load", "onreadystatechange"), removeListener(t, r.onScriptError, "error"), {
                    node: t,
                    id: t && t.getAttribute("data-requiremodule")
                }
            }

            function intakeDefines() {
                var e;
                for (takeGlobalQueue(); l.length;) {
                    if (e = l.shift(), null === e[0]) return onError(makeError("mismatch", "Mismatched anonymous define() module: " + e[e.length - 1]));
                    callGetModule(e)
                }
                r.defQueueMap = {}
            }

            var t, n, r, i, a,
                o = {waitSeconds: 7, baseUrl: "./", paths: {}, bundles: {}, pkgs: {}, shim: {}, config: {}}, s = {},
                c = {}, d = {}, l = [], u = {}, f = {}, h = {}, p = 1, m = 1;
            return i = {
                require: function (e) {
                    return e.require ? e.require : e.require = r.makeRequire(e.map)
                }, exports: function (e) {
                    return e.usingExports = !0, e.map.isDefine ? e.exports ? u[e.map.id] = e.exports : e.exports = u[e.map.id] = {} : void 0
                }, module: function (e) {
                    return e.module ? e.module : e.module = {
                        id: e.map.id, uri: e.map.url, config: function () {
                            return getOwn(o.config, e.map.id) || {}
                        }, exports: e.exports || (e.exports = {})
                    }
                }
            }, n = function (e) {
                this.events = getOwn(d, e.id) || {}, this.map = e, this.shim = getOwn(o.shim, e.id), this.depExports = [], this.depMaps = [], this.depMatched = [], this.pluginMaps = {}, this.depCount = 0
            }, n.prototype = {
                init: function (e, t, n, r) {
                    r = r || {}, this.inited || (this.factory = t, n ? this.on("error", n) : this.events.error && (n = bind(this, function (e) {
                        this.emit("error", e)
                    })), this.depMaps = e && e.slice(0), this.errback = n, this.inited = !0, this.ignore = r.ignore, r.enabled || this.enabled ? this.enable() : this.check())
                }, defineDep: function (e, t) {
                    this.depMatched[e] || (this.depMatched[e] = !0, this.depCount -= 1, this.depExports[e] = t)
                }, fetch: function () {
                    if (!this.fetched) {
                        this.fetched = !0, r.startTime = (new Date).getTime();
                        var e = this.map;
                        return this.shim ? void r.makeRequire(this.map, {enableBuildCallback: !0})(this.shim.deps || [], bind(this, function () {
                            return e.prefix ? this.callPlugin() : this.load()
                        })) : e.prefix ? this.callPlugin() : this.load()
                    }
                }, load: function () {
                    var e = this.map.url;
                    f[e] || (f[e] = !0, r.load(this.map.id, e))
                }, check: function () {
                    if (this.enabled && !this.enabling) {
                        var e, t, n = this.map.id, i = this.depExports, a = this.exports, o = this.factory;
                        if (this.inited) {
                            if (this.error) this.emit("error", this.error); else if (!this.defining) {
                                if (this.defining = !0, this.depCount < 1 && !this.defined) {
                                    if (isFunction(o)) {
                                        try {
                                            a = r.execCb(n, o, i, a)
                                        } catch (s) {
                                            e = s
                                        }
                                        if (this.map.isDefine && void 0 === a && (t = this.module, t ? a = t.exports : this.usingExports && (a = this.exports)), e) {
                                            if (this.events.error && this.map.isDefine || req.onError !== defaultOnError) return e.requireMap = this.map, e.requireModules = this.map.isDefine ? [this.map.id] : null, e.requireType = this.map.isDefine ? "define" : "require", onError(this.error = e);
                                            "undefined" != typeof console && console.error ? console.error(e) : req.onError(e)
                                        }
                                    } else a = o;
                                    if (this.exports = a, this.map.isDefine && !this.ignore && (u[n] = a, req.onResourceLoad)) {
                                        var c = [];
                                        each(this.depMaps, function (e) {
                                            c.push(e.normalizedMap || e)
                                        }), req.onResourceLoad(r, this.map, c)
                                    }
                                    cleanRegistry(n), this.defined = !0
                                }
                                this.defining = !1, this.defined && !this.defineEmitted && (this.defineEmitted = !0, this.emit("defined", this.exports), this.defineEmitComplete = !0)
                            }
                        } else hasProp(r.defQueueMap, n) || this.fetch()
                    }
                }, callPlugin: function () {
                    var e = this.map, t = e.id, n = makeModuleMap(e.prefix);
                    this.depMaps.push(n), on(n, "defined", bind(this, function (n) {
                        var i, a, c, d = getOwn(h, this.map.id), l = this.map.name,
                            u = this.map.parentMap ? this.map.parentMap.name : null,
                            f = r.makeRequire(e.parentMap, {enableBuildCallback: !0});
                        return this.map.unnormalized ? (n.normalize && (l = n.normalize(l, function (e) {
                            return normalize(e, u, !0)
                        }) || ""), a = makeModuleMap(e.prefix + "!" + l, this.map.parentMap), on(a, "defined", bind(this, function (e) {
                            this.map.normalizedMap = a, this.init([], function () {
                                return e
                            }, null, {enabled: !0, ignore: !0})
                        })), c = getOwn(s, a.id), void(c && (this.depMaps.push(a), this.events.error && c.on("error", bind(this, function (e) {
                            this.emit("error", e)
                        })), c.enable()))) : d ? (this.map.url = r.nameToUrl(d), void this.load()) : (i = bind(this, function (e) {
                            this.init([], function () {
                                return e
                            }, null, {enabled: !0})
                        }), i.error = bind(this, function (e) {
                            this.inited = !0, this.error = e, e.requireModules = [t], eachProp(s, function (e) {
                                0 === e.map.id.indexOf(t + "_unnormalized") && cleanRegistry(e.map.id)
                            }), onError(e)
                        }), i.fromText = bind(this, function (n, a) {
                            var s = e.name, c = makeModuleMap(s), d = useInteractive;
                            a && (n = a), d && (useInteractive = !1), getModule(c), hasProp(o.config, t) && (o.config[s] = o.config[t]);
                            try {
                                req.exec(n)
                            } catch (l) {
                                return onError(makeError("fromtexteval", "fromText eval for " + t + " failed: " + l, l, [t]))
                            }
                            d && (useInteractive = !0), this.depMaps.push(c), r.completeLoad(s), f([s], i)
                        }), void n.load(e.name, f, i, o))
                    })), r.enable(n, this), this.pluginMaps[n.id] = n
                }, enable: function () {
                    c[this.map.id] = this, this.enabled = !0, this.enabling = !0, each(this.depMaps, bind(this, function (e, t) {
                        var n, a, o;
                        if ("string" == typeof e) {
                            if (e = makeModuleMap(e, this.map.isDefine ? this.map : this.map.parentMap, !1, !this.skipMap), this.depMaps[t] = e, o = getOwn(i, e.id)) return void(this.depExports[t] = o(this));
                            this.depCount += 1, on(e, "defined", bind(this, function (e) {
                                this.undefed || (this.defineDep(t, e), this.check())
                            })), this.errback ? on(e, "error", bind(this, this.errback)) : this.events.error && on(e, "error", bind(this, function (e) {
                                this.emit("error", e)
                            }))
                        }
                        n = e.id, a = s[n], hasProp(i, n) || !a || a.enabled || r.enable(e, this)
                    })), eachProp(this.pluginMaps, bind(this, function (e) {
                        var t = getOwn(s, e.id);
                        t && !t.enabled && r.enable(e, this)
                    })), this.enabling = !1, this.check()
                }, on: function (e, t) {
                    var n = this.events[e];
                    n || (n = this.events[e] = []), n.push(t)
                }, emit: function (e, t) {
                    each(this.events[e], function (e) {
                        e(t)
                    }), "error" === e && delete this.events[e]
                }
            }, r = {
                config: o,
                contextName: e,
                registry: s,
                defined: u,
                urlFetched: f,
                defQueue: l,
                defQueueMap: {},
                Module: n,
                makeModuleMap: makeModuleMap,
                nextTick: req.nextTick,
                onError: onError,
                configure: function (e) {
                    e.baseUrl && "/" !== e.baseUrl.charAt(e.baseUrl.length - 1) && (e.baseUrl += "/");
                    var t = o.shim, n = {paths: !0, bundles: !0, config: !0, map: !0};
                    eachProp(e, function (e, t) {
                        n[t] ? (o[t] || (o[t] = {}), mixin(o[t], e, !0, !0)) : o[t] = e
                    }), e.bundles && eachProp(e.bundles, function (e, t) {
                        each(e, function (e) {
                            e !== t && (h[e] = t)
                        })
                    }), e.shim && (eachProp(e.shim, function (e, n) {
                        isArray(e) && (e = {deps: e}), !e.exports && !e.init || e.exportsFn || (e.exportsFn = r.makeShimExports(e)), t[n] = e
                    }), o.shim = t), e.packages && each(e.packages, function (e) {
                        var t, n;
                        e = "string" == typeof e ? {name: e} : e, n = e.name, t = e.location, t && (o.paths[n] = e.location), o.pkgs[n] = e.name + "/" + (e.main || "main").replace(currDirRegExp, "").replace(jsSuffixRegExp, "")
                    }), eachProp(s, function (e, t) {
                        e.inited || e.map.unnormalized || (e.map = makeModuleMap(t, null, !0))
                    }), (e.deps || e.callback) && r.require(e.deps || [], e.callback)
                },
                makeShimExports: function (e) {
                    function fn() {
                        var t;
                        return e.init && (t = e.init.apply(global, arguments)), t || e.exports && getGlobal(e.exports)
                    }

                    return fn
                },
                makeRequire: function (t, n) {
                    function localRequire(a, o, c) {
                        var d, l, f;
                        return n.enableBuildCallback && o && isFunction(o) && (o.__requireJsBuild = !0), "string" == typeof a ? isFunction(o) ? onError(makeError("requireargs", "Invalid require call"), c) : t && hasProp(i, a) ? i[a](s[t.id]) : req.get ? req.get(r, a, t, localRequire) : (l = makeModuleMap(a, t, !1, !0), d = l.id, hasProp(u, d) ? u[d] : onError(makeError("notloaded", 'Module name "' + d + '" has not been loaded yet for context: ' + e + (t ? "" : ". Use require([])")))) : (intakeDefines(), r.nextTick(function () {
                            intakeDefines(), f = getModule(makeModuleMap(null, t)), f.skipMap = n.skipMap, f.init(a, o, c, {enabled: !0}), checkLoaded()
                        }), localRequire)
                    }

                    return n = n || {}, mixin(localRequire, {
                        isBrowser: isBrowser, toUrl: function (e) {
                            var n, i = e.lastIndexOf("."), a = e.split("/")[0], o = "." === a || ".." === a;
                            return -1 !== i && (!o || i > 1) && (n = e.substring(i, e.length), e = e.substring(0, i)), r.nameToUrl(normalize(e, t && t.id, !0), n, !0)
                        }, defined: function (e) {
                            return hasProp(u, makeModuleMap(e, t, !1, !0).id)
                        }, specified: function (e) {
                            return e = makeModuleMap(e, t, !1, !0).id, hasProp(u, e) || hasProp(s, e)
                        }
                    }), t || (localRequire.undef = function (e) {
                        takeGlobalQueue();
                        var n = makeModuleMap(e, t, !0), i = getOwn(s, e);
                        i.undefed = !0, removeScript(e), delete u[e], delete f[n.url], delete d[e], eachReverse(l, function (t, n) {
                            t[0] === e && l.splice(n, 1)
                        }), delete r.defQueueMap[e], i && (i.events.defined && (d[e] = i.events), cleanRegistry(e))
                    }), localRequire
                },
                enable: function (e) {
                    var t = getOwn(s, e.id);
                    t && getModule(e).enable()
                },
                completeLoad: function (e) {
                    var t, n, i, a = getOwn(o.shim, e) || {}, c = a.exports;
                    for (takeGlobalQueue(); l.length;) {
                        if (n = l.shift(), null === n[0]) {
                            if (n[0] = e, t) break;
                            t = !0
                        } else n[0] === e && (t = !0);
                        callGetModule(n)
                    }
                    if (r.defQueueMap = {}, i = getOwn(s, e), !t && !hasProp(u, e) && i && !i.inited) {
                        if (!(!o.enforceDefine || c && getGlobal(c))) return hasPathFallback(e) ? void 0 : onError(makeError("nodefine", "No define call for " + e, null, [e]));
                        callGetModule([e, a.deps || [], a.exportsFn])
                    }
                    checkLoaded()
                },
                nameToUrl: function (e, t, n) {
                    var i, a, s, c, d, l, u, f = getOwn(o.pkgs, e);
                    if (f && (e = f), u = getOwn(h, e)) return r.nameToUrl(u, t, n);
                    if (req.jsExtRegExp.test(e)) d = e + (t || ""); else {
                        for (i = o.paths, a = e.split("/"), s = a.length; s > 0; s -= 1) if (c = a.slice(0, s).join("/"), l = getOwn(i, c)) {
                            isArray(l) && (l = l[0]), a.splice(0, s, l);
                            break
                        }
                        d = a.join("/"), d += t || (/^data\:|\?/.test(d) || n ? "" : ".js"), d = ("/" === d.charAt(0) || d.match(/^[\w\+\.\-]+:/) ? "" : o.baseUrl) + d
                    }
                    return o.urlArgs ? d + ((-1 === d.indexOf("?") ? "?" : "&") + o.urlArgs) : d
                },
                load: function (e, t) {
                    req.load(r, e, t)
                },
                execCb: function (e, t, n, r) {
                    return t.apply(r, n)
                },
                onScriptLoad: function (e) {
                    if ("load" === e.type || readyRegExp.test((e.currentTarget || e.srcElement).readyState)) {
                        interactiveScript = null;
                        var t = getScriptData(e);
                        r.completeLoad(t.id)
                    }
                },
                onScriptError: function (e) {
                    var t = getScriptData(e);
                    if (!hasPathFallback(t.id)) {
                        var n = [];
                        return eachProp(s, function (e, r) {
                            0 !== r.indexOf("_@r") && each(e.depMaps, function (e) {
                                return e.id === t.id && n.push(r), !0
                            })
                        }), onError(makeError("scripterror", 'Script error for "' + t.id + (n.length ? '", needed by: ' + n.join(", ") : '"'), e, [t.id]))
                    }
                }
            }, r.require = r.makeRequire(), r
        }

        function getInteractiveScript() {
            return interactiveScript && "interactive" === interactiveScript.readyState ? interactiveScript : (eachReverse(scripts(), function (e) {
                return "interactive" === e.readyState ? interactiveScript = e : void 0
            }), interactiveScript)
        }

        var req, s, head, baseElement, dataMain, src, interactiveScript, currentlyAddingScript, mainScript, subPath,
            version = "2.1.22", commentRegExp = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,
            cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g, jsSuffixRegExp = /\.js$/,
            currDirRegExp = /^\.\//, op = Object.prototype, ostring = op.toString, hasOwn = op.hasOwnProperty,
            ap = Array.prototype,
            isBrowser = !("undefined" == typeof window || "undefined" == typeof navigator || !window.document),
            isWebWorker = !isBrowser && "undefined" != typeof importScripts,
            readyRegExp = isBrowser && "PLAYSTATION 3" === navigator.platform ? /^complete$/ : /^(complete|loaded)$/,
            defContextName = "_", isOpera = "undefined" != typeof opera && "[object Opera]" === opera.toString(),
            contexts = {}, cfg = {}, globalDefQueue = [], useInteractive = !1;
        if ("undefined" == typeof define) {
            if ("undefined" != typeof requirejs) {
                if (isFunction(requirejs)) return;
                cfg = requirejs, requirejs = void 0
            }
            "undefined" == typeof require || isFunction(require) || (cfg = require, require = void 0), req = requirejs = function (e, t, n, r) {
                var i, a, o = defContextName;
                return isArray(e) || "string" == typeof e || (a = e, isArray(t) ? (e = t, t = n, n = r) : e = []), a && a.context && (o = a.context), i = getOwn(contexts, o), i || (i = contexts[o] = req.s.newContext(o)), a && i.configure(a), i.require(e, t, n)
            }, req.config = function (e) {
                return req(e)
            }, req.nextTick = "undefined" != typeof setTimeout ? function (e) {
                setTimeout(e, 4)
            } : function (e) {
                e()
            }, require || (require = req), req.version = version, req.jsExtRegExp = /^\/|:|\?|\.js$/, req.isBrowser = isBrowser, s = req.s = {
                contexts: contexts,
                newContext: newContext
            }, req({}), each(["toUrl", "undef", "defined", "specified"], function (e) {
                req[e] = function () {
                    var t = contexts[defContextName];
                    return t.require[e].apply(t, arguments)
                }
            }), isBrowser && (head = s.head = document.getElementsByTagName("head")[0], baseElement = document.getElementsByTagName("base")[0], baseElement && (head = s.head = baseElement.parentNode)), req.onError = defaultOnError, req.createNode = function (e, t, n) {
                var r = e.xhtml ? document.createElementNS("http://www.w3.org/1999/xhtml", "html:script") : document.createElement("script");
                return r.type = e.scriptType || "text/javascript", r.charset = "utf-8", r.async = !0, r
            }, req.load = function (e, t, n) {
                var r, i = e && e.config || {};
                if (isBrowser) return r = req.createNode(i, t, n), i.onNodeCreated && i.onNodeCreated(r, i, t, n), r.setAttribute("data-requirecontext", e.contextName), r.setAttribute("data-requiremodule", t), !r.attachEvent || r.attachEvent.toString && r.attachEvent.toString().indexOf("[native code") < 0 || isOpera ? (r.addEventListener("load", e.onScriptLoad, !1), r.addEventListener("error", e.onScriptError, !1)) : (useInteractive = !0, r.attachEvent("onreadystatechange", e.onScriptLoad)), r.src = n, currentlyAddingScript = r, baseElement ? head.insertBefore(r, baseElement) : head.appendChild(r), currentlyAddingScript = null, r;
                if (isWebWorker) try {
                    importScripts(n), e.completeLoad(t)
                } catch (a) {
                    e.onError(makeError("importscripts", "importScripts failed for " + t + " at " + n, a, [t]))
                }
            }, isBrowser && !cfg.skipDataMain && eachReverse(scripts(), function (e) {
                return head || (head = e.parentNode), dataMain = e.getAttribute("data-main"), dataMain ? (mainScript = dataMain, cfg.baseUrl || (src = mainScript.split("/"), mainScript = src.pop(), subPath = src.length ? src.join("/") + "/" : "./", cfg.baseUrl = subPath), mainScript = mainScript.replace(jsSuffixRegExp, ""), req.jsExtRegExp.test(mainScript) && (mainScript = dataMain), cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript], !0) : void 0
            }), define = function (e, t, n) {
                var r, i;
                "string" != typeof e && (n = t, t = e, e = null), isArray(t) || (n = t, t = null), !t && isFunction(n) && (t = [], n.length && (n.toString().replace(commentRegExp, "").replace(cjsRequireRegExp, function (e, n) {
                    t.push(n)
                }), t = (1 === n.length ? ["require"] : ["require", "exports", "module"]).concat(t))), useInteractive && (r = currentlyAddingScript || getInteractiveScript(), r && (e || (e = r.getAttribute("data-requiremodule")), i = contexts[r.getAttribute("data-requirecontext")])), i ? (i.defQueue.push([e, t, n]), i.defQueueMap[e] = !0) : globalDefQueue.push([e, t, n])
            }, define.amd = {jQuery: !0}, req.exec = function (text) {
                return eval(text)
            }, req(cfg)
        }
    }(this), define("requireLib", function () {
    }), !function (e, t) {
        "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function (e) {
            if (!e.document) throw new Error("jQuery requires a window with a document");
            return t(e)
        } : t(e)
    }("undefined" != typeof window ? window : this, function (e, t) {
        function s(e) {
            var t = !!e && "length" in e && e.length, n = p.type(e);
            return "function" === n || p.isWindow(e) ? !1 : "array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e
        }

        function z(e, t, n) {
            if (p.isFunction(t)) return p.grep(e, function (e, r) {
                return !!t.call(e, r, e) !== n
            });
            if (t.nodeType) return p.grep(e, function (e) {
                return e === t !== n
            });
            if ("string" == typeof t) {
                if (w.test(t)) return p.filter(t, e, n);
                t = p.filter(t, e)
            }
            return p.grep(e, function (e) {
                return c.call(t, e) > -1 !== n
            })
        }

        function F(e, t) {
            for (; (e = e[t]) && 1 !== e.nodeType;) ;
            return e
        }

        function H(e) {
            var t = {};
            return p.each(e.match(k) || [], function (e, n) {
                t[n] = !0
            }), t
        }

        function J() {
            r.removeEventListener("DOMContentLoaded", J), e.removeEventListener("load", J), p.ready()
        }

        function M() {
            this.expando = p.expando + M.uid++
        }

        function R(e, t, n) {
            var r;
            if (void 0 === n && 1 === e.nodeType) if (r = "data-" + t.replace(V, "-$&").toLowerCase(), n = e.getAttribute(r), "string" == typeof n) {
                try {
                    n = "true" === n ? !0 : "false" === n ? !1 : "null" === n ? null : +n + "" === n ? +n : q.test(n) ? p.parseJSON(n) : n
                } catch (i) {
                }
                U.set(e, t, n)
            } else n = void 0;
            return n
        }

        function W(e, t, n, r) {
            var i, a = 1, o = 20, s = r ? function () {
                    return r.cur()
                } : function () {
                    return p.css(e, t, "")
                }, c = s(), d = n && n[3] || (p.cssNumber[t] ? "" : "px"),
                l = (p.cssNumber[t] || "px" !== d && +c) && j.exec(p.css(e, t));
            if (l && l[3] !== d) {
                d = d || l[3], n = n || [], l = +c || 1;
                do a = a || ".5", l /= a, p.style(e, t, l + d); while (a !== (a = s() / c) && 1 !== a && --o)
            }
            return n && (l = +l || +c || 0, i = n[1] ? l + (n[1] + 1) * n[2] : +n[2], r && (r.unit = d, r.start = l, r.end = i)), i
        }

        function _(e, t) {
            var n = "undefined" != typeof e.getElementsByTagName ? e.getElementsByTagName(t || "*") : "undefined" != typeof e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
            return void 0 === t || t && p.nodeName(e, t) ? p.merge([e], n) : n
        }

        function aa(e, t) {
            for (var n = 0, r = e.length; r > n; n++) B.set(e[n], "globalEval", !t || B.get(t[n], "globalEval"))
        }

        function ca(e, t, n, r, i) {
            for (var a, o, s, c, d, l, u = t.createDocumentFragment(), f = [], h = 0, m = e.length; m > h; h++) if (a = e[h], a || 0 === a) if ("object" === p.type(a)) p.merge(f, a.nodeType ? [a] : a); else if (ee.test(a)) {
                for (o = o || u.appendChild(t.createElement("div")), s = (Z.exec(a) || ["", ""])[1].toLowerCase(), c = Q[s] || Q._default, o.innerHTML = c[1] + p.htmlPrefilter(a) + c[2], l = c[0]; l--;) o = o.lastChild;
                p.merge(f, o.childNodes), o = u.firstChild, o.textContent = ""
            } else f.push(t.createTextNode(a));
            for (u.textContent = "", h = 0; a = f[h++];) if (r && p.inArray(a, r) > -1) i && i.push(a); else if (d = p.contains(a.ownerDocument, a), o = _(u.appendChild(a), "script"), d && aa(o), n) for (l = 0; a = o[l++];) K.test(a.type || "") && n.push(a);
            return u
        }

        function ga() {
            return !0
        }

        function ha() {
            return !1
        }

        function ia() {
            try {
                return r.activeElement
            } catch (e) {
            }
        }

        function ja(e, t, n, r, i, a) {
            var o, s;
            if ("object" == typeof t) {
                "string" != typeof n && (r = r || n, n = void 0);
                for (s in t) ja(e, s, n, r, t[s], a);
                return e
            }
            if (null == r && null == i ? (i = n, r = n = void 0) : null == i && ("string" == typeof n ? (i = r, r = void 0) : (i = r, r = n, n = void 0)), i === !1) i = ha; else if (!i) return e;
            return 1 === a && (o = i, i = function (e) {
                return p().off(e), o.apply(this, arguments)
            }, i.guid = o.guid || (o.guid = p.guid++)), e.each(function () {
                p.event.add(this, t, i, r, n)
            })
        }

        function pa(e, t) {
            return p.nodeName(e, "table") && p.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
        }

        function qa(e) {
            return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e
        }

        function ra(e) {
            var t = se.exec(e.type);
            return t ? e.type = t[1] : e.removeAttribute("type"), e
        }

        function sa(e, t) {
            var n, r, i, a, o, s, c, d;
            if (1 === t.nodeType) {
                if (B.hasData(e) && (a = B.access(e), o = B.set(t, a), d = a.events)) {
                    delete o.handle, o.events = {};
                    for (i in d) for (n = 0, r = d[i].length; r > n; n++) p.event.add(t, i, d[i][n])
                }
                U.hasData(e) && (s = U.access(e), c = p.extend({}, s), U.set(t, c))
            }
        }

        function ta(e, t) {
            var n = t.nodeName.toLowerCase();
            "input" === n && X.test(e.type) ? t.checked = e.checked : "input" !== n && "textarea" !== n || (t.defaultValue = e.defaultValue)
        }

        function ua(e, t, n, r) {
            t = a.apply([], t);
            var i, o, s, c, d, l, u = 0, h = e.length, m = h - 1, v = t[0], g = p.isFunction(v);
            if (g || h > 1 && "string" == typeof v && !f.checkClone && oe.test(v)) return e.each(function (i) {
                var a = e.eq(i);
                g && (t[0] = v.call(this, i, a.html())), ua(a, t, n, r)
            });
            if (h && (i = ca(t, e[0].ownerDocument, !1, e, r), o = i.firstChild, 1 === i.childNodes.length && (i = o), o || r)) {
                for (s = p.map(_(i, "script"), qa), c = s.length; h > u; u++) d = i, u !== m && (d = p.clone(d, !0, !0), c && p.merge(s, _(d, "script"))), n.call(e[u], d, u);
                if (c) for (l = s[s.length - 1].ownerDocument, p.map(s, ra), u = 0; c > u; u++) d = s[u], K.test(d.type || "") && !B.access(d, "globalEval") && p.contains(l, d) && (d.src ? p._evalUrl && p._evalUrl(d.src) : p.globalEval(d.textContent.replace(ce, "")))
            }
            return e
        }

        function va(e, t, n) {
            for (var r, i = t ? p.filter(t, e) : e, a = 0; null != (r = i[a]); a++) n || 1 !== r.nodeType || p.cleanData(_(r)), r.parentNode && (n && p.contains(r.ownerDocument, r) && aa(_(r, "script")), r.parentNode.removeChild(r));
            return e
        }

        function ya(e, t) {
            var n = p(t.createElement(e)).appendTo(t.body), r = p.css(n[0], "display");
            return n.detach(), r
        }

        function za(e) {
            var t = r, n = le[e];
            return n || (n = ya(e, t), "none" !== n && n || (de = (de || p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement), t = de[0].contentDocument, t.write(), t.close(), n = ya(e, t), de.detach()), le[e] = n), n
        }

        function Fa(e, t, n) {
            var r, i, a, o, s = e.style;
            return n = n || he(e), o = n ? n.getPropertyValue(t) || n[t] : void 0, "" !== o && void 0 !== o || p.contains(e.ownerDocument, e) || (o = p.style(e, t)), n && !f.pixelMarginRight() && fe.test(o) && ue.test(t) && (r = s.width, i = s.minWidth, a = s.maxWidth, s.minWidth = s.maxWidth = s.width = o, o = n.width, s.width = r, s.minWidth = i, s.maxWidth = a), void 0 !== o ? o + "" : o
        }

        function Ga(e, t) {
            return {
                get: function () {
                    return e() ? void delete this.get : (this.get = t).apply(this, arguments)
                }
            }
        }

        function Ma(e) {
            if (e in _e) return e;
            for (var t = e[0].toUpperCase() + e.slice(1), n = ye.length; n--;) if (e = ye[n] + t, e in _e) return e
        }

        function Na(e, t, n) {
            var r = j.exec(t);
            return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || "px") : t
        }

        function Oa(e, t, n, r, i) {
            for (var a = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0, o = 0; 4 > a; a += 2) "margin" === n && (o += p.css(e, n + $[a], !0, i)), r ? ("content" === n && (o -= p.css(e, "padding" + $[a], !0, i)), "margin" !== n && (o -= p.css(e, "border" + $[a] + "Width", !0, i))) : (o += p.css(e, "padding" + $[a], !0, i), "padding" !== n && (o += p.css(e, "border" + $[a] + "Width", !0, i)));
            return o
        }

        function Pa(t, n, i) {
            var a = !0, o = "width" === n ? t.offsetWidth : t.offsetHeight, s = he(t),
                c = "border-box" === p.css(t, "boxSizing", !1, s);
            if (r.msFullscreenElement && e.top !== e && t.getClientRects().length && (o = Math.round(100 * t.getBoundingClientRect()[n])), 0 >= o || null == o) {
                if (o = Fa(t, n, s), (0 > o || null == o) && (o = t.style[n]), fe.test(o)) return o;
                a = c && (f.boxSizingReliable() || o === t.style[n]), o = parseFloat(o) || 0
            }
            return o + Oa(t, n, i || (c ? "border" : "content"), a, s) + "px"
        }

        function Qa(e, t) {
            for (var n, r, i, a = [], o = 0, s = e.length; s > o; o++) r = e[o], r.style && (a[o] = B.get(r, "olddisplay"), n = r.style.display, t ? (a[o] || "none" !== n || (r.style.display = ""), "" === r.style.display && Y(r) && (a[o] = B.access(r, "olddisplay", za(r.nodeName)))) : (i = Y(r), "none" === n && i || B.set(r, "olddisplay", i ? n : p.css(r, "display"))));
            for (o = 0; s > o; o++) r = e[o], r.style && (t && "none" !== r.style.display && "" !== r.style.display || (r.style.display = t ? a[o] || "" : "none"));
            return e
        }

        function Ra(e, t, n, r, i) {
            return new Ra.prototype.init(e, t, n, r, i)
        }

        function Wa() {
            return e.setTimeout(function () {
                Ee = void 0
            }), Ee = p.now()
        }

        function Xa(e, t) {
            var n, r = 0, i = {height: e};
            for (t = t ? 1 : 0; 4 > r; r += 2 - t) n = $[r], i["margin" + n] = i["padding" + n] = e;
            return t && (i.opacity = i.width = e), i
        }

        function Ya(e, t, n) {
            for (var r, i = (_a.tweeners[t] || []).concat(_a.tweeners["*"]), a = 0, o = i.length; o > a; a++) if (r = i[a].call(n, t, e)) return r
        }

        function Za(e, t, n) {
            var r, i, a, o, s, c, d, l, u = this, f = {}, h = e.style, m = e.nodeType && Y(e), v = B.get(e, "fxshow");
            n.queue || (s = p._queueHooks(e, "fx"), null == s.unqueued && (s.unqueued = 0, c = s.empty.fire, s.empty.fire = function () {
                s.unqueued || c()
            }), s.unqueued++, u.always(function () {
                u.always(function () {
                    s.unqueued--, p.queue(e, "fx").length || s.empty.fire()
                })
            })), 1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [h.overflow, h.overflowX, h.overflowY], d = p.css(e, "display"), l = "none" === d ? B.get(e, "olddisplay") || za(e.nodeName) : d, "inline" === l && "none" === p.css(e, "float") && (h.display = "inline-block")), n.overflow && (h.overflow = "hidden", u.always(function () {
                h.overflow = n.overflow[0], h.overflowX = n.overflow[1], h.overflowY = n.overflow[2]
            }));
            for (r in t) if (i = t[r], Se.exec(i)) {
                if (delete t[r], a = a || "toggle" === i, i === (m ? "hide" : "show")) {
                    if ("show" !== i || !v || void 0 === v[r]) continue;
                    m = !0
                }
                f[r] = v && v[r] || p.style(e, r)
            } else d = void 0;
            if (p.isEmptyObject(f)) "inline" === ("none" === d ? za(e.nodeName) : d) && (h.display = d); else {
                v ? "hidden" in v && (m = v.hidden) : v = B.access(e, "fxshow", {}), a && (v.hidden = !m), m ? p(e).show() : u.done(function () {
                    p(e).hide()
                }), u.done(function () {
                    var t;
                    B.remove(e, "fxshow");
                    for (t in f) p.style(e, t, f[t])
                });
                for (r in f) o = Ya(m ? v[r] : 0, r, u), r in v || (v[r] = o.start, m && (o.end = o.start, o.start = "width" === r || "height" === r ? 1 : 0))
            }
        }

        function $a(e, t) {
            var n, r, i, a, o;
            for (n in e) if (r = p.camelCase(n), i = t[r], a = e[n], p.isArray(a) && (i = a[1], a = e[n] = a[0]), n !== r && (e[r] = a, delete e[n]), o = p.cssHooks[r], o && "expand" in o) {
                a = o.expand(a), delete e[r];
                for (n in a) n in e || (e[n] = a[n], t[n] = i)
            } else t[r] = i
        }

        function _a(e, t, n) {
            var r, i, a = 0, o = _a.prefilters.length, s = p.Deferred().always(function () {
                delete c.elem
            }), c = function () {
                if (i) return !1;
                for (var t = Ee || Wa(), n = Math.max(0, d.startTime + d.duration - t), r = n / d.duration || 0, a = 1 - r, o = 0, c = d.tweens.length; c > o; o++) d.tweens[o].run(a);
                return s.notifyWith(e, [d, a, n]), 1 > a && c ? n : (s.resolveWith(e, [d]), !1)
            }, d = s.promise({
                elem: e,
                props: p.extend({}, t),
                opts: p.extend(!0, {specialEasing: {}, easing: p.easing._default}, n),
                originalProperties: t,
                originalOptions: n,
                startTime: Ee || Wa(),
                duration: n.duration,
                tweens: [],
                createTween: function (t, n) {
                    var r = p.Tween(e, d.opts, t, n, d.opts.specialEasing[t] || d.opts.easing);
                    return d.tweens.push(r), r
                },
                stop: function (t) {
                    var n = 0, r = t ? d.tweens.length : 0;
                    if (i) return this;
                    for (i = !0; r > n; n++) d.tweens[n].run(1);
                    return t ? (s.notifyWith(e, [d, 1, 0]), s.resolveWith(e, [d, t])) : s.rejectWith(e, [d, t]), this
                }
            }), l = d.props;
            for ($a(l, d.opts.specialEasing); o > a; a++) if (r = _a.prefilters[a].call(d, e, l, d.opts)) return p.isFunction(r.stop) && (p._queueHooks(d.elem, d.opts.queue).stop = p.proxy(r.stop, r)), r;
            return p.map(l, Ya, d), p.isFunction(d.opts.start) && d.opts.start.call(e, d), p.fx.timer(p.extend(c, {
                elem: e,
                anim: d,
                queue: d.opts.queue
            })), d.progress(d.opts.progress).done(d.opts.done, d.opts.complete).fail(d.opts.fail).always(d.opts.always)
        }

        function fb(e) {
            return e.getAttribute && e.getAttribute("class") || ""
        }

        function wb(e) {
            return function (t, n) {
                "string" != typeof t && (n = t, t = "*");
                var r, i = 0, a = t.toLowerCase().match(k) || [];
                if (p.isFunction(n)) for (; r = a[i++];) "+" === r[0] ? (r = r.slice(1) || "*", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
            }
        }

        function xb(e, t, n, r) {
            function g(o) {
                var s;
                return i[o] = !0, p.each(e[o] || [], function (e, o) {
                    var c = o(t, n, r);
                    return "string" != typeof c || a || i[c] ? a ? !(s = c) : void 0 : (t.dataTypes.unshift(c), g(c), !1)
                }), s
            }

            var i = {}, a = e === Ge;
            return g(t.dataTypes[0]) || !i["*"] && g("*")
        }

        function yb(e, t) {
            var n, r, i = p.ajaxSettings.flatOptions || {};
            for (n in t) void 0 !== t[n] && ((i[n] ? e : r || (r = {}))[n] = t[n]);
            return r && p.extend(!0, e, r), e
        }

        function zb(e, t, n) {
            for (var r, i, a, o, s = e.contents, c = e.dataTypes; "*" === c[0];) c.shift(), void 0 === r && (r = e.mimeType || t.getResponseHeader("Content-Type"));
            if (r) for (i in s) if (s[i] && s[i].test(r)) {
                c.unshift(i);
                break
            }
            if (c[0] in n) a = c[0]; else {
                for (i in n) {
                    if (!c[0] || e.converters[i + " " + c[0]]) {
                        a = i;
                        break
                    }
                    o || (o = i)
                }
                a = a || o
            }
            return a ? (a !== c[0] && c.unshift(a), n[a]) : void 0
        }

        function Ab(e, t, n, r) {
            var i, a, o, s, c, d = {}, l = e.dataTypes.slice();
            if (l[1]) for (o in e.converters) d[o.toLowerCase()] = e.converters[o];
            for (a = l.shift(); a;) if (e.responseFields[a] && (n[e.responseFields[a]] = t), !c && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), c = a, a = l.shift()) if ("*" === a) a = c; else if ("*" !== c && c !== a) {
                if (o = d[c + " " + a] || d["* " + a], !o) for (i in d) if (s = i.split(" "), s[1] === a && (o = d[c + " " + s[0]] || d["* " + s[0]])) {
                    o === !0 ? o = d[i] : d[i] !== !0 && (a = s[0], l.unshift(s[1]));
                    break
                }
                if (o !== !0) if (o && e["throws"]) t = o(t); else try {
                    t = o(t)
                } catch (u) {
                    return {state: "parsererror", error: o ? u : "No conversion from " + c + " to " + a}
                }
            }
            return {state: "success", data: t}
        }

        function Gb(e, t, n, r) {
            var i;
            if (p.isArray(t)) p.each(t, function (t, i) {
                n || $e.test(e) ? r(e, i) : Gb(e + "[" + ("object" == typeof i && null != i ? t : "") + "]", i, n, r)
            }); else if (n || "object" !== p.type(t)) r(e, t); else for (i in t) Gb(e + "[" + i + "]", t[i], n, r)
        }

        function Mb(e) {
            return p.isWindow(e) ? e : 9 === e.nodeType && e.defaultView
        }

        var n = [], r = e.document, i = n.slice, a = n.concat, o = n.push, c = n.indexOf, d = {}, l = d.toString,
            u = d.hasOwnProperty, f = {}, h = "2.2.3", p = function (e, t) {
                return new p.fn.init(e, t)
            }, m = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, v = /^-ms-/, g = /-([\da-z])/gi, b = function (e, t) {
                return t.toUpperCase()
            };
        p.fn = p.prototype = {
            jquery: h, constructor: p, selector: "", length: 0, toArray: function () {
                return i.call(this)
            }, get: function (e) {
                return null != e ? 0 > e ? this[e + this.length] : this[e] : i.call(this)
            }, pushStack: function (e) {
                var t = p.merge(this.constructor(), e);
                return t.prevObject = this, t.context = this.context, t
            }, each: function (e) {
                return p.each(this, e)
            }, map: function (e) {
                return this.pushStack(p.map(this, function (t, n) {
                    return e.call(t, n, t)
                }))
            }, slice: function () {
                return this.pushStack(i.apply(this, arguments))
            }, first: function () {
                return this.eq(0)
            }, last: function () {
                return this.eq(-1)
            }, eq: function (e) {
                var t = this.length, n = +e + (0 > e ? t : 0);
                return this.pushStack(n >= 0 && t > n ? [this[n]] : [])
            }, end: function () {
                return this.prevObject || this.constructor()
            }, push: o, sort: n.sort, splice: n.splice
        }, p.extend = p.fn.extend = function () {
            var e, t, n, r, i, a, o = arguments[0] || {}, s = 1, c = arguments.length, d = !1;
            for ("boolean" == typeof o && (d = o, o = arguments[s] || {}, s++), "object" == typeof o || p.isFunction(o) || (o = {}), s === c && (o = this, s--); c > s; s++) if (null != (e = arguments[s])) for (t in e) n = o[t], r = e[t], o !== r && (d && r && (p.isPlainObject(r) || (i = p.isArray(r))) ? (i ? (i = !1, a = n && p.isArray(n) ? n : []) : a = n && p.isPlainObject(n) ? n : {}, o[t] = p.extend(d, a, r)) : void 0 !== r && (o[t] = r));
            return o
        }, p.extend({
            expando: "jQuery" + (h + Math.random()).replace(/\D/g, ""),
            isReady: !0, error: function (e) {
                throw new Error(e)
            }, noop: function () {
            }, isFunction: function (e) {
                return "function" === p.type(e)
            }, isArray: Array.isArray, isWindow: function (e) {
                return null != e && e === e.window
            }, isNumeric: function (e) {
                var t = e && e.toString();
                return !p.isArray(e) && t - parseFloat(t) + 1 >= 0
            }, isPlainObject: function (e) {
                var t;
                if ("object" !== p.type(e) || e.nodeType || p.isWindow(e)) return !1;
                if (e.constructor && !u.call(e, "constructor") && !u.call(e.constructor.prototype || {}, "isPrototypeOf")) return !1;
                for (t in e) ;
                return void 0 === t || u.call(e, t)
            }, isEmptyObject: function (e) {
                var t;
                for (t in e) return !1;
                return !0
            }, type: function (e) {
                return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? d[l.call(e)] || "object" : typeof e
            }, globalEval: function (e) {
                var t, n = eval;
                e = p.trim(e), e && (1 === e.indexOf("use strict") ? (t = r.createElement("script"), t.text = e, r.head.appendChild(t).parentNode.removeChild(t)) : n(e))
            }, camelCase: function (e) {
                return e.replace(v, "ms-").replace(g, b)
            }, nodeName: function (e, t) {
                return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
            }, each: function (e, t) {
                var n, r = 0;
                if (s(e)) for (n = e.length; n > r && t.call(e[r], r, e[r]) !== !1; r++) ; else for (r in e) if (t.call(e[r], r, e[r]) === !1) break;
                return e
            }, trim: function (e) {
                return null == e ? "" : (e + "").replace(m, "")
            }, makeArray: function (e, t) {
                var n = t || [];
                return null != e && (s(Object(e)) ? p.merge(n, "string" == typeof e ? [e] : e) : o.call(n, e)), n
            }, inArray: function (e, t, n) {
                return null == t ? -1 : c.call(t, e, n)
            }, merge: function (e, t) {
                for (var n = +t.length, r = 0, i = e.length; n > r; r++) e[i++] = t[r];
                return e.length = i, e
            }, grep: function (e, t, n) {
                for (var r, i = [], a = 0, o = e.length, s = !n; o > a; a++) r = !t(e[a], a), r !== s && i.push(e[a]);
                return i
            }, map: function (e, t, n) {
                var r, i, o = 0, c = [];
                if (s(e)) for (r = e.length; r > o; o++) i = t(e[o], o, n), null != i && c.push(i); else for (o in e) i = t(e[o], o, n), null != i && c.push(i);
                return a.apply([], c)
            }, guid: 1, proxy: function (e, t) {
                var n, r, a;
                return "string" == typeof t && (n = e[t], t = e, e = n), p.isFunction(e) ? (r = i.call(arguments, 2), a = function () {
                    return e.apply(t || this, r.concat(i.call(arguments)))
                }, a.guid = e.guid = e.guid || p.guid++, a) : void 0
            }, now: Date.now, support: f
        }), "function" == typeof Symbol && (p.fn[Symbol.iterator] = n[Symbol.iterator]), p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (e, t) {
            d["[object " + t + "]"] = t.toLowerCase()
        });
        var y = function (e) {
            function fa(e, t, r, i) {
                var a, s, d, l, u, p, g, b, C = t && t.ownerDocument, S = t ? t.nodeType : 9;
                if (r = r || [], "string" != typeof e || !e || 1 !== S && 9 !== S && 11 !== S) return r;
                if (!i && ((t ? t.ownerDocument || t : E) !== h && f(t), t = t || h, m)) {
                    if (11 !== S && (p = Q.exec(e))) if (a = p[1]) {
                        if (9 === S) {
                            if (!(d = t.getElementById(a))) return r;
                            if (d.id === a) return r.push(d), r
                        } else if (C && (d = C.getElementById(a)) && y(t, d) && d.id === a) return r.push(d), r
                    } else {
                        if (p[2]) return L.apply(r, t.getElementsByTagName(e)), r;
                        if ((a = p[3]) && n.getElementsByClassName && t.getElementsByClassName) return L.apply(r, t.getElementsByClassName(a)), r
                    }
                    if (n.qsa && !D[e + " "] && (!v || !v.test(e))) {
                        if (1 !== S) C = t, b = e; else if ("object" !== t.nodeName.toLowerCase()) {
                            for ((l = t.getAttribute("id")) ? l = l.replace(ee, "\\$&") : t.setAttribute("id", l = _), g = o(e), s = g.length, u = $.test(l) ? "#" + l : "[id='" + l + "']"; s--;) g[s] = u + " " + qa(g[s]);
                            b = g.join(","), C = J.test(e) && oa(t.parentNode) || t
                        }
                        if (b) try {
                            return L.apply(r, C.querySelectorAll(b)), r
                        } catch (T) {
                        } finally {
                            l === _ && t.removeAttribute("id")
                        }
                    }
                }
                return c(e.replace(V, "$1"), t, r, i)
            }

            function ga() {
                function b(t, n) {
                    return e.push(t + " ") > r.cacheLength && delete b[e.shift()], b[t + " "] = n
                }

                var e = [];
                return b
            }

            function ha(e) {
                return e[_] = !0, e
            }

            function ia(e) {
                var t = h.createElement("div");
                try {
                    return !!e(t)
                } catch (n) {
                    return !1
                } finally {
                    t.parentNode && t.parentNode.removeChild(t), t = null
                }
            }

            function ja(e, t) {
                for (var n = e.split("|"), i = n.length; i--;) r.attrHandle[n[i]] = t
            }

            function ka(e, t) {
                var n = t && e,
                    r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || x) - (~e.sourceIndex || x);
                if (r) return r;
                if (n) for (; n = n.nextSibling;) if (n === t) return -1;
                return e ? 1 : -1
            }

            function la(e) {
                return function (t) {
                    var n = t.nodeName.toLowerCase();
                    return "input" === n && t.type === e
                }
            }

            function ma(e) {
                return function (t) {
                    var n = t.nodeName.toLowerCase();
                    return ("input" === n || "button" === n) && t.type === e
                }
            }

            function na(e) {
                return ha(function (t) {
                    return t = +t, ha(function (n, r) {
                        for (var i, a = e([], n.length, t), o = a.length; o--;) n[i = a[o]] && (n[i] = !(r[i] = n[i]))
                    })
                })
            }

            function oa(e) {
                return e && "undefined" != typeof e.getElementsByTagName && e
            }

            function pa() {
            }

            function qa(e) {
                for (var t = 0, n = e.length, r = ""; n > t; t++) r += e[t].value;
                return r
            }

            function ra(e, t, n) {
                var r = t.dir, i = n && "parentNode" === r, a = S++;
                return t.first ? function (t, n, a) {
                    for (; t = t[r];) if (1 === t.nodeType || i) return e(t, n, a)
                } : function (t, n, o) {
                    var s, c, d, l = [C, a];
                    if (o) {
                        for (; t = t[r];) if ((1 === t.nodeType || i) && e(t, n, o)) return !0
                    } else for (; t = t[r];) if (1 === t.nodeType || i) {
                        if (d = t[_] || (t[_] = {}), c = d[t.uniqueID] || (d[t.uniqueID] = {}), (s = c[r]) && s[0] === C && s[1] === a) return l[2] = s[2];
                        if (c[r] = l, l[2] = e(t, n, o)) return !0
                    }
                }
            }

            function sa(e) {
                return e.length > 1 ? function (t, n, r) {
                    for (var i = e.length; i--;) if (!e[i](t, n, r)) return !1;
                    return !0
                } : e[0]
            }

            function ta(e, t, n) {
                for (var r = 0, i = t.length; i > r; r++) fa(e, t[r], n);
                return n
            }

            function ua(e, t, n, r, i) {
                for (var a, o = [], s = 0, c = e.length, d = null != t; c > s; s++) (a = e[s]) && (n && !n(a, r, i) || (o.push(a), d && t.push(s)));
                return o
            }

            function va(e, t, n, r, i, a) {
                return r && !r[_] && (r = va(r)), i && !i[_] && (i = va(i, a)), ha(function (a, o, s, c) {
                    var d, l, u, f = [], h = [], p = o.length, m = a || ta(t || "*", s.nodeType ? [s] : s, []),
                        v = !e || !a && t ? m : ua(m, f, e, s, c), g = n ? i || (a ? e : p || r) ? [] : o : v;
                    if (n && n(v, g, s, c), r) for (d = ua(g, h), r(d, [], s, c), l = d.length; l--;) (u = d[l]) && (g[h[l]] = !(v[h[l]] = u));
                    if (a) {
                        if (i || e) {
                            if (i) {
                                for (d = [], l = g.length; l--;) (u = g[l]) && d.push(v[l] = u);
                                i(null, g = [], d, c)
                            }
                            for (l = g.length; l--;) (u = g[l]) && (d = i ? N(a, u) : f[l]) > -1 && (a[d] = !(o[d] = u))
                        }
                    } else g = ua(g === o ? g.splice(p, g.length) : g), i ? i(null, o, g, c) : L.apply(o, g)
                })
            }

            function wa(e) {
                for (var t, n, i, a = e.length, o = r.relative[e[0].type], s = o || r.relative[" "], c = o ? 1 : 0, l = ra(function (e) {
                    return e === t
                }, s, !0), u = ra(function (e) {
                    return N(t, e) > -1
                }, s, !0), f = [function (e, n, r) {
                    var i = !o && (r || n !== d) || ((t = n).nodeType ? l(e, n, r) : u(e, n, r));
                    return t = null, i
                }]; a > c; c++) if (n = r.relative[e[c].type]) f = [ra(sa(f), n)]; else {
                    if (n = r.filter[e[c].type].apply(null, e[c].matches), n[_]) {
                        for (i = ++c; a > i && !r.relative[e[i].type]; i++) ;
                        return va(c > 1 && sa(f), c > 1 && qa(e.slice(0, c - 1).concat({value: " " === e[c - 2].type ? "*" : ""})).replace(V, "$1"), n, i > c && wa(e.slice(c, i)), a > i && wa(e = e.slice(i)), a > i && qa(e))
                    }
                    f.push(n)
                }
                return sa(f)
            }

            function xa(e, t) {
                var n = t.length > 0, i = e.length > 0, a = function (a, o, s, c, l) {
                    var u, p, v, g = 0, b = "0", y = a && [], _ = [], E = d, S = a || i && r.find.TAG("*", l),
                        T = C += null == E ? 1 : Math.random() || .1, w = S.length;
                    for (l && (d = o === h || o || l); b !== w && null != (u = S[b]); b++) {
                        if (i && u) {
                            for (p = 0, o || u.ownerDocument === h || (f(u), s = !m); v = e[p++];) if (v(u, o || h, s)) {
                                c.push(u);
                                break
                            }
                            l && (C = T)
                        }
                        n && ((u = !v && u) && g--, a && y.push(u))
                    }
                    if (g += b, n && b !== g) {
                        for (p = 0; v = t[p++];) v(y, _, o, s);
                        if (a) {
                            if (g > 0) for (; b--;) y[b] || _[b] || (_[b] = k.call(c));
                            _ = ua(_)
                        }
                        L.apply(c, _), l && !a && _.length > 0 && g + t.length > 1 && fa.uniqueSort(c)
                    }
                    return l && (C = T, d = E), y
                };
                return n ? ha(a) : a
            }

            var t, n, r, i, a, o, s, c, d, l, u, f, h, p, m, v, g, b, y, _ = "sizzle" + 1 * new Date, E = e.document,
                C = 0, S = 0, T = ga(), w = ga(), D = ga(), A = function (e, t) {
                    return e === t && (u = !0), 0
                }, x = 1 << 31, I = {}.hasOwnProperty, O = [], k = O.pop, R = O.push, L = O.push, P = O.slice,
                N = function (e, t) {
                    for (var n = 0, r = e.length; r > n; n++) if (e[n] === t) return n;
                    return -1
                },
                M = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                B = "[\\x20\\t\\r\\n\\f]", U = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
                F = "\\[" + B + "*(" + U + ")(?:" + B + "*([*^$|!~]?=)" + B + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + U + "))|)" + B + "*\\]",
                H = ":(" + U + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + F + ")*)|.*)\\)|)",
                q = new RegExp(B + "+", "g"), V = new RegExp("^" + B + "+|((?:^|[^\\\\])(?:\\\\.)*)" + B + "+$", "g"),
                G = new RegExp("^" + B + "*," + B + "*"), j = new RegExp("^" + B + "*([>+~]|" + B + ")" + B + "*"),
                z = new RegExp("=" + B + "*([^\\]'\"]*?)" + B + "*\\]", "g"), W = new RegExp(H),
                $ = new RegExp("^" + U + "$"), Y = {
                    ID: new RegExp("^#(" + U + ")"),
                    CLASS: new RegExp("^\\.(" + U + ")"),
                    TAG: new RegExp("^(" + U + "|[*])"),
                    ATTR: new RegExp("^" + F),
                    PSEUDO: new RegExp("^" + H),
                    CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + B + "*(even|odd|(([+-]|)(\\d*)n|)" + B + "*(?:([+-]|)" + B + "*(\\d+)|))" + B + "*\\)|)", "i"),
                    bool: new RegExp("^(?:" + M + ")$", "i"),
                    needsContext: new RegExp("^" + B + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + B + "*((?:-\\d)?\\d*)" + B + "*\\)|)(?=[^-]|$)", "i")
                }, X = /^(?:input|select|textarea|button)$/i, Z = /^h\d$/i, K = /^[^{]+\{\s*\[native \w/,
                Q = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, J = /[+~]/, ee = /'|\\/g,
                te = new RegExp("\\\\([\\da-f]{1,6}" + B + "?|(" + B + ")|.)", "ig"), ne = function (e, t, n) {
                    var r = "0x" + t - 65536;
                    return r !== r || n ? t : 0 > r ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320)
                }, re = function () {
                    f()
                };
            try {
                L.apply(O = P.call(E.childNodes), E.childNodes), O[E.childNodes.length].nodeType
            } catch (ie) {
                L = {
                    apply: O.length ? function (e, t) {
                        R.apply(e, P.call(t))
                    } : function (e, t) {
                        for (var n = e.length, r = 0; e[n++] = t[r++];) ;
                        e.length = n - 1
                    }
                }
            }
            n = fa.support = {}, a = fa.isXML = function (e) {
                var t = e && (e.ownerDocument || e).documentElement;
                return t ? "HTML" !== t.nodeName : !1
            }, f = fa.setDocument = function (e) {
                var t, i, o = e ? e.ownerDocument || e : E;
                return o !== h && 9 === o.nodeType && o.documentElement ? (h = o, p = h.documentElement, m = !a(h), (i = h.defaultView) && i.top !== i && (i.addEventListener ? i.addEventListener("unload", re, !1) : i.attachEvent && i.attachEvent("onunload", re)), n.attributes = ia(function (e) {
                    return e.className = "i", !e.getAttribute("className")
                }), n.getElementsByTagName = ia(function (e) {
                    return e.appendChild(h.createComment("")), !e.getElementsByTagName("*").length
                }), n.getElementsByClassName = K.test(h.getElementsByClassName), n.getById = ia(function (e) {
                    return p.appendChild(e).id = _, !h.getElementsByName || !h.getElementsByName(_).length
                }), n.getById ? (r.find.ID = function (e, t) {
                    if ("undefined" != typeof t.getElementById && m) {
                        var n = t.getElementById(e);
                        return n ? [n] : []
                    }
                }, r.filter.ID = function (e) {
                    var t = e.replace(te, ne);
                    return function (e) {
                        return e.getAttribute("id") === t
                    }
                }) : (delete r.find.ID, r.filter.ID = function (e) {
                    var t = e.replace(te, ne);
                    return function (e) {
                        var n = "undefined" != typeof e.getAttributeNode && e.getAttributeNode("id");
                        return n && n.value === t
                    }
                }), r.find.TAG = n.getElementsByTagName ? function (e, t) {
                    return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName(e) : n.qsa ? t.querySelectorAll(e) : void 0
                } : function (e, t) {
                    var n, r = [], i = 0, a = t.getElementsByTagName(e);
                    if ("*" === e) {
                        for (; n = a[i++];) 1 === n.nodeType && r.push(n);
                        return r
                    }
                    return a
                }, r.find.CLASS = n.getElementsByClassName && function (e, t) {
                    return "undefined" != typeof t.getElementsByClassName && m ? t.getElementsByClassName(e) : void 0
                }, g = [], v = [], (n.qsa = K.test(h.querySelectorAll)) && (ia(function (e) {
                    p.appendChild(e).innerHTML = "<a id='" + _ + "'></a><select id='" + _ + "-\r\\' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && v.push("[*^$]=" + B + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || v.push("\\[" + B + "*(?:value|" + M + ")"), e.querySelectorAll("[id~=" + _ + "-]").length || v.push("~="), e.querySelectorAll(":checked").length || v.push(":checked"), e.querySelectorAll("a#" + _ + "+*").length || v.push(".#.+[+~]")
                }), ia(function (e) {
                    var t = h.createElement("input");
                    t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && v.push("name" + B + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || v.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), v.push(",.*:")
                })), (n.matchesSelector = K.test(b = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.oMatchesSelector || p.msMatchesSelector)) && ia(function (e) {
                    n.disconnectedMatch = b.call(e, "div"), b.call(e, "[s!='']:x"), g.push("!=", H)
                }), v = v.length && new RegExp(v.join("|")), g = g.length && new RegExp(g.join("|")), t = K.test(p.compareDocumentPosition), y = t || K.test(p.contains) ? function (e, t) {
                    var n = 9 === e.nodeType ? e.documentElement : e, r = t && t.parentNode;
                    return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))
                } : function (e, t) {
                    if (t) for (; t = t.parentNode;) if (t === e) return !0;
                    return !1
                }, A = t ? function (e, t) {
                    if (e === t) return u = !0, 0;
                    var r = !e.compareDocumentPosition - !t.compareDocumentPosition;
                    return r ? r : (r = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1, 1 & r || !n.sortDetached && t.compareDocumentPosition(e) === r ? e === h || e.ownerDocument === E && y(E, e) ? -1 : t === h || t.ownerDocument === E && y(E, t) ? 1 : l ? N(l, e) - N(l, t) : 0 : 4 & r ? -1 : 1)
                } : function (e, t) {
                    if (e === t) return u = !0, 0;
                    var n, r = 0, i = e.parentNode, a = t.parentNode, o = [e], s = [t];
                    if (!i || !a) return e === h ? -1 : t === h ? 1 : i ? -1 : a ? 1 : l ? N(l, e) - N(l, t) : 0;
                    if (i === a) return ka(e, t);
                    for (n = e; n = n.parentNode;) o.unshift(n);
                    for (n = t; n = n.parentNode;) s.unshift(n);
                    for (; o[r] === s[r];) r++;
                    return r ? ka(o[r], s[r]) : o[r] === E ? -1 : s[r] === E ? 1 : 0
                }, h) : h
            }, fa.matches = function (e, t) {
                return fa(e, null, null, t)
            }, fa.matchesSelector = function (e, t) {
                if ((e.ownerDocument || e) !== h && f(e), t = t.replace(z, "='$1']"), n.matchesSelector && m && !D[t + " "] && (!g || !g.test(t)) && (!v || !v.test(t))) try {
                    var r = b.call(e, t);
                    if (r || n.disconnectedMatch || e.document && 11 !== e.document.nodeType) return r
                } catch (i) {
                }
                return fa(t, h, null, [e]).length > 0
            }, fa.contains = function (e, t) {
                return (e.ownerDocument || e) !== h && f(e), y(e, t)
            }, fa.attr = function (e, t) {
                (e.ownerDocument || e) !== h && f(e);
                var i = r.attrHandle[t.toLowerCase()],
                    a = i && I.call(r.attrHandle, t.toLowerCase()) ? i(e, t, !m) : void 0;
                return void 0 !== a ? a : n.attributes || !m ? e.getAttribute(t) : (a = e.getAttributeNode(t)) && a.specified ? a.value : null
            }, fa.error = function (e) {
                throw new Error("Syntax error, unrecognized expression: " + e)
            }, fa.uniqueSort = function (e) {
                var t, r = [], i = 0, a = 0;
                if (u = !n.detectDuplicates, l = !n.sortStable && e.slice(0), e.sort(A), u) {
                    for (; t = e[a++];) t === e[a] && (i = r.push(a));
                    for (; i--;) e.splice(r[i], 1)
                }
                return l = null, e
            }, i = fa.getText = function (e) {
                var t, n = "", r = 0, a = e.nodeType;
                if (a) {
                    if (1 === a || 9 === a || 11 === a) {
                        if ("string" == typeof e.textContent) return e.textContent;
                        for (e = e.firstChild; e; e = e.nextSibling) n += i(e)
                    } else if (3 === a || 4 === a) return e.nodeValue
                } else for (; t = e[r++];) n += i(t);
                return n
            }, r = fa.selectors = {
                cacheLength: 50,
                createPseudo: ha,
                match: Y,
                attrHandle: {},
                find: {},
                relative: {
                    ">": {dir: "parentNode", first: !0},
                    " ": {dir: "parentNode"},
                    "+": {dir: "previousSibling", first: !0},
                    "~": {dir: "previousSibling"}
                },
                preFilter: {
                    ATTR: function (e) {
                        return e[1] = e[1].replace(te, ne), e[3] = (e[3] || e[4] || e[5] || "").replace(te, ne), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                    }, CHILD: function (e) {
                        return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || fa.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && fa.error(e[0]), e
                    }, PSEUDO: function (e) {
                        var t, n = !e[6] && e[2];
                        return Y.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && W.test(n) && (t = o(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function (e) {
                        var t = e.replace(te, ne).toLowerCase();
                        return "*" === e ? function () {
                            return !0
                        } : function (e) {
                            return e.nodeName && e.nodeName.toLowerCase() === t
                        }
                    }, CLASS: function (e) {
                        var t = T[e + " "];
                        return t || (t = new RegExp("(^|" + B + ")" + e + "(" + B + "|$)")) && T(e, function (e) {
                            return t.test("string" == typeof e.className && e.className || "undefined" != typeof e.getAttribute && e.getAttribute("class") || "")
                        })
                    }, ATTR: function (e, t, n) {
                        return function (r) {
                            var i = fa.attr(r, e);
                            return null == i ? "!=" === t : t ? (i += "", "=" === t ? i === n : "!=" === t ? i !== n : "^=" === t ? n && 0 === i.indexOf(n) : "*=" === t ? n && i.indexOf(n) > -1 : "$=" === t ? n && i.slice(-n.length) === n : "~=" === t ? (" " + i.replace(q, " ") + " ").indexOf(n) > -1 : "|=" === t ? i === n || i.slice(0, n.length + 1) === n + "-" : !1) : !0
                        }
                    }, CHILD: function (e, t, n, r, i) {
                        var a = "nth" !== e.slice(0, 3), o = "last" !== e.slice(-4), s = "of-type" === t;
                        return 1 === r && 0 === i ? function (e) {
                            return !!e.parentNode
                        } : function (t, n, c) {
                            var d, l, u, f, h, p, m = a !== o ? "nextSibling" : "previousSibling", v = t.parentNode,
                                g = s && t.nodeName.toLowerCase(), b = !c && !s, y = !1;
                            if (v) {
                                if (a) {
                                    for (; m;) {
                                        for (f = t; f = f[m];) if (s ? f.nodeName.toLowerCase() === g : 1 === f.nodeType) return !1;
                                        p = m = "only" === e && !p && "nextSibling"
                                    }
                                    return !0
                                }
                                if (p = [o ? v.firstChild : v.lastChild], o && b) {
                                    for (f = v, u = f[_] || (f[_] = {}), l = u[f.uniqueID] || (u[f.uniqueID] = {}), d = l[e] || [], h = d[0] === C && d[1], y = h && d[2], f = h && v.childNodes[h]; f = ++h && f && f[m] || (y = h = 0) || p.pop();) if (1 === f.nodeType && ++y && f === t) {
                                        l[e] = [C, h, y];
                                        break
                                    }
                                } else if (b && (f = t, u = f[_] || (f[_] = {}), l = u[f.uniqueID] || (u[f.uniqueID] = {}), d = l[e] || [], h = d[0] === C && d[1], y = h), y === !1) for (; (f = ++h && f && f[m] || (y = h = 0) || p.pop()) && ((s ? f.nodeName.toLowerCase() !== g : 1 !== f.nodeType) || !++y || (b && (u = f[_] || (f[_] = {}), l = u[f.uniqueID] || (u[f.uniqueID] = {}), l[e] = [C, y]), f !== t));) ;
                                return y -= i, y === r || y % r === 0 && y / r >= 0
                            }
                        }
                    }, PSEUDO: function (e, t) {
                        var n,
                            i = r.pseudos[e] || r.setFilters[e.toLowerCase()] || fa.error("unsupported pseudo: " + e);
                        return i[_] ? i(t) : i.length > 1 ? (n = [e, e, "", t], r.setFilters.hasOwnProperty(e.toLowerCase()) ? ha(function (e, n) {
                            for (var r, a = i(e, t), o = a.length; o--;) r = N(e, a[o]), e[r] = !(n[r] = a[o])
                        }) : function (e) {
                            return i(e, 0, n)
                        }) : i
                    }
                },
                pseudos: {
                    not: ha(function (e) {
                        var t = [], n = [], r = s(e.replace(V, "$1"));
                        return r[_] ? ha(function (e, t, n, i) {
                            for (var a, o = r(e, null, i, []), s = e.length; s--;) (a = o[s]) && (e[s] = !(t[s] = a))
                        }) : function (e, i, a) {
                            return t[0] = e, r(t, null, a, n), t[0] = null, !n.pop()
                        }
                    }), has: ha(function (e) {
                        return function (t) {
                            return fa(e, t).length > 0
                        }
                    }), contains: ha(function (e) {
                        return e = e.replace(te, ne), function (t) {
                            return (t.textContent || t.innerText || i(t)).indexOf(e) > -1
                        }
                    }), lang: ha(function (e) {
                        return $.test(e || "") || fa.error("unsupported lang: " + e), e = e.replace(te, ne).toLowerCase(), function (t) {
                            var n;
                            do if (n = m ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return n = n.toLowerCase(), n === e || 0 === n.indexOf(e + "-"); while ((t = t.parentNode) && 1 === t.nodeType);
                            return !1
                        }
                    }), target: function (t) {
                        var n = e.location && e.location.hash;
                        return n && n.slice(1) === t.id
                    }, root: function (e) {
                        return e === p
                    }, focus: function (e) {
                        return e === h.activeElement && (!h.hasFocus || h.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                    }, enabled: function (e) {
                        return e.disabled === !1
                    }, disabled: function (e) {
                        return e.disabled === !0
                    }, checked: function (e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && !!e.checked || "option" === t && !!e.selected
                    }, selected: function (e) {
                        return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                    }, empty: function (e) {
                        for (e = e.firstChild; e; e = e.nextSibling) if (e.nodeType < 6) return !1;
                        return !0
                    }, parent: function (e) {
                        return !r.pseudos.empty(e)
                    }, header: function (e) {
                        return Z.test(e.nodeName)
                    }, input: function (e) {
                        return X.test(e.nodeName)
                    }, button: function (e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && "button" === e.type || "button" === t
                    }, text: function (e) {
                        var t;
                        return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                    }, first: na(function () {
                        return [0]
                    }), last: na(function (e, t) {
                        return [t - 1]
                    }), eq: na(function (e, t, n) {
                        return [0 > n ? n + t : n]
                    }), even: na(function (e, t) {
                        for (var n = 0; t > n; n += 2) e.push(n);
                        return e
                    }), odd: na(function (e, t) {
                        for (var n = 1; t > n; n += 2) e.push(n);
                        return e
                    }), lt: na(function (e, t, n) {
                        for (var r = 0 > n ? n + t : n; --r >= 0;) e.push(r);
                        return e
                    }), gt: na(function (e, t, n) {
                        for (var r = 0 > n ? n + t : n; ++r < t;) e.push(r);
                        return e
                    })
                }
            }, r.pseudos.nth = r.pseudos.eq;
            for (t in{radio: !0, checkbox: !0, file: !0, password: !0, image: !0}) r.pseudos[t] = la(t);
            for (t in{submit: !0, reset: !0}) r.pseudos[t] = ma(t);
            return pa.prototype = r.filters = r.pseudos, r.setFilters = new pa, o = fa.tokenize = function (e, t) {
                var n, i, a, o, s, c, d, l = w[e + " "];
                if (l) return t ? 0 : l.slice(0);
                for (s = e, c = [], d = r.preFilter; s;) {
                    n && !(i = G.exec(s)) || (i && (s = s.slice(i[0].length) || s), c.push(a = [])), n = !1, (i = j.exec(s)) && (n = i.shift(), a.push({
                        value: n,
                        type: i[0].replace(V, " ")
                    }), s = s.slice(n.length));
                    for (o in r.filter) !(i = Y[o].exec(s)) || d[o] && !(i = d[o](i)) || (n = i.shift(), a.push({
                        value: n,
                        type: o,
                        matches: i
                    }), s = s.slice(n.length));
                    if (!n) break
                }
                return t ? s.length : s ? fa.error(e) : w(e, c).slice(0)
            }, s = fa.compile = function (e, t) {
                var n, r = [], i = [], a = D[e + " "];
                if (!a) {
                    for (t || (t = o(e)), n = t.length; n--;) a = wa(t[n]), a[_] ? r.push(a) : i.push(a);
                    a = D(e, xa(i, r)), a.selector = e
                }
                return a
            }, c = fa.select = function (e, t, i, a) {
                var c, d, l, u, f, h = "function" == typeof e && e, p = !a && o(e = h.selector || e);
                if (i = i || [], 1 === p.length) {
                    if (d = p[0] = p[0].slice(0), d.length > 2 && "ID" === (l = d[0]).type && n.getById && 9 === t.nodeType && m && r.relative[d[1].type]) {
                        if (t = (r.find.ID(l.matches[0].replace(te, ne), t) || [])[0], !t) return i;
                        h && (t = t.parentNode), e = e.slice(d.shift().value.length)
                    }
                    for (c = Y.needsContext.test(e) ? 0 : d.length; c-- && (l = d[c], !r.relative[u = l.type]);) if ((f = r.find[u]) && (a = f(l.matches[0].replace(te, ne), J.test(d[0].type) && oa(t.parentNode) || t))) {
                        if (d.splice(c, 1), e = a.length && qa(d), !e) return L.apply(i, a), i;
                        break
                    }
                }
                return (h || s(e, p))(a, t, !m, i, !t || J.test(e) && oa(t.parentNode) || t), i
            }, n.sortStable = _.split("").sort(A).join("") === _, n.detectDuplicates = !!u, f(), n.sortDetached = ia(function (e) {
                return 1 & e.compareDocumentPosition(h.createElement("div"))
            }), ia(function (e) {
                return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href")
            }) || ja("type|href|height|width", function (e, t, n) {
                return n ? void 0 : e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
            }), n.attributes && ia(function (e) {
                return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value")
            }) || ja("value", function (e, t, n) {
                return n || "input" !== e.nodeName.toLowerCase() ? void 0 : e.defaultValue
            }), ia(function (e) {
                return null == e.getAttribute("disabled")
            }) || ja(M, function (e, t, n) {
                var r;
                return n ? void 0 : e[t] === !0 ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
            }), fa
        }(e);
        p.find = y, p.expr = y.selectors, p.expr[":"] = p.expr.pseudos, p.uniqueSort = p.unique = y.uniqueSort, p.text = y.getText, p.isXMLDoc = y.isXML, p.contains = y.contains;
        var E = function (e, t, n) {
            for (var r = [], i = void 0 !== n; (e = e[t]) && 9 !== e.nodeType;) if (1 === e.nodeType) {
                if (i && p(e).is(n)) break;
                r.push(e)
            }
            return r
        }, C = function (e, t) {
            for (var n = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
            return n
        }, S = p.expr.match.needsContext, T = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/, w = /^.[^:#\[\.,]*$/;
        p.filter = function (e, t, n) {
            var r = t[0];
            return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === r.nodeType ? p.find.matchesSelector(r, e) ? [r] : [] : p.find.matches(e, p.grep(t, function (e) {
                return 1 === e.nodeType
            }))
        }, p.fn.extend({
            find: function (e) {
                var t, n = this.length, r = [], i = this;
                if ("string" != typeof e) return this.pushStack(p(e).filter(function () {
                    for (t = 0; n > t; t++) if (p.contains(i[t], this)) return !0
                }));
                for (t = 0; n > t; t++) p.find(e, i[t], r);
                return r = this.pushStack(n > 1 ? p.unique(r) : r), r.selector = this.selector ? this.selector + " " + e : e, r
            }, filter: function (e) {
                return this.pushStack(z(this, e || [], !1))
            }, not: function (e) {
                return this.pushStack(z(this, e || [], !0))
            }, is: function (e) {
                return !!z(this, "string" == typeof e && S.test(e) ? p(e) : e || [], !1).length
            }
        });
        var D, A = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, x = p.fn.init = function (e, t, n) {
            var i, a;
            if (!e) return this;
            if (n = n || D, "string" == typeof e) {
                if (i = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : A.exec(e), !i || !i[1] && t) return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e);
                if (i[1]) {
                    if (t = t instanceof p ? t[0] : t, p.merge(this, p.parseHTML(i[1], t && t.nodeType ? t.ownerDocument || t : r, !0)), T.test(i[1]) && p.isPlainObject(t)) for (i in t) p.isFunction(this[i]) ? this[i](t[i]) : this.attr(i, t[i]);
                    return this
                }
                return a = r.getElementById(i[2]), a && a.parentNode && (this.length = 1, this[0] = a), this.context = r, this.selector = e, this
            }
            return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : p.isFunction(e) ? void 0 !== n.ready ? n.ready(e) : e(p) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), p.makeArray(e, this))
        };
        x.prototype = p.fn, D = p(r);
        var I = /^(?:parents|prev(?:Until|All))/, O = {children: !0, contents: !0, next: !0, prev: !0};
        p.fn.extend({
            has: function (e) {
                var t = p(e, this), n = t.length;
                return this.filter(function () {
                    for (var e = 0; n > e; e++) if (p.contains(this, t[e])) return !0
                })
            }, closest: function (e, t) {
                for (var n, r = 0, i = this.length, a = [], o = S.test(e) || "string" != typeof e ? p(e, t || this.context) : 0; i > r; r++) for (n = this[r]; n && n !== t; n = n.parentNode) if (n.nodeType < 11 && (o ? o.index(n) > -1 : 1 === n.nodeType && p.find.matchesSelector(n, e))) {
                    a.push(n);
                    break
                }
                return this.pushStack(a.length > 1 ? p.uniqueSort(a) : a)
            }, index: function (e) {
                return e ? "string" == typeof e ? c.call(p(e), this[0]) : c.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            }, add: function (e, t) {
                return this.pushStack(p.uniqueSort(p.merge(this.get(), p(e, t))))
            }, addBack: function (e) {
                return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
            }
        }), p.each({
            parent: function (e) {
                var t = e.parentNode;
                return t && 11 !== t.nodeType ? t : null
            }, parents: function (e) {
                return E(e, "parentNode")
            }, parentsUntil: function (e, t, n) {
                return E(e, "parentNode", n)
            }, next: function (e) {
                return F(e, "nextSibling")
            }, prev: function (e) {
                return F(e, "previousSibling")
            }, nextAll: function (e) {
                return E(e, "nextSibling")
            }, prevAll: function (e) {
                return E(e, "previousSibling")
            }, nextUntil: function (e, t, n) {
                return E(e, "nextSibling", n)
            }, prevUntil: function (e, t, n) {
                return E(e, "previousSibling", n)
            }, siblings: function (e) {
                return C((e.parentNode || {}).firstChild, e)
            }, children: function (e) {
                return C(e.firstChild)
            }, contents: function (e) {
                return e.contentDocument || p.merge([], e.childNodes)
            }
        }, function (e, t) {
            p.fn[e] = function (n, r) {
                var i = p.map(this, t, n);
                return "Until" !== e.slice(-5) && (r = n), r && "string" == typeof r && (i = p.filter(r, i)), this.length > 1 && (O[e] || p.uniqueSort(i), I.test(e) && i.reverse()), this.pushStack(i)
            }
        });
        var k = /\S+/g;
        p.Callbacks = function (e) {
            e = "string" == typeof e ? H(e) : p.extend({}, e);
            var t, n, r, i, a = [], o = [], s = -1, c = function () {
                for (i = e.once, r = t = !0; o.length; s = -1) for (n = o.shift(); ++s < a.length;) a[s].apply(n[0], n[1]) === !1 && e.stopOnFalse && (s = a.length, n = !1);
                e.memory || (n = !1), t = !1, i && (a = n ? [] : "")
            }, d = {
                add: function () {
                    return a && (n && !t && (s = a.length - 1, o.push(n)), function d(t) {
                        p.each(t, function (t, n) {
                            p.isFunction(n) ? e.unique && d.has(n) || a.push(n) : n && n.length && "string" !== p.type(n) && d(n)
                        })
                    }(arguments), n && !t && c()), this
                }, remove: function () {
                    return p.each(arguments, function (e, t) {
                        for (var n; (n = p.inArray(t, a, n)) > -1;) a.splice(n, 1), s >= n && s--
                    }), this
                }, has: function (e) {
                    return e ? p.inArray(e, a) > -1 : a.length > 0
                }, empty: function () {
                    return a && (a = []), this
                }, disable: function () {
                    return i = o = [], a = n = "", this
                }, disabled: function () {
                    return !a
                }, lock: function () {
                    return i = o = [], n || (a = n = ""), this
                }, locked: function () {
                    return !!i
                }, fireWith: function (e, n) {
                    return i || (n = n || [], n = [e, n.slice ? n.slice() : n], o.push(n), t || c()), this
                }, fire: function () {
                    return d.fireWith(this, arguments), this
                }, fired: function () {
                    return !!r
                }
            };
            return d
        }, p.extend({
            Deferred: function (e) {
                var t = [["resolve", "done", p.Callbacks("once memory"), "resolved"], ["reject", "fail", p.Callbacks("once memory"), "rejected"], ["notify", "progress", p.Callbacks("memory")]],
                    n = "pending", r = {
                        state: function () {
                            return n
                        }, always: function () {
                            return i.done(arguments).fail(arguments), this
                        }, then: function () {
                            var e = arguments;
                            return p.Deferred(function (n) {
                                p.each(t, function (t, a) {
                                    var o = p.isFunction(e[t]) && e[t];
                                    i[a[1]](function () {
                                        var e = o && o.apply(this, arguments);
                                        e && p.isFunction(e.promise) ? e.promise().progress(n.notify).done(n.resolve).fail(n.reject) : n[a[0] + "With"](this === r ? n.promise() : this, o ? [e] : arguments)
                                    })
                                }), e = null
                            }).promise()
                        }, promise: function (e) {
                            return null != e ? p.extend(e, r) : r
                        }
                    }, i = {};
                return r.pipe = r.then, p.each(t, function (e, a) {
                    var o = a[2], s = a[3];
                    r[a[1]] = o.add, s && o.add(function () {
                        n = s
                    }, t[1 ^ e][2].disable, t[2][2].lock), i[a[0]] = function () {
                        return i[a[0] + "With"](this === i ? r : this, arguments), this
                    }, i[a[0] + "With"] = o.fireWith
                }), r.promise(i), e && e.call(i, i), i
            }, when: function (e) {
                var t, n, r, a = 0, o = i.call(arguments), s = o.length,
                    c = 1 !== s || e && p.isFunction(e.promise) ? s : 0, d = 1 === c ? e : p.Deferred(),
                    l = function (e, n, r) {
                        return function (a) {
                            n[e] = this, r[e] = arguments.length > 1 ? i.call(arguments) : a, r === t ? d.notifyWith(n, r) : --c || d.resolveWith(n, r)
                        }
                    };
                if (s > 1) for (t = new Array(s), n = new Array(s), r = new Array(s); s > a; a++) o[a] && p.isFunction(o[a].promise) ? o[a].promise().progress(l(a, n, t)).done(l(a, r, o)).fail(d.reject) : --c;
                return c || d.resolveWith(r, o), d.promise()
            }
        });
        var L;
        p.fn.ready = function (e) {
            return p.ready.promise().done(e), this
        }, p.extend({
            isReady: !1, readyWait: 1, holdReady: function (e) {
                e ? p.readyWait++ : p.ready(!0)
            }, ready: function (e) {
                (e === !0 ? --p.readyWait : p.isReady) || (p.isReady = !0, e !== !0 && --p.readyWait > 0 || (L.resolveWith(r, [p]), p.fn.triggerHandler && (p(r).triggerHandler("ready"), p(r).off("ready"))))
            }
        }), p.ready.promise = function (t) {
            return L || (L = p.Deferred(), "complete" === r.readyState || "loading" !== r.readyState && !r.documentElement.doScroll ? e.setTimeout(p.ready) : (r.addEventListener("DOMContentLoaded", J), e.addEventListener("load", J))), L.promise(t)
        }, p.ready.promise();
        var P = function (e, t, n, r, i, a, o) {
            var s = 0, c = e.length, d = null == n;
            if ("object" === p.type(n)) {
                i = !0;
                for (s in n) P(e, t, s, n[s], !0, a, o)
            } else if (void 0 !== r && (i = !0, p.isFunction(r) || (o = !0), d && (o ? (t.call(e, r), t = null) : (d = t, t = function (e, t, n) {
                    return d.call(p(e), n)
                })), t)) for (; c > s; s++) t(e[s], n, o ? r : r.call(e[s], s, t(e[s], n)));
            return i ? e : d ? t.call(e) : c ? t(e[0], n) : a
        }, N = function (e) {
            return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
        };
        M.uid = 1, M.prototype = {
            register: function (e, t) {
                var n = t || {};
                return e.nodeType ? e[this.expando] = n : Object.defineProperty(e, this.expando, {
                    value: n,
                    writable: !0,
                    configurable: !0
                }), e[this.expando]
            }, cache: function (e) {
                if (!N(e)) return {};
                var t = e[this.expando];
                return t || (t = {}, N(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, {
                    value: t,
                    configurable: !0
                }))), t
            }, set: function (e, t, n) {
                var r, i = this.cache(e);
                if ("string" == typeof t) i[t] = n; else for (r in t) i[r] = t[r];
                return i
            }, get: function (e, t) {
                return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][t]
            }, access: function (e, t, n) {
                var r;
                return void 0 === t || t && "string" == typeof t && void 0 === n ? (r = this.get(e, t), void 0 !== r ? r : this.get(e, p.camelCase(t))) : (this.set(e, t, n), void 0 !== n ? n : t)
            }, remove: function (e, t) {
                var n, r, i, a = e[this.expando];
                if (void 0 !== a) {
                    if (void 0 === t) this.register(e); else {
                        p.isArray(t) ? r = t.concat(t.map(p.camelCase)) : (i = p.camelCase(t), t in a ? r = [t, i] : (r = i, r = r in a ? [r] : r.match(k) || [])), n = r.length;
                        for (; n--;) delete a[r[n]]
                    }
                    (void 0 === t || p.isEmptyObject(a)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando])
                }
            }, hasData: function (e) {
                var t = e[this.expando];
                return void 0 !== t && !p.isEmptyObject(t)
            }
        };
        var B = new M, U = new M, q = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, V = /[A-Z]/g;
        p.extend({
            hasData: function (e) {
                return U.hasData(e) || B.hasData(e)
            }, data: function (e, t, n) {
                return U.access(e, t, n)
            }, removeData: function (e, t) {
                U.remove(e, t)
            }, _data: function (e, t, n) {
                return B.access(e, t, n)
            }, _removeData: function (e, t) {
                B.remove(e, t)
            }
        }), p.fn.extend({
            data: function (e, t) {
                var n, r, i, a = this[0], o = a && a.attributes;
                if (void 0 === e) {
                    if (this.length && (i = U.get(a), 1 === a.nodeType && !B.get(a, "hasDataAttrs"))) {
                        for (n = o.length; n--;) o[n] && (r = o[n].name, 0 === r.indexOf("data-") && (r = p.camelCase(r.slice(5)), R(a, r, i[r])));
                        B.set(a, "hasDataAttrs", !0)
                    }
                    return i
                }
                return "object" == typeof e ? this.each(function () {
                    U.set(this, e)
                }) : P(this, function (t) {
                    var n, r;
                    if (a && void 0 === t) {
                        if (n = U.get(a, e) || U.get(a, e.replace(V, "-$&").toLowerCase()), void 0 !== n) return n;
                        if (r = p.camelCase(e), n = U.get(a, r), void 0 !== n) return n;
                        if (n = R(a, r, void 0), void 0 !== n) return n
                    } else r = p.camelCase(e), this.each(function () {
                        var n = U.get(this, r);
                        U.set(this, r, t), e.indexOf("-") > -1 && void 0 !== n && U.set(this, e, t)
                    })
                }, null, t, arguments.length > 1, null, !0)
            }, removeData: function (e) {
                return this.each(function () {
                    U.remove(this, e)
                })
            }
        }), p.extend({
            queue: function (e, t, n) {
                var r;
                return e ? (t = (t || "fx") + "queue", r = B.get(e, t), n && (!r || p.isArray(n) ? r = B.access(e, t, p.makeArray(n)) : r.push(n)), r || []) : void 0
            }, dequeue: function (e, t) {
                t = t || "fx";
                var n = p.queue(e, t), r = n.length, i = n.shift(), a = p._queueHooks(e, t), o = function () {
                    p.dequeue(e, t)
                };
                "inprogress" === i && (i = n.shift(), r--), i && ("fx" === t && n.unshift("inprogress"), delete a.stop, i.call(e, o, a)), !r && a && a.empty.fire()
            }, _queueHooks: function (e, t) {
                var n = t + "queueHooks";
                return B.get(e, n) || B.access(e, n, {
                    empty: p.Callbacks("once memory").add(function () {
                        B.remove(e, [t + "queue", n])
                    })
                })
            }
        }), p.fn.extend({
            queue: function (e, t) {
                var n = 2;
                return "string" != typeof e && (t = e, e = "fx", n--), arguments.length < n ? p.queue(this[0], e) : void 0 === t ? this : this.each(function () {
                    var n = p.queue(this, e, t);
                    p._queueHooks(this, e), "fx" === e && "inprogress" !== n[0] && p.dequeue(this, e)
                })
            }, dequeue: function (e) {
                return this.each(function () {
                    p.dequeue(this, e)
                })
            }, clearQueue: function (e) {
                return this.queue(e || "fx", [])
            }, promise: function (e, t) {
                var n, r = 1, i = p.Deferred(), a = this, o = this.length, s = function () {
                    --r || i.resolveWith(a, [a])
                };
                for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; o--;) n = B.get(a[o], e + "queueHooks"), n && n.empty && (r++, n.empty.add(s));
                return s(), i.promise(t)
            }
        });
        var G = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, j = new RegExp("^(?:([+-])=|)(" + G + ")([a-z%]*)$", "i"),
            $ = ["Top", "Right", "Bottom", "Left"], Y = function (e, t) {
                return e = t || e, "none" === p.css(e, "display") || !p.contains(e.ownerDocument, e)
            }, X = /^(?:checkbox|radio)$/i, Z = /<([\w:-]+)/, K = /^$|\/(?:java|ecma)script/i, Q = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [0, "", ""]
            };
        Q.optgroup = Q.option, Q.tbody = Q.tfoot = Q.colgroup = Q.caption = Q.thead, Q.th = Q.td;
        var ee = /<|&#?\w+;/;
        !function () {
            var e = r.createDocumentFragment(), t = e.appendChild(r.createElement("div")), n = r.createElement("input");
            n.setAttribute("type", "radio"), n.setAttribute("checked", "checked"), n.setAttribute("name", "t"), t.appendChild(n), f.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked, t.innerHTML = "<textarea>x</textarea>", f.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue
        }();
        var te = /^key/, ne = /^(?:mouse|pointer|contextmenu|drag|drop)|click/, re = /^([^.]*)(?:\.(.+)|)/;
        p.event = {
            global: {},
            add: function (e, t, n, r, i) {
                var a, o, s, c, d, l, u, f, h, m, v, g = B.get(e);
                if (g) for (n.handler && (a = n, n = a.handler, i = a.selector), n.guid || (n.guid = p.guid++), (c = g.events) || (c = g.events = {}), (o = g.handle) || (o = g.handle = function (t) {
                    return "undefined" != typeof p && p.event.triggered !== t.type ? p.event.dispatch.apply(e, arguments) : void 0
                }), t = (t || "").match(k) || [""], d = t.length; d--;) s = re.exec(t[d]) || [], h = v = s[1], m = (s[2] || "").split(".").sort(), h && (u = p.event.special[h] || {}, h = (i ? u.delegateType : u.bindType) || h, u = p.event.special[h] || {}, l = p.extend({
                    type: h,
                    origType: v,
                    data: r,
                    handler: n,
                    guid: n.guid,
                    selector: i,
                    needsContext: i && p.expr.match.needsContext.test(i),
                    namespace: m.join(".")
                }, a), (f = c[h]) || (f = c[h] = [], f.delegateCount = 0, u.setup && u.setup.call(e, r, m, o) !== !1 || e.addEventListener && e.addEventListener(h, o)), u.add && (u.add.call(e, l), l.handler.guid || (l.handler.guid = n.guid)), i ? f.splice(f.delegateCount++, 0, l) : f.push(l), p.event.global[h] = !0)
            },
            remove: function (e, t, n, r, i) {
                var a, o, s, c, d, l, u, f, h, m, v, g = B.hasData(e) && B.get(e);
                if (g && (c = g.events)) {
                    for (t = (t || "").match(k) || [""], d = t.length; d--;) if (s = re.exec(t[d]) || [], h = v = s[1], m = (s[2] || "").split(".").sort(), h) {
                        for (u = p.event.special[h] || {}, h = (r ? u.delegateType : u.bindType) || h, f = c[h] || [], s = s[2] && new RegExp("(^|\\.)" + m.join("\\.(?:.*\\.|)") + "(\\.|$)"), o = a = f.length; a--;) l = f[a], !i && v !== l.origType || n && n.guid !== l.guid || s && !s.test(l.namespace) || r && r !== l.selector && ("**" !== r || !l.selector) || (f.splice(a, 1), l.selector && f.delegateCount--, u.remove && u.remove.call(e, l));
                        o && !f.length && (u.teardown && u.teardown.call(e, m, g.handle) !== !1 || p.removeEvent(e, h, g.handle), delete c[h])
                    } else for (h in c) p.event.remove(e, h + t[d], n, r, !0);
                    p.isEmptyObject(c) && B.remove(e, "handle events")
                }
            },
            dispatch: function (e) {
                e = p.event.fix(e);
                var t, n, r, a, o, s = [], c = i.call(arguments), d = (B.get(this, "events") || {})[e.type] || [],
                    l = p.event.special[e.type] || {};
                if (c[0] = e, e.delegateTarget = this, !l.preDispatch || l.preDispatch.call(this, e) !== !1) {
                    for (s = p.event.handlers.call(this, e, d), t = 0; (a = s[t++]) && !e.isPropagationStopped();) for (e.currentTarget = a.elem, n = 0; (o = a.handlers[n++]) && !e.isImmediatePropagationStopped();) e.rnamespace && !e.rnamespace.test(o.namespace) || (e.handleObj = o, e.data = o.data, r = ((p.event.special[o.origType] || {}).handle || o.handler).apply(a.elem, c), void 0 !== r && (e.result = r) === !1 && (e.preventDefault(), e.stopPropagation()));
                    return l.postDispatch && l.postDispatch.call(this, e), e.result
                }
            },
            handlers: function (e, t) {
                var n, r, i, a, o = [], s = t.delegateCount, c = e.target;
                if (s && c.nodeType && ("click" !== e.type || isNaN(e.button) || e.button < 1)) for (; c !== this; c = c.parentNode || this) if (1 === c.nodeType && (c.disabled !== !0 || "click" !== e.type)) {
                    for (r = [], n = 0; s > n; n++) a = t[n], i = a.selector + " ", void 0 === r[i] && (r[i] = a.needsContext ? p(i, this).index(c) > -1 : p.find(i, this, null, [c]).length), r[i] && r.push(a);
                    r.length && o.push({elem: c, handlers: r})
                }
                return s < t.length && o.push({elem: this, handlers: t.slice(s)}), o
            },
            props: "altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "), filter: function (e, t) {
                    return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function (e, t) {
                    var n, i, a, o = t.button;
                    return null == e.pageX && null != t.clientX && (n = e.target.ownerDocument || r, i = n.documentElement, a = n.body, e.pageX = t.clientX + (i && i.scrollLeft || a && a.scrollLeft || 0) - (i && i.clientLeft || a && a.clientLeft || 0), e.pageY = t.clientY + (i && i.scrollTop || a && a.scrollTop || 0) - (i && i.clientTop || a && a.clientTop || 0)), e.which || void 0 === o || (e.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0), e
                }
            },
            fix: function (e) {
                if (e[p.expando]) return e;
                var t, n, i, a = e.type, o = e, s = this.fixHooks[a];
                for (s || (this.fixHooks[a] = s = ne.test(a) ? this.mouseHooks : te.test(a) ? this.keyHooks : {}), i = s.props ? this.props.concat(s.props) : this.props, e = new p.Event(o), t = i.length; t--;) n = i[t], e[n] = o[n];
                return e.target || (e.target = r), 3 === e.target.nodeType && (e.target = e.target.parentNode), s.filter ? s.filter(e, o) : e
            },
            special: {
                load: {noBubble: !0}, focus: {
                    trigger: function () {
                        return this !== ia() && this.focus ? (this.focus(), !1) : void 0
                    }, delegateType: "focusin"
                }, blur: {
                    trigger: function () {
                        return this === ia() && this.blur ? (this.blur(), !1) : void 0
                    }, delegateType: "focusout"
                }, click: {
                    trigger: function () {
                        return "checkbox" === this.type && this.click && p.nodeName(this, "input") ? (this.click(), !1) : void 0
                    }, _default: function (e) {
                        return p.nodeName(e.target, "a")
                    }
                }, beforeunload: {
                    postDispatch: function (e) {
                        void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                    }
                }
            }
        }, p.removeEvent = function (e, t, n) {
            e.removeEventListener && e.removeEventListener(t, n)
        }, p.Event = function (e, t) {
            return this instanceof p.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && e.returnValue === !1 ? ga : ha) : this.type = e, t && p.extend(this, t), this.timeStamp = e && e.timeStamp || p.now(), void(this[p.expando] = !0)) : new p.Event(e, t)
        }, p.Event.prototype = {
            constructor: p.Event,
            isDefaultPrevented: ha,
            isPropagationStopped: ha,
            isImmediatePropagationStopped: ha,
            preventDefault: function () {
                var e = this.originalEvent;
                this.isDefaultPrevented = ga, e && e.preventDefault()
            },
            stopPropagation: function () {
                var e = this.originalEvent;
                this.isPropagationStopped = ga, e && e.stopPropagation()
            },
            stopImmediatePropagation: function () {
                var e = this.originalEvent;
                this.isImmediatePropagationStopped = ga, e && e.stopImmediatePropagation(), this.stopPropagation()
            }
        }, p.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            pointerenter: "pointerover",
            pointerleave: "pointerout"
        }, function (e, t) {
            p.event.special[e] = {
                delegateType: t, bindType: t, handle: function (e) {
                    var n, r = this, i = e.relatedTarget, a = e.handleObj;
                    return i && (i === r || p.contains(r, i)) || (e.type = a.origType, n = a.handler.apply(this, arguments), e.type = t), n
                }
            }
        }), p.fn.extend({
            on: function (e, t, n, r) {
                return ja(this, e, t, n, r)
            }, one: function (e, t, n, r) {
                return ja(this, e, t, n, r, 1)
            }, off: function (e, t, n) {
                var r, i;
                if (e && e.preventDefault && e.handleObj) return r = e.handleObj, p(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler), this;
                if ("object" == typeof e) {
                    for (i in e) this.off(i, t, e[i]);
                    return this
                }
                return t !== !1 && "function" != typeof t || (n = t, t = void 0), n === !1 && (n = ha), this.each(function () {
                    p.event.remove(this, e, n, t)
                })
            }
        });
        var ie = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,
            ae = /<script|<style|<link/i, oe = /checked\s*(?:[^=]|=\s*.checked.)/i, se = /^true\/(.*)/,
            ce = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
        p.extend({
            htmlPrefilter: function (e) {
                return e.replace(ie, "<$1></$2>")
            }, clone: function (e, t, n) {
                var r, i, a, o, s = e.cloneNode(!0), c = p.contains(e.ownerDocument, e);
                if (!(f.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || p.isXMLDoc(e))) for (o = _(s), a = _(e), r = 0, i = a.length; i > r; r++) ta(a[r], o[r]);
                if (t) if (n) for (a = a || _(e), o = o || _(s), r = 0, i = a.length; i > r; r++) sa(a[r], o[r]); else sa(e, s);
                return o = _(s, "script"), o.length > 0 && aa(o, !c && _(e, "script")), s
            }, cleanData: function (e) {
                for (var t, n, r, i = p.event.special, a = 0; void 0 !== (n = e[a]); a++) if (N(n)) {
                    if (t = n[B.expando]) {
                        if (t.events) for (r in t.events) i[r] ? p.event.remove(n, r) : p.removeEvent(n, r, t.handle);
                        n[B.expando] = void 0
                    }
                    n[U.expando] && (n[U.expando] = void 0)
                }
            }
        }), p.fn.extend({
            domManip: ua, detach: function (e) {
                return va(this, e, !0)
            }, remove: function (e) {
                return va(this, e)
            }, text: function (e) {
                return P(this, function (e) {
                    return void 0 === e ? p.text(this) : this.empty().each(function () {
                        1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e)
                    })
                }, null, e, arguments.length)
            }, append: function () {
                return ua(this, arguments, function (e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = pa(this, e);
                        t.appendChild(e)
                    }
                })
            }, prepend: function () {
                return ua(this, arguments, function (e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = pa(this, e);
                        t.insertBefore(e, t.firstChild)
                    }
                })
            }, before: function () {
                return ua(this, arguments, function (e) {
                    this.parentNode && this.parentNode.insertBefore(e, this)
                })
            }, after: function () {
                return ua(this, arguments, function (e) {
                    this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                })
            }, empty: function () {
                for (var e, t = 0; null != (e = this[t]); t++) 1 === e.nodeType && (p.cleanData(_(e, !1)), e.textContent = "");
                return this
            }, clone: function (e, t) {
                return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function () {
                    return p.clone(this, e, t)
                })
            }, html: function (e) {
                return P(this, function (e) {
                    var t = this[0] || {}, n = 0, r = this.length;
                    if (void 0 === e && 1 === t.nodeType) return t.innerHTML;
                    if ("string" == typeof e && !ae.test(e) && !Q[(Z.exec(e) || ["", ""])[1].toLowerCase()]) {
                        e = p.htmlPrefilter(e);
                        try {
                            for (; r > n; n++) t = this[n] || {}, 1 === t.nodeType && (p.cleanData(_(t, !1)), t.innerHTML = e);
                            t = 0
                        } catch (i) {
                        }
                    }
                    t && this.empty().append(e)
                }, null, e, arguments.length)
            }, replaceWith: function () {
                var e = [];
                return ua(this, arguments, function (t) {
                    var n = this.parentNode;
                    p.inArray(this, e) < 0 && (p.cleanData(_(this)), n && n.replaceChild(t, this))
                }, e)
            }
        }), p.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function (e, t) {
            p.fn[e] = function (e) {
                for (var n, r = [], i = p(e), a = i.length - 1, s = 0; a >= s; s++) n = s === a ? this : this.clone(!0), p(i[s])[t](n), o.apply(r, n.get());
                return this.pushStack(r)
            }
        });
        var de, le = {HTML: "block", BODY: "block"}, ue = /^margin/, fe = new RegExp("^(" + G + ")(?!px)[a-z%]+$", "i"),
            he = function (t) {
                var n = t.ownerDocument.defaultView;
                return n && n.opener || (n = e), n.getComputedStyle(t)
            }, pe = function (e, t, n, r) {
                var i, a, o = {};
                for (a in t) o[a] = e.style[a], e.style[a] = t[a];
                i = n.apply(e, r || []);
                for (a in t) e.style[a] = o[a];
                return i
            }, me = r.documentElement;
        !function () {
            function i() {
                c.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%", c.innerHTML = "", me.appendChild(s);
                var r = e.getComputedStyle(c);
                t = "1%" !== r.top, o = "2px" === r.marginLeft, n = "4px" === r.width, c.style.marginRight = "50%", a = "4px" === r.marginRight, me.removeChild(s)
            }

            var t, n, a, o, s = r.createElement("div"), c = r.createElement("div");
            c.style && (c.style.backgroundClip = "content-box", c.cloneNode(!0).style.backgroundClip = "", f.clearCloneStyle = "content-box" === c.style.backgroundClip, s.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute", s.appendChild(c), p.extend(f, {
                pixelPosition: function () {
                    return i(), t
                }, boxSizingReliable: function () {
                    return null == n && i(), n
                }, pixelMarginRight: function () {
                    return null == n && i(), a
                }, reliableMarginLeft: function () {
                    return null == n && i(), o
                }, reliableMarginRight: function () {
                    var t, n = c.appendChild(r.createElement("div"));
                    return n.style.cssText = c.style.cssText = "-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", n.style.marginRight = n.style.width = "0", c.style.width = "1px", me.appendChild(s), t = !parseFloat(e.getComputedStyle(n).marginRight), me.removeChild(s), c.removeChild(n), t
                }
            }))
        }();
        var ve = /^(none|table(?!-c[ea]).+)/, ge = {position: "absolute", visibility: "hidden", display: "block"},
            be = {letterSpacing: "0", fontWeight: "400"}, ye = ["Webkit", "O", "Moz", "ms"],
            _e = r.createElement("div").style;
        p.extend({
            cssHooks: {
                opacity: {
                    get: function (e, t) {
                        if (t) {
                            var n = Fa(e, "opacity");
                            return "" === n ? "1" : n
                        }
                    }
                }
            },
            cssNumber: {
                animationIterationCount: !0,
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {"float": "cssFloat"},
            style: function (e, t, n, r) {
                if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                    var i, a, o, s = p.camelCase(t), c = e.style;
                    return t = p.cssProps[s] || (p.cssProps[s] = Ma(s) || s), o = p.cssHooks[t] || p.cssHooks[s], void 0 === n ? o && "get" in o && void 0 !== (i = o.get(e, !1, r)) ? i : c[t] : (a = typeof n, "string" === a && (i = j.exec(n)) && i[1] && (n = W(e, t, i), a = "number"), void(null != n && n === n && ("number" === a && (n += i && i[3] || (p.cssNumber[s] ? "" : "px")), f.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (c[t] = "inherit"), o && "set" in o && void 0 === (n = o.set(e, n, r)) || (c[t] = n))))
                }
            },
            css: function (e, t, n, r) {
                var i, a, o, s = p.camelCase(t);
                return t = p.cssProps[s] || (p.cssProps[s] = Ma(s) || s), o = p.cssHooks[t] || p.cssHooks[s], o && "get" in o && (i = o.get(e, !0, n)), void 0 === i && (i = Fa(e, t, r)), "normal" === i && t in be && (i = be[t]), "" === n || n ? (a = parseFloat(i), n === !0 || isFinite(a) ? a || 0 : i) : i
            }
        }), p.each(["height", "width"], function (e, t) {
            p.cssHooks[t] = {
                get: function (e, n, r) {
                    return n ? ve.test(p.css(e, "display")) && 0 === e.offsetWidth ? pe(e, ge, function () {
                        return Pa(e, t, r)
                    }) : Pa(e, t, r) : void 0
                }, set: function (e, n, r) {
                    var i, a = r && he(e), o = r && Oa(e, t, r, "border-box" === p.css(e, "boxSizing", !1, a), a);
                    return o && (i = j.exec(n)) && "px" !== (i[3] || "px") && (e.style[t] = n, n = p.css(e, t)), Na(e, n, o)
                }
            }
        }), p.cssHooks.marginLeft = Ga(f.reliableMarginLeft, function (e, t) {
            return t ? (parseFloat(Fa(e, "marginLeft")) || e.getBoundingClientRect().left - pe(e, {marginLeft: 0}, function () {
                return e.getBoundingClientRect().left
            })) + "px" : void 0
        }), p.cssHooks.marginRight = Ga(f.reliableMarginRight, function (e, t) {
            return t ? pe(e, {display: "inline-block"}, Fa, [e, "marginRight"]) : void 0
        }), p.each({margin: "", padding: "", border: "Width"}, function (e, t) {
            p.cssHooks[e + t] = {
                expand: function (n) {
                    for (var r = 0, i = {}, a = "string" == typeof n ? n.split(" ") : [n]; 4 > r; r++) i[e + $[r] + t] = a[r] || a[r - 2] || a[0];
                    return i
                }
            }, ue.test(e) || (p.cssHooks[e + t].set = Na)
        }), p.fn.extend({
            css: function (e, t) {
                return P(this, function (e, t, n) {
                    var r, i, a = {}, o = 0;
                    if (p.isArray(t)) {
                        for (r = he(e), i = t.length; i > o; o++) a[t[o]] = p.css(e, t[o], !1, r);
                        return a
                    }
                    return void 0 !== n ? p.style(e, t, n) : p.css(e, t)
                }, e, t, arguments.length > 1)
            }, show: function () {
                return Qa(this, !0)
            }, hide: function () {
                return Qa(this)
            }, toggle: function (e) {
                return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function () {
                    Y(this) ? p(this).show() : p(this).hide()
                })
            }
        }), p.Tween = Ra, Ra.prototype = {
            constructor: Ra, init: function (e, t, n, r, i, a) {
                this.elem = e, this.prop = n, this.easing = i || p.easing._default, this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = a || (p.cssNumber[n] ? "" : "px")
            }, cur: function () {
                var e = Ra.propHooks[this.prop];
                return e && e.get ? e.get(this) : Ra.propHooks._default.get(this)
            }, run: function (e) {
                var t, n = Ra.propHooks[this.prop];
                return this.options.duration ? this.pos = t = p.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : Ra.propHooks._default.set(this), this
            }
        }, Ra.prototype.init.prototype = Ra.prototype, Ra.propHooks = {
            _default: {
                get: function (e) {
                    var t;
                    return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = p.css(e.elem, e.prop, ""), t && "auto" !== t ? t : 0)
                }, set: function (e) {
                    p.fx.step[e.prop] ? p.fx.step[e.prop](e) : 1 !== e.elem.nodeType || null == e.elem.style[p.cssProps[e.prop]] && !p.cssHooks[e.prop] ? e.elem[e.prop] = e.now : p.style(e.elem, e.prop, e.now + e.unit)
                }
            }
        }, Ra.propHooks.scrollTop = Ra.propHooks.scrollLeft = {
            set: function (e) {
                e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
            }
        }, p.easing = {
            linear: function (e) {
                return e
            }, swing: function (e) {
                return .5 - Math.cos(e * Math.PI) / 2
            }, _default: "swing"
        }, p.fx = Ra.prototype.init, p.fx.step = {};
        var Ee, Ce, Se = /^(?:toggle|show|hide)$/, Te = /queueHooks$/;
        p.Animation = p.extend(_a, {
            tweeners: {
                "*": [function (e, t) {
                    var n = this.createTween(e, t);
                    return W(n.elem, e, j.exec(t), n), n
                }]
            }, tweener: function (e, t) {
                p.isFunction(e) ? (t = e, e = ["*"]) : e = e.match(k);
                for (var n, r = 0, i = e.length; i > r; r++) n = e[r], _a.tweeners[n] = _a.tweeners[n] || [], _a.tweeners[n].unshift(t)
            }, prefilters: [Za], prefilter: function (e, t) {
                t ? _a.prefilters.unshift(e) : _a.prefilters.push(e)
            }
        }), p.speed = function (e, t, n) {
            var r = e && "object" == typeof e ? p.extend({}, e) : {
                complete: n || !n && t || p.isFunction(e) && e,
                duration: e,
                easing: n && t || t && !p.isFunction(t) && t
            };
            return r.duration = p.fx.off ? 0 : "number" == typeof r.duration ? r.duration : r.duration in p.fx.speeds ? p.fx.speeds[r.duration] : p.fx.speeds._default, null != r.queue && r.queue !== !0 || (r.queue = "fx"), r.old = r.complete, r.complete = function () {
                p.isFunction(r.old) && r.old.call(this), r.queue && p.dequeue(this, r.queue)
            }, r
        }, p.fn.extend({
            fadeTo: function (e, t, n, r) {
                return this.filter(Y).css("opacity", 0).show().end().animate({opacity: t}, e, n, r)
            }, animate: function (e, t, n, r) {
                var i = p.isEmptyObject(e), a = p.speed(t, n, r), o = function () {
                    var t = _a(this, p.extend({}, e), a);
                    (i || B.get(this, "finish")) && t.stop(!0)
                };
                return o.finish = o, i || a.queue === !1 ? this.each(o) : this.queue(a.queue, o)
            }, stop: function (e, t, n) {
                var r = function (e) {
                    var t = e.stop;
                    delete e.stop, t(n)
                };
                return "string" != typeof e && (n = t, t = e, e = void 0), t && e !== !1 && this.queue(e || "fx", []), this.each(function () {
                    var t = !0, i = null != e && e + "queueHooks", a = p.timers, o = B.get(this);
                    if (i) o[i] && o[i].stop && r(o[i]); else for (i in o) o[i] && o[i].stop && Te.test(i) && r(o[i]);
                    for (i = a.length; i--;) a[i].elem !== this || null != e && a[i].queue !== e || (a[i].anim.stop(n), t = !1, a.splice(i, 1));
                    !t && n || p.dequeue(this, e)
                })
            }, finish: function (e) {
                return e !== !1 && (e = e || "fx"), this.each(function () {
                    var t, n = B.get(this), r = n[e + "queue"], i = n[e + "queueHooks"], a = p.timers,
                        o = r ? r.length : 0;
                    for (n.finish = !0, p.queue(this, e, []), i && i.stop && i.stop.call(this, !0), t = a.length; t--;) a[t].elem === this && a[t].queue === e && (a[t].anim.stop(!0), a.splice(t, 1));
                    for (t = 0; o > t; t++) r[t] && r[t].finish && r[t].finish.call(this);
                    delete n.finish
                })
            }
        }), p.each(["toggle", "show", "hide"], function (e, t) {
            var n = p.fn[t];
            p.fn[t] = function (e, r, i) {
                return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(Xa(t, !0), e, r, i)
            }
        }), p.each({
            slideDown: Xa("show"),
            slideUp: Xa("hide"),
            slideToggle: Xa("toggle"),
            fadeIn: {opacity: "show"},
            fadeOut: {opacity: "hide"},
            fadeToggle: {opacity: "toggle"}
        }, function (e, t) {
            p.fn[e] = function (e, n, r) {
                return this.animate(t, e, n, r)
            }
        }), p.timers = [], p.fx.tick = function () {
            var e, t = 0, n = p.timers;
            for (Ee = p.now(); t < n.length; t++) e = n[t], e() || n[t] !== e || n.splice(t--, 1);
            n.length || p.fx.stop(), Ee = void 0
        }, p.fx.timer = function (e) {
            p.timers.push(e), e() ? p.fx.start() : p.timers.pop()
        }, p.fx.interval = 13, p.fx.start = function () {
            Ce || (Ce = e.setInterval(p.fx.tick, p.fx.interval))
        }, p.fx.stop = function () {
            e.clearInterval(Ce), Ce = null
        }, p.fx.speeds = {slow: 600, fast: 200, _default: 400}, p.fn.delay = function (t, n) {
            return t = p.fx ? p.fx.speeds[t] || t : t, n = n || "fx", this.queue(n, function (n, r) {
                var i = e.setTimeout(n, t);
                r.stop = function () {
                    e.clearTimeout(i)
                }
            })
        }, function () {
            var e = r.createElement("input"), t = r.createElement("select"),
                n = t.appendChild(r.createElement("option"));
            e.type = "checkbox", f.checkOn = "" !== e.value, f.optSelected = n.selected, t.disabled = !0, f.optDisabled = !n.disabled, e = r.createElement("input"), e.value = "t", e.type = "radio", f.radioValue = "t" === e.value
        }();
        var we, De = p.expr.attrHandle;
        p.fn.extend({
            attr: function (e, t) {
                return P(this, p.attr, e, t, arguments.length > 1)
            }, removeAttr: function (e) {
                return this.each(function () {
                    p.removeAttr(this, e)
                })
            }
        }), p.extend({
            attr: function (e, t, n) {
                var r, i, a = e.nodeType;
                return 3 !== a && 8 !== a && 2 !== a ? "undefined" == typeof e.getAttribute ? p.prop(e, t, n) : (1 === a && p.isXMLDoc(e) || (t = t.toLowerCase(), i = p.attrHooks[t] || (p.expr.match.bool.test(t) ? we : void 0)), void 0 !== n ? null === n ? void p.removeAttr(e, t) : i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : (e.setAttribute(t, n + ""), n) : i && "get" in i && null !== (r = i.get(e, t)) ? r : (r = p.find.attr(e, t), null == r ? void 0 : r)) : void 0
            }, attrHooks: {
                type: {
                    set: function (e, t) {
                        if (!f.radioValue && "radio" === t && p.nodeName(e, "input")) {
                            var n = e.value;
                            return e.setAttribute("type", t), n && (e.value = n), t
                        }
                    }
                }
            }, removeAttr: function (e, t) {
                var n, r, i = 0, a = t && t.match(k);
                if (a && 1 === e.nodeType) for (; n = a[i++];) r = p.propFix[n] || n, p.expr.match.bool.test(n) && (e[r] = !1), e.removeAttribute(n)
            }
        }), we = {
            set: function (e, t, n) {
                return t === !1 ? p.removeAttr(e, n) : e.setAttribute(n, n), n
            }
        }, p.each(p.expr.match.bool.source.match(/\w+/g), function (e, t) {
            var n = De[t] || p.find.attr;
            De[t] = function (e, t, r) {
                var i, a;
                return r || (a = De[t], De[t] = i, i = null != n(e, t, r) ? t.toLowerCase() : null, De[t] = a), i
            }
        });
        var Ae = /^(?:input|select|textarea|button)$/i, xe = /^(?:a|area)$/i;
        p.fn.extend({
            prop: function (e, t) {
                return P(this, p.prop, e, t, arguments.length > 1)
            }, removeProp: function (e) {
                return this.each(function () {
                    delete this[p.propFix[e] || e]
                })
            }
        }), p.extend({
            prop: function (e, t, n) {
                var r, i, a = e.nodeType;
                return 3 !== a && 8 !== a && 2 !== a ? (1 === a && p.isXMLDoc(e) || (t = p.propFix[t] || t, i = p.propHooks[t]), void 0 !== n ? i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : e[t] = n : i && "get" in i && null !== (r = i.get(e, t)) ? r : e[t]) : void 0
            }, propHooks: {
                tabIndex: {
                    get: function (e) {
                        var t = p.find.attr(e, "tabindex");
                        return t ? parseInt(t, 10) : Ae.test(e.nodeName) || xe.test(e.nodeName) && e.href ? 0 : -1
                    }
                }
            }, propFix: {"for": "htmlFor", "class": "className"}
        }), f.optSelected || (p.propHooks.selected = {
            get: function (e) {
                var t = e.parentNode;
                return t && t.parentNode && t.parentNode.selectedIndex, null
            }, set: function (e) {
                var t = e.parentNode;
                t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex)
            }
        }), p.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () {
            p.propFix[this.toLowerCase()] = this
        });
        var Ie = /[\t\r\n\f]/g;
        p.fn.extend({
            addClass: function (e) {
                var t, n, r, i, a, o, s, c = 0;
                if (p.isFunction(e)) return this.each(function (t) {
                    p(this).addClass(e.call(this, t, fb(this)))
                });
                if ("string" == typeof e && e) for (t = e.match(k) || []; n = this[c++];) if (i = fb(n), r = 1 === n.nodeType && (" " + i + " ").replace(Ie, " ")) {
                    for (o = 0; a = t[o++];) r.indexOf(" " + a + " ") < 0 && (r += a + " ");
                    s = p.trim(r), i !== s && n.setAttribute("class", s)
                }
                return this
            }, removeClass: function (e) {
                var t, n, r, i, a, o, s, c = 0;
                if (p.isFunction(e)) return this.each(function (t) {
                    p(this).removeClass(e.call(this, t, fb(this)))
                });
                if (!arguments.length) return this.attr("class", "");
                if ("string" == typeof e && e) for (t = e.match(k) || []; n = this[c++];) if (i = fb(n), r = 1 === n.nodeType && (" " + i + " ").replace(Ie, " ")) {
                    for (o = 0; a = t[o++];) for (; r.indexOf(" " + a + " ") > -1;) r = r.replace(" " + a + " ", " ");
                    s = p.trim(r), i !== s && n.setAttribute("class", s)
                }
                return this
            }, toggleClass: function (e, t) {
                var n = typeof e;
                return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : p.isFunction(e) ? this.each(function (n) {
                    p(this).toggleClass(e.call(this, n, fb(this), t), t)
                }) : this.each(function () {
                    var t, r, i, a;
                    if ("string" === n) for (r = 0, i = p(this), a = e.match(k) || []; t = a[r++];) i.hasClass(t) ? i.removeClass(t) : i.addClass(t); else void 0 !== e && "boolean" !== n || (t = fb(this), t && B.set(this, "__className__", t), this.setAttribute && this.setAttribute("class", t || e === !1 ? "" : B.get(this, "__className__") || ""))
                })
            }, hasClass: function (e) {
                var t, n, r = 0;
                for (t = " " + e + " "; n = this[r++];) if (1 === n.nodeType && (" " + fb(n) + " ").replace(Ie, " ").indexOf(t) > -1) return !0;
                return !1
            }
        });
        var Oe = /\r/g, ke = /[\x20\t\r\n\f]+/g;
        p.fn.extend({
            val: function (e) {
                var t, n, r, i = this[0];
                return arguments.length ? (r = p.isFunction(e), this.each(function (n) {
                    var i;
                    1 === this.nodeType && (i = r ? e.call(this, n, p(this).val()) : e, null == i ? i = "" : "number" == typeof i ? i += "" : p.isArray(i) && (i = p.map(i, function (e) {
                        return null == e ? "" : e + ""
                    })), t = p.valHooks[this.type] || p.valHooks[this.nodeName.toLowerCase()], t && "set" in t && void 0 !== t.set(this, i, "value") || (this.value = i))
                })) : i ? (t = p.valHooks[i.type] || p.valHooks[i.nodeName.toLowerCase()], t && "get" in t && void 0 !== (n = t.get(i, "value")) ? n : (n = i.value, "string" == typeof n ? n.replace(Oe, "") : null == n ? "" : n)) : void 0
            }
        }), p.extend({
            valHooks: {
                option: {
                    get: function (e) {
                        var t = p.find.attr(e, "value");
                        return null != t ? t : p.trim(p.text(e)).replace(ke, " ")
                    }
                }, select: {
                    get: function (e) {
                        for (var t, n, r = e.options, i = e.selectedIndex, a = "select-one" === e.type || 0 > i, o = a ? null : [], s = a ? i + 1 : r.length, c = 0 > i ? s : a ? i : 0; s > c; c++) if (n = r[c], (n.selected || c === i) && (f.optDisabled ? !n.disabled : null === n.getAttribute("disabled")) && (!n.parentNode.disabled || !p.nodeName(n.parentNode, "optgroup"))) {
                            if (t = p(n).val(), a) return t;
                            o.push(t)
                        }
                        return o
                    }, set: function (e, t) {
                        for (var n, r, i = e.options, a = p.makeArray(t), o = i.length; o--;) r = i[o], (r.selected = p.inArray(p.valHooks.option.get(r), a) > -1) && (n = !0);
                        return n || (e.selectedIndex = -1), a
                    }
                }
            }
        }), p.each(["radio", "checkbox"], function () {
            p.valHooks[this] = {
                set: function (e, t) {
                    return p.isArray(t) ? e.checked = p.inArray(p(e).val(), t) > -1 : void 0
                }
            }, f.checkOn || (p.valHooks[this].get = function (e) {
                return null === e.getAttribute("value") ? "on" : e.value
            })
        });
        var Re = /^(?:focusinfocus|focusoutblur)$/;
        p.extend(p.event, {
            trigger: function (t, n, i, a) {
                var o, s, c, d, l, f, h, m = [i || r], v = u.call(t, "type") ? t.type : t,
                    g = u.call(t, "namespace") ? t.namespace.split(".") : [];
                if (s = c = i = i || r, 3 !== i.nodeType && 8 !== i.nodeType && !Re.test(v + p.event.triggered) && (v.indexOf(".") > -1 && (g = v.split("."), v = g.shift(), g.sort()), l = v.indexOf(":") < 0 && "on" + v, t = t[p.expando] ? t : new p.Event(v, "object" == typeof t && t), t.isTrigger = a ? 2 : 3, t.namespace = g.join("."), t.rnamespace = t.namespace ? new RegExp("(^|\\.)" + g.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = void 0, t.target || (t.target = i), n = null == n ? [t] : p.makeArray(n, [t]), h = p.event.special[v] || {}, a || !h.trigger || h.trigger.apply(i, n) !== !1)) {
                    if (!a && !h.noBubble && !p.isWindow(i)) {
                        for (d = h.delegateType || v, Re.test(d + v) || (s = s.parentNode); s; s = s.parentNode) m.push(s), c = s;
                        c === (i.ownerDocument || r) && m.push(c.defaultView || c.parentWindow || e)
                    }
                    for (o = 0; (s = m[o++]) && !t.isPropagationStopped();) t.type = o > 1 ? d : h.bindType || v, f = (B.get(s, "events") || {})[t.type] && B.get(s, "handle"), f && f.apply(s, n), f = l && s[l], f && f.apply && N(s) && (t.result = f.apply(s, n), t.result === !1 && t.preventDefault());
                    return t.type = v, a || t.isDefaultPrevented() || h._default && h._default.apply(m.pop(), n) !== !1 || !N(i) || l && p.isFunction(i[v]) && !p.isWindow(i) && (c = i[l], c && (i[l] = null), p.event.triggered = v, i[v](), p.event.triggered = void 0, c && (i[l] = c)), t.result
                }
            }, simulate: function (e, t, n) {
                var r = p.extend(new p.Event, n, {type: e, isSimulated: !0});
                p.event.trigger(r, null, t), r.isDefaultPrevented() && n.preventDefault()
            }
        }), p.fn.extend({
            trigger: function (e, t) {
                return this.each(function () {
                    p.event.trigger(e, t, this)
                })
            }, triggerHandler: function (e, t) {
                var n = this[0];
                return n ? p.event.trigger(e, t, n, !0) : void 0
            }
        }), p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (e, t) {
            p.fn[t] = function (e, n) {
                return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
            }
        }), p.fn.extend({
            hover: function (e, t) {
                return this.mouseenter(e).mouseleave(t || e)
            }
        }), f.focusin = "onfocusin" in e, f.focusin || p.each({focus: "focusin", blur: "focusout"}, function (e, t) {
            var n = function (e) {
                p.event.simulate(t, e.target, p.event.fix(e))
            };
            p.event.special[t] = {
                setup: function () {
                    var r = this.ownerDocument || this, i = B.access(r, t);
                    i || r.addEventListener(e, n, !0), B.access(r, t, (i || 0) + 1)
                }, teardown: function () {
                    var r = this.ownerDocument || this, i = B.access(r, t) - 1;
                    i ? B.access(r, t, i) : (r.removeEventListener(e, n, !0), B.remove(r, t))
                }
            }
        });
        var Le = e.location, Pe = p.now(), Ne = /\?/;
        p.parseJSON = function (e) {
            return JSON.parse(e + "")
        }, p.parseXML = function (t) {
            var n;
            if (!t || "string" != typeof t) return null;
            try {
                n = (new e.DOMParser).parseFromString(t, "text/xml")
            } catch (r) {
                n = void 0
            }
            return n && !n.getElementsByTagName("parsererror").length || p.error("Invalid XML: " + t), n
        };
        var Me = /#.*$/, Be = /([?&])_=[^&]*/, Ue = /^(.*?):[ \t]*([^\r\n]*)$/gm,
            Fe = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, He = /^(?:GET|HEAD)$/, qe = /^\/\//,
            Ve = {}, Ge = {}, je = "*/".concat("*"), ze = r.createElement("a");
        ze.href = Le.href, p.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: Le.href,
                type: "GET",
                isLocal: Fe.test(Le.protocol),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": je,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {xml: /\bxml\b/, html: /\bhtml/, json: /\bjson\b/},
                responseFields: {xml: "responseXML", text: "responseText", json: "responseJSON"},
                converters: {"* text": String, "text html": !0, "text json": p.parseJSON, "text xml": p.parseXML},
                flatOptions: {url: !0, context: !0}
            },
            ajaxSetup: function (e, t) {
                return t ? yb(yb(e, p.ajaxSettings), t) : yb(p.ajaxSettings, e)
            },
            ajaxPrefilter: wb(Ve),
            ajaxTransport: wb(Ge),
            ajax: function (t, n) {
                function z(t, n, r, s) {
                    var d, u, y, _, C, T = n;
                    2 !== E && (E = 2, c && e.clearTimeout(c), i = void 0, o = s || "", S.readyState = t > 0 ? 4 : 0, d = t >= 200 && 300 > t || 304 === t, r && (_ = zb(f, S, r)), _ = Ab(f, _, S, d), d ? (f.ifModified && (C = S.getResponseHeader("Last-Modified"), C && (p.lastModified[a] = C), C = S.getResponseHeader("etag"), C && (p.etag[a] = C)), 204 === t || "HEAD" === f.type ? T = "nocontent" : 304 === t ? T = "notmodified" : (T = _.state, u = _.data, y = _.error, d = !y)) : (y = T, !t && T || (T = "error", 0 > t && (t = 0))), S.status = t, S.statusText = (n || T) + "", d ? v.resolveWith(h, [u, T, S]) : v.rejectWith(h, [S, T, y]), S.statusCode(b), b = void 0, l && m.trigger(d ? "ajaxSuccess" : "ajaxError", [S, f, d ? u : y]), g.fireWith(h, [S, T]), l && (m.trigger("ajaxComplete", [S, f]), --p.active || p.event.trigger("ajaxStop")))
                }

                "object" == typeof t && (n = t, t = void 0), n = n || {};
                var i, a, o, s, c, d, l, u, f = p.ajaxSetup({}, n), h = f.context || f,
                    m = f.context && (h.nodeType || h.jquery) ? p(h) : p.event, v = p.Deferred(),
                    g = p.Callbacks("once memory"), b = f.statusCode || {}, y = {}, _ = {}, E = 0, C = "canceled", S = {
                        readyState: 0, getResponseHeader: function (e) {
                            var t;
                            if (2 === E) {
                                if (!s) for (s = {}; t = Ue.exec(o);) s[t[1].toLowerCase()] = t[2];
                                t = s[e.toLowerCase()]
                            }
                            return null == t ? null : t
                        }, getAllResponseHeaders: function () {
                            return 2 === E ? o : null
                        }, setRequestHeader: function (e, t) {
                            var n = e.toLowerCase();
                            return E || (e = _[n] = _[n] || e, y[e] = t), this
                        }, overrideMimeType: function (e) {
                            return E || (f.mimeType = e), this
                        }, statusCode: function (e) {
                            var t;
                            if (e) if (2 > E) for (t in e) b[t] = [b[t], e[t]]; else S.always(e[S.status]);
                            return this
                        }, abort: function (e) {
                            var t = e || C;
                            return i && i.abort(t), z(0, t), this
                        }
                    };
                if (v.promise(S).complete = g.add, S.success = S.done, S.error = S.fail, f.url = ((t || f.url || Le.href) + "").replace(Me, "").replace(qe, Le.protocol + "//"), f.type = n.method || n.type || f.method || f.type, f.dataTypes = p.trim(f.dataType || "*").toLowerCase().match(k) || [""], null == f.crossDomain) {
                    d = r.createElement("a");
                    try {
                        d.href = f.url, d.href = d.href, f.crossDomain = ze.protocol + "//" + ze.host != d.protocol + "//" + d.host
                    } catch (T) {
                        f.crossDomain = !0
                    }
                }
                if (f.data && f.processData && "string" != typeof f.data && (f.data = p.param(f.data, f.traditional)), xb(Ve, f, n, S), 2 === E) return S;
                l = p.event && f.global, l && 0 === p.active++ && p.event.trigger("ajaxStart"), f.type = f.type.toUpperCase(), f.hasContent = !He.test(f.type), a = f.url, f.hasContent || (f.data && (a = f.url += (Ne.test(a) ? "&" : "?") + f.data, delete f.data), f.cache === !1 && (f.url = Be.test(a) ? a.replace(Be, "$1_=" + Pe++) : a + (Ne.test(a) ? "&" : "?") + "_=" + Pe++)), f.ifModified && (p.lastModified[a] && S.setRequestHeader("If-Modified-Since", p.lastModified[a]), p.etag[a] && S.setRequestHeader("If-None-Match", p.etag[a])), (f.data && f.hasContent && f.contentType !== !1 || n.contentType) && S.setRequestHeader("Content-Type", f.contentType), S.setRequestHeader("Accept", f.dataTypes[0] && f.accepts[f.dataTypes[0]] ? f.accepts[f.dataTypes[0]] + ("*" !== f.dataTypes[0] ? ", " + je + "; q=0.01" : "") : f.accepts["*"]);
                for (u in f.headers) S.setRequestHeader(u, f.headers[u]);
                if (f.beforeSend && (f.beforeSend.call(h, S, f) === !1 || 2 === E)) return S.abort();
                C = "abort";
                for (u in{success: 1, error: 1, complete: 1}) S[u](f[u]);
                if (i = xb(Ge, f, n, S)) {
                    if (S.readyState = 1, l && m.trigger("ajaxSend", [S, f]), 2 === E) return S;
                    f.async && f.timeout > 0 && (c = e.setTimeout(function () {
                        S.abort("timeout")
                    }, f.timeout));
                    try {
                        E = 1, i.send(y, z)
                    } catch (T) {
                        if (!(2 > E)) throw T;
                        z(-1, T)
                    }
                } else z(-1, "No Transport");
                return S
            },
            getJSON: function (e, t, n) {
                return p.get(e, t, n, "json")
            },
            getScript: function (e, t) {
                return p.get(e, void 0, t, "script")
            }
        }), p.each(["get", "post"], function (e, t) {
            p[t] = function (e, n, r, i) {
                return p.isFunction(n) && (i = i || r, r = n, n = void 0), p.ajax(p.extend({
                    url: e,
                    type: t,
                    dataType: i,
                    data: n,
                    success: r
                }, p.isPlainObject(e) && e))
            }
        }), p._evalUrl = function (e) {
            return p.ajax({url: e, type: "GET", dataType: "script", async: !1, global: !1, "throws": !0})
        }, p.fn.extend({
            wrapAll: function (e) {
                var t;
                return p.isFunction(e) ? this.each(function (t) {
                    p(this).wrapAll(e.call(this, t))
                }) : (this[0] && (t = p(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function () {
                    for (var e = this; e.firstElementChild;) e = e.firstElementChild;
                    return e
                }).append(this)), this)
            }, wrapInner: function (e) {
                return p.isFunction(e) ? this.each(function (t) {
                    p(this).wrapInner(e.call(this, t))
                }) : this.each(function () {
                    var t = p(this), n = t.contents();
                    n.length ? n.wrapAll(e) : t.append(e)
                })
            }, wrap: function (e) {
                var t = p.isFunction(e);
                return this.each(function (n) {
                    p(this).wrapAll(t ? e.call(this, n) : e);
                })
            }, unwrap: function () {
                return this.parent().each(function () {
                    p.nodeName(this, "body") || p(this).replaceWith(this.childNodes)
                }).end()
            }
        }), p.expr.filters.hidden = function (e) {
            return !p.expr.filters.visible(e)
        }, p.expr.filters.visible = function (e) {
            return e.offsetWidth > 0 || e.offsetHeight > 0 || e.getClientRects().length > 0
        };
        var We = /%20/g, $e = /\[\]$/, Ye = /\r?\n/g, Xe = /^(?:submit|button|image|reset|file)$/i,
            Ze = /^(?:input|select|textarea|keygen)/i;
        p.param = function (e, t) {
            var n, r = [], i = function (e, t) {
                t = p.isFunction(t) ? t() : null == t ? "" : t, r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
            };
            if (void 0 === t && (t = p.ajaxSettings && p.ajaxSettings.traditional), p.isArray(e) || e.jquery && !p.isPlainObject(e)) p.each(e, function () {
                i(this.name, this.value)
            }); else for (n in e) Gb(n, e[n], t, i);
            return r.join("&").replace(We, "+")
        }, p.fn.extend({
            serialize: function () {
                return p.param(this.serializeArray())
            }, serializeArray: function () {
                return this.map(function () {
                    var e = p.prop(this, "elements");
                    return e ? p.makeArray(e) : this
                }).filter(function () {
                    var e = this.type;
                    return this.name && !p(this).is(":disabled") && Ze.test(this.nodeName) && !Xe.test(e) && (this.checked || !X.test(e))
                }).map(function (e, t) {
                    var n = p(this).val();
                    return null == n ? null : p.isArray(n) ? p.map(n, function (e) {
                        return {name: t.name, value: e.replace(Ye, "\r\n")}
                    }) : {name: t.name, value: n.replace(Ye, "\r\n")}
                }).get()
            }
        }), p.ajaxSettings.xhr = function () {
            try {
                return new e.XMLHttpRequest
            } catch (t) {
            }
        };
        var Ke = {0: 200, 1223: 204}, Qe = p.ajaxSettings.xhr();
        f.cors = !!Qe && "withCredentials" in Qe, f.ajax = Qe = !!Qe, p.ajaxTransport(function (t) {
            var n, r;
            return f.cors || Qe && !t.crossDomain ? {
                send: function (i, a) {
                    var o, s = t.xhr();
                    if (s.open(t.type, t.url, t.async, t.username, t.password), t.xhrFields) for (o in t.xhrFields) s[o] = t.xhrFields[o];
                    t.mimeType && s.overrideMimeType && s.overrideMimeType(t.mimeType), t.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest");
                    for (o in i) s.setRequestHeader(o, i[o]);
                    n = function (e) {
                        return function () {
                            n && (n = r = s.onload = s.onerror = s.onabort = s.onreadystatechange = null, "abort" === e ? s.abort() : "error" === e ? "number" != typeof s.status ? a(0, "error") : a(s.status, s.statusText) : a(Ke[s.status] || s.status, s.statusText, "text" !== (s.responseType || "text") || "string" != typeof s.responseText ? {binary: s.response} : {text: s.responseText}, s.getAllResponseHeaders()))
                        }
                    }, s.onload = n(), r = s.onerror = n("error"), void 0 !== s.onabort ? s.onabort = r : s.onreadystatechange = function () {
                        4 === s.readyState && e.setTimeout(function () {
                            n && r()
                        })
                    }, n = n("abort");
                    try {
                        s.send(t.hasContent && t.data || null)
                    } catch (c) {
                        if (n) throw c
                    }
                }, abort: function () {
                    n && n()
                }
            } : void 0
        }), p.ajaxSetup({
            accepts: {script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
            contents: {script: /\b(?:java|ecma)script\b/},
            converters: {
                "text script": function (e) {
                    return p.globalEval(e), e
                }
            }
        }), p.ajaxPrefilter("script", function (e) {
            void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET")
        }), p.ajaxTransport("script", function (e) {
            if (e.crossDomain) {
                var t, n;
                return {
                    send: function (i, a) {
                        t = p("<script>").prop({
                            charset: e.scriptCharset,
                            src: e.url
                        }).on("load error", n = function (e) {
                            t.remove(), n = null, e && a("error" === e.type ? 404 : 200, e.type)
                        }), r.head.appendChild(t[0])
                    }, abort: function () {
                        n && n()
                    }
                }
            }
        });
        var Je = [], et = /(=)\?(?=&|$)|\?\?/;
        p.ajaxSetup({
            jsonp: "callback", jsonpCallback: function () {
                var e = Je.pop() || p.expando + "_" + Pe++;
                return this[e] = !0, e
            }
        }), p.ajaxPrefilter("json jsonp", function (t, n, r) {
            var i, a, o,
                s = t.jsonp !== !1 && (et.test(t.url) ? "url" : "string" == typeof t.data && 0 === (t.contentType || "").indexOf("application/x-www-form-urlencoded") && et.test(t.data) && "data");
            return s || "jsonp" === t.dataTypes[0] ? (i = t.jsonpCallback = p.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, s ? t[s] = t[s].replace(et, "$1" + i) : t.jsonp !== !1 && (t.url += (Ne.test(t.url) ? "&" : "?") + t.jsonp + "=" + i), t.converters["script json"] = function () {
                return o || p.error(i + " was not called"), o[0]
            }, t.dataTypes[0] = "json", a = e[i], e[i] = function () {
                o = arguments
            }, r.always(function () {
                void 0 === a ? p(e).removeProp(i) : e[i] = a, t[i] && (t.jsonpCallback = n.jsonpCallback, Je.push(i)), o && p.isFunction(a) && a(o[0]), o = a = void 0
            }), "script") : void 0
        }), p.parseHTML = function (e, t, n) {
            if (!e || "string" != typeof e) return null;
            "boolean" == typeof t && (n = t, t = !1), t = t || r;
            var i = T.exec(e), a = !n && [];
            return i ? [t.createElement(i[1])] : (i = ca([e], t, a), a && a.length && p(a).remove(), p.merge([], i.childNodes))
        };
        var tt = p.fn.load;
        p.fn.load = function (e, t, n) {
            if ("string" != typeof e && tt) return tt.apply(this, arguments);
            var r, i, a, o = this, s = e.indexOf(" ");
            return s > -1 && (r = p.trim(e.slice(s)), e = e.slice(0, s)), p.isFunction(t) ? (n = t, t = void 0) : t && "object" == typeof t && (i = "POST"), o.length > 0 && p.ajax({
                url: e,
                type: i || "GET",
                dataType: "html",
                data: t
            }).done(function (e) {
                a = arguments, o.html(r ? p("<div>").append(p.parseHTML(e)).find(r) : e)
            }).always(n && function (e, t) {
                o.each(function () {
                    n.apply(this, a || [e.responseText, t, e])
                })
            }), this
        }, p.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) {
            p.fn[t] = function (e) {
                return this.on(t, e)
            }
        }), p.expr.filters.animated = function (e) {
            return p.grep(p.timers, function (t) {
                return e === t.elem
            }).length
        }, p.offset = {
            setOffset: function (e, t, n) {
                var r, i, a, o, s, c, d, l = p.css(e, "position"), u = p(e), f = {};
                "static" === l && (e.style.position = "relative"), s = u.offset(), a = p.css(e, "top"), c = p.css(e, "left"), d = ("absolute" === l || "fixed" === l) && (a + c).indexOf("auto") > -1, d ? (r = u.position(), o = r.top, i = r.left) : (o = parseFloat(a) || 0, i = parseFloat(c) || 0), p.isFunction(t) && (t = t.call(e, n, p.extend({}, s))), null != t.top && (f.top = t.top - s.top + o), null != t.left && (f.left = t.left - s.left + i), "using" in t ? t.using.call(e, f) : u.css(f)
            }
        }, p.fn.extend({
            offset: function (e) {
                if (arguments.length) return void 0 === e ? this : this.each(function (t) {
                    p.offset.setOffset(this, e, t)
                });
                var t, n, r = this[0], i = {top: 0, left: 0}, a = r && r.ownerDocument;
                return a ? (t = a.documentElement, p.contains(t, r) ? (i = r.getBoundingClientRect(), n = Mb(a), {
                    top: i.top + n.pageYOffset - t.clientTop,
                    left: i.left + n.pageXOffset - t.clientLeft
                }) : i) : void 0
            }, position: function () {
                if (this[0]) {
                    var e, t, n = this[0], r = {top: 0, left: 0};
                    return "fixed" === p.css(n, "position") ? t = n.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), p.nodeName(e[0], "html") || (r = e.offset()), r.top += p.css(e[0], "borderTopWidth", !0), r.left += p.css(e[0], "borderLeftWidth", !0)), {
                        top: t.top - r.top - p.css(n, "marginTop", !0),
                        left: t.left - r.left - p.css(n, "marginLeft", !0)
                    }
                }
            }, offsetParent: function () {
                return this.map(function () {
                    for (var e = this.offsetParent; e && "static" === p.css(e, "position");) e = e.offsetParent;
                    return e || me
                })
            }
        }), p.each({scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function (e, t) {
            var n = "pageYOffset" === t;
            p.fn[e] = function (r) {
                return P(this, function (e, r, i) {
                    var a = Mb(e);
                    return void 0 === i ? a ? a[t] : e[r] : void(a ? a.scrollTo(n ? a.pageXOffset : i, n ? i : a.pageYOffset) : e[r] = i)
                }, e, r, arguments.length)
            }
        }), p.each(["top", "left"], function (e, t) {
            p.cssHooks[t] = Ga(f.pixelPosition, function (e, n) {
                return n ? (n = Fa(e, t), fe.test(n) ? p(e).position()[t] + "px" : n) : void 0
            })
        }), p.each({Height: "height", Width: "width"}, function (e, t) {
            p.each({padding: "inner" + e, content: t, "": "outer" + e}, function (n, r) {
                p.fn[r] = function (r, i) {
                    var a = arguments.length && (n || "boolean" != typeof r),
                        o = n || (r === !0 || i === !0 ? "margin" : "border");
                    return P(this, function (t, n, r) {
                        var i;
                        return p.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (i = t.documentElement, Math.max(t.body["scroll" + e], i["scroll" + e], t.body["offset" + e], i["offset" + e], i["client" + e])) : void 0 === r ? p.css(t, n, o) : p.style(t, n, r, o)
                    }, t, a ? r : void 0, a, null)
                }
            })
        }), p.fn.extend({
            bind: function (e, t, n) {
                return this.on(e, null, t, n)
            }, unbind: function (e, t) {
                return this.off(e, null, t)
            }, delegate: function (e, t, n, r) {
                return this.on(t, e, n, r)
            }, undelegate: function (e, t, n) {
                return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
            }, size: function () {
                return this.length
            }
        }), p.fn.andSelf = p.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function () {
            return p
        });
        var nt = e.jQuery, rt = e.$;
        return p.noConflict = function (t) {
            return e.$ === p && (e.$ = rt), t && e.jQuery === p && (e.jQuery = nt), p
        }, t || (e.jQuery = e.$ = p), p
    }), "undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery");
+function (e) {
    var t = e.fn.jquery.split(" ")[0].split(".");
    if (t[0] < 2 && t[1] < 9 || 1 == t[0] && 9 == t[1] && t[2] < 1 || t[0] > 2) throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")
}(jQuery), +function (e) {
    function b() {
        var e = document.createElement("bootstrap"), t = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
        };
        for (var n in t) if (void 0 !== e.style[n]) return {end: t[n]};
        return !1
    }

    e.fn.emulateTransitionEnd = function (t) {
        var n = !1, r = this;
        e(this).one("bsTransitionEnd", function () {
            n = !0
        });
        var i = function () {
            n || e(r).trigger(e.support.transition.end)
        };
        return setTimeout(i, t), this
    }, e(function () {
        e.support.transition = b(), e.support.transition && (e.event.special.bsTransitionEnd = {
            bindType: e.support.transition.end,
            delegateType: e.support.transition.end,
            handle: function (t) {
                return e(t.target).is(this) ? t.handleObj.handler.apply(this, arguments) : void 0
            }
        })
    })
}(jQuery), +function (e) {
    function b(t) {
        return this.each(function () {
            var r = e(this), i = r.data("bs.alert");
            i || r.data("bs.alert", i = new n(this)), "string" == typeof t && i[t].call(r)
        })
    }

    var t = '[data-dismiss="alert"]', n = function (n) {
        e(n).on("click", t, this.close)
    };
    n.VERSION = "3.3.6", n.TRANSITION_DURATION = 150, n.prototype.close = function (t) {
        function c() {
            a.detach().trigger("closed.bs.alert").remove()
        }

        var r = e(this), i = r.attr("data-target");
        i || (i = r.attr("href"), i = i && i.replace(/.*(?=#[^\s]*$)/, ""));
        var a = e(i);
        t && t.preventDefault(), a.length || (a = r.closest(".alert")), a.trigger(t = e.Event("close.bs.alert")), t.isDefaultPrevented() || (a.removeClass("in"), e.support.transition && a.hasClass("fade") ? a.one("bsTransitionEnd", c).emulateTransitionEnd(n.TRANSITION_DURATION) : c())
    };
    var r = e.fn.alert;
    e.fn.alert = b, e.fn.alert.Constructor = n, e.fn.alert.noConflict = function () {
        return e.fn.alert = r, this
    }, e(document).on("click.bs.alert.data-api", t, n.prototype.close)
}(jQuery), +function (e) {
    function b(n) {
        return this.each(function () {
            var r = e(this), i = r.data("bs.button"), a = "object" == typeof n && n;
            i || r.data("bs.button", i = new t(this, a)), "toggle" == n ? i.toggle() : n && i.setState(n)
        })
    }

    var t = function (n, r) {
        this.$element = e(n), this.options = e.extend({}, t.DEFAULTS, r), this.isLoading = !1
    };
    t.VERSION = "3.3.6", t.DEFAULTS = {loadingText: "loading..."}, t.prototype.setState = function (t) {
        var n = "disabled", r = this.$element, i = r.is("input") ? "val" : "html", a = r.data();
        t += "Text", null == a.resetText && r.data("resetText", r[i]()), setTimeout(e.proxy(function () {
            r[i](null == a[t] ? this.options[t] : a[t]), "loadingText" == t ? (this.isLoading = !0, r.addClass(n).attr(n, n)) : this.isLoading && (this.isLoading = !1, r.removeClass(n).removeAttr(n))
        }, this), 0)
    }, t.prototype.toggle = function () {
        var e = !0, t = this.$element.closest('[data-toggle="buttons"]');
        if (t.length) {
            var n = this.$element.find("input");
            "radio" == n.prop("type") ? (n.prop("checked") && (e = !1), t.find(".active").removeClass("active"), this.$element.addClass("active")) : "checkbox" == n.prop("type") && (n.prop("checked") !== this.$element.hasClass("active") && (e = !1), this.$element.toggleClass("active")), n.prop("checked", this.$element.hasClass("active")), e && n.trigger("change")
        } else this.$element.attr("aria-pressed", !this.$element.hasClass("active")), this.$element.toggleClass("active")
    };
    var n = e.fn.button;
    e.fn.button = b, e.fn.button.Constructor = t, e.fn.button.noConflict = function () {
        return e.fn.button = n, this
    }, e(document).on("click.bs.button.data-api", '[data-toggle^="button"]', function (t) {
        var n = e(t.target);
        n.hasClass("btn") || (n = n.closest(".btn")), b.call(n, "toggle"), e(t.target).is('input[type="radio"]') || e(t.target).is('input[type="checkbox"]') || t.preventDefault()
    }).on("focus.bs.button.data-api blur.bs.button.data-api", '[data-toggle^="button"]', function (t) {
        e(t.target).closest(".btn").toggleClass("focus", /^focus(in)?$/.test(t.type))
    })
}(jQuery), +function (e) {
    function b(n) {
        return this.each(function () {
            var r = e(this), i = r.data("bs.carousel"),
                a = e.extend({}, t.DEFAULTS, r.data(), "object" == typeof n && n),
                o = "string" == typeof n ? n : a.slide;
            i || r.data("bs.carousel", i = new t(this, a)), "number" == typeof n ? i.to(n) : o ? i[o]() : a.interval && i.pause().cycle()
        })
    }

    var t = function (t, n) {
        this.$element = e(t), this.$indicators = this.$element.find(".carousel-indicators"), this.options = n, this.paused = null, this.sliding = null, this.interval = null, this.$active = null, this.$items = null, this.options.keyboard && this.$element.on("keydown.bs.carousel", e.proxy(this.keydown, this)), "hover" == this.options.pause && !("ontouchstart" in document.documentElement) && this.$element.on("mouseenter.bs.carousel", e.proxy(this.pause, this)).on("mouseleave.bs.carousel", e.proxy(this.cycle, this))
    };
    t.VERSION = "3.3.6", t.TRANSITION_DURATION = 600, t.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: !0,
        keyboard: !0
    }, t.prototype.keydown = function (e) {
        if (!/input|textarea/i.test(e.target.tagName)) {
            switch (e.which) {
                case 37:
                    this.prev();
                    break;
                case 39:
                    this.next();
                    break;
                default:
                    return
            }
            e.preventDefault()
        }
    }, t.prototype.cycle = function (t) {
        return t || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(e.proxy(this.next, this), this.options.interval)), this
    }, t.prototype.getItemIndex = function (e) {
        return this.$items = e.parent().children(".item"), this.$items.index(e || this.$active)
    }, t.prototype.getItemForDirection = function (e, t) {
        var n = this.getItemIndex(t), r = "prev" == e && 0 === n || "next" == e && n == this.$items.length - 1;
        if (r && !this.options.wrap) return t;
        var i = "prev" == e ? -1 : 1, a = (n + i) % this.$items.length;
        return this.$items.eq(a)
    }, t.prototype.to = function (e) {
        var t = this, n = this.getItemIndex(this.$active = this.$element.find(".item.active"));
        return e > this.$items.length - 1 || 0 > e ? void 0 : this.sliding ? this.$element.one("slid.bs.carousel", function () {
            t.to(e)
        }) : n == e ? this.pause().cycle() : this.slide(e > n ? "next" : "prev", this.$items.eq(e))
    }, t.prototype.pause = function (t) {
        return t || (this.paused = !0), this.$element.find(".next, .prev").length && e.support.transition && (this.$element.trigger(e.support.transition.end), this.cycle(!0)), this.interval = clearInterval(this.interval), this
    }, t.prototype.next = function () {
        return this.sliding ? void 0 : this.slide("next")
    }, t.prototype.prev = function () {
        return this.sliding ? void 0 : this.slide("prev")
    }, t.prototype.slide = function (n, r) {
        var i = this.$element.find(".item.active"), a = r || this.getItemForDirection(n, i), o = this.interval,
            s = "next" == n ? "left" : "right", c = this;
        if (a.hasClass("active")) return this.sliding = !1;
        var d = a[0], l = e.Event("slide.bs.carousel", {relatedTarget: d, direction: s});
        if (this.$element.trigger(l), !l.isDefaultPrevented()) {
            if (this.sliding = !0, o && this.pause(), this.$indicators.length) {
                this.$indicators.find(".active").removeClass("active");
                var u = e(this.$indicators.children()[this.getItemIndex(a)]);
                u && u.addClass("active")
            }
            var f = e.Event("slid.bs.carousel", {relatedTarget: d, direction: s});
            return e.support.transition && this.$element.hasClass("slide") ? (a.addClass(n), a[0].offsetWidth, i.addClass(s), a.addClass(s), i.one("bsTransitionEnd", function () {
                a.removeClass([n, s].join(" ")).addClass("active"), i.removeClass(["active", s].join(" ")), c.sliding = !1, setTimeout(function () {
                    c.$element.trigger(f)
                }, 0)
            }).emulateTransitionEnd(t.TRANSITION_DURATION)) : (i.removeClass("active"), a.addClass("active"), this.sliding = !1, this.$element.trigger(f)), o && this.cycle(), this
        }
    };
    var n = e.fn.carousel;
    e.fn.carousel = b, e.fn.carousel.Constructor = t, e.fn.carousel.noConflict = function () {
        return e.fn.carousel = n, this
    };
    var r = function (t) {
        var n, r = e(this), i = e(r.attr("data-target") || (n = r.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, ""));
        if (i.hasClass("carousel")) {
            var a = e.extend({}, i.data(), r.data()), o = r.attr("data-slide-to");
            o && (a.interval = !1), b.call(i, a), o && i.data("bs.carousel").to(o), t.preventDefault()
        }
    };
    e(document).on("click.bs.carousel.data-api", "[data-slide]", r).on("click.bs.carousel.data-api", "[data-slide-to]", r), e(window).on("load", function () {
        e('[data-ride="carousel"]').each(function () {
            var t = e(this);
            b.call(t, t.data())
        })
    })
}(jQuery), +function (e) {
    function b(t) {
        var n, r = t.attr("data-target") || (n = t.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, "");
        return e(r)
    }

    function c(n) {
        return this.each(function () {
            var r = e(this), i = r.data("bs.collapse"),
                a = e.extend({}, t.DEFAULTS, r.data(), "object" == typeof n && n);
            !i && a.toggle && /show|hide/.test(n) && (a.toggle = !1), i || r.data("bs.collapse", i = new t(this, a)), "string" == typeof n && i[n]()
        })
    }

    var t = function (n, r) {
        this.$element = e(n), this.options = e.extend({}, t.DEFAULTS, r), this.$trigger = e('[data-toggle="collapse"][href="#' + n.id + '"],[data-toggle="collapse"][data-target="#' + n.id + '"]'), this.transitioning = null, this.options.parent ? this.$parent = this.getParent() : this.addAriaAndCollapsedClass(this.$element, this.$trigger), this.options.toggle && this.toggle()
    };
    t.VERSION = "3.3.6", t.TRANSITION_DURATION = 350, t.DEFAULTS = {toggle: !0}, t.prototype.dimension = function () {
        var e = this.$element.hasClass("width");
        return e ? "width" : "height"
    }, t.prototype.show = function () {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var n, r = this.$parent && this.$parent.children(".panel").children(".in, .collapsing");
            if (!(r && r.length && (n = r.data("bs.collapse"), n && n.transitioning))) {
                var i = e.Event("show.bs.collapse");
                if (this.$element.trigger(i), !i.isDefaultPrevented()) {
                    r && r.length && (c.call(r, "hide"), n || r.data("bs.collapse", null));
                    var a = this.dimension();
                    this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded", !0), this.$trigger.removeClass("collapsed").attr("aria-expanded", !0), this.transitioning = 1;
                    var o = function () {
                        this.$element.removeClass("collapsing").addClass("collapse in")[a](""), this.transitioning = 0, this.$element.trigger("shown.bs.collapse")
                    };
                    if (!e.support.transition) return o.call(this);
                    var s = e.camelCase(["scroll", a].join("-"));
                    this.$element.one("bsTransitionEnd", e.proxy(o, this)).emulateTransitionEnd(t.TRANSITION_DURATION)[a](this.$element[0][s])
                }
            }
        }
    }, t.prototype.hide = function () {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var n = e.Event("hide.bs.collapse");
            if (this.$element.trigger(n), !n.isDefaultPrevented()) {
                var r = this.dimension();
                this.$element[r](this.$element[r]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded", !1), this.$trigger.addClass("collapsed").attr("aria-expanded", !1), this.transitioning = 1;
                var i = function () {
                    this.transitioning = 0, this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")
                };
                return e.support.transition ? void this.$element[r](0).one("bsTransitionEnd", e.proxy(i, this)).emulateTransitionEnd(t.TRANSITION_DURATION) : i.call(this)
            }
        }
    }, t.prototype.toggle = function () {
        this[this.$element.hasClass("in") ? "hide" : "show"]()
    }, t.prototype.getParent = function () {
        return e(this.options.parent).find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]').each(e.proxy(function (t, n) {
            var r = e(n);
            this.addAriaAndCollapsedClass(b(r), r)
        }, this)).end()
    }, t.prototype.addAriaAndCollapsedClass = function (e, t) {
        var n = e.hasClass("in");
        e.attr("aria-expanded", n), t.toggleClass("collapsed", !n).attr("aria-expanded", n)
    };
    var n = e.fn.collapse;
    e.fn.collapse = c, e.fn.collapse.Constructor = t, e.fn.collapse.noConflict = function () {
        return e.fn.collapse = n, this
    }, e(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]', function (t) {
        var n = e(this);
        n.attr("data-target") || t.preventDefault();
        var r = b(n), i = r.data("bs.collapse"), a = i ? "toggle" : n.data();
        c.call(r, a)
    })
}(jQuery), +function (e) {
    function b(t) {
        var n = t.attr("data-target");
        n || (n = t.attr("href"), n = n && /#[A-Za-z]/.test(n) && n.replace(/.*(?=#[^\s]*$)/, ""));
        var r = n && e(n);
        return r && r.length ? r : t.parent()
    }

    function c(r) {
        r && 3 === r.which || (e(t).remove(), e(n).each(function () {
            var t = e(this), n = b(t), i = {relatedTarget: this};
            n.hasClass("open") && (r && "click" == r.type && /input|textarea/i.test(r.target.tagName) && e.contains(n[0], r.target) || (n.trigger(r = e.Event("hide.bs.dropdown", i)), r.isDefaultPrevented() || (t.attr("aria-expanded", "false"), n.removeClass("open").trigger(e.Event("hidden.bs.dropdown", i)))))
        }))
    }

    function d(t) {
        return this.each(function () {
            var n = e(this), i = n.data("bs.dropdown");
            i || n.data("bs.dropdown", i = new r(this)), "string" == typeof t && i[t].call(n)
        })
    }

    var t = ".dropdown-backdrop", n = '[data-toggle="dropdown"]', r = function (t) {
        e(t).on("click.bs.dropdown", this.toggle)
    };
    r.VERSION = "3.3.6", r.prototype.toggle = function (t) {
        var n = e(this);
        if (!n.is(".disabled, :disabled")) {
            var r = b(n), i = r.hasClass("open");
            if (c(), !i) {
                "ontouchstart" in document.documentElement && !r.closest(".navbar-nav").length && e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click", c);
                var a = {relatedTarget: this};
                if (r.trigger(t = e.Event("show.bs.dropdown", a)), t.isDefaultPrevented()) return;
                n.trigger("focus").attr("aria-expanded", "true"), r.toggleClass("open").trigger(e.Event("shown.bs.dropdown", a))
            }
            return !1
        }
    }, r.prototype.keydown = function (t) {
        if (/(38|40|27|32)/.test(t.which) && !/input|textarea/i.test(t.target.tagName)) {
            var r = e(this);
            if (t.preventDefault(), t.stopPropagation(), !r.is(".disabled, :disabled")) {
                var i = b(r), a = i.hasClass("open");
                if (!a && 27 != t.which || a && 27 == t.which) return 27 == t.which && i.find(n).trigger("focus"), r.trigger("click");
                var o = " li:not(.disabled):visible a", s = i.find(".dropdown-menu" + o);
                if (s.length) {
                    var c = s.index(t.target);
                    38 == t.which && c > 0 && c--, 40 == t.which && c < s.length - 1 && c++, ~c || (c = 0), s.eq(c).trigger("focus")
                }
            }
        }
    };
    var i = e.fn.dropdown;
    e.fn.dropdown = d, e.fn.dropdown.Constructor = r, e.fn.dropdown.noConflict = function () {
        return e.fn.dropdown = i, this
    }, e(document).on("click.bs.dropdown.data-api", c).on("click.bs.dropdown.data-api", ".dropdown form", function (e) {
        e.stopPropagation()
    }).on("click.bs.dropdown.data-api", n, r.prototype.toggle).on("keydown.bs.dropdown.data-api", n, r.prototype.keydown).on("keydown.bs.dropdown.data-api", ".dropdown-menu", r.prototype.keydown)
}(jQuery), +function (e) {
    function b(n, r) {
        return this.each(function () {
            var i = e(this), a = i.data("bs.modal"), o = e.extend({}, t.DEFAULTS, i.data(), "object" == typeof n && n);
            a || i.data("bs.modal", a = new t(this, o)), "string" == typeof n ? a[n](r) : o.show && a.show(r)
        })
    }

    var t = function (t, n) {
        this.options = n, this.$body = e(document.body), this.$element = e(t), this.$dialog = this.$element.find(".modal-dialog"), this.$backdrop = null, this.isShown = null, this.originalBodyPad = null, this.scrollbarWidth = 0, this.ignoreBackdropClick = !1, this.options.remote && this.$element.find(".modal-content").load(this.options.remote, e.proxy(function () {
            this.$element.trigger("loaded.bs.modal")
        }, this))
    };
    t.VERSION = "3.3.6", t.TRANSITION_DURATION = 300, t.BACKDROP_TRANSITION_DURATION = 150, t.DEFAULTS = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    }, t.prototype.toggle = function (e) {
        return this.isShown ? this.hide() : this.show(e)
    }, t.prototype.show = function (n) {
        var r = this, i = e.Event("show.bs.modal", {relatedTarget: n});
        this.$element.trigger(i), this.isShown || i.isDefaultPrevented() || (this.isShown = !0, this.checkScrollbar(), this.setScrollbar(), this.$body.addClass("modal-open"), this.escape(), this.resize(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', e.proxy(this.hide, this)), this.$dialog.on("mousedown.dismiss.bs.modal", function () {
            r.$element.one("mouseup.dismiss.bs.modal", function (t) {
                e(t.target).is(r.$element) && (r.ignoreBackdropClick = !0)
            })
        }), this.backdrop(function () {
            var i = e.support.transition && r.$element.hasClass("fade");
            r.$element.parent().length || r.$element.appendTo(r.$body), r.$element.show().scrollTop(0), r.adjustDialog(), i && r.$element[0].offsetWidth, r.$element.addClass("in"), r.enforceFocus();
            var a = e.Event("shown.bs.modal", {relatedTarget: n});
            i ? r.$dialog.one("bsTransitionEnd", function () {
                r.$element.trigger("focus").trigger(a)
            }).emulateTransitionEnd(t.TRANSITION_DURATION) : r.$element.trigger("focus").trigger(a)
        }))
    }, t.prototype.hide = function (n) {
        n && n.preventDefault(), n = e.Event("hide.bs.modal"), this.$element.trigger(n), this.isShown && !n.isDefaultPrevented() && (this.isShown = !1, this.escape(), this.resize(), e(document).off("focusin.bs.modal"), this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"), this.$dialog.off("mousedown.dismiss.bs.modal"), e.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", e.proxy(this.hideModal, this)).emulateTransitionEnd(t.TRANSITION_DURATION) : this.hideModal())
    }, t.prototype.enforceFocus = function () {
        e(document).off("focusin.bs.modal").on("focusin.bs.modal", e.proxy(function (e) {
            this.$element[0] === e.target || this.$element.has(e.target).length || this.$element.trigger("focus")
        }, this))
    }, t.prototype.escape = function () {
        this.isShown && this.options.keyboard ? this.$element.on("keydown.dismiss.bs.modal", e.proxy(function (e) {
            27 == e.which && this.hide()
        }, this)) : this.isShown || this.$element.off("keydown.dismiss.bs.modal")
    }, t.prototype.resize = function () {
        this.isShown ? e(window).on("resize.bs.modal", e.proxy(this.handleUpdate, this)) : e(window).off("resize.bs.modal")
    }, t.prototype.hideModal = function () {
        var e = this;
        this.$element.hide(), this.backdrop(function () {
            e.$body.removeClass("modal-open"), e.resetAdjustments(), e.resetScrollbar(), e.$element.trigger("hidden.bs.modal")
        })
    }, t.prototype.removeBackdrop = function () {
        this.$backdrop && this.$backdrop.remove(), this.$backdrop = null
    }, t.prototype.backdrop = function (n) {
        var r = this, i = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var a = e.support.transition && i;
            if (this.$backdrop = e(document.createElement("div")).addClass("modal-backdrop " + i).appendTo(this.$body), this.$element.on("click.dismiss.bs.modal", e.proxy(function (e) {
                    return this.ignoreBackdropClick ? void(this.ignoreBackdropClick = !1) : void(e.target === e.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus() : this.hide()))
                }, this)), a && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !n) return;
            a ? this.$backdrop.one("bsTransitionEnd", n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION) : n()
        } else if (!this.isShown && this.$backdrop) {
            this.$backdrop.removeClass("in");
            var o = function () {
                r.removeBackdrop(), n && n()
            };
            e.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", o).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION) : o()
        } else n && n()
    }, t.prototype.handleUpdate = function () {
        this.adjustDialog()
    }, t.prototype.adjustDialog = function () {
        var e = this.$element[0].scrollHeight > document.documentElement.clientHeight;
        this.$element.css({
            paddingLeft: !this.bodyIsOverflowing && e ? this.scrollbarWidth : "",
            paddingRight: this.bodyIsOverflowing && !e ? this.scrollbarWidth : ""
        })
    }, t.prototype.resetAdjustments = function () {
        this.$element.css({paddingLeft: "", paddingRight: ""})
    }, t.prototype.checkScrollbar = function () {
        var e = window.innerWidth;
        if (!e) {
            var t = document.documentElement.getBoundingClientRect();
            e = t.right - Math.abs(t.left)
        }
        this.bodyIsOverflowing = document.body.clientWidth < e, this.scrollbarWidth = this.measureScrollbar()
    }, t.prototype.setScrollbar = function () {
        var e = parseInt(this.$body.css("padding-right") || 0, 10);
        this.originalBodyPad = document.body.style.paddingRight || "", this.bodyIsOverflowing && this.$body.css("padding-right", e + this.scrollbarWidth)
    }, t.prototype.resetScrollbar = function () {
        this.$body.css("padding-right", this.originalBodyPad)
    }, t.prototype.measureScrollbar = function () {
        var e = document.createElement("div");
        e.className = "modal-scrollbar-measure", this.$body.append(e);
        var t = e.offsetWidth - e.clientWidth;
        return this.$body[0].removeChild(e), t
    };
    var n = e.fn.modal;
    e.fn.modal = b, e.fn.modal.Constructor = t, e.fn.modal.noConflict = function () {
        return e.fn.modal = n, this
    }, e(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function (t) {
        var n = e(this), r = n.attr("href"), i = e(n.attr("data-target") || r && r.replace(/.*(?=#[^\s]+$)/, "")),
            a = i.data("bs.modal") ? "toggle" : e.extend({remote: !/#/.test(r) && r}, i.data(), n.data());
        n.is("a") && t.preventDefault(), i.one("show.bs.modal", function (e) {
            e.isDefaultPrevented() || i.one("hidden.bs.modal", function () {
                n.is(":visible") && n.trigger("focus")
            })
        }), b.call(i, a, this)
    })
}(jQuery), +function (e) {
    function b(n) {
        return this.each(function () {
            var r = e(this), i = r.data("bs.tooltip"), a = "object" == typeof n && n;
            (i || !/destroy|hide/.test(n)) && (i || r.data("bs.tooltip", i = new t(this, a)), "string" == typeof n && i[n]())
        })
    }

    var t = function (e, t) {
        this.type = null, this.options = null, this.enabled = null, this.timeout = null, this.hoverState = null, this.$element = null, this.inState = null, this.init("tooltip", e, t)
    };
    t.VERSION = "3.3.6", t.TRANSITION_DURATION = 150, t.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1,
        viewport: {selector: "body", padding: 0}
    }, t.prototype.init = function (t, n, r) {
        if (this.enabled = !0, this.type = t, this.$element = e(n), this.options = this.getOptions(r), this.$viewport = this.options.viewport && e(e.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : this.options.viewport.selector || this.options.viewport), this.inState = {
                click: !1,
                hover: !1,
                focus: !1
            }, this.$element[0] instanceof document.constructor && !this.options.selector) throw new Error("`selector` option must be specified when initializing " + this.type + " on the window.document object!");
        for (var i = this.options.trigger.split(" "), a = i.length; a--;) {
            var o = i[a];
            if ("click" == o) this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this)); else if ("manual" != o) {
                var s = "hover" == o ? "mouseenter" : "focusin", c = "hover" == o ? "mouseleave" : "focusout";
                this.$element.on(s + "." + this.type, this.options.selector, e.proxy(this.enter, this)), this.$element.on(c + "." + this.type, this.options.selector, e.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = e.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    }, t.prototype.getDefaults = function () {
        return t.DEFAULTS
    }, t.prototype.getOptions = function (t) {
        return t = e.extend({}, this.getDefaults(), this.$element.data(), t), t.delay && "number" == typeof t.delay && (t.delay = {
            show: t.delay,
            hide: t.delay
        }), t
    }, t.prototype.getDelegateOptions = function () {
        var t = {}, n = this.getDefaults();
        return this._options && e.each(this._options, function (e, r) {
            n[e] != r && (t[e] = r)
        }), t
    }, t.prototype.enter = function (t) {
        var n = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type);
        return n || (n = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, n)), t instanceof e.Event && (n.inState["focusin" == t.type ? "focus" : "hover"] = !0), n.tip().hasClass("in") || "in" == n.hoverState ? void(n.hoverState = "in") : (clearTimeout(n.timeout), n.hoverState = "in", n.options.delay && n.options.delay.show ? void(n.timeout = setTimeout(function () {
            "in" == n.hoverState && n.show()
        }, n.options.delay.show)) : n.show())
    }, t.prototype.isInStateTrue = function () {
        for (var e in this.inState) if (this.inState[e]) return !0;
        return !1
    }, t.prototype.leave = function (t) {
        var n = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type);
        return n || (n = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, n)), t instanceof e.Event && (n.inState["focusout" == t.type ? "focus" : "hover"] = !1), n.isInStateTrue() ? void 0 : (clearTimeout(n.timeout), n.hoverState = "out", n.options.delay && n.options.delay.hide ? void(n.timeout = setTimeout(function () {
            "out" == n.hoverState && n.hide()
        }, n.options.delay.hide)) : n.hide())
    }, t.prototype.show = function () {
        var n = e.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            this.$element.trigger(n);
            var r = e.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]);
            if (n.isDefaultPrevented() || !r) return;
            var i = this, a = this.tip(), o = this.getUID(this.type);
            this.setContent(), a.attr("id", o), this.$element.attr("aria-describedby", o), this.options.animation && a.addClass("fade");
            var s = "function" == typeof this.options.placement ? this.options.placement.call(this, a[0], this.$element[0]) : this.options.placement,
                c = /\s?auto?\s?/i, d = c.test(s);
            d && (s = s.replace(c, "") || "top"), a.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(s).data("bs." + this.type, this), this.options.container ? a.appendTo(this.options.container) : a.insertAfter(this.$element), this.$element.trigger("inserted.bs." + this.type);
            var l = this.getPosition(), u = a[0].offsetWidth, f = a[0].offsetHeight;
            if (d) {
                var h = s, p = this.getPosition(this.$viewport);
                s = "bottom" == s && l.bottom + f > p.bottom ? "top" : "top" == s && l.top - f < p.top ? "bottom" : "right" == s && l.right + u > p.width ? "left" : "left" == s && l.left - u < p.left ? "right" : s, a.removeClass(h).addClass(s)
            }
            var m = this.getCalculatedOffset(s, l, u, f);
            this.applyPlacement(m, s);
            var v = function () {
                var e = i.hoverState;
                i.$element.trigger("shown.bs." + i.type), i.hoverState = null, "out" == e && i.leave(i)
            };
            e.support.transition && this.$tip.hasClass("fade") ? a.one("bsTransitionEnd", v).emulateTransitionEnd(t.TRANSITION_DURATION) : v();
        }
    }, t.prototype.applyPlacement = function (t, n) {
        var r = this.tip(), i = r[0].offsetWidth, a = r[0].offsetHeight, o = parseInt(r.css("margin-top"), 10),
            s = parseInt(r.css("margin-left"), 10);
        isNaN(o) && (o = 0), isNaN(s) && (s = 0), t.top += o, t.left += s, e.offset.setOffset(r[0], e.extend({
            using: function (e) {
                r.css({top: Math.round(e.top), left: Math.round(e.left)})
            }
        }, t), 0), r.addClass("in");
        var c = r[0].offsetWidth, d = r[0].offsetHeight;
        "top" == n && d != a && (t.top = t.top + a - d);
        var l = this.getViewportAdjustedDelta(n, t, c, d);
        l.left ? t.left += l.left : t.top += l.top;
        var u = /top|bottom/.test(n), f = u ? 2 * l.left - i + c : 2 * l.top - a + d,
            h = u ? "offsetWidth" : "offsetHeight";
        r.offset(t), this.replaceArrow(f, r[0][h], u)
    }, t.prototype.replaceArrow = function (e, t, n) {
        this.arrow().css(n ? "left" : "top", 50 * (1 - e / t) + "%").css(n ? "top" : "left", "")
    }, t.prototype.setContent = function () {
        var e = this.tip(), t = this.getTitle();
        e.find(".tooltip-inner")[this.options.html ? "html" : "text"](t), e.removeClass("fade in top bottom left right")
    }, t.prototype.hide = function (n) {
        function d() {
            "in" != r.hoverState && i.detach(), r.$element.removeAttr("aria-describedby").trigger("hidden.bs." + r.type), n && n()
        }

        var r = this, i = e(this.$tip), a = e.Event("hide.bs." + this.type);
        return this.$element.trigger(a), a.isDefaultPrevented() ? void 0 : (i.removeClass("in"), e.support.transition && i.hasClass("fade") ? i.one("bsTransitionEnd", d).emulateTransitionEnd(t.TRANSITION_DURATION) : d(), this.hoverState = null, this)
    }, t.prototype.fixTitle = function () {
        var e = this.$element;
        (e.attr("title") || "string" != typeof e.attr("data-original-title")) && e.attr("data-original-title", e.attr("title") || "").attr("title", "")
    }, t.prototype.hasContent = function () {
        return this.getTitle()
    }, t.prototype.getPosition = function (t) {
        t = t || this.$element;
        var n = t[0], r = "BODY" == n.tagName, i = n.getBoundingClientRect();
        null == i.width && (i = e.extend({}, i, {width: i.right - i.left, height: i.bottom - i.top}));
        var a = r ? {top: 0, left: 0} : t.offset(),
            o = {scroll: r ? document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop()},
            s = r ? {width: e(window).width(), height: e(window).height()} : null;
        return e.extend({}, i, o, s, a)
    }, t.prototype.getCalculatedOffset = function (e, t, n, r) {
        return "bottom" == e ? {
            top: t.top + t.height,
            left: t.left + t.width / 2 - n / 2
        } : "top" == e ? {
            top: t.top - r,
            left: t.left + t.width / 2 - n / 2
        } : "left" == e ? {top: t.top + t.height / 2 - r / 2, left: t.left - n} : {
            top: t.top + t.height / 2 - r / 2,
            left: t.left + t.width
        }
    }, t.prototype.getViewportAdjustedDelta = function (e, t, n, r) {
        var i = {top: 0, left: 0};
        if (!this.$viewport) return i;
        var a = this.options.viewport && this.options.viewport.padding || 0, o = this.getPosition(this.$viewport);
        if (/right|left/.test(e)) {
            var s = t.top - a - o.scroll, c = t.top + a - o.scroll + r;
            s < o.top ? i.top = o.top - s : c > o.top + o.height && (i.top = o.top + o.height - c)
        } else {
            var d = t.left - a, l = t.left + a + n;
            d < o.left ? i.left = o.left - d : l > o.right && (i.left = o.left + o.width - l)
        }
        return i
    }, t.prototype.getTitle = function () {
        var e, t = this.$element, n = this.options;
        return e = t.attr("data-original-title") || ("function" == typeof n.title ? n.title.call(t[0]) : n.title)
    }, t.prototype.getUID = function (e) {
        do e += ~~(1e6 * Math.random()); while (document.getElementById(e));
        return e
    }, t.prototype.tip = function () {
        if (!this.$tip && (this.$tip = e(this.options.template), 1 != this.$tip.length)) throw new Error(this.type + " `template` option must consist of exactly 1 top-level element!");
        return this.$tip
    }, t.prototype.arrow = function () {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    }, t.prototype.enable = function () {
        this.enabled = !0
    }, t.prototype.disable = function () {
        this.enabled = !1
    }, t.prototype.toggleEnabled = function () {
        this.enabled = !this.enabled
    }, t.prototype.toggle = function (t) {
        var n = this;
        t && (n = e(t.currentTarget).data("bs." + this.type), n || (n = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, n))), t ? (n.inState.click = !n.inState.click, n.isInStateTrue() ? n.enter(n) : n.leave(n)) : n.tip().hasClass("in") ? n.leave(n) : n.enter(n)
    }, t.prototype.destroy = function () {
        var e = this;
        clearTimeout(this.timeout), this.hide(function () {
            e.$element.off("." + e.type).removeData("bs." + e.type), e.$tip && e.$tip.detach(), e.$tip = null, e.$arrow = null, e.$viewport = null
        })
    };
    var n = e.fn.tooltip;
    e.fn.tooltip = b, e.fn.tooltip.Constructor = t, e.fn.tooltip.noConflict = function () {
        return e.fn.tooltip = n, this
    }
}(jQuery), +function (e) {
    function b(n) {
        return this.each(function () {
            var r = e(this), i = r.data("bs.popover"), a = "object" == typeof n && n;
            (i || !/destroy|hide/.test(n)) && (i || r.data("bs.popover", i = new t(this, a)), "string" == typeof n && i[n]())
        })
    }

    var t = function (e, t) {
        this.init("popover", e, t)
    };
    if (!e.fn.tooltip) throw new Error("Popover requires tooltip.js");
    t.VERSION = "3.3.6", t.DEFAULTS = e.extend({}, e.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }), t.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype), t.prototype.constructor = t, t.prototype.getDefaults = function () {
        return t.DEFAULTS
    }, t.prototype.setContent = function () {
        var e = this.tip(), t = this.getTitle(), n = this.getContent();
        e.find(".popover-title")[this.options.html ? "html" : "text"](t), e.find(".popover-content").children().detach().end()[this.options.html ? "string" == typeof n ? "html" : "append" : "text"](n), e.removeClass("fade top bottom left right in"), e.find(".popover-title").html() || e.find(".popover-title").hide()
    }, t.prototype.hasContent = function () {
        return this.getTitle() || this.getContent()
    }, t.prototype.getContent = function () {
        var e = this.$element, t = this.options;
        return e.attr("data-content") || ("function" == typeof t.content ? t.content.call(e[0]) : t.content)
    }, t.prototype.arrow = function () {
        return this.$arrow = this.$arrow || this.tip().find(".arrow")
    };
    var n = e.fn.popover;
    e.fn.popover = b, e.fn.popover.Constructor = t, e.fn.popover.noConflict = function () {
        return e.fn.popover = n, this
    }
}(jQuery), +function (e) {
    function b(t, n) {
        this.$body = e(document.body), this.$scrollElement = e(e(t).is(document.body) ? window : t), this.options = e.extend({}, b.DEFAULTS, n), this.selector = (this.options.target || "") + " .nav li > a", this.offsets = [], this.targets = [], this.activeTarget = null, this.scrollHeight = 0, this.$scrollElement.on("scroll.bs.scrollspy", e.proxy(this.process, this)), this.refresh(), this.process()
    }

    function c(t) {
        return this.each(function () {
            var n = e(this), r = n.data("bs.scrollspy"), i = "object" == typeof t && t;
            r || n.data("bs.scrollspy", r = new b(this, i)), "string" == typeof t && r[t]()
        })
    }

    b.VERSION = "3.3.6", b.DEFAULTS = {offset: 10}, b.prototype.getScrollHeight = function () {
        return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }, b.prototype.refresh = function () {
        var t = this, n = "offset", r = 0;
        this.offsets = [], this.targets = [], this.scrollHeight = this.getScrollHeight(), e.isWindow(this.$scrollElement[0]) || (n = "position", r = this.$scrollElement.scrollTop()), this.$body.find(this.selector).map(function () {
            var t = e(this), i = t.data("target") || t.attr("href"), a = /^#./.test(i) && e(i);
            return a && a.length && a.is(":visible") && [[a[n]().top + r, i]] || null
        }).sort(function (e, t) {
            return e[0] - t[0]
        }).each(function () {
            t.offsets.push(this[0]), t.targets.push(this[1])
        })
    }, b.prototype.process = function () {
        var e, t = this.$scrollElement.scrollTop() + this.options.offset, n = this.getScrollHeight(),
            r = this.options.offset + n - this.$scrollElement.height(), i = this.offsets, a = this.targets,
            o = this.activeTarget;
        if (this.scrollHeight != n && this.refresh(), t >= r) return o != (e = a[a.length - 1]) && this.activate(e);
        if (o && t < i[0]) return this.activeTarget = null, this.clear();
        for (e = i.length; e--;) o != a[e] && t >= i[e] && (void 0 === i[e + 1] || t < i[e + 1]) && this.activate(a[e])
    }, b.prototype.activate = function (t) {
        this.activeTarget = t, this.clear();
        var n = this.selector + '[data-target="' + t + '"],' + this.selector + '[href="' + t + '"]',
            r = e(n).parents("li").addClass("active");
        r.parent(".dropdown-menu").length && (r = r.closest("li.dropdown").addClass("active")), r.trigger("activate.bs.scrollspy")
    }, b.prototype.clear = function () {
        e(this.selector).parentsUntil(this.options.target, ".active").removeClass("active")
    };
    var t = e.fn.scrollspy;
    e.fn.scrollspy = c, e.fn.scrollspy.Constructor = b, e.fn.scrollspy.noConflict = function () {
        return e.fn.scrollspy = t, this
    }, e(window).on("load.bs.scrollspy.data-api", function () {
        e('[data-spy="scroll"]').each(function () {
            var t = e(this);
            c.call(t, t.data())
        })
    })
}(jQuery), +function (e) {
    function b(n) {
        return this.each(function () {
            var r = e(this), i = r.data("bs.tab");
            i || r.data("bs.tab", i = new t(this)), "string" == typeof n && i[n]()
        })
    }

    var t = function (t) {
        this.element = e(t)
    };
    t.VERSION = "3.3.6", t.TRANSITION_DURATION = 150, t.prototype.show = function () {
        var t = this.element, n = t.closest("ul:not(.dropdown-menu)"), r = t.data("target");
        if (r || (r = t.attr("href"), r = r && r.replace(/.*(?=#[^\s]*$)/, "")), !t.parent("li").hasClass("active")) {
            var i = n.find(".active:last a"), a = e.Event("hide.bs.tab", {relatedTarget: t[0]}),
                o = e.Event("show.bs.tab", {relatedTarget: i[0]});
            if (i.trigger(a), t.trigger(o), !o.isDefaultPrevented() && !a.isDefaultPrevented()) {
                var s = e(r);
                this.activate(t.closest("li"), n), this.activate(s, s.parent(), function () {
                    i.trigger({type: "hidden.bs.tab", relatedTarget: t[0]}), t.trigger({
                        type: "shown.bs.tab",
                        relatedTarget: i[0]
                    })
                })
            }
        }
    }, t.prototype.activate = function (n, r, i) {
        function f() {
            a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !1), n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded", !0), o ? (n[0].offsetWidth, n.addClass("in")) : n.removeClass("fade"), n.parent(".dropdown-menu").length && n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !0), i && i()
        }

        var a = r.find("> .active"),
            o = i && e.support.transition && (a.length && a.hasClass("fade") || !!r.find("> .fade").length);
        a.length && o ? a.one("bsTransitionEnd", f).emulateTransitionEnd(t.TRANSITION_DURATION) : f(), a.removeClass("in")
    };
    var n = e.fn.tab;
    e.fn.tab = b, e.fn.tab.Constructor = t, e.fn.tab.noConflict = function () {
        return e.fn.tab = n, this
    };
    var r = function (t) {
        t.preventDefault(), b.call(e(this), "show")
    };
    e(document).on("click.bs.tab.data-api", '[data-toggle="tab"]', r).on("click.bs.tab.data-api", '[data-toggle="pill"]', r)
}(jQuery), +function (e) {
    function b(n) {
        return this.each(function () {
            var r = e(this), i = r.data("bs.affix"), a = "object" == typeof n && n;
            i || r.data("bs.affix", i = new t(this, a)), "string" == typeof n && i[n]()
        })
    }

    var t = function (n, r) {
        this.options = e.extend({}, t.DEFAULTS, r), this.$target = e(this.options.target).on("scroll.bs.affix.data-api", e.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", e.proxy(this.checkPositionWithEventLoop, this)), this.$element = e(n), this.affixed = null, this.unpin = null, this.pinnedOffset = null, this.checkPosition()
    };
    t.VERSION = "3.3.6", t.RESET = "affix affix-top affix-bottom", t.DEFAULTS = {
        offset: 0,
        target: window
    }, t.prototype.getState = function (e, t, n, r) {
        var i = this.$target.scrollTop(), a = this.$element.offset(), o = this.$target.height();
        if (null != n && "top" == this.affixed) return n > i ? "top" : !1;
        if ("bottom" == this.affixed) return null != n ? i + this.unpin <= a.top ? !1 : "bottom" : e - r >= i + o ? !1 : "bottom";
        var s = null == this.affixed, c = s ? i : a.top, d = s ? o : t;
        return null != n && n >= i ? "top" : null != r && c + d >= e - r ? "bottom" : !1
    }, t.prototype.getPinnedOffset = function () {
        if (this.pinnedOffset) return this.pinnedOffset;
        this.$element.removeClass(t.RESET).addClass("affix");
        var e = this.$target.scrollTop(), n = this.$element.offset();
        return this.pinnedOffset = n.top - e
    }, t.prototype.checkPositionWithEventLoop = function () {
        setTimeout(e.proxy(this.checkPosition, this), 1)
    }, t.prototype.checkPosition = function () {
        if (this.$element.is(":visible")) {
            var n = this.$element.height(), r = this.options.offset, i = r.top, a = r.bottom,
                o = Math.max(e(document).height(), e(document.body).height());
            "object" != typeof r && (a = i = r), "function" == typeof i && (i = r.top(this.$element)), "function" == typeof a && (a = r.bottom(this.$element));
            var s = this.getState(o, n, i, a);
            if (this.affixed != s) {
                null != this.unpin && this.$element.css("top", "");
                var c = "affix" + (s ? "-" + s : ""), d = e.Event(c + ".bs.affix");
                if (this.$element.trigger(d), d.isDefaultPrevented()) return;
                this.affixed = s, this.unpin = "bottom" == s ? this.getPinnedOffset() : null, this.$element.removeClass(t.RESET).addClass(c).trigger(c.replace("affix", "affixed") + ".bs.affix")
            }
            "bottom" == s && this.$element.offset({top: o - n - a})
        }
    };
    var n = e.fn.affix;
    e.fn.affix = b, e.fn.affix.Constructor = t, e.fn.affix.noConflict = function () {
        return e.fn.affix = n, this
    }, e(window).on("load", function () {
        e('[data-spy="affix"]').each(function () {
            var t = e(this), n = t.data();
            n.offset = n.offset || {}, null != n.offsetBottom && (n.offset.bottom = n.offsetBottom), null != n.offsetTop && (n.offset.top = n.offsetTop), b.call(t, n)
        })
    })
}(jQuery), define("bootstrap", ["jquery"], function () {
});
var __extends = this && this.__extends || function (e, t) {
    function __() {
        this.constructor = e
    }

    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
    e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype, new __)
};
define("app-utils", ["require", "exports"], function (e, t) {
    var n;
    !function (e) {
        function addCloseHandler(e) {
            chrome.runtime.getBackgroundPage(function (t) {
                chrome.app.window.current().onClosed.addListener(function () {
                    e(t)
                })
            })
        }

        e.addCloseHandler = addCloseHandler
    }(n = t.appUtils || (t.appUtils = {}))
}), define("data-utils", ["require", "exports"], function (e, t) {
    var n, r = /0000([A-Fa-f0-9]{4})-0000-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{12}/;
    !function (e) {
        function convertUUID(e) {
            return e.replace(r, "$1")
        }

        function ua2hex(e) {
            var t = "";
            return e.forEach(function (e) {
                t += "0".concat(e.toString(16)).substr(-2)
            }), t
        }

        function ua2text(e) {
            for (var t = "", n = 0; n < e.length; n++) t += String.fromCharCode(e[n]);
            return t
        }

        function reverseToHex(e) {
            return this.ua2hex(e.slice().reverse())
        }

        function text2array(e) {
            for (var t = [], n = 0; n < e.length; n++) t.push(e.charCodeAt(n));
            return t
        }

        function removeFromArray(e, t) {
            for (; ;) {
                var n = e.indexOf(t);
                if (!(n > -1)) break;
                e.splice(n, 1)
            }
        }

        function roundToPlaces(e, t) {
            var n = Math.pow(10, t);
            return Math.round(e * n) / n
        }

        function mixin(e, t) {
            for (var n in t) e[n] = t[n]
        }

        e.convertUUID = convertUUID, e.ua2hex = ua2hex, e.ua2text = ua2text, e.reverseToHex = reverseToHex, e.text2array = text2array, e.removeFromArray = removeFromArray, e.roundToPlaces = roundToPlaces, e.mixin = mixin
    }(n = t.dataUtils || (t.dataUtils = {}))
}), define("device-manager/idevice-manager", ["require", "exports"], function (e, t) {
    !function (e) {
        e[e.NOT_CONNECTED = 0] = "NOT_CONNECTED", e[e.PENDING = 1] = "PENDING", e[e.CONNECTED = 2] = "CONNECTED", e[e.READY = 3] = "READY"
    }(t.EConnectionState || (t.EConnectionState = {}));
    t.EConnectionState
}), define("types", ["require", "exports"], function (e, t) {
}), define("promise-utils", ["require", "exports"], function (e, t) {
    function reduce(e) {
        return e.reduce(function (e, t) {
            return e.then(t)
        }, Promise.resolve())
    }

    function makeDelay(e) {
        return new Promise(function (t, n) {
            setTimeout(function () {
                t()
            }, e)
        })
    }

    t.reduce = reduce, t.makeDelay = makeDelay
}), define("device-definition", ["require", "exports", "promise-utils"], function (e, t, n) {
    var r = function () {
        function DeviceDefinition() {
            this.state = [], this.characteristicDefinitions = [], this.descriptorDefinitions = [], this.characteristicDefsByName = {}, this.characteristicDefsByUuid = {}, this.descriptorDefsByName = {}, this.descriptorDefsByUuid = {}, this.commands = {}, this.testCommands = {}
        }

        return DeviceDefinition.prototype.init = function (e, t) {
            this.ble = e, this.deviceManager = t
        }, Object.defineProperty(DeviceDefinition.prototype, "testCommandNames", {
            get: function () {
                return Object.keys(this.testCommands)
            }, enumerable: !0, configurable: !0
        }), DeviceDefinition.prototype.getCommand = function (e) {
            return this.commands[e]
        }, DeviceDefinition.prototype.notifyReady = function () {
            return this.ble.onCharacteristicValueChanged.add(this.notificationHandler, this), this.startNotifications()
        }, DeviceDefinition.prototype.notifyDisconnected = function (e) {
            this.ble.onCharacteristicValueChanged.remove(this.notificationHandler, this)
        }, DeviceDefinition.prototype.getCharacteristicByUuid = function (e) {
            return this.characteristicDefsByUuid[e]
        }, DeviceDefinition.prototype.getDescriptorByUuid = function (e) {
            return this.descriptorDefsByUuid[e]
        }, DeviceDefinition.prototype.addCommand = function (e) {
            this.commands[e.name] = e, e.test && (this.testCommands[e.name] = e)
        }, DeviceDefinition.prototype.addCharacteristicDefinition = function (e) {
            e.uuid = this.deviceManager.formatUuidName(e.uuidStr), this.characteristicDefinitions.push(e), this.characteristicDefsByName[e.name] = e, this.characteristicDefsByUuid[e.uuid] = e
        }, DeviceDefinition.prototype.addDescriptorDefinition = function (e) {
            e.uuid = this.deviceManager.formatUuidName(e.uuidStr), this.descriptorDefinitions.push(e), this.descriptorDefsByName[e.name] = e, this.descriptorDefsByUuid[e.uuid] = e
        }, DeviceDefinition.prototype.writeCharacteristicValue = function (e, t) {
            var n = this.characteristicDefsByName[e], r = new Uint8Array(t).buffer;
            return this.ble.writeCharacteristicValue(n.characteristic.instanceId, r)
        }, DeviceDefinition.prototype.writeDescriptorValue = function (e, t) {
            var n = this.descriptorDefsByName[e], r = new Uint8Array(t).buffer;
            return this.ble.writeDescriptorValue(n.descriptor.instanceId, r)
        }, DeviceDefinition.prototype.notificationHandler = function (e) {
            var t = this.characteristicDefsByUuid[e.uuid];
            if (t && e.instanceId == t.characteristic.instanceId && t.notifcationHandler) {
                var n = new Uint8Array(e.value);
                t.notifcationHandler(n)
            }
        }, DeviceDefinition.prototype.startNotifications = function () {
            var e = this, t = Object.keys(this.characteristicDefsByUuid), r = [];
            return t.forEach(function (t) {
                var n = e.characteristicDefsByUuid[t];
                n.notifcationHandler && r.push(function () {
                    return e.ble.startCharacteristicNotifications(n.characteristic.instanceId)
                })
            }), n.reduce(r)
        }, DeviceDefinition
    }();
    t.DeviceDefinition = r
}), define("device-manager/abstract-device-manager", ["require", "exports", "device-manager/idevice-manager", "data-utils", "signals"], function (e, t, n, r, i) {
    var a = function () {
        function AbstractDeviceManager() {
            this.onDeviceFound = new i.Signal, this.onDeviceConnected = new i.Signal, this.onDeviceDisconnected = new i.Signal, this.foundDevices = [], this.connectedDevices = [], this.devicesByKey = {}
        }

        return AbstractDeviceManager.prototype.getConnectedDeviceByAddress = function (e) {
            return this.getDeviceByAddress(this.connectedDevices, e)
        }, AbstractDeviceManager.prototype.getDeviceByAddress = function (e, t) {
            return e.find(function (e) {
                return e.macAddress == t
            })
        }, AbstractDeviceManager.prototype.addConnectedDevice = function (e) {
            r.dataUtils.removeFromArray(this.foundDevices, e), e.state = n.EConnectionState.CONNECTED, this.connectedDevices.push(e), this.onDeviceConnected.dispatch(e)
        }, AbstractDeviceManager.prototype.removeConnectedDevice = function (e) {
            r.dataUtils.removeFromArray(this.connectedDevices, e), e.state = n.EConnectionState.NOT_CONNECTED, this.onDeviceDisconnected.dispatch(e)
        }, AbstractDeviceManager.prototype.addFoundDevice = function (e, t) {
            this.devicesByKey[e] = t, this.foundDevices.push(t), this.onDeviceFound.dispatch(t)
        }, AbstractDeviceManager.prototype.removeFoundDevice = function (e, t) {
            delete this.devicesByKey[e], r.dataUtils.removeFromArray(this.foundDevices, t)
        }, AbstractDeviceManager.prototype.resetFoundDevices = function () {
            this.devicesByKey = {}, this.foundDevices.splice(0)
        }, AbstractDeviceManager
    }();
    t.AbstractDeviceManager = a
}), define("chrome/types", ["require", "exports"], function (e, t) {
}), define("chrome/device-manager", ["require", "exports", "device-manager/idevice-manager", "data-utils", "device-manager/abstract-device-manager"], function (e, t, n, r, i) {
    var a = function (e) {
        function DeviceManager() {
            var t = this;
            e.apply(this, arguments), this.deviceScanDefs = [], this.addCallback = function (e) {
                if (!t.devicesByKey[e.address]) {
                    console.log("found", e);
                    var i = t.deviceScanDefs.find(function (t) {
                        return t.check(e)
                    });
                    if (i) {
                        var a = {
                            displayName: i.name,
                            handlerId: i.handlerId,
                            macAddress: e.address,
                            state: n.EConnectionState.NOT_CONNECTED,
                            handler: null
                        };
                        r.dataUtils.mixin(a, e);
                        var o = a;
                        t.addFoundDevice(e.address, o)
                    }
                }
            }, this.removeCallback = function (e) {
                t.removeFoundDevice(e.address, e)
            }
        }

        return __extends(DeviceManager, e), DeviceManager.prototype.setScanDefs = function (e) {
            this.deviceScanDefs = e
        }, DeviceManager.prototype.formatUuidName = function (e) {
            return e.toLowerCase()
        }, DeviceManager.prototype.init = function () {
            var e = this;
            return new Promise(function (t, n) {
                chrome.bluetooth.onDeviceRemoved.addListener(function (t) {
                    var n = e.getConnectedDeviceByAddress(t.address);
                    n && e.removeConnectedDevice(n)
                }), chrome.bluetooth.getAdapterState(function (e) {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : e && e.available ? t("chrome.bluetooth (" + e.name + ")") : n(new Error("No internal bluetooth adapter found."))
                })
            })
        }, DeviceManager.prototype.startScanning = function () {
            var e = this;
            return this.stopScanning().then(function () {
                return new Promise(function (t, n) {
                    chrome.bluetooth.onDeviceAdded.addListener(e.addCallback), chrome.bluetooth.onDeviceChanged.addListener(e.addCallback), chrome.bluetooth.onDeviceRemoved.addListener(e.removeCallback), e.resetFoundDevices(), chrome.bluetooth.startDiscovery(function () {
                        chrome.runtime.lastError ? n(chrome.runtime.lastError) : t()
                    })
                })
            })
        }, DeviceManager.prototype.stopScanning = function () {
            var e = this;
            return new Promise(function (t, n) {
                chrome.bluetooth.onDeviceAdded.removeListener(e.addCallback), chrome.bluetooth.onDeviceChanged.removeListener(e.addCallback), chrome.bluetooth.onDeviceRemoved.removeListener(e.removeCallback), chrome.bluetooth.stopDiscovery(function () {
                    chrome.runtime.lastError && console.warn(chrome.runtime.lastError), t()
                })
            })
        }, DeviceManager.prototype.reset = function () {
            return Promise.resolve()
        }, DeviceManager.prototype.destroy = function (e) {
            this.foundDevices.concat(this.connectedDevices).forEach(function (t) {
                e.chrome.bluetoothLowEnergy.disconnect(t.macAddress, function () {
                    e.console.log("disconnected:", t)
                })
            })
        }, DeviceManager.prototype.waitForStateChange = function () {
            return new Promise(function (e, t) {
                var n = function (t) {
                    chrome.bluetooth.onAdapterStateChanged.removeListener(n), e()
                };
                chrome.bluetooth.onAdapterStateChanged.addListener(n)
            })
        }, DeviceManager.prototype.connect = function (e, t) {
            var i = this;
            console.log("connect", e);
            var a = this.devicesByKey[e];
            return a.state = n.EConnectionState.PENDING, this.stopScanning().then(function () {
                return new Promise(function (n, r) {
                    console.log("connect in promise. now connect"), chrome.bluetoothLowEnergy.connect(e, t, function () {
                        console.log("connect. done"), chrome.runtime.lastError ? (console.log("connected error"), r(chrome.runtime.lastError)) : (console.log("connected", a), i.addConnectedDevice(a), n())
                    })
                })
            }).then(function () {
                function filterUuids(e) {
                    return e.map(function (e) {
                        return r.dataUtils.convertUUID(e)
                    }).filter(function (e) {
                        return e != t
                    })
                }

                var t = "1800", n = a, i = filterUuids(n.uuids);
                console.log("declared uuids", i);
                var o = i.length;
                return Promise.race([new Promise(function (e, n) {
                    var r = o, i = function (n) {
                        console.log("service added", n.uuid), n.uuid != t && r--, 0 == r && (chrome.bluetoothLowEnergy.onServiceAdded.removeListener(i), e())
                    };
                    chrome.bluetoothLowEnergy.onServiceAdded.addListener(i)
                }), new Promise(function (t, n) {
                    chrome.bluetoothLowEnergy.getServices(e, function (e) {
                        var n = e.map(function (e) {
                            return e.uuid
                        });
                        n = filterUuids(n), console.log("get services", n), n.length >= o && t()
                    })
                })])
            })
        }, DeviceManager.prototype.disconnect = function (e) {
            var t = this, r = this.getConnectedDeviceByAddress(e);
            return r.state = n.EConnectionState.PENDING, new Promise(function (n, i) {
                chrome.bluetoothLowEnergy.disconnect(e, function () {
                    chrome.runtime.lastError ? i(chrome.runtime.lastError) : (t.removeConnectedDevice(r), n())
                })
            })
        }, DeviceManager
    }(i.AbstractDeviceManager);
    t.DeviceManager = a
}), define("chrome/chrome-ble", ["require", "exports", "signals"], function (e, t, n) {
    var r = function () {
        function ChromeBle(e) {
            var t = this;
            this.deviceManager = e, this.onServiceAdded = new n.Signal, this.onServiceChanged = new n.Signal, this.onServiceRemoved = new n.Signal, this.onCharacteristicValueChanged = new n.Signal, this.onDescriptorValueChanged = new n.Signal, chrome.bluetoothLowEnergy.onServiceAdded.addListener(function (e) {
                t.onServiceAdded.dispatch(e)
            }), chrome.bluetoothLowEnergy.onServiceChanged.addListener(function (e) {
                t.onServiceChanged.dispatch(e)
            }), chrome.bluetoothLowEnergy.onServiceRemoved.addListener(function (e) {
                t.onServiceRemoved.dispatch(e)
            }), chrome.bluetoothLowEnergy.onCharacteristicValueChanged.addListener(function (e) {
                t.onCharacteristicValueChanged.dispatch(e)
            }), chrome.bluetoothLowEnergy.onDescriptorValueChanged.addListener(function (e) {
                t.onDescriptorValueChanged.dispatch(e)
            })
        }

        return ChromeBle.prototype.connect = function (e, t) {
            return this.deviceManager.connect(e, t)
        }, ChromeBle.prototype.disconnect = function (e) {
            return this.deviceManager.disconnect(e)
        }, ChromeBle.prototype.getService = function (e) {
            return new Promise(function (t, n) {
                chrome.bluetoothLowEnergy.getService(e, function (e) {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : t(e)
                })
            })
        }, ChromeBle.prototype.getServices = function (e) {
            return new Promise(function (t, n) {
                chrome.bluetoothLowEnergy.getServices(e, function (e) {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : t(e)
                })
            })
        }, ChromeBle.prototype.getCharacteristic = function (e) {
            return new Promise(function (t, n) {
                chrome.bluetoothLowEnergy.getCharacteristic(e, function (e) {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : t(e)
                })
            })
        }, ChromeBle.prototype.getCharacteristics = function (e) {
            return new Promise(function (t, n) {
                chrome.bluetoothLowEnergy.getCharacteristics(e, function (e) {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : t(e)
                })
            })
        }, ChromeBle.prototype.getIncludedServices = function (e) {
            return new Promise(function (t, n) {
                chrome.bluetoothLowEnergy.getCharacteristics(e, function (e) {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : t(e)
                })
            })
        }, ChromeBle.prototype.getDescriptor = function (e) {
            return new Promise(function (t, n) {
                chrome.bluetoothLowEnergy.getDescriptor(e, function (e) {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : t(e)
                })
            })
        }, ChromeBle.prototype.getDescriptors = function (e) {
            return new Promise(function (t, n) {
                chrome.bluetoothLowEnergy.getDescriptors(e, function (e) {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : t(e)
                })
            })
        }, ChromeBle.prototype.readCharacteristicValue = function (e) {
            return new Promise(function (t, n) {
                chrome.bluetoothLowEnergy.readCharacteristicValue(e, function (e) {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : t(e)
                })
            })
        }, ChromeBle.prototype.writeCharacteristicValue = function (e, t) {
            return new Promise(function (n, r) {
                chrome.bluetoothLowEnergy.writeCharacteristicValue(e, t, function () {
                    chrome.runtime.lastError ? r(chrome.runtime.lastError) : n()
                })
            })
        }, ChromeBle.prototype.startCharacteristicNotifications = function (e, t) {
            return new Promise(function (n, r) {
                chrome.bluetoothLowEnergy.startCharacteristicNotifications(e, t, function () {
                    var e = chrome.runtime.lastError;
                    e && "Already notifying" != e.message ? r(chrome.runtime.lastError) : n()
                })
            })
        }, ChromeBle.prototype.stopCharacteristicNotifications = function (e) {
            return new Promise(function (t, n) {
                chrome.bluetoothLowEnergy.stopCharacteristicNotifications(e, function () {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : t()
                })
            })
        }, ChromeBle.prototype.readDescriptorValue = function (e) {
            return new Promise(function (t, n) {
                chrome.bluetoothLowEnergy.readDescriptorValue(e, function (e) {
                    chrome.runtime.lastError ? n(chrome.runtime.lastError) : t(e)
                })
            })
        }, ChromeBle.prototype.writeDescriptorValue = function (e, t) {
            return new Promise(function (n, r) {
                chrome.bluetoothLowEnergy.writeDescriptorValue(e, t, function () {
                    chrome.runtime.lastError ? r(chrome.runtime.lastError) : n()
                })
            })
        }, ChromeBle
    }();
    t.ChromeBle = r
}), define("promise-chain", ["require", "exports"], function (e, t) {
    function addPromise(e) {
        n = n ? n.then(e)["catch"](function (e) {
            return console.error(e), n = null, null
        }) : e()
    }

    var n;
    t.addPromise = addPromise
}), define("vendor/sbrick", ["require", "exports", "device-definition"], function (e, t, n) {
    var r = {};
    r[0] = "1800", r[1] = "180a", r[2] = "1d14d6ee-fd63-4fa1-bfa4-8f47b42119f0", r[3] = "4dc591b0-857c-41de-b5f1-15abda665b0c";
    var i = "ATR_QUICK_DRIVE", a = "ATR_REMOTE_CONTROL", o = function (e) {
        function SBrick() {
            e.apply(this, arguments)
        }

        return __extends(SBrick, e), SBrick.prototype.init = function (t, n) {
            var r = this;
            e.prototype.init.call(this, t, n), this.addCharacteristicDefinition({
                name: a,
                uuidStr: "02B8CBCC-0E25-4BDA-8790-A15F53E6010F"
            }), this.addCharacteristicDefinition({
                name: i,
                uuidStr: "489A6AE0-C1AB-4C9C-BDB2-11D373C1B7FB"
            }), this.addCommand({
                name: SBrick.SET_MOTORS, execute: function (e, t, n, i) {
                    var a = [e, t, n, i];
                    return 4 == a.filter(function (e) {
                        return 0 == e
                    }).length ? r.stopMotor() : r.setMotor(a)
                }
            }), this.addCommand({
                name: SBrick.ALL_MOTOR_START, test: !0, execute: function () {
                    return r.setMotor([255, 255, 255, 255])
                }
            }), this.addCommand({
                name: SBrick.ALL_MOTOR_STOP, test: !0, execute: function () {
                    return r.stopMotor()
                }
            }), this.addCommand({
                name: SBrick.LED_FLASH, test: !0, execute: function () {
                    return r.writeCharacteristicValue(a, [1, 4, 0, 1])
                }
            }), this.addCommand({
                name: SBrick.LED_GREEN, test: !0, execute: function () {
                    return r.writeCharacteristicValue(a, [1, 4, 0, 0])
                }
            }), this.addCommand({
                name: SBrick.RESET, execute: function () {
                    return r.stopMotor()
                }
            })
        }, SBrick.prototype.notifyReady = function () {
            var t = this;
            return e.prototype.notifyReady.call(this).then(function () {
                return t.writeCharacteristicValue(a, [13, 0])
            })
        }, SBrick.prototype.notifyDisconnected = function (t) {
            e.prototype.notifyDisconnected.call(this, t), this.clearMotorTimeout()
        }, SBrick.prototype.clearMotorTimeout = function () {
            clearTimeout(this.motorTimeoutId)
        }, SBrick.prototype.stopMotor = function () {
            return this.clearMotorTimeout(), this.writeCharacteristicValue(i, [0, 0, 0, 0])
        }, SBrick.prototype.setMotor = function (e) {
            return this.motorBytes = e, this.clearMotorTimeout(), this.sendMotorBytes()
        }, SBrick.prototype.sendMotorBytes = function () {
            var e = this.motorBytes[2];
            return this.motorBytes[2] = this.motorBytes[1], this.motorBytes[1] = e, this.writeCharacteristicValue(i, this.motorBytes)
        }, SBrick.ID = "sbrick", SBrick.SET_MOTORS = "SET_MOTORS", SBrick.ALL_MOTOR_START = "MOTOR_START", SBrick.ALL_MOTOR_STOP = "MOTOR_STOP", SBrick.LED_FLASH = "LED_FLASH", SBrick.LED_GREEN = "LED_GREEN", SBrick.RESET = "RESET", SBrick
    }(n.DeviceDefinition);
    t.SBrick = o
}), define("vendor/chrome/sbrick-scan-def", ["require", "exports", "vendor/sbrick"], function (e, t, n) {
    var r = function () {
        function SBrickScanDef() {
            this.name = "SBrick", this.handlerId = n.SBrick.ID
        }

        return SBrickScanDef.prototype.check = function (e) {
            return e.name == this.name
        }, SBrickScanDef
    }();
    t.SBrickScanDef = r
}), define("vendor/abstract-sphero", ["require", "exports", "device-definition", "promise-utils"], function (e, t, n, r) {
    var i = {};
    i[0] = "1800", i[1] = "1801", i[2] = "22bb746f-2ba0-7554-2d6f-726568705327", i[3] = "22bb746f-2bb0-7554-2d6f-726568705327", i[4] = "00001016-d102-11e1-9b23-00025b00a5a5", i[5] = "180a";
    var a = "UUID_ANTIDOS", o = "UUID_TXPOWER", s = "UUID_WAKE", c = "UUID_COMMANDS", d = "UUID_RESPONSE", l = 1,
        u = 32, f = 33, h = 48, p = 52, m = 0, v = function (e) {
            function AbstractSphero() {
                e.apply(this, arguments)
            }

            return __extends(AbstractSphero, e), AbstractSphero.prototype.init = function (t, n) {
                var i = this;
                e.prototype.init.call(this, t, n), this.addCharacteristicDefinition({
                    name: a,
                    uuidStr: "22BB746F-2BBD-7554-2D6F-726568705327"
                }), this.addCharacteristicDefinition({
                    name: o,
                    uuidStr: "22BB746F-2BB2-7554-2D6F-726568705327"
                }), this.addCharacteristicDefinition({
                    name: s,
                    uuidStr: "22BB746F-2BBF-7554-2D6F-726568705327"
                }), this.addCharacteristicDefinition({
                    name: c,
                    uuidStr: "22BB746F-2BA1-7554-2D6F-726568705327"
                }), this.addCharacteristicDefinition({
                    name: d,
                    uuidStr: "22BB746F-2BA6-7554-2D6F-726568705327"
                }), this.addCommand({
                    name: AbstractSphero.SET_TAIL_ON, execute: function () {
                        var e = i.createPacket(f, [255]);
                        return i.writeCharacteristicValue(c, e)
                    }
                }), this.addCommand({
                    name: AbstractSphero.SET_TAIL_OFF, execute: function () {
                        var e = i.createPacket(f, [0]);
                        return i.writeCharacteristicValue(c, e)
                    }
                }), this.addCommand({
                    name: AbstractSphero.SET_RGB, execute: function (e, t, n) {
                        var r = i.createPacket(u, [e, t, n, 255]);
                        return i.writeCharacteristicValue(c, r)
                    }
                }), this.addCommand({
                    name: AbstractSphero.SET_MOTION_TIMEOUT, execute: function (e) {
                        var t = Math.floor(e / 256), n = e % 256, r = i.createPacket(p, [t, n]);
                        return i.writeCharacteristicValue(c, r)
                    }
                }), this.addCommand({
                    name: AbstractSphero.SET_HEADING_SPEED, execute: function (e, t) {
                        var n = Math.floor(e / 256), r = e % 256, a = i.createPacket(h, [t, n, r, t > 0 ? 1 : 0]);
                        return i.writeCharacteristicValue(c, a)
                    }
                }), this.addCommand({
                    name: AbstractSphero.SET_HEADING, execute: function (e) {
                        var t = Math.floor(e / 256), n = e % 256, a = 0, o = i.createPacket(h, [a, t, n, 0]);
                        return i.writeCharacteristicValue(c, o).then(function () {
                            return r.makeDelay(500)
                        }).then(function () {
                            var e = i.createPacket(l, [0, 0]);
                            return i.writeCharacteristicValue(c, e)
                        })
                    }
                }), this.addCommand({
                    name: AbstractSphero.TAIL_ON, test: !0, execute: function () {
                        var e = i.createPacket(f, [255]);
                        return i.writeCharacteristicValue(c, e)
                    }
                }), this.addCommand({
                    name: AbstractSphero.TAIL_OFF, test: !0, execute: function () {
                        var e = i.createPacket(f, [0]);
                        return i.writeCharacteristicValue(c, e)
                    }
                }), this.addCommand({
                    name: AbstractSphero.TAIL_OFF_RGB_OFF, test: !0, execute: function () {
                        var e = i.createPacket(f, [0]);
                        return i.writeCharacteristicValue(c, e).then(function () {
                            return r.makeDelay(100)
                        }).then(function () {
                            var e = i.createPacket(u, [255, 0, 0, 255]);
                            return i.writeCharacteristicValue(c, e)
                        }).then(function () {
                            return r.makeDelay(500)
                        }).then(function () {
                            var e = i.createPacket(u, [0, 255, 0, 255]);
                            return i.writeCharacteristicValue(c, e)
                        }).then(function () {
                            return r.makeDelay(500)
                        }).then(function () {
                            var e = i.createPacket(u, [0, 0, 255, 255]);
                            return i.writeCharacteristicValue(c, e)
                        }).then(function () {
                            return r.makeDelay(500)
                        }).then(function () {
                            var e = i.createPacket(u, [0, 0, 0, 255]);
                            return i.writeCharacteristicValue(c, e)
                        })
                    }
                }), this.addCommand({
                    name: AbstractSphero.ROTATE_90, test: !0, execute: function () {
                        return i.writeCharacteristicValue(c, [255, 255, 2, 48, 0, 5, 0, 0, 90, 1, 109]).then(function () {
                            return r.makeDelay(500)
                        }).then(function () {
                            return i.writeCharacteristicValue(c, [255, 255, 2, 1, 0, 3, 0, 0, 249])
                        })
                    }
                }), this.addCommand({
                    name: AbstractSphero.RESET, execute: function () {
                        var e = i.createPacket(f, [0]);
                        return i.writeCharacteristicValue(c, e)
                    }
                })
            }, AbstractSphero.prototype.createPacket = function (e, t) {
                var n = 2, r = t.length + 1, i = n + e + m + r, a = [255, 255, n, e, m, r];
                return t.forEach(function (e) {
                    a.push(e), i += e
                }), i = i % 256 ^ 255, a.push(i), m = m + 1 & 255, a
            }, AbstractSphero.prototype.notifyReady = function () {
                var t = this;
                return e.prototype.notifyReady.call(this).then(function () {
                    return console.log("writing command for UUID_ANTIDOS"), t.writeCharacteristicValue(a, [48, 49, 49, 105, 51]).then(function () {
                        return console.log("writing command for UUID_TXPOWER"), t.writeCharacteristicValue(o, [7])
                    }).then(function () {
                        return console.log("writing command for UUID_WAKE"), t.writeCharacteristicValue(s, [1])
                    })
                })
            }, AbstractSphero.ID = "sphero", AbstractSphero.TAIL_ON = "TAIL_ON", AbstractSphero.TAIL_OFF = "TAIL_OFF", AbstractSphero.TAIL_OFF_RGB_OFF = "TAIL_OFF_RGB_OFF", AbstractSphero.ROTATE_90 = "ROTATE_90", AbstractSphero.RESET = "RESET", AbstractSphero.SET_RGB = "SET_RGB", AbstractSphero.SET_TAIL_ON = "SET_TAIL_ON", AbstractSphero.SET_TAIL_OFF = "SET_TAIL_OFF", AbstractSphero.SET_MOTION_TIMEOUT = "SET_MOTION_TIMEOUT", AbstractSphero.SET_HEADING_SPEED = "SET_HEADING_SPEED", AbstractSphero.SET_HEADING = "SET_HEADING", AbstractSphero.SET_SPEED = "SET_SPEED", AbstractSphero
        }(n.DeviceDefinition);
    t.AbstractSphero = v
}), define("vendor/chrome/bb8-scan-def", ["require", "exports", "vendor/abstract-sphero"], function (e, t, n) {
    var r = function () {
        function BB8ScanDef() {
            this.name = "BB8", this.handlerId = n.AbstractSphero.ID
        }

        return BB8ScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("22bb746f-2ba0-7554-2d6f-726568705327") > -1 && 0 == e.name.indexOf("BB-") ? (this.name = e.name, !0) : !1
        }, BB8ScanDef
    }();
    t.BB8ScanDef = r
}), define("vendor/chrome/ollie-scan-def", ["require", "exports", "vendor/abstract-sphero"], function (e, t, n) {
    var r = function () {
        function OllieScanDef() {
            this.name = "Ollie", this.handlerId = n.AbstractSphero.ID
        }

        return OllieScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("22bb746f-2ba0-7554-2d6f-726568705327") > -1 && 0 == e.name.indexOf("2B-") ? (this.name = e.name, !0) : !1
        }, OllieScanDef
    }();
    t.OllieScanDef = r
}), define("vendor/wedo2", ["require", "exports", "device-definition", "promise-chain", "data-utils"], function (e, t, n, r, i) {
    var a = {};
    a[0] = "1800", a[1] = "1801", a[2] = "00001523-1212-efde-1523-785feabcd123", a[3] = "00004f0e-1212-efde-1523-785feabcd123", a[4] = "180a", a[5] = "180f";
    var o = "WEDO2_BATTERY", s = "WEDO2_BUTTON_CHAR", c = "WEDO2_INPUT_COMMAND", d = "WEDO2_OUTPUT_COMMAND",
        l = "WEDO2_PORT_TYPE_CHAR", u = "WEDO2_SENSOR_VALUE", f = "WEDO2_WRITE_NAME", h = "none", p = "motor",
        m = "distance", v = "tilt", g = "generic", b = "unknown", y = "current", _ = "voltage", E = "piezo", C = "rgb",
        S = "button", T = "battery", w = {};
    w[0] = h, w[1] = p, w[34] = v, w[35] = m, w[36] = g, w[21] = y, w[20] = _, w[22] = E, w[23] = C;
    var D = 9, A = 7, x = 5, I = 2, O = 4, k = 1, R = 6, L = 7, P = 1, N = 0, M = 0, B = 0, U = 0, F = 2,
        H = function (e) {
            function WeDo2() {
                e.apply(this, arguments)
            }

            return __extends(WeDo2, e), WeDo2.prototype.init = function (t, n) {
                var r = this;
                e.prototype.init.call(this, t, n), this.resetState(), this.addCharacteristicDefinition({
                    name: s,
                    uuidStr: "00001526-1212-efde-1523-785feabcd123",
                    notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[R];
                            t.value;
                            t.value = 1 == e[0]
                        }
                    }
                }), this.addCharacteristicDefinition({
                    name: o, uuidStr: "2a19", notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[L];
                            t.value = e[0]
                        }
                    }
                }), this.addCharacteristicDefinition({
                    name: c,
                    uuidStr: "00001563-1212-efde-1523-785feabcd123"
                }), this.addCharacteristicDefinition({
                    name: d,
                    uuidStr: "00001565-1212-efde-1523-785feabcd123"
                }), this.addCharacteristicDefinition({
                    name: l,
                    uuidStr: "00001527-1212-efde-1523-785feabcd123",
                    notifcationHandler: function (e) {
                        var t = e[0] - 1, n = r.state[t];
                        if (n) {
                            var i = n.type, a = b;
                            2 == e.length ? 0 == e[1] && (console.log("empty", e), n.type = h, n.typeNum = 0, n.value = 0) : 12 == e.length && 1 == e[1] && (a = w[e[3]], a != i && (n.type = a, n.typeNum = e[3], r.sendCommands(t)))
                        }
                    }
                }), this.addCharacteristicDefinition({
                    name: u,
                    uuidStr: "00001560-1212-efde-1523-785feabcd123",
                    notifcationHandler: function (e) {
                        if (6 == e.length) {
                            var t = e[1] - 1, n = new Float32Array(e.slice(2, 6).buffer), a = n[0], o = r.state[t],
                                s = o.type;
                            if (s == v) switch (a) {
                                case x:
                                    a = I;
                                    break;
                                case A:
                                    a = O;
                                    break;
                                case D:
                                    a = k
                            } else s == m ? a *= 10 : s == _ ? a = i.dataUtils.roundToPlaces(a / 1e3, 2) + "V" : s == y && (a = Math.round(a) + "mA");
                            o.value = a
                        }
                    }
                }), this.addCharacteristicDefinition({
                    name: f,
                    uuidStr: "00001524-1212-efde-1523-785feabcd123"
                }), this.addCommand({
                    name: WeDo2.SET_NAME, execute: function () {
                        for (var e = [], t = 0; t < arguments.length; t++) e[t - 0] = arguments[t];
                        return r.writeCharacteristicValue(f, e)
                    }
                }), this.addCommand({
                    name: WeDo2.SET_LED, execute: function (e) {
                        return r.setLED(e)
                    }
                }), this.addCommand({
                    name: WeDo2.LED_RED, test: !0, execute: function () {
                        return r.setLED(9)
                    }
                }), this.addCommand({
                    name: WeDo2.LED_BLUE, test: !0, execute: function () {
                        return r.setLED(3)
                    }
                }), this.addCommand({
                    name: WeDo2.PLAY_SOUND, execute: function (e, t) {
                        var n = Math.floor(e / 256), i = e % 256, a = Math.floor(t / 256), o = t % 256;
                        return r.writeCharacteristicValue(d, [5, 2, 4, i, n, o, a])
                    }
                }), this.addCommand({
                    name: WeDo2.SET_MOTORS, execute: function (e, t, n, i) {
                        return r.writeCharacteristicValue(d, [e, t, n, i])
                    }
                }), this.addCommand({
                    name: WeDo2.MOTORS_ON, test: !0, execute: function () {
                        return r.writeCharacteristicValue(d, [1, 1, 1, 100]).then(function () {
                            return r.writeCharacteristicValue(d, [2, 1, 1, 100])
                        })
                    }
                }), this.addCommand({
                    name: WeDo2.MOTORS_OFF, test: !0, execute: function () {
                        return r.writeCharacteristicValue(d, [1, 1, 1, 127]).then(function () {
                            return r.writeCharacteristicValue(d, [2, 1, 1, 127])
                        })
                    }
                }), this.addCommand({
                    name: WeDo2.RESET, execute: function () {
                        return r.writeCharacteristicValue(d, [1, 1, 1, 127]).then(function () {
                            return r.writeCharacteristicValue(d, [2, 1, 1, 127])
                        })
                    }
                })
            }, WeDo2.prototype.setLED = function (e) {
                return this.writeCharacteristicValue(d, [6, 4, 1, e])
            }, WeDo2.prototype.sendCommands = function (e) {
                var t = this, n = this.state[e], i = n.type;
                if (i != h) {
                    var a = 0, o = 0, s = 1, d = F;
                    if (i == v) a = n.typeNum, o = P; else if (i == m) o = N; else if (i == C) o = M, d = U; else {
                        if (i != y && i != _) return;
                        o = B, s = 30
                    }
                    r.addPromise(function () {
                        return t.writeCharacteristicValue(c, [1, 2, e + 1, a, o, s, 0, 0, 0, d, 1]).then(function () {
                            return t.writeCharacteristicValue(c, [0, 1, e + 1])
                        })
                    })
                }
            }, WeDo2.prototype.notifyDisconnected = function (e) {
                this.resetState()
            }, WeDo2.prototype.resetState = function () {
                var e = this.state;
                e[0] = {type: h, value: 0, typeNum: 0}, e[1] = {type: h, value: 0, typeNum: 0}, e[2] = {
                    type: h,
                    value: 0,
                    typeNum: 0
                }, e[3] = {type: h, value: 0, typeNum: 0}, e[4] = {type: h, value: 0, typeNum: 0}, e[5] = {
                    type: h,
                    value: 0,
                    typeNum: 0
                }, e[6] = {type: S, value: 0, typeNum: 0}, e[7] = {type: T, value: 100, typeNum: 0}
            }, WeDo2.prototype.getSensorValue = function (e) {
                var t = this.state[e];
                return t ? t.value : 0
            }, WeDo2.prototype.getSensorType = function (e) {
                var t = this.state[e];
                return t ? t.type : h
            }, WeDo2.ID = "wedo2", WeDo2.SET_NAME = "SET_NAME", WeDo2.SET_LED = "SET_LED", WeDo2.SET_MOTORS = "SET_MOTORS", WeDo2.LED_RED = "LED_RED", WeDo2.LED_BLUE = "LED_BLUE", WeDo2.PLAY_SOUND = "PLAY_SOUND", WeDo2.MOTORS_ON = "MOTORS_ON", WeDo2.MOTORS_OFF = "MOTORS_OFF", WeDo2.RESET = "RESET", WeDo2
        }(n.DeviceDefinition);
    t.WeDo2 = H
}), define("vendor/chrome/wedo2-scan-def", ["require", "exports", "vendor/wedo2"], function (e, t, n) {
    var r = function () {
        function WeDo2ScanDef() {
            this.handlerId = n.WeDo2.ID
        }

        return WeDo2ScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("00001523-1212-efde-1523-785feabcd123") > -1 ? (this.name = e.name, !0) : !1
        }, WeDo2ScanDef
    }();
    t.WeDo2ScanDef = r
}), define("vendor/dash-sounds", ["require", "exports", "data-utils"], function (e, t, n) {
    var r;
    !function (e) {
        function getSoundsArray(e) {
            return n.dataUtils.text2array(t[e])
        }

        var t = {}, r = "SYSTAIRPORTJET", i = "SYSTBOT_CUTE_0", a = "SYSTBO_OKAY_03", o = "SYSTBO_V7_VARI",
            s = "SYSTBO_V7_YAWN", c = "SYSTBRAGGING1A", d = "SYSTCHARGE_03", l = "SYSTCONFUSED_1", u = "SYSTCONFUSED_2",
            f = "SYSTCONFUSED_3", h = "SYSTCONFUSED_4", p = "SYSTCONFUSED_5", m = "SYSTCONFUSED_6",
            v = "SYSTCONFUSED_7", g = "SYSTCONFUSED_8", b = "SYSTCOW_MOO11A", y = "SYSTCROCODILE", _ = "SYSTCURIOUS_04",
            E = "SYSTDASH_HI_VO", C = "SYSTDINOSAUR_3", S = "SYSTELEPHANT_0", T = "SYSTENGINE_REV",
            w = "SYSTEXCITED_01", D = "SYSTFX_03_GOAT", A = "SYSTFX_CAT_01", x = "SYSTFX_DOG_02", I = "SYSTFX_LION_01",
            O = "SYSTGOBBLE_001", k = "SYSTHAPPY_HONK", R = "SYSTHELICOPTER", L = "SYSTHORSEWHIN2",
            P = "SYSTOT_CUTE_03", N = "SYSTOT_CUTE_04", M = "SYSTTAH_DAH_01", B = "SYSTTIRESQUEAL",
            U = "SYSTTRAIN_WHIS", F = "SYSTTRUCKHORN", H = "SYSTTUGBOAT_01", q = "SYSTUS_LIPBUZZ", V = "SYSTV7_OHNO_09",
            G = "SYSTVOICE0", j = "SYSTVOICE1", z = "SYSTVOICE2", W = "SYSTVOICE3", $ = "SYSTVOICE4",
            Y = "SYSTWHUH_OH_20", X = "SYSTX_SIREN_02";
        t.jetplane = r, t.beeps = i, t.okay = a, t.bye = o, t["bye bye"] = o, t.sigh = s, t.bragging = c, t["oh yeah"] = c, t.charge = d, t.ayyaiyai = l, t.ayeaye = l, t.confused2 = u, t.confused3 = f, t.confused4 = h, t.confused5 = p, t.brrp = m, t.confused7 = v, t.confused8 = g, t.wow = g, t.cow = b, t.crocodile = y, t.huh = _, t.hi = E, t.dinosaur = C, t.elephant = S, t.carengine = T, t.wee = w, t.goat = D, t.cat = A, t.dog = x, t.lion = I, t.gobble = O, t.horn = k, t.helicopter = R, t.horse = L, t.lasers = P, t.squeek = N, t.tada = M, t["tire squeal"] = B, t.train = U, t.truckhorn = F, t.boat = H, t.buzz = q, t.ohno = V, t["oh no"] = V, t.mysound1 = G, t.mysound2 = j, t.mysound3 = z, t.mysound4 = W, t.mysound5 = $, t.uhoh = Y, t.firesiren = X, t.siren = X, e.getSoundsArray = getSoundsArray
    }(r = t.DashSounds || (t.DashSounds = {}))
}), define("vendor/dash", ["require", "exports", "device-definition", "vendor/dash-sounds"], function (e, t, n, r) {
    var i = {};
    i[0] = "1800", i[1] = "1801", i[2] = "af237777-879d-6186-1f49-deca0e85d9c1";
    var a = "WW_COMMAND", o = "WW_SENSOR", s = "WW_DASH_SENSOR", c = 2, d = 3, l = 4, u = 5, f = 6, h = 7, p = 8, m = 9,
        v = 10, g = 11, b = 12, y = 13, _ = 24, E = 25, C = 28, S = 35, T = 200, w = 4, D = 5, A = {};
    A[0] = [0, 0, 0], A[1] = [255, 255, 0], A[2] = [0, 255, 0], A[3] = [255, 165, 0], A[4] = [0, 0, 255], A[5] = [255, 0, 0], A[6] = [128, 0, 128];
    var x = "none", I = "top button", O = "orange button 1", k = "orange button 2", R = "orange button 3",
        L = "sound clap", P = "sound level", N = "sound direction", M = "movement state", B = "detect dot",
        U = "detect right", F = "detect left", H = "detect rear", q = "right wheel", V = "left wheel",
        G = "wheel distance", j = "head X", z = "head Y", W = "dot index", $ = "dash index", Y = "tilt",
        X = "pitch delta", Z = "lean", K = "roll delta", Q = "yaw", J = "yaw delta", ee = "acceleration",
        te = function (e) {
            function Dash() {
                e.apply(this, arguments)
            }

            return __extends(Dash, e), Dash.prototype.init = function (t, n) {
                var i = this;
                e.prototype.init.call(this, t, n), this.resetState(), this.addCharacteristicDefinition({
                    name: a,
                    uuidStr: "af230002-879d-6186-1f49-deca0e85d9c1"
                }), this.addCharacteristicDefinition({
                    name: o,
                    uuidStr: "af230003-879d-6186-1f49-deca0e85d9c1",
                    notifcationHandler: function (e) {
                        var t;
                        t = i.state[17], t.value = e[0] >> 4, t = i.state[19];
                        var n = (240 & e[4]) << 4 | e[2];
                        n > 2047 && (n -= 4096), t.value = n, t = i.state[21];
                        var r = (240 & e[4]) << 4 | e[2];
                        if (r > 2047 && (r -= 4096), t.value = r, t = i.state[25], t.value = (240 & e[5]) << 8 | e[6], t = i.state[0], t.value = (16 & e[8]) > 0 ? 1 : 0, t = i.state[1], t.value = (32 & e[8]) > 0 ? 1 : 0, t = i.state[2], t.value = (64 & e[8]) > 0 ? 1 : 0, t = i.state[3], t.value = (128 & e[8]) > 0 ? 1 : 0, t = i.state[7], t.value = e[11], t = i.state[4], t.value = 1 & e[11], t = i.state[5], t.value = e[7], t = i.state[6], 4 == e[15]) {
                            var a = e[13] << 8 | e[12];
                            a > 180 && (a -= 360), t.value = a
                        }
                        t = i.state[8];
                        var o = 15 & e[16], s = 240 & e[16];
                        o > 0 && 15 != o ? t.value = 2 : s > 0 && 240 != s ? t.value = 1 : t.value = 0
                    }
                }), this.addCharacteristicDefinition({
                    name: s,
                    uuidStr: "af230006-879d-6186-1f49-deca0e85d9c1",
                    notifcationHandler: function (e) {
                        var t;
                        t = i.state[18], t.value = e[0] >> 4, t = i.state[20], t.value = (48 & e[4]) << 4 | e[3], t = i.state[22], t.value = (3 & e[4]) << 8 | e[5], t = i.state[9], t.value = e[6], t = i.state[10], t.value = e[7], t = i.state[11], t.value = e[8];
                        var n = (e[18] << 8) + e[19], r = 511 & n, a = (65024 & n) >> 9;
                        r > 255 && (r -= 512), a > 63 && (a -= 128), t = i.state[15], t.value = 135 * r / 244, t = i.state[16], t.value = 22 * a / 49, t = i.state[22], t.value = (3 & e[4]) << 8 | e[5], t = i.state[13], t.value = e[17] << 8 | e[16], t = i.state[12], t.value = e[15] << 8 | e[14], t = i.state[14];
                        var o = (15 & e[9]) << 12 | e[11] << 8 | e[10];
                        o > 32767 && (o -= 65536), t.value = o
                    }
                }), this.addCommand({
                    name: Dash.SET_DEFAULT_COLOR_BLUE, test: !0, execute: function (e) {
                        return i.sendCmd(C, [3, w]).then(function () {
                            return i.sendCmd(T, [4])
                        })
                    }
                }), this.addCommand({
                    name: Dash.SET_DEFAULT_COLOR_RED, test: !0, execute: function (e) {
                        return i.sendCmd(C, [3, D]).then(function () {
                            return i.sendCmd(T, [4])
                        })
                    }
                }), this.addCommand({
                    name: Dash.SET_DEFAULT_COLOR, execute: function (e) {
                        return i.sendCmd(C, [3, e]).then(function () {
                            return i.sendCmd(T, [4])
                        })
                    }
                }), this.addCommand({
                    name: Dash.SET_LEFT_EAR_COLOR, execute: function (e) {
                        return i.sendCmd(g, i.colorArray(e))
                    }
                }), this.addCommand({
                    name: Dash.SET_RIGHT_EAR_COLOR, execute: function (e) {
                        return i.sendCmd(b, i.colorArray(e))
                    }
                }), this.addCommand({
                    name: Dash.SET_EARS_COLOR, execute: function (e) {
                        return i.sendCmd(b, i.colorArray(e)).then(function () {
                            return i.sendCmd(g, i.colorArray(e))
                        })
                    }
                }), this.addCommand({
                    name: Dash.SET_CHEST_COLOR, execute: function (e) {
                        return i.sendCmd(d, i.colorArray(e))
                    }
                }), this.addCommand({
                    name: Dash.SET_HEAD_Y, execute: function (e) {
                        var t = Math.max(-53, e);
                        return t = Math.min(53, t), i.sendCmd(f, i.angleArray(t))
                    }
                }), this.addCommand({
                    name: Dash.SET_HEAD_X, execute: function (e) {
                        var t = Math.max(-5, e);
                        return t = Math.min(10, t), i.sendCmd(h, i.angleArray(t))
                    }
                }), this.addCommand({
                    name: Dash.HEAD_BANG, test: !0, execute: function () {
                        return i.sendCmd(u, [255])
                    }
                }), this.addCommand({
                    name: Dash.SET_TAIL_LED, execute: function (e) {
                        var t = 0 == e ? 0 : 255;
                        return i.sendCmd(y, [t])
                    }
                }), this.addCommand({
                    name: Dash.SET_TAIL_LED_ON, test: !0, execute: function () {
                        return i.sendCmd(l, [255])
                    }
                }), this.addCommand({
                    name: Dash.SET_TAIL_LED_OFF, test: !0, execute: function () {
                        return i.sendCmd(l, [0])
                    }
                }), this.addCommand({
                    name: Dash.SET_BUTTON_LED, execute: function (e) {
                        var t = 0 == e ? 0 : 255;
                        return i.sendCmd(y, [t])
                    }
                }), this.addCommand({
                    name: Dash.SET_BUTTON_LED_ON, test: !0, execute: function (e) {
                        return i.sendCmd(y, [255])
                    }
                }), this.addCommand({
                    name: Dash.SET_BUTTON_LED_OFF, test: !0, execute: function (e) {
                        return i.sendCmd(y, [0])
                    }
                }), this.addCommand({
                    name: Dash.SET_EYE_COLOR, execute: function (e) {
                        return i.sendCmd(v, i.colorArray(e))
                    }
                }), this.addCommand({
                    name: Dash.SET_EYE_RING, execute: function (e) {
                        var t = 255 & e, n = (3840 & e) >> 8;
                        return i.sendCmd(m, [n, t])
                    }
                }), this.addCommand({
                    name: Dash.SET_EYE_BRIGHTNESS, execute: function (e) {
                        return e = 255 & e, i.sendCmd(p, [e])
                    }
                }), this.addCommand({
                    name: Dash.EYE_ON, test: !0, execute: function () {
                        var e = 8191, t = 255 & e, n = (3840 & e) >> 8;
                        return i.sendCmd(m, [n, t])
                    }
                }), this.addCommand({
                    name: Dash.EYE_OFF, test: !0, execute: function () {
                        var e = 0, t = 255 & e, n = (3840 & e) >> 8;
                        return i.sendCmd(m, [n, t])
                    }
                }), this.addCommand({
                    name: Dash.EYE_ROLL, test: !0, execute: function () {
                        return i.sendCmd(p, [88]).then(function () {
                            return i.sendCmd(m, [15, 254])
                        }).then(function () {
                            return i.sendCmd(m, [15, 252])
                        }).then(function () {
                            return i.sendCmd(m, [15, 248])
                        }).then(function () {
                            return i.sendCmd(m, [15, 240])
                        }).then(function () {
                            return i.sendCmd(m, [15, 224])
                        }).then(function () {
                            return i.sendCmd(m, [15, 192])
                        }).then(function () {
                            return i.sendCmd(m, [15, 128])
                        }).then(function () {
                            return i.sendCmd(m, [15, 0])
                        }).then(function () {
                            return i.sendCmd(m, [14, 0])
                        }).then(function () {
                            return i.sendCmd(m, [12, 0])
                        }).then(function () {
                            return i.sendCmd(m, [8, 0])
                        }).then(function () {
                            return i.sendCmd(m, [0, 0])
                        }).then(function () {
                            return i.sendCmd(m, [0, 1])
                        }).then(function () {
                            return i.sendCmd(m, [0, 3])
                        }).then(function () {
                            return i.sendCmd(m, [0, 7])
                        }).then(function () {
                            return i.sendCmd(m, [0, 15])
                        }).then(function () {
                            return i.sendCmd(m, [0, 31])
                        }).then(function () {
                            return i.sendCmd(m, [0, 63])
                        }).then(function () {
                            return i.sendCmd(m, [0, 127])
                        }).then(function () {
                            return i.sendCmd(m, [0, 255])
                        }).then(function () {
                            return i.sendCmd(m, [1, 255])
                        }).then(function () {
                            return i.sendCmd(m, [3, 255])
                        }).then(function () {
                            return i.sendCmd(m, [7, 255])
                        }).then(function () {
                            return i.sendCmd(m, [15, 255])
                        })
                    }
                }), this.addCommand({
                    name: Dash.STOP, execute: function () {
                        return i.sendCmd(c, [0, 0, 0])
                    }
                }), this.addCommand({
                    name: Dash.DRIVE, execute: function (e) {
                        var t = Math.max(-2048, e);
                        t = Math.min(2048, t), 0 > t && (t = 2048 + t);
                        var n = 255 & t, r = (3840 & t) >> 8;
                        return i.sendCmd(c, [n, 0, r])
                    }
                }), this.addCommand({
                    name: Dash.SPIN, execute: function (e) {
                        var t = Math.max(-2048, e);
                        t = Math.min(2048, t), 0 > t && (t = 2048 + t);
                        var n = 255 & t, r = (65280 & t) >> 5;
                        return i.sendCmd(c, [0, n, r])
                    }
                }), this.addCommand({
                    name: Dash.MOVE_DEGREES, execute: function (e) {
                        var t = !1, n = e;
                        0 > n && (t = !0, n = -1 * n);
                        var r = 360 / 2.094;
                        n = Math.max(1, n), n = Math.min(360, n);
                        var a = n / r;
                        return i.sendCmd(S, i.moveArray(0, n, a, t))
                    }
                }), this.addCommand({
                    name: Dash.MOVE_SECS, execute: function (e, t) {
                        var n = !1, r = e;
                        return 0 > r && (n = !0, r = -1 * r), i.sendCmd(S, i.moveArray(r, 0, t, n))
                    }
                }), this.addCommand({
                    name: Dash.MOVE_MM, execute: function (e) {
                        var t = !1, n = e;
                        0 > n && (t = !0, n = -1 * n);
                        var r = 1e3, a = n / r;
                        return i.sendCmd(S, i.moveArray(n, 0, a, t))
                    }
                }), this.addCommand({
                    name: Dash.BEEP, execute: function (e, t) {
                        return i.sendCmd(E, [e, 0, t])
                    }
                }), this.addCommand({
                    name: Dash.BEEP_TEST, test: !0, execute: function () {
                        return i.sendCmd(E, [100, 0, 100])
                    }
                }), this.addCommand({
                    name: Dash.SAY, execute: function (e) {
                        var t = "hi";
                        return i.sendCmd(_, r.DashSounds.getSoundsArray(t))
                    }
                }), this.addCommand({
                    name: Dash.SAY_OH_YEAH, test: !0, execute: function (e) {
                        return i.sendCmd(_, r.DashSounds.getSoundsArray("oh yeah"))
                    }
                }), this.addCommand({
                    name: Dash.SAY_HI, test: !0, execute: function (e) {
                        return i.sendCmd(_, r.DashSounds.getSoundsArray("hi"))
                    }
                }), this.addCommand({
                    name: Dash.SAY_AYEAYE, test: !0, execute: function (e) {
                        return i.sendCmd(_, r.DashSounds.getSoundsArray("ayeaye"))
                    }
                }), this.addCommand({
                    name: Dash.RESET, execute: function () {
                        return i.sendCmd(T, [4])
                    }
                })
            }, Dash.prototype.sendCmd = function (e, t) {
                var n = t.slice(0);
                return n.unshift(e), this.writeCharacteristicValue(a, n)
            }, Dash.prototype.colorArray = function (e) {
                return A[e]
            }, Dash.prototype.angleArray = function (e) {
                return 0 > e && (e = (255 ^ Math.abs(e)) + 1), e &= 255, [e]
            }, Dash.prototype.moveArray = function (e, t, n, r) {
                e > 0 && t > 0 && (t = 0);
                var i = 255 & e, a = (16128 & e) >> 8, o = a, s = 0, c = Math.round(t * Math.PI / 180 * 100),
                    d = 255 & c, l = (768 & c) >> 2;
                o |= l, 0 > c && (s = 192), n = Math.round(1e3 * n);
                var u = 255 & n, f = (65280 & n) >> 8, h = 128;
                return 1 == r && (h = 129), [i, 0, d, f, u, o, s, h]
            }, Dash.prototype.notifyDisconnected = function (e) {
                this.resetState()
            }, Dash.prototype.resetState = function () {
                var e = this.state;
                e[0] = {type: I, value: 0}, e[1] = {type: O, value: 0}, e[2] = {type: k, value: 0}, e[3] = {
                    type: R,
                    value: 0
                }, e[4] = {type: L, value: 0}, e[5] = {type: P, value: 0}, e[6] = {type: N, value: 0}, e[7] = {
                    type: M,
                    value: 0
                }, e[8] = {type: B, value: 0}, e[9] = {type: U, value: 0}, e[10] = {
                    type: F,
                    value: 0
                }, e[11] = {type: H, value: 0}, e[12] = {type: q, value: 0}, e[13] = {
                    type: V,
                    value: 0
                }, e[14] = {type: G, value: 0}, e[15] = {type: j, value: 0}, e[16] = {
                    type: z,
                    value: 0
                }, e[17] = {type: W, value: 0}, e[18] = {type: $, value: 0}, e[19] = {
                    type: Y,
                    value: 0
                }, e[20] = {type: X, value: 0}, e[21] = {type: Z, value: 0}, e[22] = {
                    type: K,
                    value: 0
                }, e[23] = {type: Q, value: 0}, e[24] = {type: J, value: 0}, e[25] = {type: ee, value: 0}
            }, Dash.prototype.getSensorValue = function (e) {
                var t = this.state[e];
                return t ? t.value : 0
            }, Dash.prototype.getSensorType = function (e) {
                var t = this.state[e];
                return t ? t.type : x
            }, Dash.ID = "dash", Dash.SET_EYE_RING = "SET_EYE_RING", Dash.SET_EYE_BRIGHTNESS = "SET_EYE_BRIGHTNESS", Dash.SET_EYE_COLOR = "SET_EYE_COLOR", Dash.EYE_ON = "EYE_ON", Dash.EYE_OFF = "EYE_OFF", Dash.EYE_ROLL = "EYE_ROLL", Dash.SET_DEFAULT_COLOR = "SET_DEFAULT_COLOR", Dash.SET_DEFAULT_COLOR_BLUE = "SET_DEFAULT_COLOR_BLUE", Dash.SET_DEFAULT_COLOR_RED = "SET_DEFAULT_COLOR_RED", Dash.SET_CHEST_COLOR = "SET_CHEST_COLOR", Dash.SET_LEFT_EAR_COLOR = "SET_LEFT_EAR_COLOR", Dash.SET_RIGHT_EAR_COLOR = "SET_RIGHT_EAR_COLOR", Dash.SET_EARS_COLOR = "SET_EARS_COLOR", Dash.SET_BUTTON_LED = "SET_BUTTON_LED", Dash.SET_BUTTON_LED_ON = "SET_BUTTON_LED_ON", Dash.SET_BUTTON_LED_OFF = "SET_BUTTON_LED_OFF", Dash.SET_TAIL_LED = "SET_TAIL_LED", Dash.SET_TAIL_LED_ON = "SET_TAIL_LED_ON", Dash.SET_TAIL_LED_OFF = "SET_TAIL_LED_OFF", Dash.SET_HEAD_Y = "SET_HEAD_Y", Dash.SET_HEAD_X = "SET_HEAD_X", Dash.HEAD_BANG = "HEAD_BANG", Dash.SAY = "SAY", Dash.SAY_OH_YEAH = "SAY_OH_YEAH", Dash.SAY_HI = "SAY_HI", Dash.SAY_AYEAYE = "SAY_AYEAYE", Dash.BEEP = "BEEP", Dash.BEEP_TEST = "BEEP_TEST", Dash.STOP = "STOP", Dash.SPIN = "SPIN", Dash.TURN = "TURN", Dash.MOVE_MM = "MOVE_MM", Dash.MOVE_DEGREES = "MOVE_DEGREES", Dash.MOVE_SECS = "MOVE_SECS", Dash.DRIVE = "DRIVE", Dash.RESET = "RESET", Dash
        }(n.DeviceDefinition);
    t.Dash = te
}), define("vendor/chrome/dash-scan-def", ["require", "exports", "vendor/dash"], function (e, t, n) {
    var r = function () {
        function DashScanDef() {
            this.handlerId = n.Dash.ID
        }

        return DashScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("af230006-879d-6186-1f49-deca0e85d9c1") > -1 && e.name.indexOf("Dash") > -1 ? (this.name = e.name, !0) : !1
        }, DashScanDef
    }();
    t.DashScanDef = r
}), define("vendor/chrome/dot-scan-def", ["require", "exports", "vendor/dash"], function (e, t, n) {
    var r = function () {
        function DotScanDef() {
            this.handlerId = n.Dash.ID
        }

        return DotScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("af230003-879d-6186-1f49-deca0e85d9c1") > -1 && e.name.indexOf("Dot") > -1 ? (this.name = e.name, !0) : !1
        }, DotScanDef
    }();
    t.DotScanDef = r
}), define("vendor/sensortag2", ["require", "exports", "device-definition", "data-utils", "promise-utils"], function (e, t, n, r, i) {
    var a = {};
    a[0] = "1800", a[1] = "1801", a[2] = "180a", a[3] = "f000aa00-0451-4000-b000-000000000000", a[4] = "f000aa20-0451-4000-b000-000000000000", a[5] = "f000aa40-0451-4000-b000-000000000000", a[6] = "f000aa80-0451-4000-b000-000000000000", a[7] = "f000aa70-0451-4000-b000-000000000000", a[8] = "ffe0", a[9] = "f000aa64-0451-4000-b000-000000000000", a[10] = "f000ac00-0451-4000-b000-000000000000", a[11] = "f000ccc0-0451-4000-b000-000000000000", a[12] = "f000ffc0-0451-4000-b000-000000000000";
    var o = "SENSORTAG2_TEMP_DATA", s = "SENSORTAG2_TEMP_CONFIG", c = "SENSORTAG2_TEMP_PERIOD",
        d = "SENSORTAG2_HUMIDITY_DATA", l = "SENSORTAG2_HUMIDITY_CONFIG", u = "SENSORTAG2_HUMIDITY_PERIOD",
        f = "SENSORTAG2_PRESSURE_DATA", h = "SENSORTAG2_PRESSURE_CONFIG", p = "SENSORTAG2_PRESSURE_PERIOD",
        m = "SENSORTAG2_IO_DATA", v = "SENSORTAG2_IO_CONFIG", g = "SENSORTAG2_MOVEMENT_DATA",
        b = "SENSORTAG2_MOVEMENT_CONFIG", y = "SENSORTAG2_MOVEMENT_PERIOD", _ = "SENSORTAG2_LIGHT_DATA",
        E = "SENSORTAG2_LIGHT_CONFIG", C = "SENSORTAG2_LIGHT_PERIOD", S = "SENSORTAG2_BUTTONS", T = "none",
        w = "buttons", D = "gyroscope x", A = "gyroscope y", x = "gyroscope z", I = "accelerometer x",
        O = "accelerometer y", k = "accelerometer z", R = "tilt", L = "magnetometer x", P = "magnetometer y",
        N = "magnetometer z", M = "light intensity", B = "humidity", U = "pressure", F = "temperature (object)",
        H = "temperature (ambient)", q = "temperature (humidity)", V = "temperature (barometer)", G = 1, j = 2, z = 3,
        W = 4, $ = 0, Y = function (e) {
            function SensorTag2() {
                e.apply(this, arguments), this.setHumidityValues = function (e) {
                    var t = new Uint16Array(e.slice(2, 4).buffer), n = t[0] / 65536 * 100,
                        i = new Uint16Array(e.slice(0, 2).buffer), a = i[0] / 65536 * 165 - 40, o = this.state[12];
                    o.value = r.dataUtils.roundToPlaces(n, 2);
                    var s = this.state[16];
                    s.value = r.dataUtils.roundToPlaces(a, 2)
                }, this.setTempValues = function (e) {
                    var t = new Uint16Array(e.slice(2, 4).buffer), n = .03125 * (t[0] >> 2),
                        i = new Uint16Array(e.slice(0, 2).buffer), a = .03125 * (i[0] >> 2), o = this.state[15];
                    o.value = r.dataUtils.roundToPlaces(n, 2);
                    var s = this.state[14];
                    s.value = r.dataUtils.roundToPlaces(a, 2)
                }, this.setLightValues = function (e) {
                    var t = new Uint16Array(e.slice(0, 2).buffer), n = t[0], i = 4095 & n, a = (61440 & n) >> 12,
                        o = i * (.01 * Math.pow(2, a)), s = this.state[11];
                    s.value = r.dataUtils.roundToPlaces(o, 2)
                }, this.setPressureValues = function (e) {
                    var t = new Uint8Array([e[0], e[1], e[2], 0]), n = new Uint32Array(t.slice(0, 4).buffer),
                        r = n[0] / 100, i = new Uint8Array([e[3], e[4], e[5], 0]),
                        a = new Uint32Array(i.slice(0, 4).buffer), o = a[0] / 100, s = this.state[13];
                    s.value = o;
                    var c = this.state[17];
                    c.value = r
                }, this.setAccelerometerValues = function (e) {
                    var t = {x: -163.84, y: 163.84, z: -163.84}, n = new Int16Array(e.slice(0, 2).buffer),
                        i = 1 * n[0] / 131.072, a = new Int16Array(e.slice(2, 4).buffer), o = 1 * a[0] / 131.072,
                        s = new Int16Array(e.slice(4, 6).buffer), c = 1 * s[0] / 131.072, d = this.state[1];
                    d.value = r.dataUtils.roundToPlaces(i, 3);
                    var l = this.state[2];
                    l.value = r.dataUtils.roundToPlaces(o, 3);
                    var u = this.state[3];
                    u.value = r.dataUtils.roundToPlaces(c, 3);
                    var f = new Int16Array(e.slice(6, 8).buffer), h = f[0] / t.x, p = new Int16Array(e.slice(8, 10).buffer),
                        m = p[0] / t.y, v = new Int16Array(e.slice(10, 12).buffer), g = v[0] / t.z, b = 0;
                    -10 > m ? b = G : m > 10 ? b = z : -10 > h ? b = W : h > 10 && (b = j);
                    var y = this.state[4];
                    y.value = r.dataUtils.roundToPlaces(h, 2);
                    var _ = this.state[5];
                    _.value = r.dataUtils.roundToPlaces(m, 2);
                    var E = this.state[6];
                    E.value = r.dataUtils.roundToPlaces(g, 2);
                    var C = this.state[7];
                    C.value = b;
                    var S = new Int16Array(e.slice(6, 8).buffer), T = S[0], w = new Int16Array(e.slice(8, 10).buffer),
                        D = w[0], A = new Int16Array(e.slice(10, 12).buffer), x = A[0], I = this.state[8];
                    I.value = r.dataUtils.roundToPlaces(T, 3);
                    var O = this.state[9];
                    O.value = r.dataUtils.roundToPlaces(D, 3);
                    var k = this.state[10];
                    k.value = r.dataUtils.roundToPlaces(x, 3)
                }
            }

            return __extends(SensorTag2, e), SensorTag2.prototype.init = function (t, n) {
                var r = this;
                e.prototype.init.call(this, t, n), this.resetState(), this.addCharacteristicDefinition({
                    name: g,
                    uuidStr: "f000aa81-0451-4000-b000-000000000000",
                    notifcationHandler: function (e) {
                        18 == e.length && r.setAccelerometerValues(e)
                    }
                }), this.addCharacteristicDefinition({
                    name: b,
                    uuidStr: "f000aa82-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: y,
                    uuidStr: "f000aa83-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: d,
                    uuidStr: "f000aa21-0451-4000-b000-000000000000",
                    notifcationHandler: function (e) {
                        4 == e.length && r.setHumidityValues(e)
                    }
                }), this.addCharacteristicDefinition({
                    name: l,
                    uuidStr: "f000aa22-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: u,
                    uuidStr: "f000aa23-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: o,
                    uuidStr: "f000aa01-0451-4000-b000-000000000000",
                    notifcationHandler: function (e) {
                        4 == e.length && r.setTempValues(e)
                    }
                }), this.addCharacteristicDefinition({
                    name: s,
                    uuidStr: "f000aa02-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: c,
                    uuidStr: "f000aa03-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: f,
                    uuidStr: "f000aa41-0451-4000-b000-000000000000",
                    notifcationHandler: function (e) {
                        6 == e.length && r.setPressureValues(e)
                    }
                }), this.addCharacteristicDefinition({
                    name: h,
                    uuidStr: "f000aa42-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: p,
                    uuidStr: "f000aa44-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: _,
                    uuidStr: "f000aa71-0451-4000-b000-000000000000",
                    notifcationHandler: function (e) {
                        2 == e.length && r.setLightValues(e)
                    }
                }), this.addCharacteristicDefinition({
                    name: E,
                    uuidStr: "f000aa72-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: C,
                    uuidStr: "f000aa73-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: m,
                    uuidStr: "f000aa65-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: v,
                    uuidStr: "f000aa66-0451-4000-b000-000000000000"
                }), this.addCharacteristicDefinition({
                    name: S, uuidStr: "ffe1", notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[0];
                            t.value = e[0]
                        }
                    }
                }), this.addCommand({
                    name: SensorTag2.CALIBRATE_TILT, test: !0, execute: function (e, t) {
                        return i.makeDelay(10)
                    }
                }), this.addCommand({
                    name: SensorTag2.SET_LED, execute: function (e, t) {
                        return t ? $ |= e : $ &= 255 & ~e, r.writeCharacteristicValue(m, [$])
                    }
                }), this.addCommand({
                    name: SensorTag2.RED_LED_ON, test: !0, execute: function () {
                        return $ |= 1, r.writeCharacteristicValue(m, [$])
                    }
                }), this.addCommand({
                    name: SensorTag2.RED_LED_OFF, test: !0, execute: function () {
                        return $ &= 254, r.writeCharacteristicValue(m, [$])
                    }
                }), this.addCommand({
                    name: SensorTag2.GREEN_LED_ON, test: !0, execute: function () {
                        return $ |= 2, r.writeCharacteristicValue(m, [$])
                    }
                }), this.addCommand({
                    name: SensorTag2.GREEN_LED_OFF, test: !0, execute: function () {
                        return $ &= 253, r.writeCharacteristicValue(m, [$])
                    }
                }), this.addCommand({
                    name: SensorTag2.BUZZER_ON, test: !0, execute: function () {
                        return $ |= 4, r.writeCharacteristicValue(m, [$])
                    }
                }), this.addCommand({
                    name: SensorTag2.BUZZER_OFF, test: !0, execute: function () {
                        return $ &= 251, r.writeCharacteristicValue(m, [$])
                    }
                }), this.addCommand({
                    name: SensorTag2.RESET, execute: function () {
                        return i.makeDelay(10)
                    }
                })
            }, SensorTag2.prototype.notifyReady = function () {
                var t = this;
                return e.prototype.notifyReady.call(this).then(function () {
                    return t.writeCharacteristicValue(b, [127, 0])
                }).then(function () {
                    return t.writeCharacteristicValue(y, [10])
                }).then(function () {
                    return t.writeCharacteristicValue(l, [1])
                }).then(function () {
                    return t.writeCharacteristicValue(s, [1])
                }).then(function () {
                    return t.writeCharacteristicValue(h, [1])
                }).then(function () {
                    return t.writeCharacteristicValue(E, [1])
                }).then(function () {
                    return t.writeCharacteristicValue(v, [1])
                }).then(function () {
                    return t.writeCharacteristicValue(m, [0])
                })
            }, SensorTag2.prototype.notifyDisconnected = function (e) {
                this.resetState()
            }, SensorTag2.prototype.resetState = function () {
                $ = 0;
                var e = this.state;
                e[0] = {type: w, value: 0}, e[1] = {type: D, value: 0}, e[2] = {type: A, value: 0}, e[3] = {
                    type: x,
                    value: 0
                }, e[4] = {type: I, value: 0}, e[5] = {type: O, value: 0}, e[6] = {type: k, value: 0}, e[7] = {
                    type: R,
                    value: 0
                }, e[8] = {type: L, value: 0}, e[9] = {type: P, value: 0}, e[10] = {type: N, value: 0}, e[11] = {
                    type: M,
                    value: 0
                }, e[12] = {type: B, value: 0}, e[13] = {type: U, value: 0}, e[14] = {type: F, value: 0}, e[15] = {
                    type: H,
                    value: 0
                }, e[16] = {type: q, value: 0}, e[17] = {type: V, value: 0}
            }, SensorTag2.prototype.getSensorValue = function (e) {
                var t = this.state[e];
                return t ? t.value : 0
            }, SensorTag2.prototype.getSensorType = function (e) {
                var t = this.state[e];
                return t ? t.type : T
            }, SensorTag2.ID = "sensortag2", SensorTag2.RESET = "RESET", SensorTag2.CALIBRATE_TILT = "CALIBRATE_TILT", SensorTag2.SET_LED = "SET_LED", SensorTag2.RED_LED_ON = "RED_LED_ON", SensorTag2.RED_LED_OFF = "RED_LED_OFF", SensorTag2.GREEN_LED_ON = "GREEN_LED_ON", SensorTag2.GREEN_LED_OFF = "GREEN_LED_OFF", SensorTag2.BUZZER_ON = "BUZZER_ON", SensorTag2.BUZZER_OFF = "BUZZER_OFF", SensorTag2
        }(n.DeviceDefinition);
    t.SensorTag2 = Y
}), define("vendor/chrome/sensortag2-scan-def", ["require", "exports", "vendor/sensortag2"], function (e, t, n) {
    var r = function () {
        function SensorTag2ScanDef() {
            this.handlerId = n.SensorTag2.ID
        }

        return SensorTag2ScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("f000aa80-0451-4000-b000-000000000000") > -1 ? (this.name = e.name, !0) : !1
        }, SensorTag2ScanDef
    }();
    t.SensorTag2ScanDef = r
}), define("vendor/microbit", ["require", "exports", "device-definition", "data-utils", "promise-utils"], function (e, t, n, r, i) {
    var a = {};
    a[0] = "1800", a[1] = "1801", a[2] = "180a", a[3] = "e95d93af-251d-470a-a062-fa1922dfa9a8", a[4] = "e95dd91d-251d-470a-a062-fa1922dfa9a8", a[5] = "e95d6100-251d-470a-a062-fa1922dfa9a8", a[6] = "6e400001-b5a3-f393-e0a9-e50e24dcca9e", a[7] = "e95d0753-251d-470a-a062-fa1922dfa9a8", a[8] = "e95df2d8-251d-470a-a062-fa1922dfa9a8", a[9] = "e95d9882-251d-470a-a062-fa1922dfa9a8", a[10] = "e95d127b-251d-470a-a062-fa1922dfa9a8";
    var o = 27, s = 1, c = 2, d = 3, l = 4, u = "MICROBIT_ACCELEROMETER_DATA", f = "MICROBIT_ACCELEROMETER_PERIOD",
        h = "MICROBIT_MAGNETOMETER_DATA", p = "MICROBIT_MAGNETOMETER_PERIOD", m = "MICROBIT_MAGNETOMETER_BEARING",
        v = "MICROBIT_BUTTONA_STATE", g = "MICROBIT_BUTTONB_STATE", b = "MICROBIT_IO_PIN_DATA",
        y = "MICROBIT_IO_PIN_PWM", _ = "MICROBIT_IO_PIN_AD_CONFIG", E = "MICROBIT_IO_PIN_CONFIG",
        C = "MICROBIT_LED_MATRIX_STATE", S = "MICROBIT_LED_TEXT", T = "MICROBIT_LED_SCROLLING_DELAY",
        w = "MICROBIT_EVENT_MICROBIT_REQUIREMENTS", D = "MICROBIT_EVENT_MICROBIT_EVENT",
        A = "MICROBIT_EVENT_CLIENT_REQUIREMENTS", x = "MICROBIT_EVENT_CLIENT_EVENT", I = "MICROBIT_TEMP_DATA",
        O = "MICROBIT_TEMP_PERIOD", k = "MICROBIT_UART_TX", R = "MICROBIT_UART_RX", L = "none", P = "button A",
        N = "button B", M = "accelerometer x", B = "accelerometer y", U = "accelerometer z", F = "tilt",
        H = "temperature", q = "bearing", V = function (e) {
            function Microbit() {
                e.apply(this, arguments), this.setAccelerometerValues = function (e) {
                    var t = new Int16Array(e.slice(0, 2).buffer), n = t[0] >> 4, i = new Int16Array(e.slice(2, 4).buffer),
                        a = i[0] >> 4, o = new Int16Array(e.slice(4, 6).buffer), u = o[0] >> 4, f = this.state[2];
                    f.value = r.dataUtils.roundToPlaces(n, 3);
                    var h = this.state[3];
                    h.value = r.dataUtils.roundToPlaces(a, 3);
                    var p = this.state[4];
                    p.value = r.dataUtils.roundToPlaces(u, 3);
                    var m = 0;
                    -20 > a ? m = s : a > 20 ? m = d : -20 > n ? m = l : n > 20 && (m = c);
                    var v = this.state[5];
                    v.value = m
                }, this.setMagnetometerValues = function (e) {
                    var t = new Int16Array(e.slice(0, 2).buffer), n = t[0] / 100, i = new Int16Array(e.slice(2, 4).buffer),
                        a = i[0] / 100, o = new Int16Array(e.slice(4, 6).buffer), s = o[0] / 100, c = this.state[8];
                    c.value = r.dataUtils.roundToPlaces(n, 3);
                    var d = this.state[9];
                    d.value = r.dataUtils.roundToPlaces(a, 3);
                    var l = this.state[10];
                    l.value = r.dataUtils.roundToPlaces(s, 3)
                }, this.setMagnetometerBearing = function (e) {
                    var t = new Int16Array(e.slice(0, 2).buffer), n = t[0], i = this.state[7];
                    i.value = r.dataUtils.roundToPlaces(n, 0)
                }, this.setTempValues = function (e) {
                    var t = new Int8Array(e.slice(0, 1).buffer), n = t[0], i = this.state[6];
                    i.value = r.dataUtils.roundToPlaces(n, 0);
                }, this.setEventValues = function (e) {
                    var t = new Uint16Array(e.slice(0, 2).buffer), n = t[0], r = new Uint16Array(e.slice(2, 4).buffer),
                        i = r[0];
                    if (n == o) {
                        var a = this.state[11];
                        a.value = i
                    }
                }
            }

            return __extends(Microbit, e), Microbit.prototype.init = function (t, n) {
                var r = this;
                e.prototype.init.call(this, t, n), this.resetState(), this.addCharacteristicDefinition({
                    name: u,
                    uuidStr: "e95dca4b-251d-470a-a062-fa1922dfa9a8",
                    notifcationHandler: function (e) {
                        6 == e.length && r.setAccelerometerValues(e)
                    }
                }), this.addCharacteristicDefinition({
                    name: f,
                    uuidStr: "e95dfb24-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: h,
                    uuidStr: "e95dfb11-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: p,
                    uuidStr: "e95d386c-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: m,
                    uuidStr: "e95d9715-251d-470a-a062-fa1922dfa9a8",
                    notifcationHandler: function (e) {
                        2 == e.length && r.setMagnetometerBearing(e)
                    }
                }), this.addCharacteristicDefinition({
                    name: v,
                    uuidStr: "e95dda90-251d-470a-a062-fa1922dfa9a8",
                    notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[0];
                            t.value = e[0]
                        }
                    }
                }), this.addCharacteristicDefinition({
                    name: g,
                    uuidStr: "e95dda91-251d-470a-a062-fa1922dfa9a8",
                    notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[1];
                            t.value = e[0]
                        }
                    }
                }), this.addCharacteristicDefinition({
                    name: b,
                    uuidStr: "e95d8d00-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: y,
                    uuidStr: "e95dd822-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: _,
                    uuidStr: "e95d5899-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: E,
                    uuidStr: "e95db9fe-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: C,
                    uuidStr: "e95d7b77-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: S,
                    uuidStr: "e95d93ee-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: T,
                    uuidStr: "e95d0d2d-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: D,
                    uuidStr: "e95d9775-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: w,
                    uuidStr: "e95db84c-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: x,
                    uuidStr: "e95d5404-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: A,
                    uuidStr: "e95d23c4-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: I,
                    uuidStr: "e95d9250-251d-470a-a062-fa1922dfa9a8",
                    notifcationHandler: function (e) {
                        1 == e.length && r.setTempValues(e)
                    }
                }), this.addCharacteristicDefinition({
                    name: O,
                    uuidStr: "e95d1b25-251d-470a-a062-fa1922dfa9a8"
                }), this.addCharacteristicDefinition({
                    name: k,
                    uuidStr: "6e400002-b5a3-f393-e0a9-e50e24dcca9e"
                }), this.addCharacteristicDefinition({
                    name: R,
                    uuidStr: "6e400003-b5a3-f393-e0a9-e50e24dcca9e"
                }), this.addCommand({
                    name: Microbit.DISPLAY, execute: function () {
                        for (var e = [], t = 0; t < arguments.length; t++) e[t - 0] = arguments[t];
                        return r.writeCharacteristicValue(S, e)
                    }
                }), this.addCommand({
                    name: Microbit.DISPLAY_HELLO, test: !0, execute: function () {
                        return r.writeCharacteristicValue(S, [72, 69, 76, 76, 79])
                    }
                }), this.addCommand({
                    name: Microbit.BEEP, test: !0, execute: function () {
                        return r.playNote(261, 250)
                    }
                }), this.addCommand({
                    name: Microbit.PLAY_SOUND, execute: function (e, t) {
                        return r.playNote(e, t)
                    }
                }), this.addCommand({
                    name: Microbit.RESET, execute: function () {
                        return i.makeDelay(10)
                    }
                })
            }, Microbit.prototype.notifyReady = function () {
                var t = this;
                return e.prototype.notifyReady.call(this).then(function () {
                    return t.writeCharacteristicValue(f, [160, 0])
                }).then(function () {
                    return t.writeCharacteristicValue(p, [240, 0])
                }).then(function () {
                    return t.writeCharacteristicValue(O, [232, 3])
                }).then(function () {
                    return t.writeCharacteristicValue(E, [0, 0, 0, 0])
                }).then(function () {
                    return t.writeCharacteristicValue(_, [1, 0, 0, 0])
                })
            }, Microbit.prototype.notifyDisconnected = function (e) {
                this.resetState()
            }, Microbit.prototype.playNote = function (e, t) {
                var n = this, r = 0, a = 512, o = Math.floor(a / 256), s = a % 256, c = Math.floor(1e6 / e),
                    d = Math.floor(c / 65536), l = c % 65536, u = Math.floor(d / 256), f = d % 256, h = Math.floor(l / 256),
                    p = l % 256;
                return this.writeCharacteristicValue(y, [r, s, o, p, h, f, u]).then(function () {
                    return i.makeDelay(t)
                }).then(function () {
                    return n.writeCharacteristicValue(y, [r, 0, 0, p, h, f, u])
                })
            }, Microbit.prototype.resetState = function () {
                var e = this.state;
                e[0] = {type: P, value: 0}, e[1] = {type: N, value: 0}, e[2] = {type: M, value: 0}, e[3] = {
                    type: B,
                    value: 0
                }, e[4] = {type: U, value: 0}, e[5] = {type: F, value: 0}, e[6] = {type: H, value: 0}, e[7] = {
                    type: q,
                    value: 0
                }
            }, Microbit.prototype.getSensorValue = function (e) {
                var t = this.state[e];
                return t ? t.value : 0
            }, Microbit.prototype.getSensorType = function (e) {
                var t = this.state[e];
                return t ? t.type : L
            }, Microbit.ID = "microbit", Microbit.RESET = "RESET", Microbit.DISPLAY = "DISPLAY", Microbit.DISPLAY_HELLO = "DISPLAY_HELLO", Microbit.PLAY_SOUND = "PLAY_SOUND", Microbit.BEEP = "BEEP", Microbit
        }(n.DeviceDefinition);
    t.Microbit = V
}), define("vendor/chrome/microbit-scan-def", ["require", "exports", "vendor/microbit"], function (e, t, n) {
    var r = function () {
        function MicrobitScanDef() {
            this.handlerId = n.Microbit.ID
        }

        return MicrobitScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("e95d0753-251d-470a-a062-fa1922dfa9a8") > -1 ? (this.name = e.name, !0) : !1
        }, MicrobitScanDef
    }();
    t.MicrobitScanDef = r
}), define("vendor/minidrone", ["require", "exports", "device-definition"], function (e, t, n) {
    var r = function () {
        function IMinidroneType() {
        }

        return IMinidroneType.ID = "", IMinidroneType
    }();
    t.IMinidroneType = r;
    var i = function (e) {
        function Minidrone() {
            e.apply(this, arguments)
        }

        return __extends(Minidrone, e), Minidrone.ID = "minidrone", Minidrone
    }(n.DeviceDefinition);
    t.Minidrone = i
}), define("vendor/chrome/minidrone-scan-def", ["require", "exports", "vendor/minidrone"], function (e, t, n) {
    var r = function () {
        function MinidroneScanDef() {
            this.handlerId = n.Minidrone.ID
        }

        return MinidroneScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("9a66fa00-0800-9191-11e4-012d1540cb8e") > -1 ? (this.name = e.name, !0) : !1
        }, MinidroneScanDef
    }();
    t.MinidroneScanDef = r
}), define("vendor/picaxe", ["require", "exports", "device-definition"], function (e, t, n) {
    var r = {};
    r[0] = "1800", r[1] = "180a", r[2] = "88feb800-1b43-4958-bb3a-14c446bc81f2", r[3] = "1d14d6ee-fd63-4fa1-bfa4-8f47b42119f0";
    var i = "SET_OUTPUTS", a = "SET_BREAK", o = "TX_BUFFER", s = "RX_BUFFER", c = function (e) {
        function Picaxe() {
            e.apply(this, arguments)
        }

        return __extends(Picaxe, e), Picaxe.prototype.init = function (t, n) {
            var r = this;
            e.prototype.init.call(this, t, n), this.addCharacteristicDefinition({
                name: i,
                uuidStr: "88feb802-1b43-4958-bb3a-14c446bc81f2"
            }), this.addCharacteristicDefinition({
                name: a,
                uuidStr: "88feb803-1b43-4958-bb3a-14c446bc81f2"
            }), this.addCharacteristicDefinition({
                name: o,
                uuidStr: "88feb804-1b43-4958-bb3a-14c446bc81f2",
                notifcationHandler: function (e) {
                    1 != e.length
                }
            }), this.addCharacteristicDefinition({
                name: s,
                uuidStr: "88feb805-1b43-4958-bb3a-14c446bc81f2"
            }), this.addCommand({
                name: Picaxe.LED_ON, test: !0, execute: function () {
                    return r.writeCharacteristicValue(i, [1])
                }
            }), this.addCommand({
                name: Picaxe.LED_OFF, test: !0, execute: function () {
                    return r.writeCharacteristicValue(i, [0])
                }
            }), this.addCommand({
                name: Picaxe.BREAK_ON, test: !0, execute: function () {
                    return r.writeCharacteristicValue(a, [1])
                }
            }), this.addCommand({
                name: Picaxe.BREAK_OFF, test: !0, execute: function () {
                    return r.writeCharacteristicValue(a, [0])
                }
            }), this.addCommand({
                name: Picaxe.RESET, execute: function () {
                    return r.writeCharacteristicValue(i, [0])
                }
            })
        }, Picaxe.prototype.notifyDisconnected = function (e) {
        }, Picaxe.ID = "picaxe", Picaxe.RESET = "RESET", Picaxe.LED_ON = "LED_ON", Picaxe.LED_OFF = "LED_OFF", Picaxe.BREAK_ON = "BREAK_ON", Picaxe.BREAK_OFF = "BREAK_OFF", Picaxe
    }(n.DeviceDefinition);
    t.Picaxe = c
}), define("vendor/chrome/picaxe-scan-def", ["require", "exports", "vendor/picaxe"], function (e, t, n) {
    var r = function () {
        function PicaxeScanDef() {
            this.name = "PICAXE", this.handlerId = n.Picaxe.ID
        }

        return PicaxeScanDef.prototype.check = function (e) {
            return e.name == this.name
        }, PicaxeScanDef
    }();
    t.PicaxeScanDef = r
}), define("vendor/plane", ["require", "exports", "device-definition"], function (e, t, n) {
    var r = {};
    r[0] = "1800", r[1] = "1801", r[2] = "180a", r[3] = "180f", r[4] = "75b64e51-f181-4ed1-921a-476090d80ba7", r[5] = "f000ffc0-0451-4000-b000-000000000000";
    var i = "PLANE_BATTERY", a = "PLANE_RF_TEST", o = "PLANE_MOTOR_TEST", s = "PLANE_RUDDER_TEST", c = "none",
        d = "battery", l = function (e) {
            function Plane() {
                e.apply(this, arguments)
            }

            return __extends(Plane, e), Plane.prototype.init = function (t, n) {
                var r = this;
                e.prototype.init.call(this, t, n), this.resetState(), this.addCharacteristicDefinition({
                    name: i,
                    uuidStr: "2a19",
                    notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[0];
                            t.value = e[0]
                        }
                    }
                }), this.addCharacteristicDefinition({
                    name: a,
                    uuidStr: "75b64e51-f183-4ed1-921a-476090d80ba7"
                }), this.addCharacteristicDefinition({
                    name: o,
                    uuidStr: "75b64e51-f184-4ed1-921a-476090d80ba7"
                }), this.addCharacteristicDefinition({
                    name: s,
                    uuidStr: "75b64e51-f185-4ed1-921a-476090d80ba7"
                }), this.addCommand({
                    name: Plane.MOTOR_ON, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [100])
                    }
                }), this.addCommand({
                    name: Plane.MOTOR_OFF, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0])
                    }
                }), this.addCommand({
                    name: Plane.MOTOR_POWER, execute: function (e) {
                        return 0 > e && (e = 0), e > 254 && (e = 254), r.writeCharacteristicValue(o, [e])
                    }
                }), this.addCommand({
                    name: Plane.RUDDER_CENTRE, test: !0, execute: function () {
                        return r.writeCharacteristicValue(s, [0])
                    }
                }), this.addCommand({
                    name: Plane.RUDDER_LEFT, test: !0, execute: function () {
                        return r.writeCharacteristicValue(s, [100])
                    }
                }), this.addCommand({
                    name: Plane.RUDDER_RIGHT, test: !0, execute: function () {
                        return r.writeCharacteristicValue(s, [156])
                    }
                }), this.addCommand({
                    name: Plane.RUDDER_POSITION, execute: function (e) {
                        return 0 > e && (e += 256), r.writeCharacteristicValue(s, [e])
                    }
                }), this.addCommand({
                    name: Plane.RESET, execute: function () {
                        return r.writeCharacteristicValue(o, [0])
                    }
                })
            }, Plane.prototype.notifyReady = function () {
                return e.prototype.notifyReady.call(this)
            }, Plane.prototype.notifyDisconnected = function (e) {
                this.resetState()
            }, Plane.prototype.resetState = function () {
                var e = this.state;
                e[0] = {type: d, value: 0}
            }, Plane.prototype.getSensorValue = function (e) {
                var t = this.state[e];
                return t ? t.value : 0
            }, Plane.prototype.getSensorType = function (e) {
                var t = this.state[e];
                return t ? t.type : c
            }, Plane.ID = "plane", Plane.RUDDER_LEFT = "RUDDER_LEFT", Plane.RUDDER_RIGHT = "RUDDER_RIGHT", Plane.RUDDER_CENTRE = "RUDDER_CENTRE", Plane.RUDDER_POSITION = "RUDDER_POSITION", Plane.MOTOR_ON = "MOTOR_ON", Plane.MOTOR_OFF = "MOTOR_OFF", Plane.MOTOR_POWER = "MOTOR_POWER", Plane.RESET = "RESET", Plane
        }(n.DeviceDefinition);
    t.Plane = l
}), define("vendor/chrome/plane-scan-def", ["require", "exports", "vendor/plane"], function (e, t, n) {
    var r = function () {
        function PlaneScanDef() {
            this.handlerId = n.Plane.ID
        }

        return PlaneScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("75b64e51-f181-4ed1-921a-476090d80ba7") > -1 ? (this.name = e.name, !0) : !1
        }, PlaneScanDef
    }();
    t.PlaneScanDef = r
}), define("vendor/mip", ["require", "exports", "device-definition"], function (e, t, n) {
    var r = function () {
        function IMipType() {
        }

        return IMipType.ID = "", IMipType
    }();
    t.IMipType = r;
    var i = function (e) {
        function Mip() {
            e.apply(this, arguments)
        }

        return __extends(Mip, e), Mip.ID = "mip", Mip
    }(n.DeviceDefinition);
    t.Mip = i
}), define("vendor/chrome/mip-scan-def", ["require", "exports", "vendor/mip"], function (e, t, n) {
    var r = function () {
        function MipScanDef() {
            this.handlerId = n.Mip.ID
        }

        return MipScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("f000aa80-0451-4000-b000-000000000000") > -1 ? (this.name = e.name, !0) : !1
        }, MipScanDef
    }();
    t.MipScanDef = r
}), define("vendor/miposaur", ["require", "exports", "device-definition"], function (e, t, n) {
    var r = function () {
        function IMiposaurType() {
        }

        return IMiposaurType.ID = "", IMiposaurType
    }();
    t.IMiposaurType = r;
    var i = function (e) {
        function Miposaur() {
            e.apply(this, arguments)
        }

        return __extends(Miposaur, e), Miposaur.ID = "miposaur", Miposaur
    }(n.DeviceDefinition);
    t.Miposaur = i
}), define("vendor/chrome/miposaur-scan-def", ["require", "exports", "vendor/miposaur"], function (e, t, n) {
    var r = function () {
        function MiposaurScanDef() {
            this.handlerId = n.Miposaur.ID
        }

        return MiposaurScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("f000aa80-0451-4000-b000-000000000000") > -1 ? (this.name = e.name, !0) : !1
        }, MiposaurScanDef
    }();
    t.MiposaurScanDef = r
}), define("vendor/playbulbcandle", ["require", "exports", "device-definition"], function (e, t, n) {
    var r = {};
    r[0] = "1801", r[1] = "1800", r[2] = "ff04", r[3] = "a5a5005b-0200-239b-e111-02d116100000", r[4] = "180a";
    var i = "CANDLE_DEVICE_NAME_UUID", a = "CANDLE_COLOR_UUID", o = "CANDLE_EFFECT_UUID",
        s = "CANDLE_BLOW_NOTIFICATIONS_UUID", c = "CANDLE_BATTERY", d = "none", l = "battery", u = function (e) {
            function PlaybulbCandle() {
                e.apply(this, arguments)
            }

            return __extends(PlaybulbCandle, e), PlaybulbCandle.prototype.init = function (t, n) {
                var r = this;
                e.prototype.init.call(this, t, n), this.resetState(), this.addCharacteristicDefinition({
                    name: c,
                    uuidStr: "2a19",
                    notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[0];
                            t.value = e[0]
                        }
                    }
                }), this.addCharacteristicDefinition({
                    name: s, uuidStr: "2a37", notifcationHandler: function (e) {
                        1 != e.length
                    }
                }), this.addCharacteristicDefinition({name: a, uuidStr: "fffc"}), this.addCharacteristicDefinition({
                    name: o,
                    uuidStr: "fffb"
                }), this.addCommand({
                    name: PlaybulbCandle.SET_LED, execute: function (e, t, n) {
                        return r.writeCharacteristicValue(o, [0, e, t, n, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, e, t, n])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbCandle.LED_RED, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 255, 0, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 255, 0, 0])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbCandle.LED_GREEN, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 255, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 255, 0])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbCandle.LED_BLUE, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 0, 255, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 0, 255])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbCandle.LED_OFF, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 0, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 0, 0])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbCandle.SET_RAINBOW, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [1, 0, 0, 0, 2, 0, 1, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbCandle.SET_RAINBOW_FADE, test: !0, execute: function (e, t, n) {
                        return r.writeCharacteristicValue(o, [1, 0, 0, 0, 3, 0, 38, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbCandle.SET_FLASH, execute: function (e, t, n) {
                        return r.writeCharacteristicValue(o, [1, e, t, n, 0, 0, 31, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbCandle.SET_PULSE, execute: function (e, t, n) {
                        return e = Math.min(64 * Math.round(e / 64), 255), t = Math.min(64 * Math.round(t / 64), 255), n = Math.min(64 * Math.round(n / 64), 255), r.writeCharacteristicValue(o, [1, e, t, n, 1, 0, 9, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbCandle.SET_NAME, execute: function (e) {
                        return r.writeCharacteristicValue(i, [e])
                    }
                }), this.addCommand({
                    name: PlaybulbCandle.RESET, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 0, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 0, 0])
                        })
                    }
                })
            }, PlaybulbCandle.prototype.notifyReady = function () {
                return e.prototype.notifyReady.call(this)
            }, PlaybulbCandle.prototype.notifyDisconnected = function (e) {
                this.resetState()
            }, PlaybulbCandle.prototype.resetState = function () {
                var e = this.state;
                e[0] = {type: l, value: 0}
            }, PlaybulbCandle.prototype.getSensorValue = function (e) {
                var t = this.state[e];
                return t ? t.value : 0
            }, PlaybulbCandle.prototype.getSensorType = function (e) {
                var t = this.state[e];
                return t ? t.type : d
            }, PlaybulbCandle.ID = "playbulbcandle", PlaybulbCandle.SET_LED = "SET_LED", PlaybulbCandle.LED_RED = "LED_RED", PlaybulbCandle.LED_BLUE = "LED_BLUE", PlaybulbCandle.LED_GREEN = "LED_GREEN", PlaybulbCandle.LED_OFF = "LED_OFF", PlaybulbCandle.SET_RAINBOW = "SET_RAINBOW", PlaybulbCandle.SET_RAINBOW_FADE = "SET_RAINBOW_FADE", PlaybulbCandle.SET_FLASH = "SET_FLASH", PlaybulbCandle.SET_PULSE = "SET_PULSE", PlaybulbCandle.SET_NAME = "SET_NAME", PlaybulbCandle.RESET = "RESET", PlaybulbCandle
        }(n.DeviceDefinition);
    t.PlaybulbCandle = u
}), define("vendor/chrome/playbulbcandle-scan-def", ["require", "exports", "vendor/playbulbcandle"], function (e, t, n) {
    var r = function () {
        function PlaybulbCandleScanDef() {
            this.handlerId = n.PlaybulbCandle.ID
        }

        return PlaybulbCandleScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("a5a5005b") > -1 ? (this.name = e.name, !0) : !1
        }, PlaybulbCandleScanDef
    }();
    t.PlaybulbCandleScanDef = r
}), define("vendor/playbulbgarden", ["require", "exports", "device-definition"], function (e, t, n) {
    var r = {};
    r[0] = "1801", r[1] = "1800", r[2] = "ff04", r[3] = "a5a5005b-0200-239b-e111-02d116100000", r[4] = "180a";
    var i = "CANDLE_DEVICE_NAME_UUID", a = "CANDLE_COLOR_UUID", o = "CANDLE_EFFECT_UUID", s = "CANDLE_BATTERY",
        c = "none", d = "battery", l = function (e) {
            function PlaybulbGarden() {
                e.apply(this, arguments)
            }

            return __extends(PlaybulbGarden, e), PlaybulbGarden.prototype.init = function (t, n) {
                var r = this;
                e.prototype.init.call(this, t, n), this.resetState(), this.addCharacteristicDefinition({
                    name: s,
                    uuidStr: "2a19",
                    notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[0];
                            t.value = e[0]
                        }
                    }
                }), this.addCharacteristicDefinition({name: a, uuidStr: "fffc"}), this.addCharacteristicDefinition({
                    name: o,
                    uuidStr: "fffb"
                }), this.addCommand({
                    name: PlaybulbGarden.SET_LED, execute: function (e, t, n) {
                        return r.writeCharacteristicValue(o, [0, e, t, n, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, e, t, n])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbGarden.LED_RED, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 255, 0, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 255, 0, 0])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbGarden.LED_GREEN, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 255, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 255, 0])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbGarden.LED_BLUE, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 0, 255, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 0, 255])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbGarden.LED_OFF, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 0, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 0, 0])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbGarden.SET_RAINBOW, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [1, 0, 0, 0, 2, 0, 1, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbGarden.SET_RAINBOW_FADE, test: !0, execute: function (e, t, n) {
                        return r.writeCharacteristicValue(o, [1, 0, 0, 0, 3, 0, 38, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbGarden.SET_FLASH, execute: function (e, t, n) {
                        return r.writeCharacteristicValue(o, [1, e, t, n, 0, 0, 31, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbGarden.SET_PULSE, execute: function (e, t, n) {
                        return e = Math.min(64 * Math.round(e / 64), 255), t = Math.min(64 * Math.round(t / 64), 255), n = Math.min(64 * Math.round(n / 64), 255), r.writeCharacteristicValue(o, [1, e, t, n, 1, 0, 9, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbGarden.SET_NAME, execute: function (e) {
                        return r.writeCharacteristicValue(i, [e])
                    }
                }), this.addCommand({
                    name: PlaybulbGarden.RESET, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 0, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 0, 0])
                        })
                    }
                })
            }, PlaybulbGarden.prototype.notifyReady = function () {
                return e.prototype.notifyReady.call(this)
            }, PlaybulbGarden.prototype.notifyDisconnected = function (e) {
                this.resetState()
            }, PlaybulbGarden.prototype.resetState = function () {
                var e = this.state;
                e[0] = {type: d, value: 0}
            }, PlaybulbGarden.prototype.getSensorValue = function (e) {
                var t = this.state[e];
                return t ? t.value : 0
            }, PlaybulbGarden.prototype.getSensorType = function (e) {
                var t = this.state[e];
                return t ? t.type : c
            }, PlaybulbGarden.ID = "playbulbgarden", PlaybulbGarden.SET_LED = "SET_LED", PlaybulbGarden.LED_RED = "LED_RED", PlaybulbGarden.LED_BLUE = "LED_BLUE", PlaybulbGarden.LED_GREEN = "LED_GREEN", PlaybulbGarden.LED_OFF = "LED_OFF", PlaybulbGarden.SET_RAINBOW = "SET_RAINBOW", PlaybulbGarden.SET_RAINBOW_FADE = "SET_RAINBOW_FADE", PlaybulbGarden.SET_FLASH = "SET_FLASH", PlaybulbGarden.SET_PULSE = "SET_PULSE", PlaybulbGarden.SET_NAME = "SET_NAME", PlaybulbGarden.RESET = "RESET", PlaybulbGarden
        }(n.DeviceDefinition);
    t.PlaybulbGarden = l
}), define("vendor/chrome/playbulbgarden-scan-def", ["require", "exports", "vendor/playbulbgarden"], function (e, t, n) {
    var r = function () {
        function PlaybulbGardenScanDef() {
            this.handlerId = n.PlaybulbGarden.ID
        }

        return PlaybulbGardenScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("a5a5005b-0200-239b-e111-02d116100000") > -1 ? (this.name = e.name, !0) : !1
        }, PlaybulbGardenScanDef
    }();
    t.PlaybulbGardenScanDef = r
}), define("vendor/playbulbrainbow", ["require", "exports", "device-definition"], function (e, t, n) {
    var r = {};
    r[0] = "1801", r[1] = "1800", r[2] = "ff04", r[3] = "a5a5005b-0200-239b-e111-02d116100000", r[4] = "180a";
    var i = "CANDLE_DEVICE_NAME_UUID", a = "CANDLE_COLOR_UUID", o = "CANDLE_EFFECT_UUID", s = "CANDLE_BATTERY",
        c = "none", d = "battery", l = function (e) {
            function PlaybulbRainbow() {
                e.apply(this, arguments)
            }

            return __extends(PlaybulbRainbow, e), PlaybulbRainbow.prototype.init = function (t, n) {
                var r = this;
                e.prototype.init.call(this, t, n), this.resetState(), this.addCharacteristicDefinition({
                    name: s,
                    uuidStr: "2a19",
                    notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[0];
                            t.value = e[0]
                        }
                    }
                }), this.addCharacteristicDefinition({name: a, uuidStr: "fffc"}), this.addCharacteristicDefinition({
                    name: o,
                    uuidStr: "fffb"
                }), this.addCommand({
                    name: PlaybulbRainbow.SET_LED, execute: function (e, t, n) {
                        return r.writeCharacteristicValue(o, [0, e, t, n, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, e, t, n])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbRainbow.LED_RED, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 255, 0, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 255, 0, 0])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbRainbow.LED_GREEN, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 255, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 255, 0])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbRainbow.LED_BLUE, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 0, 255, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 0, 255])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbRainbow.LED_OFF, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 0, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 0, 0])
                        })
                    }
                }), this.addCommand({
                    name: PlaybulbRainbow.SET_RAINBOW, test: !0, execute: function () {
                        return r.writeCharacteristicValue(o, [1, 0, 0, 0, 2, 0, 1, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbRainbow.SET_RAINBOW_FADE, test: !0, execute: function (e, t, n) {
                        return r.writeCharacteristicValue(o, [1, 0, 0, 0, 3, 0, 38, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbRainbow.SET_FLASH, execute: function (e, t, n) {
                        return r.writeCharacteristicValue(o, [1, e, t, n, 0, 0, 31, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbRainbow.SET_PULSE, execute: function (e, t, n) {
                        return e = Math.min(64 * Math.round(e / 64), 255), t = Math.min(64 * Math.round(t / 64), 255), n = Math.min(64 * Math.round(n / 64), 255), r.writeCharacteristicValue(o, [1, e, t, n, 1, 0, 9, 0])
                    }
                }), this.addCommand({
                    name: PlaybulbRainbow.SET_NAME, execute: function (e) {
                        return r.writeCharacteristicValue(i, [e])
                    }
                }), this.addCommand({
                    name: PlaybulbRainbow.RESET, execute: function () {
                        return r.writeCharacteristicValue(o, [0, 0, 0, 0, 5, 0, 1, 0]).then(function () {
                            return r.writeCharacteristicValue(a, [0, 0, 0, 0])
                        })
                    }
                })
            }, PlaybulbRainbow.prototype.notifyReady = function () {
                return e.prototype.notifyReady.call(this)
            }, PlaybulbRainbow.prototype.notifyDisconnected = function (e) {
                this.resetState()
            }, PlaybulbRainbow.prototype.resetState = function () {
                var e = this.state;
                e[0] = {type: d, value: 0}
            }, PlaybulbRainbow.prototype.getSensorValue = function (e) {
                var t = this.state[e];
                return t ? t.value : 0
            }, PlaybulbRainbow.prototype.getSensorType = function (e) {
                var t = this.state[e];
                return t ? t.type : c
            }, PlaybulbRainbow.ID = "playbulbrainbow", PlaybulbRainbow.SET_LED = "SET_LED", PlaybulbRainbow.LED_RED = "LED_RED", PlaybulbRainbow.LED_BLUE = "LED_BLUE", PlaybulbRainbow.LED_GREEN = "LED_GREEN", PlaybulbRainbow.LED_OFF = "LED_OFF", PlaybulbRainbow.SET_RAINBOW = "SET_RAINBOW", PlaybulbRainbow.SET_RAINBOW_FADE = "SET_RAINBOW_FADE", PlaybulbRainbow.SET_FLASH = "SET_FLASH", PlaybulbRainbow.SET_PULSE = "SET_PULSE", PlaybulbRainbow.SET_NAME = "SET_NAME", PlaybulbRainbow.RESET = "RESET", PlaybulbRainbow
        }(n.DeviceDefinition);
    t.PlaybulbRainbow = l
}), define("vendor/chrome/playbulbrainbow-scan-def", ["require", "exports", "vendor/playbulbrainbow"], function (e, t, n) {
    var r = function () {
        function PlaybulbRainbowScanDef() {
            this.handlerId = n.PlaybulbRainbow.ID
        }

        return PlaybulbRainbowScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("a5a5005b") > -1 ? (this.name = e.name, !0) : !1
        }, PlaybulbRainbowScanDef
    }();
    t.PlaybulbRainbowScanDef = r
}), define("vendor/thunderboard", ["require", "exports", "device-definition", "data-utils", "promise-utils"], function (e, t, n, r, i) {
    var a = {};
    a[0] = "1800", a[1] = "1801", a[2] = "180a", a[3] = "180f", a[4] = "1816", a[5] = "1815", a[6] = "181a", a[7] = "d24c4f4e-17a7-4548-852c-abf51127368b", a[8] = "a4e649f4-4be5-11e5-885d-feff819cdc9f";
    var o = "THUNDERBOARD_BATTERY_LEVEL", s = "THUNDERBOARD_HUMIDITY", c = "THUNDERBOARD_TEMPERATURE",
        d = "THUNDERBOARD_UV_INDEX", l = "THUNDERBOARD_AMBIENT_LIGHT", u = "THUNDERBOARD_CSC_CONTROL_POINT",
        f = "THUNDERBOARD_CSC_MEASUREMENT", h = "THUNDERBOARD_CSC_FEATURE", p = "THUNDERBOARD_ACCELERATION_MEASUREMENT",
        m = "THUNDERBOARD_ORIENTATION_MEASUREMENT", v = "THUNDERBOARD_COMMAND", g = "THUNDERBOARD_DIGITAL",
        b = "THUNDERBOARD_CHARACTERISTIC_PRESENTATION_FORMAT", y = "THUNDERBOARD_NUMBER_OF_DIGITALS", _ = "none",
        E = "battery", C = "button 0", S = "button 1", T = "hall switch", w = "accelerometer x", D = "accelerometer y",
        A = "accelerometer z", x = "tilt", I = "magnetometer x", O = "magnetometer y", k = "magnetometer z",
        R = "ambient light", L = "uv light", P = "humidity", N = "temperature", M = 1, B = 2, U = 3, F = 4, H = 0,
        q = function (e) {
            function Thunderboard() {
                e.apply(this, arguments), this.setValue = function (e, t) {
                    var n = new Int16Array(e.slice(0, 2).buffer), i = n[0], a = this.state[t];
                    a.value = r.dataUtils.roundToPlaces(i, 2)
                }, this.setAccelerometerValues = function (e) {
                    var t = new Int16Array(e.slice(0, 2).buffer), n = t[0] / 20,
                        i = new Int16Array(e.slice(2, 4).buffer), a = i[0] / 20,
                        o = new Int16Array(e.slice(4, 6).buffer), s = o[0] / 20, c = 0;
                    -5 > a ? c = M : a > 5 ? c = U : -5 > n ? c = F : n > 5 && (c = B);
                    var d = this.state[4];
                    d.value = r.dataUtils.roundToPlaces(n, 3);
                    var l = this.state[5];
                    l.value = r.dataUtils.roundToPlaces(a, 3);
                    var u = this.state[6];
                    u.value = r.dataUtils.roundToPlaces(s, 3);
                    var f = this.state[7];
                    f.value = c
                }, this.setOrientationValues = function (e) {
                    var t = new Int16Array(e.slice(0, 2).buffer), n = t[0] / 100,
                        i = new Int16Array(e.slice(2, 4).buffer), a = i[0] / 100,
                        o = new Int16Array(e.slice(4, 6).buffer), s = o[0] / 100, c = this.state[8];
                    c.value = r.dataUtils.roundToPlaces(n, 3);
                    var d = this.state[9];
                    d.value = r.dataUtils.roundToPlaces(a, 3);
                    var l = this.state[10];
                    l.value = r.dataUtils.roundToPlaces(s, 3)
                }, this.setDigitalValues = function (e) {
                }
            }

            return __extends(Thunderboard, e), Thunderboard.prototype.init = function (t, n) {
                var r = this;
                e.prototype.init.call(this, t, n), this.resetState(), this.addCharacteristicDefinition({
                    name: o,
                    uuidStr: "2a19",
                    notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[0];
                            t.value = e[0]
                        }
                    }
                }), this.addCharacteristicDefinition({
                    name: s,
                    uuidStr: "2a6f"
                }), this.addCharacteristicDefinition({
                    name: c,
                    uuidStr: "2a6e"
                }), this.addCharacteristicDefinition({
                    name: d,
                    uuidStr: "2a76"
                }), this.addCharacteristicDefinition({
                    name: l,
                    uuidStr: "c8546913-bfd9-45eb-8dde-9f8754f4a32e"
                }), this.addCharacteristicDefinition({
                    name: f, uuidStr: "2a5b", notifcationHandler: function (e) {
                        7 != e.length
                    }
                }), this.addCharacteristicDefinition({
                    name: u,
                    uuidStr: "2a55"
                }), this.addCharacteristicDefinition({
                    name: h,
                    uuidStr: "2a5c"
                }), this.addCharacteristicDefinition({
                    name: p,
                    uuidStr: "c4c1f6e2-4be5-11e5-885dfeff819cdc9f",
                    notifcationHandler: function (e) {
                        6 == e.length && r.setAccelerometerValues(e)
                    }
                }), this.addCharacteristicDefinition({
                    name: m,
                    uuidStr: "b7c4b694-bee3-45dd-ba9ff3b5e994f49a",
                    notifcationHandler: function (e) {
                        6 == e.length && r.setOrientationValues(e)
                    }
                }), this.addCharacteristicDefinition({
                    name: v,
                    uuidStr: "71e30b8c-4131-4703-b0a0-b0bbba75856b",
                    notifcationHandler: function (e) {
                        if (1 == e.length) {
                            var t = r.state[1];
                            t.value = e[0]
                        }
                    }
                }), this.addCharacteristicDefinition({
                    name: g,
                    uuidStr: "2a56"
                }), this.addCharacteristicDefinition({
                    name: b,
                    uuidStr: "2904"
                }), this.addCharacteristicDefinition({
                    name: y,
                    uuidStr: "2909"
                }), this.addCommand({
                    name: Thunderboard.CALIBRATE_TILT, test: !0, execute: function (e, t) {
                        return i.makeDelay(10)
                    }
                }), this.addCommand({
                    name: Thunderboard.SET_LED, execute: function (e, t) {
                        return t ? H |= e : H &= 255 & ~e, r.writeCharacteristicValue(g, [H])
                    }
                }), this.addCommand({
                    name: Thunderboard.BLUE_LED_ON, test: !0, execute: function () {
                        return H |= 1, r.writeCharacteristicValue(g, [H])
                    }
                }), this.addCommand({
                    name: Thunderboard.BLUE_LED_OFF, test: !0, execute: function () {
                        return H &= 254, r.writeCharacteristicValue(g, [H])
                    }
                }), this.addCommand({
                    name: Thunderboard.GREEN_LED_ON, test: !0, execute: function () {
                        return H |= 4, r.writeCharacteristicValue(g, [H])
                    }
                }), this.addCommand({
                    name: Thunderboard.GREEN_LED_OFF, test: !0, execute: function () {
                        return H &= 251, r.writeCharacteristicValue(g, [H])
                    }
                }), this.addCommand({
                    name: Thunderboard.RESET, execute: function () {
                        return r.resetState(), r.writeCharacteristicValue(g, [H])
                    }
                })
            }, Thunderboard.prototype.notifyReady = function () {
                return e.prototype.notifyReady.call(this)
            }, Thunderboard.prototype.notifyDisconnected = function (e) {
                this.resetState()
            }, Thunderboard.prototype.resetState = function () {
                H = 0;
                var e = this.state;
                e[0] = {type: E, value: 0}, e[1] = {type: C, value: 0}, e[2] = {type: S, value: 0}, e[3] = {
                    type: T,
                    value: 0
                }, e[4] = {type: w, value: 0}, e[5] = {type: D, value: 0}, e[6] = {type: A, value: 0}, e[7] = {
                    type: x,
                    value: 0
                }, e[8] = {type: I, value: 0}, e[9] = {type: O, value: 0}, e[10] = {
                    type: k,
                    value: 0
                }, e[11] = {type: R, value: 0}, e[12] = {type: L, value: 0}, e[13] = {
                    type: P,
                    value: 0
                }, e[14] = {type: N, value: 0}
            }, Thunderboard.prototype.getSensorValue = function (e) {
                var t = this.state[e];
                return t ? t.value : 0
            }, Thunderboard.prototype.getSensorType = function (e) {
                var t = this.state[e];
                return t ? t.type : _
            }, Thunderboard.ID = "thunderboard", Thunderboard.RESET = "RESET", Thunderboard.CALIBRATE_TILT = "CALIBRATE_TILT", Thunderboard.SET_LED = "SET_LED", Thunderboard.BLUE_LED_ON = "BLUE_LED_ON", Thunderboard.BLUE_LED_OFF = "BLUE_LED_OFF", Thunderboard.GREEN_LED_ON = "GREEN_LED_ON", Thunderboard.GREEN_LED_OFF = "GREEN_LED_OFF", Thunderboard.READ_SENSORS = "READ_SENSORS", Thunderboard
        }(n.DeviceDefinition);
    t.Thunderboard = q
}), define("vendor/chrome/thunderboard-scan-def", ["require", "exports", "vendor/thunderboard"], function (e, t, n) {
    var r = function () {
        function ThunderboardScanDef() {
            this.handlerId = n.Thunderboard.ID
        }

        return ThunderboardScanDef.prototype.check = function (e) {
            return e.uuids.indexOf("a4e649f4-4be5-11e5-885d-feff819cdc9f") > -1 ? (this.name = e.name, !0) : !1
        }, ThunderboardScanDef
    }();
    t.ThunderboardScanDef = r
}), define("chrome/chrome-facade", ["require", "exports", "chrome/device-manager", "chrome/chrome-ble", "vendor/chrome/sbrick-scan-def", "vendor/chrome/bb8-scan-def", "vendor/chrome/ollie-scan-def", "vendor/chrome/wedo2-scan-def", "vendor/chrome/dash-scan-def", "vendor/chrome/dot-scan-def", "vendor/chrome/sensortag2-scan-def", "vendor/chrome/microbit-scan-def", "vendor/chrome/minidrone-scan-def", "vendor/chrome/picaxe-scan-def", "vendor/chrome/plane-scan-def", "vendor/chrome/mip-scan-def", "vendor/chrome/miposaur-scan-def", "vendor/chrome/playbulbcandle-scan-def", "vendor/chrome/playbulbgarden-scan-def", "vendor/chrome/playbulbrainbow-scan-def", "vendor/chrome/thunderboard-scan-def"], function (e, t, n, r, i, a, o, s, c, d, l, u, f, h, p, m, v, g, b, y, _) {
    var E = function () {
        function ChromeFacade() {
        }

        return ChromeFacade.prototype.init = function () {
            this.deviceManager = new n.DeviceManager;
            var e = [new i.SBrickScanDef, new a.BB8ScanDef, new o.OllieScanDef, new s.WeDo2ScanDef, new c.DashScanDef, new d.DotScanDef, new l.SensorTag2ScanDef, new u.MicrobitScanDef, new f.MinidroneScanDef, new h.PicaxeScanDef, new p.PlaneScanDef, new m.MipScanDef, new v.MiposaurScanDef, new y.PlaybulbRainbowScanDef, new b.PlaybulbGardenScanDef, new g.PlaybulbCandleScanDef, new _.ThunderboardScanDef];
            return this.deviceManager.setScanDefs(e), this.ble = new r.ChromeBle(this.deviceManager), this.deviceManager.init().then(function (e) {
                return Promise.resolve(e)
            })
        }, ChromeFacade.prototype.getBle = function () {
            return this.ble
        }, ChromeFacade.prototype.getDeviceManager = function () {
            return this.deviceManager
        }, ChromeFacade
    }();
    t.ChromeFacade = E
}), define("ble112/rx-listener", ["require", "exports", "signals", "ble112/ble112"], function (e, t, n, r) {
    function destroy() {
        chrome.serial.onReceive.removeListener(i), t.onResponse.removeAll(), t.onEvent.removeAll(), t.onError.removeAll()
    }

    function waitForEcho(e) {
        return new Promise(function (n, r) {
            var i = function (a) {
                a.packet.cClass == e.cClass && a.packet.cID == e.cID && (t.onResponse.remove(i), a.response && a.response.result && "BGLibError" == a.response.result.constructor.name ? r(new Error(a.response.result.message)) : n(a))
            };
            t.onResponse.add(i)
        })
    }

    function waitForEventType(e, n) {
        return void 0 === n && (n = function () {
            return !0
        }), new Promise(function (r, i) {
            var a = function (i) {
                i.response.constructor.name == e && n(i) && (t.onEvent.remove(a), r(i))
            };
            t.onEvent.add(a)
        })
    }

    function listenForEventType(e, n) {
        var r = function (t) {
            t.response.constructor.name == e && n(t)
        }, i = function () {
            t.onEvent.remove(r)
        };
        return t.onEvent.add(r), i
    }

    t.onResponse = new n.Signal, t.onEvent = new n.Signal, t.onError = new n.Signal;
    var i = function (e) {
        var n = e.data;
        if (n) {
            var i = new Uint8Array(n);
            r.parser.parseIncoming(i, function (e, n) {
                e ? t.onError.dispatch(e) : n.forEach(function (e) {
                    "Response" == e.responseType ? t.onResponse.dispatch(e) : "Event" == e.responseType && t.onEvent.dispatch(e)
                })
            })
        }
    };
    chrome.serial.onReceive.addListener(i), t.destroy = destroy, t.waitForEcho = waitForEcho, t.waitForEventType = waitForEventType, t.listenForEventType = listenForEventType
}), define("ble112/send-command", ["require", "exports", "ble112/ble112", "ble112/rx-listener"], function (e, t, n, r) {
    function setSerialConnectionId(e) {
        i = e
    }

    function sendCommand(e, t) {
        return void 0 === t && (t = []), new Promise(function (r, o) {
            n.parser.getPacket(e, t, function (e, t) {
                e ? o(e) : a.serial.send(i, getByteArray(t.getByteArray(null)).buffer, function (e) {
                    r(t)
                })
            })
        }).then(function (e) {
            return r.waitForEcho(e)
        })
    }

    function getByteArray(e) {
        return "undefined" != typeof Buffer ? new Uint8Array(e) : e
    }

    var i, a, o;
    chrome.runtime.getBackgroundPage(function (e) {
        o = e, a = e.chrome
    }), t.setSerialConnectionId = setSerialConnectionId, t.sendCommand = sendCommand
}), define("ble112/types", ["require", "exports"], function (e, t) {
}), define("ble112/instance-registry", ["require", "exports"], function (e, t) {
    function makeInstanceId(e, t) {
        return e + s + t
    }

    function removeAtConnection(e) {
        var t = e + s;
        removeWithPrefix(n, t), removeWithPrefix(a, t);
        var c = removeWithPrefix(r, t);
        c.forEach(function (e) {
            delete i[e.atthandle]
        });
        var d = removeWithPrefix(a, t);
        d.forEach(function (e) {
            delete o[e.chrhandle]
        })
    }

    function addService(e) {
        n[e.instanceId] = e
    }

    function getService(e) {
        return n[e]
    }

    function addCharacteristic(e) {
        r[e.instanceId] = e;
        var t = e.service, n = t.connection + s + e.atthandle;
        i[n] = e
    }

    function getCharacteristic(e) {
        return r[e]
    }

    function getCharacteristicByHandle(e, t) {
        var n = e + s + t;
        return i[n]
    }

    function addDescriptor(e) {
        a[e.instanceId] = e;
        var t = e.characteristic.service, n = t.connection + s + e.chrhandle;
        o[n] = e
    }

    function getDescriptor(e) {
        return a[e]
    }

    function getDescriptorByHandle(e, t) {
        var n = e + s + t;
        return o[n]
    }

    function removeWithPrefix(e, t) {
        var n = [];
        return Object.keys(e).forEach(function (r) {
            0 == r.indexOf(t) && (n.push(e[r]), delete e[r])
        }), n
    }

    var n = {}, r = {}, i = {}, a = {}, o = {}, s = ":";
    t.makeInstanceId = makeInstanceId, t.removeAtConnection = removeAtConnection, t.addService = addService, t.getService = getService, t.addCharacteristic = addCharacteristic, t.getCharacteristic = getCharacteristic, t.getCharacteristicByHandle = getCharacteristicByHandle, t.addDescriptor = addDescriptor, t.getDescriptor = getDescriptor, t.getDescriptorByHandle = getDescriptorByHandle
}), define("ble112/commands/start-scanning", ["require", "exports", "bglib", "ble112/send-command"], function (e, t, n, r) {
    function startScanningCmd() {
        var e = function () {
            return r.sendCommand(n.api.gapSetMode, [0, 0])
        };
        return r.sendCommand(n.api.gapEndProcedure).then(e, e).then(function (e) {
            var t = 200, i = 200, a = !0;
            return r.sendCommand(n.api.gapSetScanParameters, [t, i, a ? 1 : 0])
        }).then(function (e) {
            return r.sendCommand(n.api.gapDiscover, [1])
        })
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t["default"] = startScanningCmd
}), define("ble112/commands/stop-scanning", ["require", "exports", "bglib", "ble112/send-command"], function (e, t, n, r) {
    function resolve() {
        return Promise.resolve()
    }

    function stopScanningCmd() {
        return r.sendCommand(n.api.gapEndProcedure).then(resolve, resolve)
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t["default"] = stopScanningCmd
}), define("ble112/commands/start", ["require", "exports"], function (e, t) {
    function connect(e) {
        return new Promise(function (t, n) {
            var r = {bitrate: 25600, dataBits: "eight", stopBits: "one", parityBit: "no", ctsFlowControl: !1};
            chrome.serial.connect(e, r, function (e) {
                chrome.runtime.lastError ? n(chrome.runtime.lastError) : t(e.connectionId)
            })
        })
    }

    function getPortPath() {
        return new Promise(function (e, t) {
            chrome.serial.getDevices(function (n) {
                var r;
                n.some(function (e) {
                    return 9304 == e.vendorId && 1 == e.productId ? (r = e, !0) : !1
                }), r ? e(r.path) : t(new Error("BLED112 not found"))
            })
        })
    }

    function start() {
        return getPortPath().then(function (e) {
            return connect(e)
        })
    }

    t.start = start
}), define("ble112/commands/connect", ["require", "exports", "bglib", "ble112/send-command", "ble112/rx-listener"], function (e, t, n, r, i) {
    function connectCmd(e, t, a, o, s) {
        void 0 === o && (o = 9), void 0 === s && (s = 75);
        var c, d = Math.floor(s / 1.25), l = Math.floor(80), u = 100, f = 0, h = "_bgEventConnectionStatus",
            p = i.waitForEventType(h, function (e) {
                return e.response.flags === o
            }), m = new Date;
        return r.sendCommand(n.api.gapConnectDirect, [e, t, d, l, u, f]).then(function (e) {
            return c = e.response.connection_handle, console.log("connect echo received"), Promise.race([p, new Promise(function (e, t) {
                setTimeout(function () {
                    t(new Error("Connection timed out after " + a + "ms"))
                }, a)
            })])
        }).then(function () {
            return console.log("connect event received after ", (new Date).getTime() - m.getTime(), " ms"), Promise.resolve(c)
        })
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t["default"] = connectCmd
}), define("ble112/commands/disconnect", ["require", "exports", "bglib", "ble112/send-command", "ble112/rx-listener"], function (e, t, n, r, i) {
    function disconnectCmd(e, t) {
        return r.sendCommand(n.api.connectionDisconnect, [e]).then(function () {
            return t ? i.waitForEventType("_bgEventConnectionDisconnected") : Promise.resolve()
        })
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t["default"] = disconnectCmd
}), define("ble112/device-manager", ["require", "exports", "bglib", "ble112/send-command", "ble112/rx-listener", "device-manager/idevice-manager", "data-utils", "ble112/instance-registry", "ble112/rx-listener", "ble112/commands/start-scanning", "ble112/commands/stop-scanning", "ble112/commands/start", "ble112/commands/connect", "ble112/commands/disconnect", "promise-utils", "device-manager/abstract-device-manager"], function (e, t, n, r, i, a, o, s, c, d, l, u, f, h, p, m) {
    var v = function (e) {
        function DeviceManager() {
            e.call(this), this.scanData = {}, this.deviceScanDefs = []
        }

        return __extends(DeviceManager, e), DeviceManager.getCompleteLocalName = function (e) {
            var t;
            e.some(function (e) {
                return "Complete Local Name" == e.type ? (t = o.dataUtils.ua2text(e.raw), !0) : !1
            });
            return t
        }, DeviceManager.prototype.setScanDefs = function (e) {
            this.deviceScanDefs = e
        }, DeviceManager.prototype.formatUuidName = function (e) {
            return -1 == e.indexOf("-") ? e : e.toLowerCase().replace(/-/g, "")
        }, DeviceManager.prototype.init = function () {
            var e = this;
            return u.start().then(function (t) {
                return e.serialConnectionId = t, r.setSerialConnectionId(t), i.listenForEventType("_bgEventConnectionDisconnected", function (t) {
                    var n = e.getDeviceByConnection(t.response.connection);
                    e.notifyDisconnect(n)
                }), h["default"](0, !1).then(function () {
                    return h["default"](1, !1)
                }).then(function () {
                    return h["default"](2, !1)
                }).then(function () {
                    return Promise.resolve("BLED112")
                })
            })
        }, DeviceManager.prototype.destroy = function (e) {
            this.onDeviceFound.removeAll(), this.connectedDevices.forEach(function (e) {
                r.sendCommand(n.api.connectionDisconnect, [e.connectionHandle])
            });
            var t = this.serialConnectionId;
            e.setTimeout(function () {
                e.chrome.serial.disconnect(t, function (t) {
                    e.console.log("serial disconnected")
                })
            }, 1e3)
        }, DeviceManager.prototype.notifyDisconnect = function (e) {
            e && (e.connectionHandle = null, this.removeConnectedDevice(e))
        }, DeviceManager.prototype.connect = function (e) {
            var t = this, n = this.getDeviceByAddress(this.foundDevices, e);
            return n ? (n.state = a.EConnectionState.PENDING, f["default"](n.macAddressBytes, n.addressType, 1e4, n.scanDef.connectFlag, n.scanDef.conInterval).then(function (e) {
                return n.connectionHandle = e, t.addConnectedDevice(n), Promise.resolve()
            }, function (e) {
                return n.state = a.EConnectionState.NOT_CONNECTED, Promise.reject(new Error("Couldn't connect. " + e.message))
            })) : Promise.reject(new Error("Device no longer available"))
        }, DeviceManager.prototype.disconnect = function (e) {
            var t = this.getConnectedDeviceByAddress(e);
            return t.state = a.EConnectionState.PENDING, s.removeAtConnection(t.connectionHandle), h["default"](t.connectionHandle, !0)
        }, DeviceManager.prototype.reset = function () {
            var e = this, t = this.connectedDevices.map(function (t) {
                return function () {
                    return e.disconnect(t.macAddress)
                }
            });
            return p.reduce(t)
        }, DeviceManager.prototype.startScanning = function () {
            return this.resetFoundDevices(), this.scanData = {}, c.onEvent.add(this.onScanEvent, this), d["default"]()
        }, DeviceManager.prototype.stopScanning = function () {
            return c.onEvent.remove(this.onScanEvent, this), l["default"]()
        }, DeviceManager.prototype.getDeviceByConnection = function (e) {
            return this.connectedDevices.find(function (t) {
                return t.connectionHandle == e
            })
        }, DeviceManager.prototype.checkNew = function (e) {
            var t = e.sender.toString(), n = this.scanData[t];
            if (n) {
                if (n.found) return
            } else n = {responses: {}, found: !1}, this.scanData[t] = n;
            n.responses[e.packet_type] = e;
            var r = this.deviceScanDefs.find(function (e) {
                return e.check(n)
            });
            if (r) {
                n.found = !0;
                var i = o.dataUtils.reverseToHex(e.sender), s = {
                    handlerId: r.handlerId,
                    displayName: r.name,
                    macAddress: i,
                    timeAdded: new Date,
                    addressType: e.address_type,
                    macAddressBytes: e.sender,
                    state: a.EConnectionState.NOT_CONNECTED,
                    scanDef: r,
                    handler: null
                };
                this.addFoundDevice(t, s)
            }
        }, DeviceManager.prototype.onScanEvent = function (e) {
            "_bgEventGAPScanResponse" == e.response.constructor.name && this.checkNew(e.response)
        }, DeviceManager
    }(m.AbstractDeviceManager);
    t.DeviceManager = v
}), define("ble112/commands/discover-services", ["require", "exports", "bglib", "data-utils", "ble112/instance-registry", "ble112/send-command", "ble112/rx-listener"], function (e, t, n, r, i, a, o) {
    function discoverServicesCmd(e) {
        var t = 1, s = 65535, c = new Uint8Array([0, 40]), d = [],
            l = o.listenForEventType("_bgEventAttClientGroupFound", function (t) {
                var n = t.response.uuid, a = r.dataUtils.reverseToHex(n), o = {
                    uuid: a,
                    isPrimary: !0,
                    uuidBytes: n,
                    connection: e,
                    start: t.response.start,
                    end: t.response.end,
                    instanceId: i.makeInstanceId(e, a)
                };
                i.addService(o), d.push(o)
            }), u = o.waitForEventType("_bgEventAttClientProcedureCompleted");
        return a.sendCommand(n.api.attClientReadByGroupType, [e, t, s, c]).then(function (e) {
            return u
        }).then(function () {
            return l(), Promise.resolve(d)
        })
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t["default"] = discoverServicesCmd
}), define("ble112/commands/get-characteristics", ["require", "exports", "bglib", "data-utils", "ble112/instance-registry", "ble112/send-command", "ble112/rx-listener"], function (e, t, n, r, i, a, o) {
    function getProperties(e) {
        var t = [];
        return 1 & e && t.push("broadcast"), 2 & e && t.push("read"), 4 & e && t.push("writeWithoutResponse"), 8 & e && t.push("write"), 16 & e && t.push("notify"), 32 & e && t.push("indicate"), 64 & e && t.push("authenticatedSignedWrites"), 128 & e && t.push("extendedProperties"), t
    }

    function getCharacteristicsCmd(e) {
        var t, s = [3, 40], c = [], d = o.listenForEventType("_bgEventAttClientAttributeValue", function (n) {
            if ("3" == n.response.type) {
                var a = n.response, o = a.value, s = r.dataUtils.reverseToHex(o.slice(3)), d = {
                    properties: getProperties(o[0]),
                    atthandle: o[1],
                    uuid: s,
                    value: o,
                    service: e,
                    instanceId: i.makeInstanceId(e.connection, s),
                    nextAttHandle: e.end + 1
                };
                i.addCharacteristic(d), c.push(d), t && (t.nextAttHandle = d.atthandle), t = d
            }
        }), l = o.waitForEventType("_bgEventAttClientProcedureCompleted");
        return a.sendCommand(n.api.attClientReadByType, [e.connection, e.start, e.end, s]).then(function (e) {
            return l
        }).then(function () {
            return d(), Promise.resolve(c)
        })
    }

    t.getCharacteristicsCmd = getCharacteristicsCmd
}), define("ble112/commands/get-descriptors", ["require", "exports", "bglib", "data-utils", "ble112/instance-registry", "ble112/send-command", "ble112/rx-listener"], function (e, t, n, r, i, a, o) {
    function getDescriptorsCmd(e) {
        var t = e.service, s = [], c = o.listenForEventType("_bgEventAttClientFindInformationFound", function (n) {
            var a = n.response, o = a.uuid, c = r.dataUtils.reverseToHex(o), d = {
                uuid: r.dataUtils.reverseToHex(o),
                characteristic: e,
                chrhandle: a.chrhandle,
                uuidBytes: o,
                instanceId: i.makeInstanceId(t.connection, e.uuid + ":" + c)
            };
            s.push(d), i.addDescriptor(d)
        }), d = o.waitForEventType("_bgEventAttClientProcedureCompleted"), l = e.nextAttHandle;
        if (null == l) {
            var t = e.service;
            l = t.end
        } else l -= 2;
        return a.sendCommand(n.api.attClientFindInformation, [t.connection, e.atthandle + 1, l]).then(function (e) {
            return d
        }).then(function () {
            return c(), Promise.resolve(s)
        })
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t["default"] = getDescriptorsCmd
}), define("ble112/commands/write-characteristic-value", ["require", "exports", "bglib", "ble112/send-command", "ble112/rx-listener"], function (e, t, n, r, i) {
    function writeCharacteristicValueCmd(e, t) {
        var a = e.service, o = i.waitForEventType("_bgEventAttClientProcedureCompleted");
        return r.sendCommand(n.api.attClientAttributeWrite, [a.connection, e.atthandle, t]).then(function (e) {
            return o
        })
    }

    t.writeCharacteristicValueCmd = writeCharacteristicValueCmd
}), define("ble112/commands/set-characteristic-notification", ["require", "exports", "bglib", "ble112/send-command", "ble112/rx-listener"], function (e, t, n, r, i) {
    function setCharacteristicNotificationCmd(e, t) {
        function waitForComplete() {
            return i.waitForEventType("_bgEventAttClientProcedureCompleted")
        }

        var a, o, s = i.listenForEventType("_bgEventAttClientAttributeValue", function (e) {
            a || "3" != e.response.type || (a = e.response.atthandle)
        }), c = waitForComplete(), d = e.atthandle, l = e.nextAttHandle;
        if (null == l) {
            var u = e.service;
            l = u.end + 1
        } else l -= 1;
        a = null;
        var f = 0;
        e.properties.indexOf("notify") > -1 && (f |= 1), e.properties.indexOf("indicate") > -1 && (f |= 2);
        var h = [t ? f : 0, 0];
        return r.sendCommand(n.api.attClientReadByType, [e.service.connection, d, l, [2, 41]]).then(function (e) {
            return c
        }).then(function () {
            return s(), o = waitForComplete(), r.sendCommand(n.api.attClientAttributeWrite, [e.service.connection, a, h])
        }).then(function () {
            return o
        }).then(function () {
            return Promise.resolve({})
        })
    }

    t.setCharacteristicNotificationCmd = setCharacteristicNotificationCmd
}), define("ble112/commands/write-descriptor-value", ["require", "exports", "bglib", "ble112/send-command", "ble112/rx-listener"], function (e, t, n, r, i) {
    function writeDescriptorValueCmd(e, t) {
        var a = e.characteristic.service, o = i.waitForEventType("_bgEventAttClientProcedureCompleted");
        return r.sendCommand(n.api.attClientAttributeWrite, [a.connection, e.chrhandle, t]).then(function (e) {
            return o
        })
    }

    t.writeDescriptorValueCmd = writeDescriptorValueCmd
}), define("ble112/commands/read-value", ["require", "exports", "bglib", "ble112/send-command", "ble112/rx-listener"], function (e, t, n, r, i) {
    function readValueCmd(e, t) {
        var a, o = i.waitForEventType("_bgEventAttClientAttributeValue", function (e) {
            return "0" == e.response.type ? (a = e.response.value.buffer, !0) : void 0
        }), s = i.waitForEventType("_bgEventAttClientProcedureCompleted");
        return r.sendCommand(n.api.attClientReadByHandle, [e, t]).then(function () {
            return Promise.race([o, s])
        }).then(function () {
            return Promise.resolve(a)
        })
    }

    t.readValueCmd = readValueCmd
}), define("ble112/ble112", ["require", "exports", "signals", "ble112/rx-listener", "ble112/instance-registry", "ble112/commands/discover-services", "ble112/commands/get-characteristics", "ble112/commands/get-descriptors", "ble112/commands/write-characteristic-value", "ble112/commands/set-characteristic-notification", "ble112/commands/write-descriptor-value", "ble112/commands/read-value"], function (e, t, n, r, i, a, o, s, c, d, l, u) {
    var f = e("bglib");
    t.parser = new f, t.parser.setPacketMode(!1), t.SCAN_HEADER_FLAGS = t.parser.SCAN_HEADER_FLAGS;
    var h = function () {
        function ble112(e) {
            var t = this;
            this.onServiceAdded = new n.Signal, this.onServiceChanged = new n.Signal, this.onServiceRemoved = new n.Signal, this.onCharacteristicValueChanged = new n.Signal, this.onDescriptorValueChanged = new n.Signal, this.deviceManager = e, r.listenForEventType("_bgEventAttClientAttributeValue", function (e) {
                if ("1" == e.response.type || "2" == e.response.type) {
                    var n = (e.response.connection, i.getCharacteristicByHandle(e.response.connection, e.response.atthandle));
                    if (n) n.value = e.response.value.buffer, t.onCharacteristicValueChanged.dispatch(n); else {
                        var r = i.getDescriptorByHandle(e.response.connection, e.response.atthandle);
                        r && (r.value = e.response.value.buffer, t.onDescriptorValueChanged.dispatch(r))
                    }
                }
            })
        }

        return ble112.prototype.connect = function (e, t) {
            return this.deviceManager.connect(e)
        }, ble112.prototype.disconnect = function (e) {
            return this.deviceManager.disconnect(e)
        }, ble112.prototype.getService = function (e) {
            return Promise.resolve(i.getService(e))
        }, ble112.prototype.getServices = function (e) {
            var t = this.deviceManager.getConnectedDeviceByAddress(e);
            if (!t) throw new Error("No device found for deviceAddress " + e);
            return a["default"](t.connectionHandle)
        }, ble112.prototype.getCharacteristic = function (e) {
            return Promise.resolve(i.getCharacteristic(e))
        }, ble112.prototype.getCharacteristics = function (e) {
            var t = i.getService(e);
            if (!t) throw new Error("No service found for serviceId " + e);
            return o.getCharacteristicsCmd(t)
        }, ble112.prototype.getIncludedServices = function (e) {
            return Promise.resolve()
        }, ble112.prototype.getDescriptor = function (e) {
            return Promise.resolve(i.getDescriptor(e))
        }, ble112.prototype.getDescriptors = function (e) {
            return s["default"](i.getCharacteristic(e))
        }, ble112.prototype.readCharacteristicValue = function (e) {
            var t = this, n = i.getCharacteristic(e), r = n.service;
            return u.readValueCmd(r.connection, n.atthandle).then(function (e) {
                return null != e ? (n.value = e, t.onCharacteristicValueChanged.dispatch(n), Promise.resolve(n)) : Promise.reject(new Error("chrome.bluetoothLowEnergy.Characteristic not found"))
            })
        }, ble112.prototype.writeCharacteristicValue = function (e, t) {
            return c.writeCharacteristicValueCmd(i.getCharacteristic(e), new Uint8Array(t))
        }, ble112.prototype.startCharacteristicNotifications = function (e, t) {
            return d.setCharacteristicNotificationCmd(i.getCharacteristic(e), !0)
        }, ble112.prototype.stopCharacteristicNotifications = function (e) {
            return d.setCharacteristicNotificationCmd(i.getCharacteristic(e), !1)
        }, ble112.prototype.readDescriptorValue = function (e) {
            var t = this, n = i.getDescriptor(e), r = n.characteristic.service;
            return u.readValueCmd(r.connection, n.chrhandle).then(function (e) {
                return null != e ? (n.value = e, t.onDescriptorValueChanged.dispatch(n), Promise.resolve(n)) : Promise.reject(new Error("chrome.bluetoothLowEnergy.Characteristic not found"))
            })
        }, ble112.prototype.writeDescriptorValue = function (e, t) {
            return l.writeDescriptorValueCmd(i.getDescriptor(e), new Uint8Array(t))
        }, ble112
    }();
    t.ble112 = h
}), define("ble112/advert-device-def", ["require", "exports", "ble112/device-manager"], function (e, t, n) {
    var r = function () {
        function AdvertDeviceDef(e, t) {
            this.handlerId = e, this.name = t
        }

        return AdvertDeviceDef.prototype.check = function (e) {
            var t = e.responses[0];
            if (t) {
                var r = n.DeviceManager.getCompleteLocalName(e.responses[0].data);
                return this.name == r
            }
            return !1
        }, AdvertDeviceDef
    }();
    t.AdvertDeviceDef = r
}), define("vendor/ble112/bb8-scan-def", ["require", "exports", "vendor/abstract-sphero", "ble112/ble112", "ble112/device-manager"], function (e, t, n, r, i) {
    var a = function () {
        function BB8ScanDef() {
            this.handlerId = n.AbstractSphero.ID
        }

        return BB8ScanDef.prototype.check = function (e) {
            var t = !1, n = !1, a = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_ADV_IND];
            if (a) {
                var o = a.data[1];
                n = o && 255 == o.typeFlag && o.data && o.data.join && "5148" === o.data.join("")
            }
            var s = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            return s && (this.name = i.DeviceManager.getCompleteLocalName(s.data), t = !0), t && n
        }, BB8ScanDef
    }();
    t.BB8ScanDef = a
}), define("vendor/ble112/ollie-scan-def", ["require", "exports", "vendor/abstract-sphero", "ble112/ble112", "ble112/device-manager"], function (e, t, n, r, i) {
    var a = function () {
        function OllieScanDef() {
            this.handlerId = n.AbstractSphero.ID
        }

        return OllieScanDef.prototype.check = function (e) {
            var t = !1, n = !1, a = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_ADV_IND];
            if (a) {
                var o = a.data[1];
                n = o && 25 == o.typeFlag && o.data && o.data.join && "5218" === o.data.join("")
            }
            var s = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            return s && (this.name = i.DeviceManager.getCompleteLocalName(s.data), t = !0), t && n
        }, OllieScanDef
    }();
    t.OllieScanDef = a
}), define("vendor/ble112/wedo2-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/wedo2"], function (e, t, n, r, i) {
    var a = function () {
        function WeDo2ScanDef() {
            this.handlerId = i.WeDo2.ID
        }

        return WeDo2ScanDef.prototype.check = function (e) {
            var t = !1, i = !1, a = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_ADV_IND];
            if (a) {
                var o = a.data[2];
                i = o && o.data && o.data.join && "2315000000000000" === o.data.join("")
            }
            var s = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            return s && (this.name = n.DeviceManager.getCompleteLocalName(s.data), t = !0), t && i
        }, WeDo2ScanDef
    }();
    t.WeDo2ScanDef = a
}), define("vendor/ble112/dash-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/dash"], function (e, t, n, r, i) {
    var a = function () {
        function DashScanDef() {
            this.handlerId = i.Dash.ID, this.connectFlag = 5
        }

        return DashScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && a.indexOf("Dash") > -1 && (this.name = a, t = !0)
            }
            return t
        }, DashScanDef
    }();
    t.DashScanDef = a
}), define("vendor/ble112/dot-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/dash"], function (e, t, n, r, i) {
    var a = function () {
        function DotScanDef() {
            this.handlerId = i.Dash.ID, this.connectFlag = 5
        }

        return DotScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && a.indexOf("Dot") > -1 && (this.name = a, t = !0)
            }
            return t
        }, DotScanDef
    }();
    t.DotScanDef = a
}), define("vendor/ble112/sensortag2-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/sensortag2"], function (e, t, n, r, i) {
    var a = function () {
        function SensorTag2ScanDef() {
            this.handlerId = i.SensorTag2.ID, this.connectFlag = 5
        }

        return SensorTag2ScanDef.prototype.check = function (e) {
            var t = !1, i = !1, a = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_ADV_IND];
            if (a) {
                var o = a.data[2];
                i = o && o.data && o.data.join && "130300" === o.data.join("")
            }
            var s = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            return s && (this.name = n.DeviceManager.getCompleteLocalName(s.data), t = !0), t && i
        }, SensorTag2ScanDef
    }();
    t.SensorTag2ScanDef = a
}), define("vendor/ble112/microbit-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/microbit"], function (e, t, n, r, i) {
    var a = function () {
        function MicrobitScanDef() {
            this.handlerId = i.Microbit.ID, this.connectFlag = 5, this.conInterval = 25
        }

        return MicrobitScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_ADV_IND];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && a.indexOf("micro:bit") > -1 && (this.name = a, t = !0)
            }
            return t
        }, MicrobitScanDef
    }();
    t.MicrobitScanDef = a
}), define("vendor/ble112/minidrone-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/minidrone"], function (e, t, n, r, i) {
    var a = function () {
        function MinidroneScanDef() {
            this.handlerId = i.Minidrone.ID
        }

        return MinidroneScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_ADV_IND];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && (a.indexOf("RS_") > -1 || a.indexOf("Travis_") > -1 || a.indexOf("Blaze_") > -1 || a.indexOf("Swat_") > -1 || a.indexOf("Mars_") > -1 || a.indexOf("Maclan_") > -1) && (this.name = a, t = !0)
            }
            return t
        }, MinidroneScanDef
    }();
    t.MinidroneScanDef = a
}), define("vendor/ble112/plane-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/plane"], function (e, t, n, r, i) {
    var a = function () {
        function PlaneScanDef() {
            this.handlerId = i.Plane.ID
        }

        return PlaneScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && a.indexOf("TailorToys PowerUp") > -1 && (this.name = a, t = !0)
            }
            return t
        }, PlaneScanDef
    }();
    t.PlaneScanDef = a
}), define("vendor/ble112/mip-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/mip"], function (e, t, n, r, i) {
    var a = function () {
        function MipScanDef() {
            this.handlerId = i.Mip.ID
        }

        return MipScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && a.indexOf("Sir Mippington") > -1 && (this.name = a, t = !0)
            }
            return t
        }, MipScanDef
    }();
    t.MipScanDef = a
}), define("vendor/ble112/miposaur-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/miposaur"], function (e, t, n, r, i) {
    var a = function () {
        function MiposaurScanDef() {
            this.handlerId = i.Miposaur.ID
        }

        return MiposaurScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && a.indexOf("Miposaur") > -1 && (this.name = a, t = !0)
            }
            return t
        }, MiposaurScanDef
    }();
    t.MiposaurScanDef = a
}), define("vendor/ble112/playbulbcandle-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/playbulbcandle"], function (e, t, n, r, i) {
    var a = function () {
        function PlaybulbCandleScanDef() {
            this.handlerId = i.PlaybulbCandle.ID
        }

        return PlaybulbCandleScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && a.indexOf("PLAYBULB CANDLE") > -1 && (this.name = a, t = !0)
            }
            return t
        }, PlaybulbCandleScanDef
    }();
    t.PlaybulbCandleScanDef = a
}), define("vendor/ble112/playbulbgarden-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/playbulbgarden"], function (e, t, n, r, i) {
    var a = function () {
        function PlaybulbGardenScanDef() {
            this.handlerId = i.PlaybulbGarden.ID
        }

        return PlaybulbGardenScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && a.indexOf("PLAYBULB GARDEN") > -1 && (this.name = a, t = !0)
            }
            return t
        }, PlaybulbGardenScanDef
    }();
    t.PlaybulbGardenScanDef = a
}), define("vendor/ble112/playbulbrainbow-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/playbulbrainbow"], function (e, t, n, r, i) {
    var a = function () {
        function PlaybulbRainbowScanDef() {
            this.handlerId = i.PlaybulbRainbow.ID
        }

        return PlaybulbRainbowScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_SCAN_RSP];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && a.indexOf("PLAYBULB RAINBOW") > -1 && (this.name = a, t = !0)
            }
            return t
        }, PlaybulbRainbowScanDef
    }();
    t.PlaybulbRainbowScanDef = a
}), define("vendor/ble112/thunderboard-scan-def", ["require", "exports", "ble112/device-manager", "ble112/ble112", "vendor/thunderboard"], function (e, t, n, r, i) {
    var a = function () {
        function ThunderboardScanDef() {
            this.handlerId = i.Thunderboard.ID
        }

        return ThunderboardScanDef.prototype.check = function (e) {
            var t = !1, i = e.responses[r.SCAN_HEADER_FLAGS.GAP_SCAN_HEADER_ADV_IND];
            if (i) {
                var a = n.DeviceManager.getCompleteLocalName(i.data);
                a && a.indexOf("Thunder React") > -1 && (this.name = a, t = !0)
            }
            return t
        }, ThunderboardScanDef
    }();
    t.ThunderboardScanDef = a
}), define("ble112/ble112-facade", ["require", "exports", "ble112/ble112", "ble112/device-manager", "ble112/advert-device-def", "vendor/ble112/bb8-scan-def", "vendor/ble112/ollie-scan-def", "vendor/ble112/wedo2-scan-def", "vendor/ble112/dash-scan-def", "vendor/ble112/dot-scan-def", "vendor/ble112/sensortag2-scan-def", "vendor/ble112/microbit-scan-def", "vendor/ble112/minidrone-scan-def", "vendor/ble112/plane-scan-def", "vendor/ble112/mip-scan-def", "vendor/ble112/miposaur-scan-def", "vendor/ble112/playbulbcandle-scan-def", "vendor/ble112/playbulbgarden-scan-def", "vendor/ble112/playbulbrainbow-scan-def", "vendor/ble112/thunderboard-scan-def", "vendor/sbrick", "vendor/picaxe"], function (e, t, n, r, i, a, o, s, c, d, l, u, f, h, p, m, v, g, b, y, _, E) {
    var C = function () {
        function Ble112Facade() {
        }

        return Ble112Facade.prototype.init = function () {
            var e = this;
            return this.deviceManager = new r.DeviceManager, this.deviceManager.init().then(function (t) {
                var r = [new i.AdvertDeviceDef(_.SBrick.ID, "SBrick"), new a.BB8ScanDef, new o.OllieScanDef, new s.WeDo2ScanDef, new c.DashScanDef, new d.DotScanDef, new l.SensorTag2ScanDef, new u.MicrobitScanDef, new f.MinidroneScanDef, new i.AdvertDeviceDef(E.Picaxe.ID, "PICAXE"), new h.PlaneScanDef, new p.MipScanDef, new m.MiposaurScanDef, new b.PlaybulbRainbowScanDef, new g.PlaybulbGardenScanDef, new v.PlaybulbCandleScanDef, new y.ThunderboardScanDef];
                return e.deviceManager.setScanDefs(r), e.ble = new n.ble112(e.deviceManager), Promise.resolve(t)
            })
        }, Ble112Facade.prototype.getBle = function () {
            return this.ble
        }, Ble112Facade.prototype.getDeviceManager = function () {
            return this.deviceManager
        }, Ble112Facade
    }();
    t.Ble112Facade = C
}), define("facade", ["require", "exports", "chrome/chrome-facade", "ble112/ble112-facade"], function (e, t, n, r) {
    var i = function () {
        function Facade() {
        }

        return Facade.prototype.init = function () {
            var e = this;
            return this.platformFacade = new r.Ble112Facade, this.platformFacade.init().then(function (e) {
                return console.log("Made Ble112 facade"), Promise.resolve(e)
            }, function (t) {
                return console.error(t), e.platformFacade = new n.ChromeFacade, e.platformFacade.init().then(function (e) {
                    return console.log("Made Chrome facade"), Promise.resolve(e)
                })
            })
        }, Facade.prototype.getBle = function () {
            return this.platformFacade.getBle()
        }, Facade.prototype.getDeviceManager = function () {
            return this.platformFacade.getDeviceManager()
        }, Facade
    }();
    t.Facade = i
}), define("device-manager/handler-registry", ["require", "exports", "vendor/sbrick", "vendor/abstract-sphero", "vendor/wedo2", "vendor/dash", "vendor/sensortag2", "vendor/microbit", "vendor/minidrone", "vendor/picaxe", "vendor/plane", "vendor/mip", "vendor/miposaur", "vendor/playbulbcandle", "vendor/playbulbgarden", "vendor/playbulbrainbow", "vendor/thunderboard"], function (e, t, n, r, i, a, o, s, c, d, l, u, f, h, p, m, v) {
    function makeHandler(e, t, n) {
        var r = g[e], i = new r;
        return i.init(t, n), i
    }

    var g = {};
    g[n.SBrick.ID] = n.SBrick, g[r.AbstractSphero.ID] = r.AbstractSphero, g[i.WeDo2.ID] = i.WeDo2, g[a.Dash.ID] = a.Dash, g[o.SensorTag2.ID] = o.SensorTag2, g[s.Microbit.ID] = s.Microbit, g[c.Minidrone.ID] = c.Minidrone, g[d.Picaxe.ID] = d.Picaxe, g[l.Plane.ID] = l.Plane, g[u.Mip.ID] = u.Mip, g[f.Miposaur.ID] = f.Miposaur, g[h.PlaybulbCandle.ID] = h.PlaybulbCandle, g[p.PlaybulbGarden.ID] = p.PlaybulbGarden, g[m.PlaybulbRainbow.ID] = m.PlaybulbRainbow, g[v.Thunderboard.ID] = v.Thunderboard, t.makeHandler = makeHandler
}), define("device-manager/att-registry", ["require", "exports", "data-utils", "device-manager/idevice-manager", "promise-utils", "device-manager/handler-registry"], function (e, t, n, r, i, a) {
    function notifyBleReady(e) {
        e.onDeviceDisconnected.add(function (e) {
            if (e) {
                var t = e.handler;
                t && (t.notifyDisconnected(name), delete e.handler)
            }
        })
    }

    function notifyConnected(e, t, o) {
        var s = a.makeHandler(e.handlerId, t, o);
        return s ? t.getServices(e.macAddress).then(function (a) {
            var o = [], c = [];
            return a.forEach(function (e) {
                o.push(function () {
                    return t.getCharacteristics(e.instanceId).then(function (e) {
                        return e.forEach(function (e) {
                            var r = s.getCharacteristicByUuid(n.dataUtils.convertUUID(e.uuid));
                            r && (r.characteristic = e), c.push(function () {
                                return t.getDescriptors(e.instanceId).then(function (e) {
                                    return e.forEach(function (e) {
                                        var t = s.getDescriptorByUuid(n.dataUtils.convertUUID(e.uuid));
                                        t && (t.descriptor = e)
                                    }), Promise.resolve()
                                })
                            })
                        }), Promise.resolve()
                    })
                })
            }), i.reduce(o).then(function () {
                return i.reduce(c)
            }).then(function () {
                return s.notifyReady()
            }).then(function () {
                return e.handler = s, e.state = r.EConnectionState.READY, Promise.resolve()
            })
        }) : Promise.reject(new Error("No handler for " + e.handlerId))
    }

    t.notifyBleReady = notifyBleReady, t.notifyConnected = notifyConnected
}), define("bleLib", function () {
}), function (t) {
    function h(e, t, n, r, i) {
        this._listener = t, this._isOnce = n, this.context = r, this._signal = e, this._priority = i || 0
    }

    function g(e, t) {
        if ("function" != typeof e) throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}", t))
    }

    function e() {
        this._bindings = [], this._prevParams = null;
        var t = this;
        this.dispatch = function () {
            e.prototype.dispatch.apply(t, arguments)
        }
    }

    h.prototype = {
        active: !0, params: null, execute: function (e) {
            var t;
            return this.active && this._listener && (e = this.params ? this.params.concat(e) : e, t = this._listener.apply(this.context, e), this._isOnce && this.detach()), t
        }, detach: function () {
            return this.isBound() ? this._signal.remove(this._listener, this.context) : null
        }, isBound: function () {
            return !!this._signal && !!this._listener
        }, isOnce: function () {
            return this._isOnce
        }, getListener: function () {
            return this._listener
        }, getSignal: function () {
            return this._signal
        }, _destroy: function () {
            delete this._signal, delete this._listener, delete this.context
        }, toString: function () {
            return "[SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]"
        }
    }, e.prototype = {
        VERSION: "1.0.0", memorize: !1, _shouldPropagate: !0, active: !0,
        _registerListener: function (e, t, n, r) {
            var i = this._indexOfListener(e, n);
            if (-1 !== i) {
                if (e = this._bindings[i], e.isOnce() !== t) throw Error("You cannot add" + (t ? "" : "Once") + "() then add" + (t ? "Once" : "") + "() the same listener without removing the relationship first.")
            } else e = new h(this, e, t, n, r), this._addBinding(e);
            return this.memorize && this._prevParams && e.execute(this._prevParams), e
        }, _addBinding: function (e) {
            var t = this._bindings.length;
            do --t; while (this._bindings[t] && e._priority <= this._bindings[t]._priority);
            this._bindings.splice(t + 1, 0, e)
        }, _indexOfListener: function (e, t) {
            for (var n, r = this._bindings.length; r--;) if (n = this._bindings[r], n._listener === e && n.context === t) return r;
            return -1
        }, has: function (e, t) {
            return -1 !== this._indexOfListener(e, t)
        }, add: function (e, t, n) {
            return g(e, "add"), this._registerListener(e, !1, t, n)
        }, addOnce: function (e, t, n) {
            return g(e, "addOnce"), this._registerListener(e, !0, t, n)
        }, remove: function (e, t) {
            g(e, "remove");
            var n = this._indexOfListener(e, t);
            return -1 !== n && (this._bindings[n]._destroy(), this._bindings.splice(n, 1)), e
        }, removeAll: function () {
            for (var e = this._bindings.length; e--;) this._bindings[e]._destroy();
            this._bindings.length = 0
        }, getNumListeners: function () {
            return this._bindings.length
        }, halt: function () {
            this._shouldPropagate = !1
        }, dispatch: function (e) {
            if (this.active) {
                var t, n = Array.prototype.slice.call(arguments), r = this._bindings.length;
                if (this.memorize && (this._prevParams = n), r) {
                    t = this._bindings.slice(), this._shouldPropagate = !0;
                    do r--; while (t[r] && this._shouldPropagate && t[r].execute(n) !== !1)
                }
            }
        }, forget: function () {
            this._prevParams = null
        }, dispose: function () {
            this.removeAll(), delete this._bindings, delete this._prevParams
        }, toString: function () {
            return "[Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]"
        }
    };
    var n = e;
    n.Signal = e, "function" == typeof define && define.amd ? define("signals", [], function () {
        return n
    }) : "undefined" != typeof module && module.exports ? module.exports = n : t.signals = n
}(this), define("shared/storage", [], function () {
    var e, t, n = "undefined" != typeof chrome && null != chrome.storage;
    return {
        setProxies: function (n, r) {
            e = r, t = n
        }, set: function (t, r) {
            if (n) e ? e(t, r) : chrome.storage.local.set(t, r); else {
                if (!window.localStorage) return void console.warn("no local storage available");
                for (var i in t) window.localStorage.setItem(i, t[i]);
                r && r()
            }
        }, get: function (e, r) {
            if (n) t ? t(e, r) : chrome.storage.local.get(e, r); else {
                if (!window.localStorage) return void console.warn("no local storage available");
                var i = {};
                e.forEach(function (e) {
                    var t = window.localStorage.getItem(e);
                    "true" == t ? t = !0 : "false" == t && (t = !1), i[e] = t
                }), r(i)
            }
        }
    }
}), define("ui", ["jquery", "signals", "shared/storage"], function (e, t, n) {
    function addOption(t, n, r) {
        var i = '<li id="' + t + '" role="presentation"><a data-value="' + t + '" role="menuitem" tabindex="-1" href="#">' + n + "</a></li>";
        insertAt(e("#device-list"), r, i)
    }

    function insertAt(e, t, n) {
        var r = e.children().size();
        0 > t && (t = Math.max(0, r + 1 + t)), e.append(n), r > t && e.children().eq(t).before(e.children().last())
    }

    function getPanelId(e) {
        return "pane-" + e
    }

    function addPanel(t, n) {
        var r = '<div class="tab-pane" id="' + getPanelId(t) + '">' + n + "</div>";
        e("#device-info").append(r)
    }

    function addStyle(t) {
        var n = document.createElement("link");
        n.href = "css/" + t + ".css", n.type = "text/css", n.rel = "stylesheet", e("head").eq(0).append(n)
    }

    function sendChange() {
        e("#device-info .tab-pane").removeClass("active"), e("#" + getPanelId(i.selectedId)).addClass("active"), i.tabChanged.dispatch(i.selectedId);
        var t = {};
        t[r] = i.selectedId, n.set(t)
    }

    function showBrowser(e) {
        chrome.app.window.create("browser.html", {hidden: !0}, function (t) {
            t.contentWindow.addEventListener("DOMContentLoaded", function (n) {
                var r = t.contentWindow.document.querySelector("webview");
                r.src = e, t.show()
            })
        })
    }

    var r = "tab", i = {};
    return i.saveTemplateSelected = new t, i.saveMicrobitSelected = new t, i.tabChanged = new t, i.alwaysOnTopChanged = new t, i.selectedId = null, i.add = function (t, n, r, i) {
        return addOption(t, n, i), addPanel(t, r), addStyle(t), e("#" + getPanelId(t))
    }, i.activate = function () {
        var t = e("#device-list");
        t.find("li a").click(function (t) {
            var n = e(t.currentTarget);
            i.selectedId = n.data("value"), sendChange(), e("#device-nav .dropdown-label").text(n.text())
        }), n.get([r], function (t) {
            var n, i = t[r];
            n = null == i ? e("#device-nav li a").first() : e("#" + i + " a"), n.click()
        })
    }, i.enableTemplateLink = function (t) {
        e("#nav-template").parent().toggleClass("disabled", !t)
    }, i.enableMicrobitLink = function (t) {
        t ? e("#nav-microbit").parent().removeClass("hidden").addClass("visible") : e("#nav-microbit").parent().removeClass("visible").addClass("hidden")
    }, function () {
        e("#version").text("v" + chrome.runtime.getManifest().version), e("nav li a").click(function () {
            e(".navbar-toggle").click()
        }), e("#nav-template").click(function (t) {
            e(t.target).hasClass("disabled") || i.saveTemplateSelected.dispatch(i.selectedId)
        }), e("#nav-microbit").click(function (t) {
            e(t.target).hasClass("disabled") || i.saveMicrobitSelected.dispatch()
        }), e("#nav-help1").click(function (e) {
            showBrowser("http://www.picaxe.com/docs/s2bot_app.pdf")
        }), e("#nav-help2").click(function (e) {
            showBrowser("http://www.picaxe.com/s2bot")
        }), e("#nav-help3").click(function (e) {
            showBrowser("http://www.picaxe.com/bled112")
        }), e("#nav-on-top").click(function (t) {
            var n = e(t.target), r = n.data("value");
            r = "1" == r ? "0" : "1", n.data("value", r), e("#nav-on-top-icon").toggleClass("glyphicon glyphicon-ok"), i.alwaysOnTopChanged.dispatch("1" == r)
        }), e(document).on("click", function () {
            e(".collapse").collapse && e(".collapse").collapse("hide")
        })
    }(), i
}), define("lib/bglib-errors", [], function () {
    function getErrorFromCode(e) {
        var t = new BGLibError;
        switch (e) {
            case 0:
                return 0;
            case 384:
                return t.message = "Invalid Parameter", t.detail = "Command contained invalid parameter", t;
            case 385:
                return t.message = "Device in Wrong State", t.detail = "Device is in wrong state to receive command", t;
            case 386:
                return t.message = "Out Of Memory", t.detail = "Device has run out of memory", t;
            case 387:
                return t.message = "Feature Not Implemented", t.detail = "Feature is not implemented", t;
            case 388:
                return t.message = "Command Not Recognized", t.detail = "Command was not recognized", t;
            case 389:
                return t.message = "Timeout", t.detail = "Command or Procedure failed due to timeout", t;
            case 390:
                return t.message = "Not Connected", t.detail = "Connection handle passed to command is not a valid handle", t;
            case 391:
                return t.message = "Flow", t.detail = "Command would cause either underflow or overflow error", t;
            case 392:
                return t.message = "User Attribute", t.detail = "User attribute was accessed through API which is not supported", t;
            case 393:
                return t.message = "Invalid License Key", t.detail = "No valid license key found", t;
            case 394:
                return t.message = "Command Too Long", t.detail = "Command would cause either underflow or overflow error", t;
            case 391:
                return t.message = "Out of Bonds", t.detail = "Bonding procedure can't be started because device has no space left for bond.", t;
            case 517:
                return t.message = "Authentication Failure", t.detail = "Pairing or authentication failed due to incorrect results in the pairing or authentication procedure. This could be due to an incorrect PIN or Link Key", t;
            case 518:
                return t.message = "Pin or Key Missing", t.detail = "Pairing failed because of missing PIN, or authentication failed because of missing Key.", t;
            case 519:
                return t.message = "Memory Capacity Exceeded", t.detail = "Controller is out of memory.", t;
            case 520:
                return t.message = "Connection Timeout", t.detail = "Link supervision timeout has expired.", t;
            case 521:
                return t.message = "Connection Limit Exceeded", t.detail = "Controller is at limit of connections it can support.", t;
            case 524:
                return t.message = "Command Disallowed", t.detail = "Command requested cannot be executed because the Controller is in a state where it cannot process this command at this time.", t;
            case 530:
                return t.message = "Invalid Command Parameters", t.detail = "Command contained invalid parameters.", t;
            case 531:
                return t.message = "Remote User Terminated Connection", t.detail = "User on the remote device terminated the connection.", t;
            case 534:
                return t.message = "Connection Terminated by Local Host", t.detail = "Local device terminated the connection.", t;
            case 546:
                return t.message = "LL Response Timeout", t.detail = "CConnection terminated due to link-layer procedure timeout.", t;
            case 552:
                return t.message = "LL Instant Passed", t.detail = "Received link-layer control packet where instant was in the past.", t;
            case 570:
                return t.message = "Controller Busy", t.detail = "Operation was rejected because the controller is busy and unable to process the request.", t;
            case 571:
                return t.message = "Unacceptable Connection Interval", t.detail = "The Unacceptable Connection Interval error code indicates that the remote device terminated the connection because of an unacceptable connection interval.", t;
            case 572:
                return t.message = "Directed Advertising Timeout", t.detail = "Directed advertising completed without a connection being created.", t;
            case 573:
                return t.message = "MIC Failure", t.detail = "Connection was terminated because the Message Integrity Check (MIC) failed on a received packet.", t;
            case 574:
                return t.message = "Connection Failed to be Established", t.detail = "LL initiated a connection but the connection has failed to be established. Controller did not receive any packets from remote end.", t;
            case 769:
                return t.message = "Passkey Entry Failed", t.detail = "The user input of passkey failed, for example, the user cancelled the operation", t;
            case 770:
                return t.message = "OOB Data is not available", t.detail = "Out of Band data is not available for authentication.", t;
            case 771:
                return t.message = "Authentication Requirements", t.detail = "The pairing procedure cannot be performed as authentication requirements cannot be met due to IO capabilities of one or both devices", t;
            case 772:
                return t.message = "Confirm Value Failed", t.detail = "The confirm value does not match the calculated compare value.", t;
            case 773:
                return t.message = "Pairing Not Supported", t.detail = "Pairing is not supported by the device.", t;
            case 774:
                return t.message = "Encryption Key Size", t.detail = "The resultant encryption key size is insufficient for the security requirements of this device.", t;
            case 775:
                return t.message = "Command Not Supported", t.detail = "The SMP command received is not supported on this device.", t;
            case 776:
                return t.message = "Unspecified Reason", t.detail = "Pairing failed due to an unspecified reason.", t;
            case 777:
                return t.message = "Repeated Attempts", t.detail = "Pairing or authentication procedure is disallowed because too little time has elapsed since last pairing request or security request.", t;
            case 778:
                return t.message = "Invalid Parameters", t.detail = "The Invalid Parameters error code indicates: the command length is invalid or a parameter is outside of the specified range.", t;
            case 1025:
                return t.message = "Invalid Handle", t.detail = "The attribute handle given was not valid on this server.", t;
            case 1026:
                return t.message = "Read Not Permitted", t.detail = "The attribute cannot be read.", t;
            case 1027:
                return t.message = "Write Not Permitted ", t.detail = "The attribute cannot be written.", t;
            case 1028:
                return t.message = "Invalid PDU", t.detail = "The attribute PDU was invalid.", t;
            case 1029:
                return t.message = "Insufficient Authentication", t.detail = "The attribute requires authentication before it can be read or written.", t;
            case 1030:
                return t.message = "Request Not Supported", t.detail = "Attribute Server does not support the request received from the client.", t;
            case 1031:
                return t.message = "Invalid Offset", t.detail = "Offset specified was past the end of the attribute.", t;
            case 1032:
                return t.message = "Insufficient Authorization", t.detail = "The attribute requires authorization before it can be read or written.", t;
            case 1033:
                return t.message = "Prepare Queue Full", t.detail = "Too many prepare writes have been queued.", t;
            case 1034:
                return t.message = "Attribute Not Found", t.detail = "No attribute found within the given attribute handle range.", t;
            case 1035:
                return t.message = "Attribute Not Long", t.detail = "The attribute cannot be read or written using the Read Blob Request.", t;
            case 1036:
                return t.message = "Insufficient Encryption Key Size", t.detail = "The Encryption Key Size used for encrypting this link is insufficient.", t;
            case 1037:
                return t.message = "Invalid Attribute Value Length", t.detail = "The attribute value length is invalid for the operation.", t;
            case 1038:
                return t.message = "Unlikely Error", t.detail = "The attribute request that was requested has encountered an error that was unlikely, and therefore could not be completed as requested.", t;
            case 1039:
                return t.message = "Insufficient Encryption", t.detail = "The attribute requires encryption before it can be read or written.", t;
            case 1040:
                return t.message = "Unsupported Group Type", t.detail = "The attribute type is not a supported grouping attribute as defined by a higher layer specification.", t;
            case 1041:
                return t.message = "Insufficient Resources", t.detail = "Insufficient Resources to complete the request.", t;
            case 1152:
                return t.message = "Application Error Codes", t.detail = "Application error code defined by a higher layer specification.", t
        }
        return -1
    }

    function BGLibError() {
        this.name = "BGLibError", this.message = "Generic BGLib Error", this.detail = ""
    }

    return BGLibError.prototype = new Error, BGLibError.prototype.constructor = BGLibError, {getErrorFromCode: getErrorFromCode}
}), function (e, t) {
    "function" == typeof define && define.amd ? define("buffer-data-utils", t) : module.exports = t()
}(this, function () {
    var e = "undefined" != typeof Buffer;
    return e ? {
        makeBuffer: function (e) {
            return new Buffer(e)
        }, isBuffer: function (e) {
            return Buffer.isBuffer(e)
        }, copy: function (e, t, n, r, i) {
            e.copy(t, n, r, i)
        }, readUInt8: function (e, t) {
            return e.readUInt8(t)
        }, readInt8: function (e, t) {
            return e.readInt8(t)
        }, readUInt32LE: function (e, t) {
            return e.readUInt32LE(t)
        }, readUInt16LE: function (e, t) {
            return e.readUInt16LE(t)
        }, getByteArray: function (e) {
            return new Uint8Array(e)
        }, concatBuffers: function (e, t, n) {
            return "undefined" == typeof n && (n = e.byteLength + t.byteLength), Buffer.concat([e, t], n)
        }, writeUInt32LE: function (e, t, n) {
            e.writeUInt32LE(t, n)
        }, writeUInt16LE: function (e, t, n) {
            e.writeUInt16LE(t, n)
        }, writeUInt8: function (e, t, n) {
            e.writeUInt8(t, n)
        }
    } : {
        makeBuffer: function (e) {
            return new Uint8Array(e)
        }, isBuffer: function (e) {
            return void 0 !== e.byteLength
        }, copy: function (e, t, n, r, i) {
            var a = e.slice(r, i);
            t.set(a, n)
        }, readUInt8: function (e, t) {
            return new DataView(e.buffer).getUint8(t)
        }, readInt8: function (e, t) {
            return new DataView(e.buffer).getInt8(t)
        }, readUInt32LE: function (e, t) {
            return new DataView(e.buffer).getUint32(t, !0)
        }, readUInt16LE: function (e, t) {
            return new DataView(e.buffer).getUint16(t, !0)
        }, getByteArray: function (e) {
            return e
        }, concatBuffers: function (e, t, n) {
            "undefined" == typeof n && (n = e.byteLength + t.byteLength);
            var r = new Uint8Array(n);
            return r.set(new Uint8Array(e), 0), r.set(new Uint8Array(t), e.byteLength), r
        }, writeUInt32LE: function (e, t, n) {
            new DataView(e.buffer).setUint32(n, t, !0)
        }, writeUInt16LE: function (e, t, n) {
            new DataView(e.buffer).setUint16(n, t, !0)
        }, writeUInt8: function (e, t, n) {
            new DataView(e.buffer).setUint8(n, t)
        }
    }
}), define("lib/bglib-responses", ["./bglib-errors", "buffer-data-utils"], function (e, t) {
    var n = function (e) {
        this.dfu = t.readUInt8(e, 0)
    }, r = function (e) {
    }, i = function (e) {
        this.address = e
    }, a = function (e) {
        this.txok = t.readUInt8(e, 0), this.txretry = t.readUInt8(e, 1), this.rxok = t.readUInt8(e, 2), this.rxfail = t.readUInt8(e, 3), this.mbuf = t.readUInt8(e, 4)
    }, o = function (e) {
        this.maxconn = t.readUInt8(e, 0)
    }, s = function (e) {
        this.major = t.readUInt16LE(e, 0), this.minor = t.readUInt16LE(e, 2), this.patch = t.readUInt16LE(e, 4), this.build = t.readUInt16LE(e, 6), this.llversion = t.readUInt16LE(e, 8), this.protocol_version = t.readUInt8(e, 10), this.hw = t.readUInt8(e, 11)
    }, c = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, d = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, l = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, u = function (e) {
    }, f = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0)), this.size = t.readUInt8(n, 2)
    }, h = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, p = function (e) {
    }, m = function (e) {
    }, v = function (e) {
    }, g = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, b = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0)), this.value = n.slice(3, 3 + n[2])
    }, y = function (e) {
    }, _ = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, E = function (n) {
        this.handle = t.readUInt16LE(n, 0), this.offset = t.readUInt16LE(n, 2), this.result = e.getErrorFromCode(t.readUInt16LE(n, 4)), this.value = n.slice(7, 7 + n[6])
    }, C = function (n) {
        this.handle = t.readUInt16LE(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 2)), this.value = n.slice(5, 5 + n[4])
    }, S = function (e) {
    }, T = function (e) {
    }, w = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, D = function (e) {
        this.connection = t.readUInt8(e, 0), this.rssi = t.readInt8(e, 1)
    }, A = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, x = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, I = function (e) {
        this.connection = t.readUInt8(e, 0)
    }, O = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, k = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, R = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, L = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, P = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, N = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, M = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, B = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, U = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, F = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, H = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, q = function (n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, V = function (n) {
        this.handle = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }, G = function (e) {
    }, j = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, z = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, W = function (e) {
        this.bonds = t.readUInt8(e, 0)
    }, $ = function (e) {
    }, Y = function (e) {
    }, X = function (e) {
    }, Z = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, K = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, Q = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0)), this.connection_handle = t.readUInt8(n, 2)
    }, J = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, ee = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0)), this.connection_handle = t.readUInt8(n, 2)
    }, te = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, ne = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, re = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, ie = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, ae = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, oe = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, se = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, ce = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, de = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, le = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, ue = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, fe = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, he = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0)), this.port = t.readUInt8(n, 2), this.data = t.readUInt8(n, 3)
    }, pe = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, me = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0)), this.channel = t.readUInt8(n, 2), this.data = n.slice(4, 4 + n[3])
    }, ve = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0)), this.data = n.slice(3, 3 + n[2])
    }, ge = function (e) {
        this.written = t.readUInt8(e, 0)
    }, be = function (e) {
    }, ye = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, _e = function (e) {
    }, Ee = function (e) {
        this.channel_map = t.readUInt8(e, 0)
    }, Ce = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, Se = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, Te = function (n) {
        this.result = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }, we = {
        0: [n, r, i, null, null, a, o, null, s, c, d, l, u, f, h],
        1: [p, m, v, g, b, y],
        2: [_, E, C, S, T],
        3: [w, D, A, x, null, null, null, I],
        4: [O, k, R, L, P, N, M, B, U, F, H, q],
        5: [V, G, j, Y, z, W, $],
        6: [X, Z, K, Q, J, ee, te, ne, re, ie, ae],
        7: [oe, se, ce, de, le, ue, fe, he, pe, me, ve, ge, be, ye],
        8: [null, null, null, null, Ee, null, _e],
        9: [null, Ce, Se, Te]
    };
    return {Responses: we}
}), define("lib/packet", ["buffer-data-utils"], function (e) {
    function Packet(t, n, r) {
        if (this.typeFlag = t, this.raw = n, this.byteOrder = r, n && !e.isBuffer(n)) throw new Error("Data must be a buffer");
        var i = Packet.ADTypes[t];
        i ? (this.type = i.name, this.data = i.resolve ? i.resolve(n, t, r) : n) : (this.type = "Unknown", this.data = n)
    }

    function toStringArray(e) {
        var t = [];
        return e ? (1 & e[0] && t.push("LE Limited Discoverable Mode"), 2 & e[0] && t.push("LE General Discoverable Mode"), 4 & e[0] && t.push("BR/EDR Not Supported"), 8 & e[0] && t.push("Simultaneous LE and BR/EDR to Same Device Capable (Controller)"), 16 & e[0] && t.push("Simultaneous LE and BR/EDR to Same Device Capable (Host)"), t.length || t.push("None")) : t.push("None"), t
    }

    function toOctetStringArray(e, t, n, r) {
        var i = [];
        if (!t) return [];
        if (e > t.length) throw new Error("Not enough bytes for single UUID");
        if (t.length % e) throw new Error("Not enough bytes to complete each UUID. Needs to be multiple of " + e.toString());
        for (; t;) {
            var a = toOctetString(e, t, n, r);
            i.push(a), t = t.slice(e, t.length), t && t.length || (t = null)
        }
        return i
    }

    function toString(e) {
        return e.toString("utf8")
    }

    function toSignedInt(t) {
        return t ? e.readInt8(t, 0) : 0
    }

    function toOctetString(t, n, r, i) {
        for (var a = [], o = 0; t > o; o++) {
            var s = e.readUInt8(n, o).toString(16);
            1 == s.length && (s = "0" + s), a.push(s)
        }
        "BE" == i && a.reverse();
        var c = a.join("");
        return c
    }

    return Packet.ADTypes = {
        1: {name: "Flags", resolve: toStringArray},
        2: {name: "Incomplete List of 16-bit Service Class UUIDs", resolve: toOctetStringArray.bind(null, 2)},
        3: {name: "Complete List of 16-bit Service Class UUIDs", resolve: toOctetStringArray.bind(null, 2)},
        4: {name: "Incomplete List of 32-bit Service Class UUIDs", resolve: toOctetStringArray.bind(null, 4)},
        5: {name: "Complete List of 32-bit Service Class UUIDs", resolve: toOctetStringArray.bind(null, 4)},
        6: {name: "Incomplete List of 128-bit Service Class UUIDs", resolve: toOctetStringArray.bind(null, 16)},
        7: {name: "Complete List of 128-bit Service Class UUIDs", resolve: toOctetStringArray.bind(null, 16)},
        8: {name: "Shortened Local Name", resolve: toString},
        9: {name: "Complete Local Name", resolve: toString},
        10: {name: "Tx Power Level", resolve: toSignedInt},
        13: {name: "Class of Device", resolve: toOctetString.bind(null, 3)},
        14: {name: "Simple Pairing Hash C", resolve: toOctetString.bind(null, 16)},
        15: {name: "Simple Pairing Randomizer R", resolve: toOctetString.bind(null, 16)},
        16: {name: "Device ID", resolve: toOctetString.bind(null, 16)},
        17: {name: "Security Manager Out of Band Flags", resolve: toOctetString.bind(null, 16)},
        18: {name: "Slave Connection Interval Range", resolve: toOctetStringArray.bind(null, 2)},
        20: {name: "List of 16-bit Service Solicitation UUIDs", resolve: toOctetStringArray.bind(null, 2)},
        31: {name: "List of 32-bit Service Solicitation UUIDs", resolve: toOctetStringArray.bind(null, 4)},
        21: {name: "List of 128-bit Service Solicitation UUIDs", resolve: toOctetStringArray.bind(null, 8)},
        22: {name: "Service Data", resolve: toOctetStringArray.bind(null, 1)},
        23: {name: "Public Target Address", resolve: toOctetStringArray.bind(null, 6)},
        24: {name: "Random Target Address", resolve: toOctetStringArray.bind(null, 6)},
        25: {name: "Appearance", resolve: null},
        26: {name: "Advertising Interval", resolve: toOctetStringArray.bind(null, 2)},
        27: {name: "LE Bluetooth Device Address", resolve: toOctetStringArray.bind(null, 6)},
        28: {name: "LE Role", resolve: null},
        29: {name: "Simple Pairing Hash C-256", resolve: toOctetStringArray.bind(null, 16)},
        30: {name: "Simple Pairing Randomizer R-256", resolve: toOctetStringArray.bind(null, 16)},
        32: {name: "Service Data - 32-bit UUID", resolve: toOctetStringArray.bind(null, 4)},
        33: {name: "Service Data - 128-bit UUID", resolve: toOctetStringArray.bind(null, 16)},
        61: {name: "3D Information Data", resolve: null},
        255: {name: "Manufacturer Specific Data", resolve: null}
    }, {Packet: Packet, toOctetStringArray: toOctetStringArray}
}), define("lib/parser", ["./packet", "buffer-data-utils"], function (e, t) {
    function split(e) {
        for (var n = [], r = 0, i = e[r++]; i > r;) {
            var a = e[r++], o = e[r++], s = a - 1, c = t.makeBuffer(s);
            t.copy(e, c, 0, r, r + s), n.push({type: o, data: c}), r += s
        }
        return n
    }

    function parse(e, r, i) {
        if (r = r ? r : "BE", "BE" != r && "LE" != r) return void(i && i(new Error("Invalid Byte Order. Must be 'BE' or 'LE'")));
        if (!t.isBuffer(e)) return void(i && i(new Error("Data must be a buffer")));
        var a = split(e), o = [];
        return a.forEach(function (e) {
            o.push(new n(e.type, e.data, r))
        }), i && i(null, o), o
    }

    function parseLE(e) {
        return parse(e, "LE")
    }

    function parseBE(e) {
        return parse(e, "BE")
    }

    var n = e.Packet;
    return {split: split, parse: parse, parseLE: parseLE, parseBE: parseBE}
}), define("lib/serializer", [], function () {
    function intArrayToByte(e) {
        for (var t = 0, n = 0; n < e.length; n++) t |= e[n];
        return Buffer([t])
    }

    function stringToBuffer(e) {
        return new Buffer(e)
    }

    function octectStringToBuffer(e) {
        var t = e.length / 2, n = new Buffer(t);
        if (t % 2) throw new Error("Invalid UUID" + e + ".");
        for (var r = 0; t > r; r++) n.writeUInt8(parseInt(e.substr(2 * r, 2), 16), t - r - 1);
        return n
    }

    function octetStringArrayToBuffer(e) {
        for (var t = [], n = 0; n < e.length; n++) t.push(octectStringToBuffer(e[n]));
        return Buffer.concat(t)
    }

    function signedIntToBuffer(e) {
        var t = new Buffer(1);
        return t.writeInt8(e, 0), t
    }

    function arrayToBuffer(e) {
        return new Buffer(e)
    }

    function serialize(e) {
        var t = [];
        Object.keys(e).forEach(function (n) {
            typeFlag = ADTypes[n].typeFlag, data = ADTypes[n].resolve(e[n]), t.push(new Buffer([data.length + 1, typeFlag])), t.push(data)
        });
        var n = Buffer.concat(t);
        if (n.length > 32) throw new Error("Packet exceeds maximum length of 32 bytes");
        return n
    }

    return ADTypes = {
        flags: {typeFlag: 1, resolve: intArrayToByte},
        incompleteUUID16: {typeFlag: 2, resolve: octetStringArrayToBuffer},
        completeUUID16: {typeFlag: 3, resolve: octetStringArrayToBuffer},
        incompleteUUID32: {typeFlag: 4, resolve: octetStringArrayToBuffer},
        completeUUID32: {typeFlag: 5, resolve: octetStringArrayToBuffer},
        incompleteUUID128: {typeFlag: 6, resolve: octetStringArrayToBuffer},
        completeUUID128: {typeFlag: 7, resolve: octetStringArrayToBuffer},
        shortName: {typeFlag: 8, resolve: stringToBuffer},
        completeName: {typeFlag: 9, resolve: stringToBuffer},
        txPower: {typeFlag: 10, resolve: signedIntToBuffer},
        deviceClass: {typeFlag: 13, resolve: octectStringToBuffer},
        pairingHashC: {typeFlag: 14, resolve: octectStringToBuffer},
        pairingRandomizerR: {typeFlag: 15, resolve: octectStringToBuffer},
        deviceId: {typeFlag: 16, resolve: octectStringToBuffer},
        smOOBFlags: {typeFlag: 17, resolve: octectStringToBuffer},
        intervalRange: {typeFlag: 18, resolve: octetStringArrayToBuffer},
        solicitationUUID16: {typeFlag: 20, resolve: octetStringArrayToBuffer},
        solicitationUUID32: {typeFlag: 31, resolve: octetStringArrayToBuffer},
        solicitationUUID128: {typeFlag: 21, resolve: octetStringArrayToBuffer},
        serviceData: {typeFlag: 22, resolve: octetStringArrayToBuffer},
        publicAddress: {typeFlag: 23, resolve: octetStringArrayToBuffer},
        randomAddress: {typeFlag: 24, resolve: octetStringArrayToBuffer},
        appearance: {typeFlag: 25, resolve: arrayToBuffer},
        interval: {typeFlag: 26, resolve: octetStringArrayToBuffer},
        deviceAddress: {typeFlag: 27, resolve: octetStringArrayToBuffer},
        role: {typeFlag: 28, resolve: arrayToBuffer},
        pairingHashC256: {typeFlag: 29, resolve: octetStringArrayToBuffer},
        pairingRandomizerR256: {typeFlag: 30, resolve: octetStringArrayToBuffer},
        serviceUUID32: {typeFlag: 32, resolve: octetStringArrayToBuffer},
        serviceUUID128: {typeFlag: 33, resolve: octetStringArrayToBuffer},
        _3dInfo: {typeFlag: 61, resolve: arrayToBuffer},
        mfrData: {typeFlag: 255, resolve: arrayToBuffer}
    }, {serialize: serialize}
}), define("bleadvertise", ["./lib/parser", "./lib/serializer"], function (e, t) {
    return {parse: e.parse, parseLE: e.parseLE, parseBE: e.parseBE, serialize: t.serialize, split: e.split}
}), define("lib/bglib-events", ["./bglib-errors", "buffer-data-utils", "bleadvertise"], function (e, t, n) {
    function _bgEventSystemBoot(e) {
        this.major = t.readUInt16LE(e, 0), this.minor = t.readUInt16LE(e, 2), this.patch = t.readUInt16LE(e, 4), this.build = t.readUInt16LE(e, 6), this.ll_version = t.readUInt16LE(e, 8), this.protocol_version = t.readUInt8(e, 10), this.hw = t.readUInt8(e, 11)
    }

    function _bgEventSystemEndpointWatermarkRx(e) {
        this.endpoint = t.readUInt8(e, 0), this.data = t.readUInt8(e, 1)
    }

    function _bgEventSystemEndpointWatermarkTx(e) {
        this.endpoint = t.readUInt8(e, 0), this.data = t.readUInt8(e, 1)
    }

    function _bgEventSystemScriptFailure(n) {
        this.address = t.readUInt16LE(n, 0), this.reason = e.getErrorFromCode(t.readUInt16LE(n, 2))
    }

    function _bgEventSystemNoLicenseKey(e) {
    }

    function _bgEventSystemProtocolError(n) {
        this.reason = e.getErrorFromCode(t.readUInt16LE(n, 0))
    }

    function _bgEventFlashPSKey(e) {
        this.key = t.readUInt16LE(e, 0), this.value = e.slice(3, e[2])
    }

    function _bgEventAttributesValue(e) {
        this.connection = t.readUInt8(e, 0), this.reason = t.readUInt8(e, 1), this.handle = t.readUInt16LE(e, 2), this.offset = t.readUInt16LE(e, 4), this.value = e.slice(7, 7 + e[6])
    }

    function _bgEventAttributesUserReadRequest(e) {
        this.connection = t.readUInt8(e, 0), this.handle = t.readUInt16LE(e, 1), this.offset = t.readUInt16LE(e, 3), this.maxsize = t.readUInt8(e, 5)
    }

    function _bgEventAtributesStatus(e) {
        this.handle = t.readUInt16LE(e, 0), this.flags = t.readUInt8(e, 2)
    }

    function _bgEventConnectionStatus(e) {
        this.connection = t.readUInt8(e, 0), this.flags = t.readUInt8(e, 1), this.address = e.slice(2, 8), this.address_type = t.readUInt8(e, 8), this.conn_interval = t.readUInt16LE(e, 9), this.timeout = t.readUInt16LE(e, 11), this.latency = t.readUInt16LE(e, 13), this.bonding = t.readUInt8(e, 15)
    }

    function _bgEventConnectionVersionInd(e) {
        this.connection = t.readUInt8(e, 0), this.version_nr = t.readUInt8(e, 1), this.comp_id = t.readUInt16LE(e, 2), this.sub_vers_nr = t.readUInt16LE(e, 4)
    }

    function _bgEventConnectionFeatureInd(e) {
        this.connection = t.readUInt8(e, 0), this.features = e.slice(1, e.length)
    }

    function _bgEventConnectionDisconnected(n) {
        this.connection = t.readUInt8(n, 0), this.reason = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }

    function _bgEventAttClientIndicated(e) {
        this.connection = t.readUInt8(e, 0), this.attrhandle = t.readUInt16LE(e, 1)
    }

    function _bgEventAttClientProcedureCompleted(n) {
        this.connection = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1)), this.chrhandle = t.readUInt16LE(n, 3)
    }

    function _bgEventAttClientGroupFound(e) {
        this.connection = t.readUInt8(e, 0), this.start = t.readUInt16LE(e, 1), this.end = t.readUInt16LE(e, 3), this.uuid = e.slice(6, 6 + e[5])
    }

    function _bgEventAttClientFindInformationFound(e) {
        this.connection = t.readUInt8(e, 0), this.chrhandle = t.readUInt16LE(e, 1), this.uuid = e.slice(4, 4 + e[3])
    }

    function _bgEventAttClientAttributeValue(e) {
        this.connection = t.readUInt8(e, 0), this.atthandle = t.readUInt16LE(e, 1), this.type = t.readUInt8(e, 3), this.value = e.slice(5, 5 + e[4])
    }

    function _bgEventAttClientReadMultipleResponse(e) {
        this.connection = t.readUInt8(e, 0), this.handles = e.slice(2, 2 + e[1])
    }

    function _bgEventSMBondingFail(n) {
        this.handle = t.readUInt8(n, 0), this.result = e.getErrorFromCode(t.readUInt16LE(n, 1))
    }

    function _bgEventSMPasskeyDisplay(e) {
        this.handle = t.readUInt8(e, 0), this.passkey = t.readUInt32LE(e, 1)
    }

    function _bgEventSMPasskeyRequest(e) {
        this.handle = t.readUInt8(e, 0)
    }

    function _bgEventSMBondStatus(e) {
        this.bond = t.readUInt8(e, 0), this.keysize = t.readUInt8(e, 1), this.mitm = t.readUInt8(e, 2), this.keys = t.readUInt8(e, 3)
    }

    function _bgEventGAPScanResponse(e) {
        this.rssi = t.readInt8(e, 0), this.packet_type = t.readUInt8(e, 1), this.sender = e.slice(2, 8), this.address_type = t.readUInt8(e, 8), this.bond = t.readUInt8(e, 9), this.data = n.parseBE(e.slice(10, e.length))
    }

    function _bgEventHWIOPortStatus(e) {
        this.timestamp = t.readUInt32LE(e, 0), this.port = t.readUInt8(e, 4), this.irq = t.readUInt8(e, 5), this.state = t.readInt8(e, 6)
    }

    function _bgEventhWSoftTimer(e) {
        this.handle = t.readUint8(e, 0)
    }

    function _bgEventHWADCResult(e) {
        this.input = t.readUInt8(e, 0), this.value = t.readInt16LE(e, 1)
    }

    function _bgEventDFUBoot(e) {
        this.version = t.readUInt32LE(e, 0)
    }

    var r = {
        0: [_bgEventSystemBoot, null, _bgEventSystemEndpointWatermarkRx, _bgEventSystemEndpointWatermarkTx, _bgEventSystemScriptFailure, _bgEventSystemNoLicenseKey, _bgEventSystemProtocolError],
        1: [_bgEventFlashPSKey],
        2: [_bgEventAttributesValue, _bgEventAttributesUserReadRequest, _bgEventAtributesStatus],
        3: [_bgEventConnectionStatus, _bgEventConnectionVersionInd, _bgEventConnectionFeatureInd, null, _bgEventConnectionDisconnected],
        4: [_bgEventAttClientIndicated, _bgEventAttClientProcedureCompleted, _bgEventAttClientGroupFound, null, _bgEventAttClientFindInformationFound, _bgEventAttClientAttributeValue, _bgEventAttClientReadMultipleResponse],
        5: [null, _bgEventSMBondingFail, _bgEventSMPasskeyDisplay, _bgEventSMPasskeyRequest, _bgEventSMBondStatus],
        6: [_bgEventGAPScanResponse],
        7: [_bgEventHWIOPortStatus, _bgEventhWSoftTimer, _bgEventHWADCResult],
        8: null,
        9: [_bgEventDFUBoot]
    };
    return {Events: r}
}), define("bglib", ["./lib/bglib-responses", "./lib/bglib-events", "buffer-data-utils"], function (e, t, n) {
    function Packet(e, t, n, r, i, a) {
        this.mType = e, this.tType = t, this.payloadHighBits = i.length >> 8, this.payloadLowBits = 255 & i.length, this.cClass = n, this.cID = r, this.payload = i, this.packetMode = a, this.callback = null
    }

    function bglib() {
        this.resetParser(), this.packetMode = !1
    }

    var r = 0, i = {Command: 0, Response: 0, Event: 128}, a = {Bluetooth: 0, WiFi: 8}, o = {
        System: 0,
        PersistentStore: 1,
        AttributeDatabase: 2,
        Connection: 3,
        AttributeClient: 4,
        SecurityManager: 5,
        GenericAccessProfile: 6,
        Hardware: 7,
        Test: 8,
        DFU: 9
    }, s = {
        System_Reset: 0,
        System_Hello: 1,
        System_Address_Get: 2,
        System_Reg_Write: 3,
        System_Reg_Read: 4,
        System_Get_Counters: 5,
        System_Get_Connections: 6,
        System_Read_Memory: 7,
        System_Get_Info: 8,
        System_Endpoint_Tx: 9,
        System_Whitelist_Append: 10,
        System_Whitelist_Remove: 11,
        System_Whitelist_Clear: 12,
        System_Endpoint_Rx: 13,
        System_Set_Watermarks: 14,
        Flash_PS_Defrag: 0,
        Flash_PS_Dump: 1,
        Flash_PS_Erase_All: 2,
        Flash_PS_Save: 3,
        Flash_PS_Load: 4,
        Flash_PS_Erase: 5,
        Flash_Erase_Page: 6,
        Flash_Write_Words: 7,
        Attributes_Write: 0,
        Attributes_Read: 1,
        Attributes_Read_Type: 2,
        Attributes_User_Read_Response: 3,
        Attributes_User_Write_Response: 4,
        Connection_Disconnect: 0,
        Connection_Get_RSSI: 1,
        Connection_Update: 2,
        Connection_Version_Update: 3,
        Connection_Channel_Map_Get: 4,
        Connection_Channel_Map_Set: 5,
        Connection_Features_Get: 6,
        Connection_Get_Status: 7,
        Connection_Raw_Tx: 8,
        Attclient_Find_By_Type_Value: 0,
        Attclient_Read_By_Group_Type: 1,
        Attclient_Read_By_Type: 2,
        Attclient_Find_Information: 3,
        Attclient_Read_By_Handle: 4,
        Attclient_Attribute_Write: 5,
        Attclient_Write_Command: 6,
        Attclient_Indicate_Confirm: 7,
        Attclient_Read_Long: 8,
        Attclient_Prepare_Write: 9,
        Attclient_Execute_Write: 10,
        Attclient_Read_Multiple: 11,
        SM_Encrypt_Start: 0,
        SM_Set_Bondable_Mode: 1,
        SM_Delete_Bonding: 2,
        SM_Set_Parameters: 3,
        SM_Passkey_Entry: 4,
        SM_Get_Bonds: 5,
        SM_Set_OOB_Data: 6,
        GAP_Set_Privacy_Flags: 0,
        GAP_Set_Mode: 1,
        GAP_Discover: 2,
        GAP_Connect_Direct: 3,
        GAP_End_Procedure: 4,
        GAP_Connect_Selective: 5,
        GAP_Set_Filtering: 6,
        GAP_Set_Scan_Parameters: 7,
        GAP_Set_Adv_Parameters: 8,
        GAP_Set_Adv_Data: 9,
        GAP_Set_Directed_Connectable_Mode: 10,
        HW_IO_Port_Config_IRQ: 0,
        HW_Set_Soft_Timer: 1,
        HW_ADC_Read: 2,
        HW_IO_Port_Config_Direction: 3,
        HW_IO_Port_Config_Function: 4,
        HW_IO_Port_Config_Pull: 5,
        HW_IO_Port_Write: 6,
        HW_IO_Port_Read: 7,
        HW_SPI_Config: 8,
        HW_SPI_Transfer: 9,
        HW_I2C_Read: 10,
        HW_I2C_Write: 11,
        HW_Set_Tx_Power: 12,
        HW_Timer_Comparator: 13,
        Test_Phy_Tx: 0,
        Test_Phy_Rx: 1,
        Test_Phy_End: 2,
        Test_Phy_Reset: 3,
        Test_Get_Channel_Map: 4,
        Test_Debug: 5,
        Test_Channel_Mode: 5,
        DFU_Reset: 0,
        DFU_Flash_Set_Address: 1,
        DFU_Flash_Upload: 2,
        DFU_Flash_Upload_Finish: 3
    };
    bglib.prototype.Endpoints = {
        system_endpoint_api: 0,
        system_endpoint_test: 1,
        system_endpoint_script: 2,
        system_endpoint_usb: 3,
        system_endpoint_uart0: 4,
        system_endpoint_uart1: 5
    }, bglib.prototype.AttributeChangeReason = {
        attributes_attribute_change_reason_write_request: 0,
        attributes_attribute_change_reason_write_command: 1,
        attributes_attribute_change_reason_write_request_user: 2
    }, bglib.prototype.AttributeStatusFlags = {
        attributes_attribute_status_flag_notify: 1,
        attributes_attribute_status_flag_indicate: 2
    }, bglib.prototype.ConnectionStatus = {
        connection_connected: 1,
        connection_encrypted: 2,
        connection_completed: 4,
        connection_parameters_change: 8
    }, bglib.prototype.AttributeValueType = {
        attclient_attribute_value_type_read: 0,
        attclient_attribute_value_type_notify: 1,
        attclient_attribute_value_type_indicate: 2,
        attclient_attribute_value_type_read_by_type: 3,
        attclient_attribute_value_type_read_blob: 4,
        attclient_attribute_value_type_indicate_rsp_req: 5
    }, bglib.prototype.BondingKeys = {
        sm_bonding_key_ltk: 1,
        sm_bonding_key_addr_public: 2,
        sm_bonding_key_addr_static: 4,
        sm_bonding_key_irk: 8,
        sm_bonding_key_edivrand: 16,
        sm_bonding_key_csrk: 32,
        sm_bonding_key_masterid: 64
    }, bglib.prototype.SMPIO = {
        sm_io_capability_displayonly: 0,
        sm_io_capability_displayyesno: 1,
        sm_io_capability_keyboardonly: 2,
        sm_io_capability_noinputnooutput: 3,
        sm_io_capability_keyboarddisplay: 4
    }, bglib.prototype.AD_Flags = {
        GAP_AD_FLAG_LIMITED_DISCOVERABLE: 1,
        GAP_AD_FLAG_GENERAL_DISCOVERABLE: 2,
        GAP_AD_FLAG_BREDR_NOT_SUPPORTED: 4,
        GAP_AD_FLAG_SIMULTANEOUS_LEBREDR_CTRL: 16,
        GAP_AD_FLAG_SIMULTANEOUS_LEBREDR_HOST: 32,
        GAP_AD_FLAG_MASK: 31
    }, bglib.prototype.ADTypeFlags = {
        gap_ad_type_none: 0,
        gap_ad_type_flags: 1,
        gap_ad_type_services_16bit_more: 2,
        gap_ad_type_services_16bit_all: 3,
        gap_ad_type_services_32bit_more: 4,
        gap_ad_type_services_32bit_al: 5,
        gap_ad_type_services_128bit_more: 6,
        gap_ad_type_services_128bit_all: 7,
        gap_ad_type_localname_short: 8,
        gap_ad_type_localname_complete: 9,
        gap_ad_type_txpower: 10
    }, bglib.prototype.AdvertistingPolicy = {
        gap_adv_policy_all: 0,
        gap_adv_policy_whitelist_scan: 1,
        gap_adv_policy_whitelist_connect: 2,
        gap_adv_policy_whitelist_all: 3
    }, bglib.prototype.BluetoothAddressTypes = {
        gap_address_type_public: 0,
        gap_address_type_random: 1
    }, bglib.prototype.GAPConnectableMode = {
        gap_non_connectable: 0,
        gap_directed_connectable: 1,
        gap_undirected_connectable: 2,
        gap_scannable_connectable: 3
    }, bglib.prototype.GAPDiscoverableModes = {
        gap_non_discoverable: 0,
        gap_limited_discoverable: 1,
        gap_general_discoverable: 2,
        gap_broadcast: 3,
        gap_user_data: 4,
        gap_enhanced_broadcasting: 128
    }, bglib.prototype.GAPDiscoverMode = {
        gap_discover_limited: 0,
        gap_discover_generic: 1,
        gap_discover_observation: 2
    }, bglib.prototype.SCAN_HEADER_FLAGS = {
        GAP_SCAN_HEADER_ADV_IND: 0,
        GAP_SCAN_HEADER_ADV_DIRECT_IND: 1,
        GAP_SCAN_HEADER_ADV_NONCONN_IND: 2,
        GAP_SCAN_HEADER_SCAN_REQ: 3,
        GAP_SCAN_HEADER_SCAN_RSP: 4,
        GAP_SCAN_HEADER_CONNECT_REQ: 5,
        GAP_SCAN_HEADER_ADV_DISCOVER_IND: 6
    }, bglib.prototype.ScanPolicy = {
        gap_scan_policy_all: 0,
        gap_scan_policy_whitelist: 1
    }, Packet.prototype.getByteArray = function (e) {
        var t, r = 4, i = 0;
        this.packetMode ? (r++, t = n.makeBuffer(r), t[i++] = this.payload.length + 4) : t = n.makeBuffer(r), t[i++] = this.mType | this.tType | this.payload.length >> 8, t[i++] = 255 & this.payload.length, t[i++] = this.cClass, t[i++] = this.cID;
        var a = n.concatBuffers(t, this.payload), o = n.getByteArray(a);
        return e && e(o), o
    };
    var c = function (e, t, n) {
        this.packet = e, this.responseType = t, this.response = n
    };
    return bglib.prototype.resetParser = function () {
        this.bgapiRXBuffer = [], this.bgapiRXBufferPos = 0, this.bgapiRXDataLen = 0
    }, bglib.prototype.setPacketMode = function (e) {
        this.packetMode = e
    }, bglib.prototype.parseIncoming = function (n, i) {
        this.reconstructPackets(n, function (n, a) {
            var s = [];
            if (n) return r && console.log("There was an issue constructing a packet..."), i && i(n, null);
            for (var d = 0; d < a.length; d++) {
                var l, u = a[d];
                if (u.cClass < 0 || u.cClass > Object.keys(o).length) r && console.log("Packet with invalid class"), r && console.log("Popping packet with class: ", u.cClass), a.splice(d, 1), d--; else if (128 == (128 & u.mType)) {
                    r && console.log("We have an event!");
                    try {
                        var f;
                        if (!(f = t.Events[u.cClass][u.cID])) throw new Error("No existing event creator for packet of class " + u.cClass + " and command id " + u.cID);
                        l = new f(u.payload), s.push(new c(u, "Event", l))
                    } catch (h) {
                        console.log(h);
                        continue
                    }
                } else if (0 == (128 & u.mType)) {
                    r && console.log("We have a response!"), r && console.log("Class: ", u.cClass, "command", u.cID);
                    try {
                        var p;
                        if (!(p = e.Responses[u.cClass][u.cID])) throw new Error("No existing response creator for packet of class " + u.cClass + " and command id " + u.cID);
                        l = new p(u.payload), s.push(new c(u, "Response", l))
                    } catch (h) {
                        console.log(h);
                        continue
                    }
                } else r && console.log("What's up with this mType?: ", u.mType), i(new Error("Packet Parsing Error"), null)
            }
            return i && i(n, s), s
        })
    }, bglib.prototype.reconstructPackets = function (e, t) {
        e || t(new Error("No bytes passed into packet reconstruction"));
        for (var i = [], a = 0; a < e.length; a++) {
            var o = e[a];
            if (0 == this.bgapiRXBufferPos) {
                if (128 != o && 0 != o) {
                    for (r && console.log("Warning: Packet Frame Issue."); a < e.length;) {
                        if (128 == e[a] || 0 == e[a]) {
                            a--;
                            break
                        }
                        a++
                    }
                    continue
                }
                this.bgapiRXBuffer[this.bgapiRXBufferPos++] = o
            } else if (this.bgapiRXBuffer[this.bgapiRXBufferPos++] = o, 2 == this.bgapiRXBufferPos) this.bgapiRXDataLen = o + ((7 & this.bgapiRXBuffer[0]) << 8); else if (this.bgapiRXBufferPos == this.bgapiRXDataLen + 4) {
                this.bgapiRXBufferPos = 0;
                for (var s = this.bgapiRXBuffer[0], c = this.bgapiRXBuffer[1], d = this.bgapiRXBuffer[2], l = this.bgapiRXBuffer[3], u = c > this.bgapiRXBuffer.length - 4 ? this.bgapiRXBuffer.length - 4 : c, f = n.makeBuffer(u), h = 0; u > h; h++) f[h] = this.bgapiRXBuffer[4 + h];
                var p = new Packet(128 & s, 8 & s, d, l, f, this.packetMode);
                p ? (i.push(p), r && console.log("added packet: ", p)) : console.log("Warning, packet creation was obstructed somehow.")
            }
        }
        t(null, i)
    }, bglib.prototype.debugPacket = function (e) {
        for (var t = 0; t < e.length; t++) console.log("Byte at index", t, "is", e[t])
    }, bglib.prototype.getPacket = function (e, t, r) {
        (!r && "function" == typeof t || !t && !r) && (r = t, t = []), this.verifyParams(e.paramCode, t, function (o) {
            var s = n.makeBuffer(0);
            if (o) return void(r && r(o, null));
            for (var c = e.paramCode; c;) {
                var d = t.shift();
                switch (15 & c) {
                    case 7:
                    case 6:
                        if (Array.isArray(d)) s = n.concatBuffers(s, n.makeBuffer(d)); else {
                            var l = n.makeBuffer(4);
                            n.writeUInt32LE(l, d, 0), s = n.concatBuffers(s, l)
                        }
                        break;
                    case 5:
                    case 4:
                        if (Array.isArray(d)) s = n.concatBuffers(s, n.makeBuffer(d)); else {
                            var l = n.makeBuffer(2);
                            n.writeUInt16LE(l, d, 0), s = n.concatBuffers(s, l)
                        }
                        break;
                    case 3:
                    case 2:
                        var l = n.makeBuffer(1);
                        n.writeUInt8(l, d, 0), s = n.concatBuffers(s, l);
                        break;
                    case 9:
                    case 8:
                        var u;
                        if (n.isBuffer(d)) u = d; else {
                            if (!Array.isArray(d) && "string" != typeof d) return r && r(new Error("Invalid parameter type. Should be an Array or string"));
                            u = n.makeBuffer(d)
                        }
                        var f = u.length, h = f + e.header.lolen;
                        e.header.payloadLowBits = 255 & h, e.header.payloadHighBits = h >> 8, u = n.concatBuffers(n.makeBuffer([f]), u, f + 1), s = n.concatBuffers(s, u);
                        break;
                    case 10:
                        var p;
                        Array.isArray(d) && (p = n.makeBuffer(p)), n.isBuffer(d) && (p = d), s = n.concatBuffers(s, p);
                        break;
                    case 11:
                        var u;
                        if (n.isBuffer(d)) u = d; else {
                            if (!Array.isArray(d) && "string" != typeof d) return r && r(new Error("Invalid parameter type. Should be an Array or string"));
                            u = n.makeBuffer(d)
                        }
                        var f = 2 * d.length, h = f + e.header.lolen;
                        e.header.payloadLowBits = 255 & h, e.header.payloadHighBits = h >> 8, u = n.concatBuffers(n.makeBuffer([f]), n.makeBuffer(u), f + 1), s = n.concatBuffers(s, u)
                }
                c >>= 4
            }
            var m = new Packet(i.Command, a.Bluetooth, e.header.cls, e.header.command, s, this.packetMode);
            return r && r(null, m), m
        }.bind(this))
    }, bglib.prototype.verifyParams = function (e, t, n) {
        if (!t) return n(e ? new Error("Need to pass in parameters") : null);
        var r = this.numParamsFromCode(e);
        return n(r != t.length ? new Error("Invalid number of parameters passed for method") : null)
    }, bglib.prototype.numParamsFromCode = function (e) {
        for (var t = 0; 15 & e;) t++, e >>= 4;
        return t
    }, bglib.api = {
        systemReset: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.System,
                command: s.System_Reset
            }, paramCode: 2
        },
        systemHello: {
            header: {tType: a.Bluetooth, mType: i.Command, lolen: 0, cls: o.System, command: s.System_Hello},
            paramCode: 0
        },
        systemAddressGet: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.System,
                command: s.System_Address_Get
            }, paramCode: 0
        },
        systemRegisterWrite: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.System,
                command: s.System_Reg_Write
            }, paramCode: 36
        },
        systemRegisterRead: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.System,
                command: s.System_Reg_Read
            }, paramCode: 4
        },
        systemGetCounters: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.System,
                command: s.System_Get_Counters
            }, paramCode: 0
        },
        systemGetConnections: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.System,
                command: s.System_Get_Connections
            }, paramCode: 0
        },
        systemReadMemory: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 5,
                cls: o.System,
                command: s.System_Read_Memory
            }, paramCode: 38
        },
        systemGetInfo: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.System,
                command: s.System_Get_Info
            }, paramCode: 0
        },
        systemEndpointTx: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.System,
                command: s.System_Endpoint_Tx
            }, paramCode: 130
        },
        systemWhitelistAppend: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 7,
                cls: o.System,
                command: s.System_Whitelist_Append
            }, paramCode: 42
        },
        systemWhitelistRemove: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 7,
                cls: o.System,
                command: s.System_Whitelist_Remove
            }, paramCode: 42
        },
        systemWhiteListClear: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.System,
                command: s.System_Whitelist_Clear
            }, paramCode: 0
        },
        systemEndpointRx: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.System,
                command: s.System_Endpoint_Rx
            }, paramCode: 34
        },
        systemEndpointSetWatermarks: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.System,
                command: s.System_Reg_Write
            }, paramCode: 546
        },
        psDefrag: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.PersistentStore,
                command: s.Flash_PS_Defrag
            }, paramCode: 0
        },
        psDump: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.PersistentStore,
                command: s.Flash_PS_Dump
            }, paramCode: 0
        },
        psEraseAll: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.PersistentStore,
                command: s.Flash_PS_Erase_All
            }, paramCode: 0
        },
        psSave: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.PersistentStore,
                command: s.Flash_PS_Save
            }, paramCode: 132
        },
        psLoad: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.PersistentStore,
                command: s.Flash_PS_Load
            }, paramCode: 4
        },
        psErase: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.PersistentStore,
                command: s.Flash_PS_Erase
            }, paramCode: 4
        },
        flashErasePage: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.PersistentStore,
                command: s.Flash_Erase_Page
            }, paramCode: 2
        },
        flashWriteWords: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.PersistentStore,
                command: s.Flash_Write_Words
            }, paramCode: 132
        },
        attributesWrite: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 4,
                cls: o.AttributeDatabase,
                command: s.Attributes_Write
            }, paramCode: 2084
        },
        attributesRead: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 4,
                cls: o.AttributeDatabase,
                command: s.Attributes_Read
            }, paramCode: 68
        },
        attributesReadType: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.AttributeDatabase,
                command: s.Attributes_Read_Type
            }, paramCode: 4
        },
        attributesUserReadResponse: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.AttributeDatabase,
                command: s.Attributes_User_Read_Response
            }, paramCode: 2082
        },
        attributesUserWriteResponse: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.AttributeDatabase,
                command: s.Attributes_User_Write_Response
            }, paramCode: 34
        },
        connectionDisconnect: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.Connection,
                command: s.Connection_Disconnect
            }, paramCode: 2
        },
        connectionGetRSSI: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.Connection,
                command: s.Connection_Get_RSSI
            }, paramCode: 2
        },
        connectionUpdate: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 9,
                cls: o.Connection,
                command: s.Connection_Update
            }, paramCode: 279618
        },
        connectionVersion: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.Connection,
                command: s.Connection_Version_Update
            }, paramCode: 2
        },
        connectionChannelMapGet: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.Connection,
                command: s.Connection_Channel_Map_Get
            }, paramCode: 2
        },
        connectionChannelMapSet: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.Connection,
                command: s.Connection_Channel_Map_Set
            }, paramCode: 130
        },
        connectionFeaturesGet: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.Connection,
                command: s.Connection_Features_Get
            }, paramCode: 2
        },
        connectionGetStatus: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.Connection,
                command: s.Connection_Get_Status
            }, paramCode: 2
        },
        connectionRawTx: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.Connection,
                command: s.Connection_Raw_Tx
            }, paramCode: 130
        },
        attClientFindByTypeValue: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 8,
                cls: o.AttributeClient,
                command: s.Attclient_Find_By_Type_Value
            }, paramCode: 541762
        },
        attClientReadByGroupType: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 6,
                cls: o.AttributeClient,
                command: s.Attclient_Read_By_Group_Type
            }, paramCode: 33858
        },
        attClientReadByType: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 6,
                cls: o.AttributeClient,
                command: s.Attclient_Read_By_Type
            }, paramCode: 33858
        },
        attClientFindInformation: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 5,
                cls: o.AttributeClient,
                command: s.Attclient_Find_Information
            }, paramCode: 1090
        },
        attClientReadByHandle: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.AttributeClient,
                command: s.Attclient_Read_By_Handle
            }, paramCode: 66
        },
        attClientAttributeWrite: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 4,
                cls: o.AttributeClient,
                command: s.Attclient_Attribute_Write
            }, paramCode: 2114
        },
        attClientWriteCommand: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 4,
                cls: o.AttributeClient,
                command: s.Attclient_Write_Command
            }, paramCode: 2114
        },
        attClientIndicateConfirm: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.AttributeClient,
                command: s.Attclient_Indicate_Confirm
            }, paramCode: 2
        },
        attClientReadLong: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.AttributeClient,
                command: s.Attclient_Read_Long
            }, paramCode: 66
        },
        attClientPrepareWrite: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 6,
                cls: o.AttributeClient,
                command: s.Attclient_Prepare_Write
            }, paramCode: 33858
        },
        attClientExecuteWrite: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.AttributeClient,
                command: s.Attclient_Execute_Write
            }, paramCode: 34
        },
        attClientReadMultiple: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.AttributeClient,
                command: s.Attclient_Read_Multiple
            }, paramCode: 130
        },
        smEncryptStart: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.SecurityManager,
                command: s.SM_Encrypt_Start
            }, paramCode: 34
        },
        smSetBondableMode: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.SecurityManager,
                command: s.SM_Set_Bondable_Mode
            }, paramCode: 2
        },
        smDeleteBonding: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.SecurityManager,
                command: s.SM_Delete_Bonding
            }, paramCode: 2
        },
        smSetParameters: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.SecurityManager,
                command: s.SM_Set_Parameters
            }, paramCode: 546
        },
        smPasskeyEntry: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 5,
                cls: o.SecurityManager,
                command: s.SM_Passkey_Entry
            }, paramCode: 98
        },
        smGetBonds: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.SecurityManager,
                command: s.SM_Get_Bonds
            }, paramCode: 0
        },
        smSetOOBData: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.SecurityManager,
                command: s.SM_Set_OOB_Data
            }, paramCode: 8
        },
        gapSetPrivacyFlags: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.GenericAccessProfile,
                command: s.GAP_Set_Privacy_Flags
            }, paramCode: 34
        },
        gapSetMode: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.GenericAccessProfile,
                command: s.GAP_Set_Mode
            }, paramCode: 34
        },
        gapDiscover: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.GenericAccessProfile,
                command: s.GAP_Discover
            }, paramCode: 2
        },
        gapConnectDirect: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 15,
                cls: o.GenericAccessProfile,
                command: s.GAP_Connect_Direct
            }, paramCode: 4473898
        },
        gapEndProcedure: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.GenericAccessProfile,
                command: s.GAP_End_Procedure
            }, paramCode: 0
        },
        gapConnectSelective: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 8,
                cls: o.GenericAccessProfile,
                command: s.GAP_Connect_Selective
            }, paramCode: 17476
        },
        gapSetFiltering: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.GenericAccessProfile,
                command: s.GAP_Set_Filtering
            }, paramCode: 546
        },
        gapSetScanParameters: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 5,
                cls: o.GenericAccessProfile,
                command: s.GAP_Set_Scan_Parameters
            }, paramCode: 580
        },
        gapSetAdvParameters: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 5,
                cls: o.GenericAccessProfile,
                command: s.GAP_Set_Adv_Parameters
            }, paramCode: 580
        },
        gapSetAdvData: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.GenericAccessProfile,
                command: s.GAP_Set_Adv_Data
            }, paramCode: 130
        },
        gapSetDirectedConnectable: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 7,
                cls: o.GenericAccessProfile,
                command: s.GAP_Set_Directed_Connectable_Mode
            }, paramCode: 42
        },
        hwIOPortConfigIRQ: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.Hardware,
                command: s.HW_IO_Port_Config_IRQ
            }, paramCode: 546
        },
        hwSetSoftTimer: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 6,
                cls: o.Hardware,
                command: s.HW_Set_Soft_Timer
            }, paramCode: 550
        },
        hwADCRead: {
            header: {tType: a.Bluetooth, mType: i.Command, lolen: 3, cls: o.Hardware, command: s.HW_ADC_Read},
            paramCode: 546
        },
        hwIOPortConfigDirection: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.Hardware,
                command: s.HW_IO_Port_Config_Direction
            }, paramCode: 34
        },
        hwIOPortConfigFunction: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.Hardware,
                command: s.HW_IO_Port_Config_Function
            }, paramCode: 34
        },
        hwIOPortConfigPull: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.Hardware,
                command: s.HW_IO_Port_Config_Pull
            }, paramCode: 546
        },
        hwIOPortWrite: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 3,
                cls: o.Hardware,
                command: s.HW_IO_Port_Write
            }, paramCode: 546
        },
        hwIOPortRead: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.Hardware,
                command: s.HW_IO_Port_Read
            }, paramCode: 34
        },
        hwSPIConfig: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 6,
                cls: o.Hardware,
                command: s.HW_SPI_Config
            }, paramCode: 2236962
        },
        hwSPITransfer: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 2,
                cls: o.Hardware,
                command: s.HW_SPI_Transfer
            }, paramCode: 2084
        },
        hwI2CRead: {
            header: {tType: a.Bluetooth, mType: i.Command, lolen: 3, cls: o.Hardware, command: s.HW_I2C_Read},
            paramCode: 546
        },
        hwI2CWrite: {
            header: {tType: a.Bluetooth, mType: i.Command, lolen: 3, cls: o.Hardware, command: s.HW_I2C_Write},
            paramCode: 2082
        },
        hwSetTxPower: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.Hardware,
                command: s.HW_Set_Tx_Power
            }, paramCode: 2
        },
        hwTimerComparator: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 5,
                cls: o.Hardware,
                command: s.HW_Timer_Comparator
            }, paramCode: 16930
        },
        testPhyTx: {
            header: {tType: a.Bluetooth, mType: i.Command, lolen: 3, cls: o.Test, command: s.Test_Phy_Tx},
            paramCode: 0
        },
        testPhyRx: {
            header: {tType: a.Bluetooth, mType: i.Command, lolen: 1, cls: o.Test, command: s.Test_Phy_Rx},
            paramCode: 0
        },
        testPhyEnd: {
            header: {tType: a.Bluetooth, mType: i.Command, lolen: 0, cls: o.Test, command: s.Test_Phy_End},
            paramCode: 4
        },
        testPhyReset: {
            header: {tType: a.Bluetooth, mType: i.Command, lolen: 0, cls: o.Test, command: s.Test_Phy_Reset},
            paramCode: 0
        },
        testGetChannelMap: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.Test,
                command: s.Test_Get_Channel_Map
            }, paramCode: 8
        },
        testDebug: {
            header: {tType: a.Bluetooth, mType: i.Command, lolen: 1, cls: o.Test, command: s.Test_Debug},
            paramCode: 8
        },
        testgetChannelMode: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.Test,
                command: s.Test_Channel_Mode
            }, paramCode: 0
        },
        dfuReset: {
            header: {tType: a.Bluetooth, mType: i.Command, lolen: 1, cls: o.DFU, command: s.DFU_Reset},
            paramCode: 2
        },
        dfuFlashSetAddress: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 4,
                cls: o.DFU,
                command: s.DFU_Flash_Set_Address
            }, paramCode: 6
        },
        dfuFlashUpload: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 1,
                cls: o.DFU,
                command: s.DFU_Flash_Upload
            }, paramCode: 8
        },
        dfuFlashUploadFinish: {
            header: {
                tType: a.Bluetooth,
                mType: i.Command,
                lolen: 0,
                cls: o.DFU,
                command: s.DFU_Flash_Upload_Finish
            }, paramCode: 0
        }
    }, bglib
}), define("hid", ["signals"], function (e) {
    function deviceMatch(e, t) {
        return e.vendorId == t.vendorId && e.productId == t.productId
    }

    function connect(e, t) {
        var r = e.deviceId;
        chrome.hid.connect(r, function (e) {
            var i = e.connectionId, a = {deviceId: r, connectionId: i};
            if (t.addConnection(a), n.connected.dispatch(t.name), t.autoPoll) {
                var o = function () {
                    chrome.hid.receive(i, function (e, n) {
                        return chrome.runtime.lastError ? void console.log("poll lastError:" + chrome.runtime.lastError.message) : (t.pollCallback(n, a), void(a.pollTimeoutId = setTimeout(o, t.pollMs)))
                    })
                };
                o()
            }
        })
    }

    function checkNewDevice(e) {
        console.log("checking new device...");
        for (var n in t) {
            var r = t[n];
            if (console.log("checking for match with " + r.name), deviceMatch(e, r.deviceDef)) return void connect(e, r)
        }
        console.log("Device not recognised")
    }

    var t = {}, n = {};
    return n.connected = new e, n.disconnected = new e, n.addHandler = function (e) {
        console.log("adding " + e.name + " hid handler"), t[e.name] = e
    }, n.initialize = function () {
        chrome.hid.onDeviceAdded.addListener(checkNewDevice);
        var e = [];
        for (var r in t) e.push(t[r].deviceDef);
        chrome.hid.getDevices({filters: e}, function (e) {
            e.forEach(checkNewDevice)
        }), chrome.hid.onDeviceRemoved.addListener(function (e) {
            var r, i;
            for (var a in t) if (i = t[a].removeConnection(e)) {
                r = t[a];
                break
            }
            return r ? (chrome.hid.disconnect(i.connectionId), n.disconnected.dispatch(r.name), void clearTimeout(i.pollTimeoutId)) : void console.log("device removed was not recognised")
        })
    }, n
}), define("shared/getModules", [], function () {
    return function (e) {
        return new Promise(function (t, n) {
            require(e, function () {
                t(Array.from(arguments))
            })
        })
    }
}), define("shared/ble/ble", ["signals", "shared/getModules"], function (e, t) {
    var n, r = null, i = 0, a = {};
    return a.INTERNAL_BLE_PORT = "INTERNAL_BLE_PORT", a.INTERNAL_BLE_MODULE_ID = "INTERNAL_BLE_PORT", a.BLED112_MODULE_ID = "INTERNAL_BLE_PORT", a.disconnected = new e, a.connected = new e, a.ready = new e, a.init = function (e) {
        n = e.getDeviceManager();
        var r = e.getBle();
        t(["promise-chain", "device-manager/att-registry"]).then(function (e) {
            var t = e[0], i = e[1];
            n.onDeviceConnected.add(function (e) {
                var o = e ? e.handlerId : null;
                t.addPromise(function () {
                    return i.notifyConnected(e, r, n).then(function () {
                        return a.connected.dispatch(o, e), Promise.resolve()
                    })
                })
            })
        }), n.onDeviceDisconnected.add(function (e) {
            var t = e ? e.handlerId : null;
            a.disconnected.dispatch(t, e)
        }), a.ready.dispatch(n, r)
    }, a.makePlatformFacade = function (e) {
        var n, r = e ? "ble112/ble112-facade" : "chrome/chrome-facade", i = e ? "Ble112Facade" : "ChromeFacade";
        return t([r]).then(function (e) {
            return n = new e[0][i], n.init()
        }).then(function (e) {
            return a.init(n), Promise.resolve(n)
        })
    }, a.isBLEDPort = function (e) {
        return e && 9304 == e.vendorId && 1 == e.productId
    }, a.isChromeInternalBlePort = function (e) {
        return e && e.id == a.INTERNAL_BLE_PORT
    }, a.hasChromeInternalBle = function (e) {
        return -1 != window.navigator.appVersion.toLowerCase().indexOf("cros")
    }, a.setActiveHandler = function (e, t) {
        r = e, i = t
    }, a.getActiveHandlerId = function () {
        return r
    }, a.getMaxConnections = function () {
        return i
    }, a.getSelectedDevices = function () {
        return n ? n.connectedDevices.filter(function (e) {
            return e.handlerId == r
        }) : []
    }, require(["shared/app-utils"], function (e) {
        e.addCloseHandler(function (e) {
            n.destroy(e)
        })
    }), a
}), define("files", [], function () {
    var e = {};
    return e.saveLocalFile = function (t, n, r) {
        e.getLocalFileBlob(t, n, function (n) {
            e.saveBlob(t, n, r)
        })
    }, e.getLocalFileBlob = function (e, t, n) {
        var r = new XMLHttpRequest;
        r.open("GET", t + e, !0), r.responseType = "blob", r.onload = function (e) {
            var t = r.response;
            n(t)
        }, r.send(null)
    }, e.saveBlob = function (e, t, n) {
        chrome.fileSystem.chooseEntry({type: "saveFile", suggestedName: e}, function (e) {
            return null != chrome.runtime.lastError ? void console.warn("saveBlob:" + chrome.runtime.lastError.message) : e ? void e.createWriter(function (e) {
                e.onwriteend = function (e) {
                    console.info("saveBlob. Write completed."), n && n()
                }, e.onerror = function (e) {
                    console.error("saveBlob. Write failed: " + e.toString())
                }, e.onprogress = function (e) {
                    e.lengthComputable && console.info("saveBlob. Progress: " + e.loaded + " out of " + e.total)
                }, e.write(t)
            }, function () {
                console.error("saveBlob. Couldn't create writer")
            }) : void console.warn("saveBlob. user didn't select a file")
        })
    }, e
}), define("serial/serial", ["signals"], function (e) {
    var t = {};
    return t.connected = new e, t.disconnected = new e, t
}),define("devices/usb-handler", ["signals"], function (e) {
    function USBHandler(t, n, r, i) {
        this.name = t, this.deviceDef = n, this.pollCallback = r, this.pollMs = i, this.connections = [], this.connectionRemoved = new e, this.connectionAdded = new e, this.autoPoll = !0, this.addConnection = function (e) {
            var t = this.connections.length;
            e.index = t, this.connections.push(e), this.connectionAdded.dispatch(e)
        }, this.removeConnection = function (e) {
            for (var t, n = 0; n < this.connections.length; n++) {
                var r = this.connections[n];
                if (r.deviceId == e) return t = r, this.connections.splice(n, 1), this.connections.forEach(function (e, t) {
                    e.index = t
                }), this.connectionRemoved.dispatch(), t
            }
        }
    }

    return USBHandler
}),define("shared/data-utils", [], function () {
    var e = {};
    return e.insertArrayInto = function (e, t, n) {
        e.splice.apply(e, [n, 0].concat(t))
    }, e.deleteValue = function (e, t) {
        for (; ;) {
            var n = e.indexOf(t);
            if (-1 == n) return;
            e.splice(n, 1)
        }
    }, e.appendBuffer = function (e, t) {
        var n = new Uint8Array(e.byteLength + t.byteLength);
        return n.set(new Uint8Array(e), 0), n.set(new Uint8Array(t), e.byteLength), n.buffer
    }, e.base64ToArrayBuffer = function (e) {
        for (var t = window.atob(e.replace(/\s/g, "")), n = t.length, r = new Uint8Array(n), i = 0; n > i; i++) r[i] = t.charCodeAt(i);
        return r.buffer
    }, e.flatten = function (e) {
        return e.reduce(function (e, t) {
            return e.concat(t)
        }, [])
    }, e
}),define("server/server", ["signals", "shared/data-utils"], function (e, t) {
    function info(e) {
        console.info(e)
    }

    function error(e) {
        console.error(e)
    }

    function log(e) {
        console.log(e)
    }

    function onReceiveError(e) {
        error("chrome.sockets.tcp.onReceiveError (" + e.resultCode + ") on socket " + e.socketId), chrome.sockets.tcp.setPaused(e.socketId, !1), -100 == e.resultCode && close(e.socketId)
    }

    function onReceive(e) {
        var t = findConnection(e.socketId);
        info("received data on " + e.socketId), t.lastClient = e.socketId, a.received.dispatch(t.port, e.data)
    }

    function close(e) {
        chrome.sockets.tcp.disconnect(e, function () {
            info("disconnected " + e), chrome.sockets.tcp.close(e, function () {
                info("closed " + e);
                var n = findConnection(e);
                n && t.deleteValue(n.clients, e)
            })
        })
    }

    function onAccept(e) {
        var t = r[e.socketId];
        if (t) {
            var n = e.clientSocketId;
            t.clients.push(n), chrome.sockets.tcp.setKeepAlive(n, !1, 0, function (e) {
                info("keep alive result code " + e)
            }), log("port " + t.port + " connection made on client socket " + n), chrome.sockets.tcp.setPaused(n, !1)
        }
    }

    function findConnection(e) {
        for (var t in i) {
            var n = i[t];
            if (-1 != n.clients.indexOf(e)) return n
        }
    }

    function createSocket(e) {
        var t = {port: e, clients: []};
        i[e] = t, chrome.sockets.tcpServer.create({}, function (i) {
            info("socket created"), t.server = i.socketId, r[t.server] = t, chrome.sockets.tcpServer.listen(t.server, n, e, function (n) {
                return 0 > n ? void error("Error listening:" + chrome.runtime.lastError.message) : void info("listening on server socket " + t.server + " for port " + e)
            })
        })
    }

    var n = "127.0.0.1", r = {}, i = {};
    chrome.sockets.tcp.onReceiveError.addListener(onReceiveError), chrome.sockets.tcp.onReceive.addListener(onReceive), chrome.sockets.tcpServer.onAccept.addListener(onAccept);
    var a = {};
    return a.received = new e, a.start = function (e) {
        function checkServer() {
            chrome.sockets.tcpServer.getSockets(function (t) {
                var n = !1;
                t.forEach(function (t) {
                    t.localPort == e && (info("closing pre-existing server socket"), console.dir(t), n = !0, chrome.sockets.tcpServer.close(t.socketId, function () {
                        checkClient()
                    }))
                }), n || checkClient()
            })
        }

        function checkClient() {
            chrome.sockets.tcp.getSockets(function (n) {
                var r = !1;
                n.forEach(function (n) {
                    n.localPort == e && (info("closing pre-existing client socket"), console.dir(n), r = !0, chrome.sockets.tcp.close(n.socketId, function () {
                        t()
                    }))
                }), r || t()
            })
        }

        var t = function () {
            createSocket(e)
        };
        checkServer()
    }, a.send = function (e, t) {
        var n = i[e], r = n.lastClient;
        null != chrome.runtime.lastError ? error("server error @send:" + chrome.runtime.lastError.message + ", clientId:" + r) : chrome.sockets.tcp.send(r, t, function (e) {
            null != chrome.runtime.lastError && error("server error @send callback:" + chrome.runtime.lastError.message + ", clientId:" + r)
        })
    }, a
}),define("server/http", ["./server", "signals"], function (e, t) {
    function ab2str(e) {
        return String.fromCharCode.apply(null, new Uint8Array(e))
    }

    function str2ab(e) {
        for (var t = new Uint8Array(e.length), n = 0; n < e.length; n++) t[n] = e.charCodeAt(n);
        return t.buffer
    }

    var n = "\n";
    e.received.add(function (e, t) {
        var n = ab2str(t), i = n.split("\n"), a = i[0], o = a.split(" "), s = o[0], c = o[1];
        r.requestMade.dispatch(e, s, c, n)
    });
    var r = {};
    return r.server = e, r.requestMade = new t, r.send = function (t, r) {
        var i = "";
        i += "HTTP/1.1 200 OK" + n, i += "Content-Type: text/html; charset=ISO-8859-1" + n, i += "Content-Length: " + r.length + n, i += "Access-Control-Allow-Origin: *" + n, i += n;
        var a = i + r;
        e.send(t, str2ab(a))
    }, r
}),define("server/flash-http", ["./http"], function (e) {
    function makeCrossDomain() {
        var t = "";
        return t += "<cross-domain-policy>\n", t += '<allow-access-from domain="*" to-ports="' + e.server.port + '"/>\n', t += "</cross-domain-policy>", t += "\x00"
    }

    e.requestMade.add(function (t, n, r, i) {
        "/crossdomain.xml" == r && e.send(t, makeCrossDomain())
    })
}),define("server/connection", ["signals"], function (e) {
    function Connection(t) {
        this.timeoutId = -1, this.timeoutMs = t, this.isConnected = !1, this.connected = new e,
            this.disconnected = new e
    }

    return Connection.prototype.reset = function () {
        this.sendConnected(), this.startTimeout()
    }, Connection.prototype.startTimeout = function () {
        clearTimeout(this.timeoutId);
        var e = this;
        this.timeoutId = setTimeout(function () {
            e.sendDisconnected()
        }, this.timeoutMs)
    }, Connection.prototype.sendDisconnected = function () {
        this.isConnected && (this.isConnected = !1, this.disconnected.dispatch())
    }, Connection.prototype.sendConnected = function () {
        this.isConnected || (this.isConnected = !0, this.connected.dispatch())
    }, Connection
}),define("scratch-utils", ["shared/data-utils"], function (e) {
    function getBusyList(e) {
        var t = r[e];
        return t || (t = r[e] = []), t
    }

    var t = "\n", n = " ", r = {}, i = {};
    return i.doAfterDelay = function (t, n, r, i) {
        var a = getBusyList(t);
        a.push(n), setTimeout(function () {
            e.deleteValue(a, n), r()
        }, 1e3 * i)
    }, i.getBusy = function (e) {
        var i = r[e];
        return i && i.length ? "_busy " + i.join(n) + t : ""
    }, i.getPathParts = function (e) {
        return e = e.replace(/%20/g, " "), e.substr(1).split("/")
    }, i.getStatus = function (e, n) {
        return 0 == n ? "_problem Chrome helper app not communicating with " + e + t : "_success " + e + " Connected" + t
    }, i
}),define("devices/wedo/wedo-names", [], function () {
    return {
        NAME: "wedo",
        NONE: "NONE",
        SHORTLO: "MOTOR BRAKE",
        BEND: "BEND",
        TILT: "TILT",
        FUTURE: "FUTURE",
        RAW: "RAW",
        TOUCH: "TOUCH",
        SERVO: "SERVO",
        SOUND: "SOUND",
        TEMP: "TEMP",
        LIGHT: "LIGHT",
        MOTION: "DISTANCE",
        LIGHTBRICK: "LIGHTS",
        N_22: "UNKNOWN",
        OPEN: "NONE",
        MOTOR: "MOTOR",
        SHORTHI: "MOTOR SHORT"
    }
}),define("devices/wedo/wedo-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./wedo-names"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, a) {
        if (t == o) {
            var s = i.getPathParts(r), c = s[0], d = "";
            switch ("poll" != c && console.log("handle " + r + "@" + (new Date).toLocaleTimeString()), c) {
                case"poll":
                    h.connection.reset(), d = poll();
                    break;
                case"reset_all":
                    u.resetAll();
                    break;
                case"motorOn":
                    u.motorOn(s[1]);
                    break;
                case"motorOff":
                    var l = "off";
                    u.motorOff(s[1], l);
                    break;
                case"motorOffBrake":
                    u.motorOff(s[1], s[2]);
                    break;
                case"motorOnFor":
                    u.motorOnFor(s[2], parseFloat(s[3]), s[1]);
                    break;
                case"startMotorPower":
                    u.motorPower(s[1], parseFloat(s[2]));
                    break;
                case"setMotorDirection":
                    u.motorDirection(s[1], s[2]);
                    break;
                default:
                    return void console.log("wedo-http. cmd " + c + " not recognised")
            }
            d += i.getStatus("Wedo", u.getConnectionCount()), e.send(t, d)
        }
    }

    function poll() {
        var e = "", t = u.getSensor(a.MOTION), n = u.getSensor(a.TILT), r = u.getBusy();
        switch (e += "distance " + t + f, e += "tilt " + n + f, e += "sensor/distance " + t + f, e += "sensor/tilt " + n + f, n) {
            case d:
                e += "isTilted/any true" + f, e += "isTilted/up false" + f, e += "isTilted/down true" + f, e += "isTilted/left false" + f, e += "isTilted/right false" + f;
                break;
            case s:
                e += "isTilted/any true" + f, e += "isTilted/up false" + f, e += "isTilted/down false" + f, e += "isTilted/left false" + f, e += "isTilted/right true" + f;
                break;
            case l:
                e += "isTilted/any true" + f, e += "isTilted/up true" + f, e += "isTilted/down false" + f, e += "isTilted/left false" + f, e += "isTilted/right false" + f;
                break;
            case c:
                e += "isTilted/any true" + f, e += "isTilted/up false" + f, e += "isTilted/down false" + f, e += "isTilted/left true" + f, e += "isTilted/right false" + f;
                break;
            default:
                e += "isTilted/any false" + f, e += "isTilted/up false" + f, e += "isTilted/down false" + f, e += "isTilted/left false" + f, e += "isTilted/right false" + f
        }
        for (var i = 2 * u.getConnectionCount(), o = 0; i > o; o++) {
            var h = String.fromCharCode(o + 65), p = u.getSensorAt(h), m = "sensor" + h + " " + p + f;
            e += m, e += "sensor/" + m
        }
        return r && (e += "_busy" + r + f), e
    }

    var o = 17301;
    const s = 2, c = 4, d = 1, l = 3;
    e.requestMade.add(handleRequest, this);
    var u, f = "\n", h = {};
    return h.setDeviceHandler = function (e) {
        u = e
    }, h.connection = new r(2e3), n.start(o), h
}),define("devices/wedo/wedo-outputs", ["./wedo-names"], function (e) {
    function isMotor(t, n) {
        return t.slots[n].type == e.MOTOR || t.slots[n].type == e.SERVO
    }

    function isMoving(e, t) {
        return e.states[t].isOn && e.states[t].power > 0
    }

    function getByteValue(e, t) {
        var n = e.states[t], r = 0;
        return n.isOn && n.power > 0 && (r = 17 + Math.floor(1.1 * n.power)), n.dir < 0 && (r = 256 - r & 255), r
    }

    function sendOutputReport(e, n, r) {
        var i = n ? 128 : getByteValue(e, 0), a = r ? 128 : getByteValue(e, 1);
        t.sendData(e, i, a)
    }

    function checkForMotorsOff(e, t) {
        isMoving(e, 0) || isMoving(e, 1) || (e.motorOffTime = (new Date).getTime(), t && (e.motorOffTime += r.MOTOR_BRAKING_TIME))
    }

    var t, n = 700, r = {};
    return r.MOTOR_BRAKING_TIME = 300, r.setDeviceHandler = function (e) {
        t = e
    }, r.okayToReadIDs = function (e) {
        return e.states[0].isOn || e.states[1].isOn ? !1 : (new Date).getTime() - e.motorOffTime > n
    }, r.deviceOnOff = function (e, t, n, r) {
        var i, a = isMotor(e, t);
        a && (i = isMoving(e, t)), e.states[t].isOn = 1 == n, a && i && checkForMotorsOff(e, r), sendOutputReport(e)
    }, r.power = function (e, t, n) {
        var r = Math.max(0, Math.min(n, 100));
        e.states[t].power = r
    }, r.direction = function (e, t, n) {
        var r;
        switch (n) {
            case"this way":
            case"this%20way":
                r = 1;
                break;
            case"that way":
            case"that%20way":
                r = -1;
                break;
            case"reverse":
            case"other way":
            case"other%20way":
                r = 0;
                break;
            default:
                return
        }
        -1 == r || 1 == r ? e.states[t].dir = r : 0 == r && (e.states[t].dir = -e.states[t].dir), sendOutputReport(e)
    }, r.brake = function (e, t) {
        var n = 0 == t, r = 1 == t;
        sendOutputReport(e, n, r)
    }, r
}),define("devices/wedo/wedo-usb", ["../usb-handler", "../../hid", "./wedo-http", "./wedo-names", "./wedo-outputs", "signals"], function (e, t, n, r, i, a) {
    function pollCallback(e, t) {
        if (null != e) {
            var n = new Uint8Array(e), r = Array.prototype.join.call(n);
            if (r == o) return;
            o = r, t.slots || setupNewInstance(t);
            var a, s, c = t.slots, d = n[3], l = n[5];
            0 == c.length || i.okayToReadIDs(t) && (d != t.aTypeBytes || l != t.bTypeBytes) ? (a = getType(d), s = getType(l), t.aTypeBytes = d, t.bTypeBytes = l) : (a = c[0].type, s = c[1].type);
            var f = getValue(a, n[2]), h = getValue(s, n[4]);
            c[0] = {type: a, value: f}, c[1] = {
                type: s,
                value: h
            }, u[a] = f, u[s] = h, m.polled.dispatch(t.slots, t.states, t.index)
        }
    }

    function setupNewInstance(e) {
        e.slots = [], e.motorOffTime = 0, e.states = [{power: 100, dir: 1, isOn: !1}, {power: 100, dir: 1, isOn: !1}]
    }

    function isMotor(e) {
        return e == r.MOTOR || e == r.SERVO || e == r.SHORTHI || e == r.SHORTLO
    }

    function isLight(e) {
        return e == r.LIGHTBRICK
    }

    function isSensor(e) {
        return e == r.MOTION || e == r.TILT
    }

    function getSlotFor(e) {
        var t = l[e], n = f.connections[t[0]];
        return n && n.slots ? n.slots[t[1]] : null
    }

    function getDataFor(e) {
        var t = l[e];
        return f.connections[t[0]]
    }

    function getType(e) {
        var t = -1;
        return h.forEach(function (n, r) {
            return n >= e ? void(t = r) : void 0
        }), -1 != t ? p[t] : e
    }

    function getValue(e, t) {
        var n = t;
        return e == r.TILT ? n = getTilt(t) : e == r.MOTION && (n = getMotion(t)), n
    }

    function getTilt(e) {
        var t;
        return t = 49 > e ? 3 : 100 > e ? 2 : 154 > e ? 0 : 205 > e ? 1 : 4
    }

    function getMotion(e) {
        var t = Math.round(100 * (e - 70) / 140);
        return t = Math.max(0, Math.min(t, 100))
    }

    function turnDevicesOnOff(e, t, n) {
        var r = getDevicesFor(e);
        r.forEach(function (e) {
            i.deviceOnOff(e.conn, e.index, t, n)
        }, s)
    }

    function getDevicesFor(e) {
        var t, n, r = [];
        switch (e) {
            case"everything":
                t = !0, n = !0;
                break;
            case"lights":
                t = !0;
                break;
            case"motor":
            case"all motors":
            case"all%20motors":
                n = !0;
                break;
            default:
                var i = e.split(" ")[1], a = getSlotFor(i);
                t = 0 == e.indexOf("light"), n = 0 == e.indexOf("motor");
                var o = getDataFor(i), s = l[i][1];
                return (n && isMotor(a.type) || t && isLight(a.type) || n && isLight(a.type)) && r.push({
                    conn: o,
                    index: s
                }), r
        }
        return f.connections.forEach(function (e) {
            e.slots.forEach(function (i, a) {
                (n && isMotor(i.type) || t && isLight(i.type)) && r.push({conn: e, index: a})
            })
        }), r
    }

    var o, s = this, c = {vendorId: 1684, productId: 3}, d = "", l = {};
    !function () {
        function getIndicesFor(e) {
            var t = e.charCodeAt(0) - 65, n = Math.floor(t / 2), r = t % 2;
            return [n, r]
        }

        for (var e = 0; 26 > e; e++) {
            var t = String.fromCharCode(e + 65);
            l[t] = getIndicesFor(t)
        }
        console.dir(l)
    }();
    var u, f = new e(r.NAME, c, pollCallback, 3);
    t.addHandler(f), f.connectionRemoved.add(function () {
        m.reset()
    });
    var h = [9, 27, 47, 67, 82, 92, 109, 131, 152, 169, 190, 207, 224, 233, 246, 255].reverse(),
        p = [r.SHORTLO, r.BEND, r.TILT, r.FUTURE, r.RAW, r.TOUCH, r.SERVO, r.SOUND, r.TEMP, r.LIGHT, r.MOTION, r.LIGHTBRICK, r.N_22, r.OPEN, r.MOTOR, r.SHORTHI].reverse(),
        m = {};
    return m.getSensor = function (e) {
        var t = u[e];
        return void 0 == t ? 0 : t
    }, m.getSensorAt = function (e) {
        var t = getSlotFor(e);
        return t && isSensor(t.type) ? t.value : 0
    }, m.getBusy = function () {
        return d
    }, m.reset = function () {
        u = {}
    }, m.getConnectionCount = function () {
        return f.connections.length
    }, m.sendData = function (e, t, n) {
        var r = new Uint8Array([64, t, n, 0, 0, 0, 0, 0]);
        chrome.hid.send(e.connectionId, 0, r.buffer, function () {
        })
    }, m.motorOn = function (e) {
        turnDevicesOnOff(e, !0)
    }, m.motorOff = function (e, t) {
        "brake" == t ? (getDevicesFor(e).forEach(function (e) {
            i.brake(e.conn, e.index)
        }), setTimeout(function () {
            turnDevicesOnOff(e, !1, !0)
        }, i.motorBrakingTime)) : turnDevicesOnOff(e, !1)
    }, m.motorOnFor = function (e, t, n) {
        turnDevicesOnOff(e, !0), d += " " + n, setTimeout(function () {
            turnDevicesOnOff(e, !1), d = d.replace(" " + n, "")
        }, 1e3 * t)
    }, m.resetAll = function () {
        turnDevicesOnOff("everything", !1)
    }, m.motorPower = function (e, t) {
        getDevicesFor(e).forEach(function (e) {
            i.power(e.conn, e.index, t)
        }), 0 == t ? turnDevicesOnOff(e, !1) : turnDevicesOnOff(e, !0)
    }, m.motorDirection = function (e, t) {
        getDevicesFor(e).forEach(function (e) {
            i.direction(e.conn, e.index, t)
        })
    }, m.polled = new a, n.setDeviceHandler(m), i.setDeviceHandler(m), m.reset(), m
}),!function (e) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = e(); else if ("function" == typeof define && define.amd) define("jszip", [], e); else {
        var t;
        "undefined" != typeof window ? t = window : "undefined" != typeof global ? t = global : "undefined" != typeof self && (t = self), t.JSZip = e()
    }
}(function () {
    return function a(t, n, r) {
        function e(o, s) {
            if (!n[o]) {
                if (!t[o]) {
                    var c = "function" == typeof require && require;
                    if (!s && c) return c(o, !0);
                    if (i) return i(o, !0);
                    throw new Error("Cannot find module '" + o + "'")
                }
                var d = n[o] = {exports: {}};
                t[o][0].call(d.exports, function (n) {
                    var r = t[o][1][n];
                    return e(r ? r : n)
                }, d, d.exports, a, t, n, r)
            }
            return n[o].exports
        }

        for (var i = "function" == typeof require && require, o = 0; o < r.length; o++) e(r[o]);
        return e
    }({
        1: [function (e, t, n) {
            var r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
            n.encode = function (e) {
                for (var t, n, i, a, o, s, c, d = "", l = 0; l < e.length;) t = e.charCodeAt(l++), n = e.charCodeAt(l++), i = e.charCodeAt(l++), a = t >> 2, o = (3 & t) << 4 | n >> 4, s = (15 & n) << 2 | i >> 6, c = 63 & i, isNaN(n) ? s = c = 64 : isNaN(i) && (c = 64), d = d + r.charAt(a) + r.charAt(o) + r.charAt(s) + r.charAt(c);
                return d
            }, n.decode = function (e) {
                var t, n, i, a, o, s, c, d = "", l = 0;
                for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); l < e.length;) a = r.indexOf(e.charAt(l++)), o = r.indexOf(e.charAt(l++)), s = r.indexOf(e.charAt(l++)), c = r.indexOf(e.charAt(l++)), t = a << 2 | o >> 4, n = (15 & o) << 4 | s >> 2, i = (3 & s) << 6 | c, d += String.fromCharCode(t), 64 != s && (d += String.fromCharCode(n)), 64 != c && (d += String.fromCharCode(i));
                return d
            }
        }, {}],
        2: [function (e, t) {
            function c() {
                this.compressedSize = 0, this.uncompressedSize = 0, this.crc32 = 0, this.compressionMethod = null, this.compressedContent = null
            }

            c.prototype = {
                getContent: function () {
                    return null
                }, getCompressedContent: function () {
                    return null
                }
            }, t.exports = c
        }, {}],
        3: [function (e, t, n) {
            n.STORE = {
                magic: "\x00\x00", compress: function (e) {
                    return e
                }, uncompress: function (e) {
                    return e
                }, compressInputType: null, uncompressInputType: null
            }, n.DEFLATE = e("./flate")
        }, {"./flate": 8}],
        4: [function (e, t) {
            var n = e("./utils"),
                r = [0, 1996959894, 3993919788, 2567524794, 124634137, 1886057615, 3915621685, 2657392035, 249268274, 2044508324, 3772115230, 2547177864, 162941995, 2125561021, 3887607047, 2428444049, 498536548, 1789927666, 4089016648, 2227061214, 450548861, 1843258603, 4107580753, 2211677639, 325883990, 1684777152, 4251122042, 2321926636, 335633487, 1661365465, 4195302755, 2366115317, 997073096, 1281953886, 3579855332, 2724688242, 1006888145, 1258607687, 3524101629, 2768942443, 901097722, 1119000684, 3686517206, 2898065728, 853044451, 1172266101, 3705015759, 2882616665, 651767980, 1373503546, 3369554304, 3218104598, 565507253, 1454621731, 3485111705, 3099436303, 671266974, 1594198024, 3322730930, 2970347812, 795835527, 1483230225, 3244367275, 3060149565, 1994146192, 31158534, 2563907772, 4023717930, 1907459465, 112637215, 2680153253, 3904427059, 2013776290, 251722036, 2517215374, 3775830040, 2137656763, 141376813, 2439277719, 3865271297, 1802195444, 476864866, 2238001368, 4066508878, 1812370925, 453092731, 2181625025, 4111451223, 1706088902, 314042704, 2344532202, 4240017532, 1658658271, 366619977, 2362670323, 4224994405, 1303535960, 984961486, 2747007092, 3569037538, 1256170817, 1037604311, 2765210733, 3554079995, 1131014506, 879679996, 2909243462, 3663771856, 1141124467, 855842277, 2852801631, 3708648649, 1342533948, 654459306, 3188396048, 3373015174, 1466479909, 544179635, 3110523913, 3462522015, 1591671054, 702138776, 2966460450, 3352799412, 1504918807, 783551873, 3082640443, 3233442989, 3988292384, 2596254646, 62317068, 1957810842, 3939845945, 2647816111, 81470997, 1943803523, 3814918930, 2489596804, 225274430, 2053790376, 3826175755, 2466906013, 167816743, 2097651377, 4027552580, 2265490386, 503444072, 1762050814, 4150417245, 2154129355, 426522225, 1852507879, 4275313526, 2312317920, 282753626, 1742555852, 4189708143, 2394877945, 397917763, 1622183637, 3604390888, 2714866558, 953729732, 1340076626, 3518719985, 2797360999, 1068828381, 1219638859, 3624741850, 2936675148, 906185462, 1090812512, 3747672003, 2825379669, 829329135, 1181335161, 3412177804, 3160834842, 628085408, 1382605366, 3423369109, 3138078467, 570562233, 1426400815, 3317316542, 2998733608, 733239954, 1555261956, 3268935591, 3050360625, 752459403, 1541320221, 2607071920, 3965973030, 1969922972, 40735498, 2617837225, 3943577151, 1913087877, 83908371, 2512341634, 3803740692, 2075208622, 213261112, 2463272603, 3855990285, 2094854071, 198958881, 2262029012, 4057260610, 1759359992, 534414190, 2176718541, 4139329115, 1873836001, 414664567, 2282248934, 4279200368, 1711684554, 285281116, 2405801727, 4167216745, 1634467795, 376229701, 2685067896, 3608007406, 1308918612, 956543938, 2808555105, 3495958263, 1231636301, 1047427035, 2932959818, 3654703836, 1088359270, 936918e3, 2847714899, 3736837829, 1202900863, 817233897, 3183342108, 3401237130, 1404277552, 615818150, 3134207493, 3453421203, 1423857449, 601450431, 3009837614, 3294710456, 1567103746, 711928724, 3020668471, 3272380065, 1510334235, 755167117];
            t.exports = function (e, t) {
                if ("undefined" == typeof e || !e.length) return 0;
                var i = "string" !== n.getTypeOf(e);
                "undefined" == typeof t && (t = 0);
                var a = 0, o = 0, s = 0;
                t = -1 ^ t;
                for (var c = 0, d = e.length; d > c; c++) s = i ? e[c] : e.charCodeAt(c), o = 255 & (t ^ s), a = r[o], t = t >>> 8 ^ a;
                return -1 ^ t
            }
        }, {"./utils": 21}],
        5: [function (e, t) {
            function c() {
                this.data = null, this.length = 0, this.index = 0
            }

            var n = e("./utils");
            c.prototype = {
                checkOffset: function (e) {
                    this.checkIndex(this.index + e)
                }, checkIndex: function (e) {
                    if (this.length < e || 0 > e) throw new Error("End of data reached (data length = " + this.length + ", asked index = " + e + "). Corrupted zip ?")
                }, setIndex: function (e) {
                    this.checkIndex(e), this.index = e
                }, skip: function (e) {
                    this.setIndex(this.index + e)
                }, byteAt: function () {
                }, readInt: function (e) {
                    var t, n = 0;
                    for (this.checkOffset(e), t = this.index + e - 1; t >= this.index; t--) n = (n << 8) + this.byteAt(t);
                    return this.index += e, n
                }, readString: function (e) {
                    return n.transformTo("string", this.readData(e))
                }, readData: function () {
                }, lastIndexOfSignature: function () {
                }, readDate: function () {
                    var e = this.readInt(4);
                    return new Date((e >> 25 & 127) + 1980, (e >> 21 & 15) - 1, e >> 16 & 31, e >> 11 & 31, e >> 5 & 63, (31 & e) << 1)
                }
            }, t.exports = c
        }, {"./utils": 21}],
        6: [function (e, t, n) {
            n.base64 = !1, n.binary = !1, n.dir = !1, n.createFolders = !1, n.date = null, n.compression = null, n.compressionOptions = null, n.comment = null, n.unixPermissions = null, n.dosPermissions = null
        }, {}],
        7: [function (e, t, n) {
            var r = e("./utils");
            n.string2binary = function (e) {
                return r.string2binary(e)
            }, n.string2Uint8Array = function (e) {
                return r.transformTo("uint8array", e)
            }, n.uint8Array2String = function (e) {
                return r.transformTo("string", e)
            }, n.string2Blob = function (e) {
                var t = r.transformTo("arraybuffer", e);
                return r.arrayBuffer2Blob(t)
            }, n.arrayBuffer2Blob = function (e) {
                return r.arrayBuffer2Blob(e)
            }, n.transformTo = function (e, t) {
                return r.transformTo(e, t)
            }, n.getTypeOf = function (e) {
                return r.getTypeOf(e)
            }, n.checkSupport = function (e) {
                return r.checkSupport(e)
            }, n.MAX_VALUE_16BITS = r.MAX_VALUE_16BITS, n.MAX_VALUE_32BITS = r.MAX_VALUE_32BITS, n.pretty = function (e) {
                return r.pretty(e)
            }, n.findCompression = function (e) {
                return r.findCompression(e)
            }, n.isRegExp = function (e) {
                return r.isRegExp(e)
            }
        }, {"./utils": 21}],
        8: [function (e, t, n) {
            var r = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Uint32Array,
                i = e("pako");
            n.uncompressInputType = r ? "uint8array" : "array", n.compressInputType = r ? "uint8array" : "array", n.magic = "\b\x00", n.compress = function (e, t) {
                return i.deflateRaw(e, {level: t.level || -1})
            }, n.uncompress = function (e) {
                return i.inflateRaw(e)
            }
        }, {pako: 24}],
        9: [function (e, t) {
            function c(e, t) {
                return this instanceof c ? (this.files = {}, this.comment = null, this.root = "", e && this.load(e, t), void(this.clone = function () {
                    var e = new c;
                    for (var t in this) "function" != typeof this[t] && (e[t] = this[t]);
                    return e
                })) : new c(e, t)
            }

            var n = e("./base64");
            c.prototype = e("./object"), c.prototype.load = e("./load"), c.support = e("./support"), c.defaults = e("./defaults"), c.utils = e("./deprecatedPublicUtils"), c.base64 = {
                encode: function (e) {
                    return n.encode(e)
                }, decode: function (e) {
                    return n.decode(e)
                }
            }, c.compressions = e("./compressions"), t.exports = c
        }, {
            "./base64": 1,
            "./compressions": 3,
            "./defaults": 6,
            "./deprecatedPublicUtils": 7,
            "./load": 10,
            "./object": 13,
            "./support": 17
        }],
        10: [function (e, t) {
            var n = e("./base64"), r = e("./zipEntries");
            t.exports = function (e, t) {
                var i, a, o, s;
                for (t = t || {}, t.base64 && (e = n.decode(e)), a = new r(e, t), i = a.files, o = 0; o < i.length; o++) s = i[o], this.file(s.fileName, s.decompressed, {
                    binary: !0,
                    optimizedBinaryString: !0,
                    date: s.date,
                    dir: s.dir,
                    comment: s.fileComment.length ? s.fileComment : null,
                    unixPermissions: s.unixPermissions,
                    dosPermissions: s.dosPermissions,
                    createFolders: t.createFolders
                });
                return a.zipComment.length && (this.comment = a.zipComment), this
            }
        }, {"./base64": 1, "./zipEntries": 22}],
        11: [function (e, t) {
            (function (e) {
                t.exports = function (t, n) {
                    return new e(t, n)
                }, t.exports.test = function (t) {
                    return e.isBuffer(t)
                }
            }).call(this, "undefined" != typeof Buffer ? Buffer : void 0)
        }, {}],
        12: [function (e, t) {
            function c(e) {
                this.data = e, this.length = this.data.length, this.index = 0
            }

            var n = e("./uint8ArrayReader");
            c.prototype = new n, c.prototype.readData = function (e) {
                this.checkOffset(e);
                var t = this.data.slice(this.index, this.index + e);
                return this.index += e, t
            }, t.exports = c
        }, {"./uint8ArrayReader": 18}],
        13: [function (e, t) {
            var n = e("./support"), r = e("./utils"), i = e("./crc32"), a = e("./signature"), o = e("./defaults"),
                s = e("./base64"), c = e("./compressions"), d = e("./compressedObject"), l = e("./nodeBuffer"),
                u = e("./utf8"), f = e("./stringWriter"), h = e("./uint8ArrayWriter"), p = function (e) {
                    if (e._data instanceof d && (e._data = e._data.getContent(), e.options.binary = !0, e.options.base64 = !1, "uint8array" === r.getTypeOf(e._data))) {
                        var t = e._data;
                        e._data = new Uint8Array(t.length), 0 !== t.length && e._data.set(t, 0)
                    }
                    return e._data
                }, m = function (e) {
                    var t = p(e), i = r.getTypeOf(t);
                    return "string" === i ? !e.options.binary && n.nodebuffer ? l(t, "utf-8") : e.asBinary() : t
                }, v = function (e) {
                    var t = p(this);
                    return null === t || "undefined" == typeof t ? "" : (this.options.base64 && (t = s.decode(t)), t = e && this.options.binary ? I.utf8decode(t) : r.transformTo("string", t), e || this.options.binary || (t = r.transformTo("string", I.utf8encode(t))), t)
                }, g = function (e, t, n) {
                    this.name = e, this.dir = n.dir, this.date = n.date, this.comment = n.comment, this.unixPermissions = n.unixPermissions, this.dosPermissions = n.dosPermissions, this._data = t, this.options = n, this._initialMetadata = {
                        dir: n.dir,
                        date: n.date
                    }
                };
            g.prototype = {
                asText: function () {
                    return v.call(this, !0)
                }, asBinary: function () {
                    return v.call(this, !1)
                }, asNodeBuffer: function () {
                    var e = m(this);
                    return r.transformTo("nodebuffer", e)
                }, asUint8Array: function () {
                    var e = m(this);
                    return r.transformTo("uint8array", e)
                }, asArrayBuffer: function () {
                    return this.asUint8Array().buffer
                }
            };
            var b = function (e, t) {
                var n, r = "";
                for (n = 0; t > n; n++) r += String.fromCharCode(255 & e), e >>>= 8;
                return r
            }, y = function () {
                var e, t, n = {};
                for (e = 0; e < arguments.length; e++) for (t in arguments[e]) arguments[e].hasOwnProperty(t) && "undefined" == typeof n[t] && (n[t] = arguments[e][t]);
                return n
            }, _ = function (e) {
                return e = e || {}, e.base64 !== !0 || null !== e.binary && void 0 !== e.binary || (e.binary = !0), e = y(e, o), e.date = e.date || new Date, null !== e.compression && (e.compression = e.compression.toUpperCase()), e
            }, E = function (e, t, n) {
                var i, a = r.getTypeOf(t);
                if (n = _(n), "string" == typeof n.unixPermissions && (n.unixPermissions = parseInt(n.unixPermissions, 8)), n.unixPermissions && 16384 & n.unixPermissions && (n.dir = !0), n.dosPermissions && 16 & n.dosPermissions && (n.dir = !0), n.dir && (e = S(e)), n.createFolders && (i = C(e)) && T.call(this, i, !0), n.dir || null === t || "undefined" == typeof t) n.base64 = !1, n.binary = !1, t = null, a = null; else if ("string" === a) n.binary && !n.base64 && n.optimizedBinaryString !== !0 && (t = r.string2binary(t)); else {
                    if (n.base64 = !1, n.binary = !0, !(a || t instanceof d)) throw new Error("The data of '" + e + "' is in an unsupported format !");
                    "arraybuffer" === a && (t = r.transformTo("uint8array", t))
                }
                var o = new g(e, t, n);
                return this.files[e] = o, o
            }, C = function (e) {
                "/" == e.slice(-1) && (e = e.substring(0, e.length - 1));
                var t = e.lastIndexOf("/");
                return t > 0 ? e.substring(0, t) : ""
            }, S = function (e) {
                return "/" != e.slice(-1) && (e += "/"), e
            }, T = function (e, t) {
                return t = "undefined" != typeof t ? t : !1, e = S(e), this.files[e] || E.call(this, e, null, {
                    dir: !0,
                    createFolders: t
                }), this.files[e]
            }, w = function (e, t, n) {
                var a, o = new d;
                return e._data instanceof d ? (o.uncompressedSize = e._data.uncompressedSize, o.crc32 = e._data.crc32, 0 === o.uncompressedSize || e.dir ? (t = c.STORE, o.compressedContent = "", o.crc32 = 0) : e._data.compressionMethod === t.magic ? o.compressedContent = e._data.getCompressedContent() : (a = e._data.getContent(), o.compressedContent = t.compress(r.transformTo(t.compressInputType, a), n))) : (a = m(e), (!a || 0 === a.length || e.dir) && (t = c.STORE, a = ""), o.uncompressedSize = a.length, o.crc32 = i(a), o.compressedContent = t.compress(r.transformTo(t.compressInputType, a), n)), o.compressedSize = o.compressedContent.length, o.compressionMethod = t.magic, o
            }, D = function (e, t) {
                var n = e;
                return e || (n = t ? 16893 : 33204), (65535 & n) << 16
            }, A = function (e) {
                return 63 & (e || 0)
            }, x = function (e, t, n, o, s) {
                var c, d, l, f, h = (n.compressedContent, r.transformTo("string", u.utf8encode(t.name))),
                    p = t.comment || "", m = r.transformTo("string", u.utf8encode(p)), v = h.length !== t.name.length,
                    g = m.length !== p.length, y = t.options, _ = "", E = "", C = "";
                l = t._initialMetadata.dir !== t.dir ? t.dir : y.dir, f = t._initialMetadata.date !== t.date ? t.date : y.date;
                var S = 0, T = 0;
                l && (S |= 16), "UNIX" === s ? (T = 798, S |= D(t.unixPermissions, l)) : (T = 20, S |= A(t.dosPermissions, l)), c = f.getHours(), c <<= 6, c |= f.getMinutes(), c <<= 5, c |= f.getSeconds() / 2, d = f.getFullYear() - 1980, d <<= 4, d |= f.getMonth() + 1, d <<= 5, d |= f.getDate(), v && (E = b(1, 1) + b(i(h), 4) + h, _ += "up" + b(E.length, 2) + E), g && (C = b(1, 1) + b(this.crc32(m), 4) + m, _ += "uc" + b(C.length, 2) + C);
                var w = "";
                w += "\n\x00", w += v || g ? "\x00\b" : "\x00\x00", w += n.compressionMethod, w += b(c, 2), w += b(d, 2), w += b(n.crc32, 4), w += b(n.compressedSize, 4), w += b(n.uncompressedSize, 4), w += b(h.length, 2), w += b(_.length, 2);
                var x = a.LOCAL_FILE_HEADER + w + h + _,
                    I = a.CENTRAL_FILE_HEADER + b(T, 2) + w + b(m.length, 2) + "\x00\x00\x00\x00" + b(S, 4) + b(o, 4) + h + _ + m;
                return {fileRecord: x, dirRecord: I, compressedObject: n}
            }, I = {
                load: function () {
                    throw new Error("Load method is not defined. Is the file jszip-load.js included ?")
                }, filter: function (e) {
                    var t, n, r, i, a = [];
                    for (t in this.files) this.files.hasOwnProperty(t) && (r = this.files[t], i = new g(r.name, r._data, y(r.options)), n = t.slice(this.root.length, t.length), t.slice(0, this.root.length) === this.root && e(n, i) && a.push(i));
                    return a
                }, file: function (e, t, n) {
                    if (1 === arguments.length) {
                        if (r.isRegExp(e)) {
                            var i = e;
                            return this.filter(function (e, t) {
                                return !t.dir && i.test(e)
                            })
                        }
                        return this.filter(function (t, n) {
                            return !n.dir && t === e
                        })[0] || null
                    }
                    return e = this.root + e, E.call(this, e, t, n), this
                }, folder: function (e) {
                    if (!e) return this;
                    if (r.isRegExp(e)) return this.filter(function (t, n) {
                        return n.dir && e.test(t)
                    });
                    var t = this.root + e, n = T.call(this, t), i = this.clone();
                    return i.root = n.name, i
                }, remove: function (e) {
                    e = this.root + e;
                    var t = this.files[e];
                    if (t || ("/" != e.slice(-1) && (e += "/"), t = this.files[e]), t && !t.dir) delete this.files[e]; else for (var n = this.filter(function (t, n) {
                        return n.name.slice(0, e.length) === e
                    }), r = 0; r < n.length; r++) delete this.files[n[r].name];
                    return this
                }, generate: function (e) {
                    e = y(e || {}, {
                        base64: !0,
                        compression: "STORE",
                        compressionOptions: null,
                        type: "base64",
                        platform: "DOS",
                        comment: null,
                        mimeType: "application/zip"
                    }), r.checkSupport(e.type), ("darwin" === e.platform || "freebsd" === e.platform || "linux" === e.platform || "sunos" === e.platform) && (e.platform = "UNIX"), "win32" === e.platform && (e.platform = "DOS");
                    var t, n, i = [], o = 0, d = 0,
                        l = r.transformTo("string", this.utf8encode(e.comment || this.comment || ""));
                    for (var u in this.files) if (this.files.hasOwnProperty(u)) {
                        var p = this.files[u], m = p.options.compression || e.compression.toUpperCase(), v = c[m];
                        if (!v) throw new Error(m + " is not a valid compression method !");
                        var g = p.options.compressionOptions || e.compressionOptions || {}, _ = w.call(this, p, v, g),
                            E = x.call(this, u, p, _, o, e.platform);
                        o += E.fileRecord.length + _.compressedSize, d += E.dirRecord.length, i.push(E)
                    }
                    var C = "";
                    C = a.CENTRAL_DIRECTORY_END + "\x00\x00\x00\x00" + b(i.length, 2) + b(i.length, 2) + b(d, 4) + b(o, 4) + b(l.length, 2) + l;
                    var S = e.type.toLowerCase();
                    for (t = "uint8array" === S || "arraybuffer" === S || "blob" === S || "nodebuffer" === S ? new h(o + d + C.length) : new f(o + d + C.length), n = 0; n < i.length; n++) t.append(i[n].fileRecord), t.append(i[n].compressedObject.compressedContent);
                    for (n = 0; n < i.length; n++) t.append(i[n].dirRecord);
                    t.append(C);
                    var T = t.finalize();
                    switch (e.type.toLowerCase()) {
                        case"uint8array":
                        case"arraybuffer":
                        case"nodebuffer":
                            return r.transformTo(e.type.toLowerCase(), T);
                        case"blob":
                            return r.arrayBuffer2Blob(r.transformTo("arraybuffer", T), e.mimeType);
                        case"base64":
                            return e.base64 ? s.encode(T) : T;
                        default:
                            return T
                    }
                }, crc32: function (e, t) {
                    return i(e, t)
                }, utf8encode: function (e) {
                    return r.transformTo("string", u.utf8encode(e))
                }, utf8decode: function (e) {
                    return u.utf8decode(e)
                }
            };
            t.exports = I
        }, {
            "./base64": 1,
            "./compressedObject": 2,
            "./compressions": 3,
            "./crc32": 4,
            "./defaults": 6,
            "./nodeBuffer": 11,
            "./signature": 14,
            "./stringWriter": 16,
            "./support": 17,
            "./uint8ArrayWriter": 19,
            "./utf8": 20,
            "./utils": 21
        }],
        14: [function (e, t, n) {
            n.LOCAL_FILE_HEADER = "PK", n.CENTRAL_FILE_HEADER = "PK", n.CENTRAL_DIRECTORY_END = "PK", n.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK", n.ZIP64_CENTRAL_DIRECTORY_END = "PK", n.DATA_DESCRIPTOR = "PK\b"
        }, {}],
        15: [function (e, t) {
            function c(e, t) {
                this.data = e, t || (this.data = r.string2binary(this.data)), this.length = this.data.length, this.index = 0
            }

            var n = e("./dataReader"), r = e("./utils");
            c.prototype = new n, c.prototype.byteAt = function (e) {
                return this.data.charCodeAt(e)
            }, c.prototype.lastIndexOfSignature = function (e) {
                return this.data.lastIndexOf(e)
            }, c.prototype.readData = function (e) {
                this.checkOffset(e);
                var t = this.data.slice(this.index, this.index + e);
                return this.index += e, t
            }, t.exports = c
        }, {"./dataReader": 5, "./utils": 21}],
        16: [function (e, t) {
            var n = e("./utils"), r = function () {
                this.data = []
            };
            r.prototype = {
                append: function (e) {
                    e = n.transformTo("string", e), this.data.push(e)
                }, finalize: function () {
                    return this.data.join("")
                }
            }, t.exports = r
        }, {"./utils": 21}],
        17: [function (e, t, n) {
            (function (e) {
                if (n.base64 = !0, n.array = !0, n.string = !0, n.arraybuffer = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array, n.nodebuffer = "undefined" != typeof e, n.uint8array = "undefined" != typeof Uint8Array, "undefined" == typeof ArrayBuffer) n.blob = !1; else {
                    var t = new ArrayBuffer(0);
                    try {
                        n.blob = 0 === new Blob([t], {type: "application/zip"}).size
                    } catch (r) {
                        try {
                            var i = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,
                                a = new i;
                            a.append(t), n.blob = 0 === a.getBlob("application/zip").size
                        } catch (r) {
                            n.blob = !1
                        }
                    }
                }
            }).call(this, "undefined" != typeof Buffer ? Buffer : void 0)
        }, {}],
        18: [function (e, t) {
            function c(e) {
                e && (this.data = e, this.length = this.data.length, this.index = 0)
            }

            var n = e("./dataReader");
            c.prototype = new n, c.prototype.byteAt = function (e) {
                return this.data[e]
            }, c.prototype.lastIndexOfSignature = function (e) {
                for (var t = e.charCodeAt(0), n = e.charCodeAt(1), r = e.charCodeAt(2), i = e.charCodeAt(3), a = this.length - 4; a >= 0; --a) if (this.data[a] === t && this.data[a + 1] === n && this.data[a + 2] === r && this.data[a + 3] === i) return a;
                return -1
            }, c.prototype.readData = function (e) {
                if (this.checkOffset(e), 0 === e) return new Uint8Array(0);
                var t = this.data.subarray(this.index, this.index + e);
                return this.index += e, t
            }, t.exports = c
        }, {"./dataReader": 5}],
        19: [function (e, t) {
            var n = e("./utils"), r = function (e) {
                this.data = new Uint8Array(e), this.index = 0
            };
            r.prototype = {
                append: function (e) {
                    0 !== e.length && (e = n.transformTo("uint8array", e), this.data.set(e, this.index), this.index += e.length)
                }, finalize: function () {
                    return this.data
                }
            }, t.exports = r
        }, {"./utils": 21}],
        20: [function (e, t, n) {
            for (var r = e("./utils"), i = e("./support"), a = e("./nodeBuffer"), o = new Array(256), s = 0; 256 > s; s++) o[s] = s >= 252 ? 6 : s >= 248 ? 5 : s >= 240 ? 4 : s >= 224 ? 3 : s >= 192 ? 2 : 1;
            o[254] = o[254] = 1;
            var c = function (e) {
                var t, n, r, a, o, s = e.length, c = 0;
                for (a = 0; s > a; a++) n = e.charCodeAt(a), 55296 === (64512 & n) && s > a + 1 && (r = e.charCodeAt(a + 1), 56320 === (64512 & r) && (n = 65536 + (n - 55296 << 10) + (r - 56320), a++)), c += 128 > n ? 1 : 2048 > n ? 2 : 65536 > n ? 3 : 4;
                for (t = i.uint8array ? new Uint8Array(c) : new Array(c), o = 0, a = 0; c > o; a++) n = e.charCodeAt(a), 55296 === (64512 & n) && s > a + 1 && (r = e.charCodeAt(a + 1), 56320 === (64512 & r) && (n = 65536 + (n - 55296 << 10) + (r - 56320), a++)), 128 > n ? t[o++] = n : 2048 > n ? (t[o++] = 192 | n >>> 6, t[o++] = 128 | 63 & n) : 65536 > n ? (t[o++] = 224 | n >>> 12, t[o++] = 128 | n >>> 6 & 63, t[o++] = 128 | 63 & n) : (t[o++] = 240 | n >>> 18, t[o++] = 128 | n >>> 12 & 63, t[o++] = 128 | n >>> 6 & 63, t[o++] = 128 | 63 & n);
                return t
            }, d = function (e, t) {
                var n;
                for (t = t || e.length, t > e.length && (t = e.length), n = t - 1; n >= 0 && 128 === (192 & e[n]);) n--;
                return 0 > n ? t : 0 === n ? t : n + o[e[n]] > t ? n : t
            }, l = function (e) {
                var t, n, i, a, s = e.length, c = new Array(2 * s);
                for (n = 0, t = 0; s > t;) if (i = e[t++], 128 > i) c[n++] = i; else if (a = o[i], a > 4) c[n++] = 65533, t += a - 1; else {
                    for (i &= 2 === a ? 31 : 3 === a ? 15 : 7; a > 1 && s > t;) i = i << 6 | 63 & e[t++], a--;
                    a > 1 ? c[n++] = 65533 : 65536 > i ? c[n++] = i : (i -= 65536, c[n++] = 55296 | i >> 10 & 1023, c[n++] = 56320 | 1023 & i)
                }
                return c.length !== n && (c.subarray ? c = c.subarray(0, n) : c.length = n), r.applyFromCharCode(c)
            };
            n.utf8encode = function (e) {
                return i.nodebuffer ? a(e, "utf-8") : c(e)
            }, n.utf8decode = function (e) {
                if (i.nodebuffer) return r.transformTo("nodebuffer", e).toString("utf-8");
                e = r.transformTo(i.uint8array ? "uint8array" : "array", e);
                for (var t = [], n = 0, a = e.length, o = 65536; a > n;) {
                    var s = d(e, Math.min(n + o, a));
                    t.push(l(i.uint8array ? e.subarray(n, s) : e.slice(n, s))), n = s
                }
                return t.join("")
            }
        }, {"./nodeBuffer": 11, "./support": 17, "./utils": 21}],
        21: [function (t, n, r) {
            function d(e) {
                return e
            }

            function e(e, t) {
                for (var n = 0; n < e.length; ++n) t[n] = 255 & e.charCodeAt(n);
                return t
            }

            function f(e) {
                var t = 65536, n = [], i = e.length, a = r.getTypeOf(e), s = 0, c = !0;
                try {
                    switch (a) {
                        case"uint8array":
                            String.fromCharCode.apply(null, new Uint8Array(0));
                            break;
                        case"nodebuffer":
                            String.fromCharCode.apply(null, o(0))
                    }
                } catch (d) {
                    c = !1
                }
                if (!c) {
                    for (var l = "", u = 0; u < e.length; u++) l += String.fromCharCode(e[u]);
                    return l
                }
                for (; i > s && t > 1;) try {
                    n.push("array" === a || "nodebuffer" === a ? String.fromCharCode.apply(null, e.slice(s, Math.min(s + t, i))) : String.fromCharCode.apply(null, e.subarray(s, Math.min(s + t, i)))), s += t
                } catch (d) {
                    t = Math.floor(t / 2)
                }
                return n.join("")
            }

            function g(e, t) {
                for (var n = 0; n < e.length; n++) t[n] = e[n];
                return t
            }

            var i = t("./support"), a = t("./compressions"), o = t("./nodeBuffer");
            r.string2binary = function (e) {
                for (var t = "", n = 0; n < e.length; n++) t += String.fromCharCode(255 & e.charCodeAt(n));
                return t
            }, r.arrayBuffer2Blob = function (e, t) {
                r.checkSupport("blob"), t = t || "application/zip";
                try {
                    return new Blob([e], {type: t})
                } catch (n) {
                    try {
                        var i = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,
                            a = new i;
                        return a.append(e), a.getBlob(t)
                    } catch (n) {
                        throw new Error("Bug : can't construct the Blob.")
                    }
                }
            }, r.applyFromCharCode = f;
            var s = {};
            s.string = {
                string: d, array: function (t) {
                    return e(t, new Array(t.length))
                }, arraybuffer: function (e) {
                    return s.string.uint8array(e).buffer
                }, uint8array: function (t) {
                    return e(t, new Uint8Array(t.length))
                }, nodebuffer: function (t) {
                    return e(t, o(t.length))
                }
            }, s.array = {
                string: f, array: d, arraybuffer: function (e) {
                    return new Uint8Array(e).buffer
                }, uint8array: function (e) {
                    return new Uint8Array(e)
                }, nodebuffer: function (e) {
                    return o(e)
                }
            }, s.arraybuffer = {
                string: function (e) {
                    return f(new Uint8Array(e))
                }, array: function (e) {
                    return g(new Uint8Array(e), new Array(e.byteLength))
                }, arraybuffer: d, uint8array: function (e) {
                    return new Uint8Array(e)
                }, nodebuffer: function (e) {
                    return o(new Uint8Array(e))
                }
            }, s.uint8array = {
                string: f, array: function (e) {
                    return g(e, new Array(e.length))
                }, arraybuffer: function (e) {
                    return e.buffer
                }, uint8array: d, nodebuffer: function (e) {
                    return o(e)
                }
            }, s.nodebuffer = {
                string: f, array: function (e) {
                    return g(e, new Array(e.length))
                }, arraybuffer: function (e) {
                    return s.nodebuffer.uint8array(e).buffer
                }, uint8array: function (e) {
                    return g(e, new Uint8Array(e.length))
                }, nodebuffer: d
            }, r.transformTo = function (e, t) {
                if (t || (t = ""), !e) return t;
                r.checkSupport(e);
                var n = r.getTypeOf(t), i = s[n][e](t);
                return i
            }, r.getTypeOf = function (e) {
                return "string" == typeof e ? "string" : "[object Array]" === Object.prototype.toString.call(e) ? "array" : i.nodebuffer && o.test(e) ? "nodebuffer" : i.uint8array && e instanceof Uint8Array ? "uint8array" : i.arraybuffer && e instanceof ArrayBuffer ? "arraybuffer" : void 0
            }, r.checkSupport = function (e) {
                var t = i[e.toLowerCase()];
                if (!t) throw new Error(e + " is not supported by this browser")
            }, r.MAX_VALUE_16BITS = 65535,
                r.MAX_VALUE_32BITS = -1, r.pretty = function (e) {
                var t, n, r = "";
                for (n = 0; n < (e || "").length; n++) t = e.charCodeAt(n), r += "\\x" + (16 > t ? "0" : "") + t.toString(16).toUpperCase();
                return r
            }, r.findCompression = function (e) {
                for (var t in a) if (a.hasOwnProperty(t) && a[t].magic === e) return a[t];
                return null
            }, r.isRegExp = function (e) {
                return "[object RegExp]" === Object.prototype.toString.call(e)
            }
        }, {"./compressions": 3, "./nodeBuffer": 11, "./support": 17}],
        22: [function (e, t) {
            function c(e, t) {
                this.files = [], this.loadOptions = t, e && this.load(e)
            }

            var n = e("./stringReader"), r = e("./nodeBufferReader"), i = e("./uint8ArrayReader"), a = e("./utils"),
                o = e("./signature"), s = e("./zipEntry"), d = e("./support"), l = e("./object");
            c.prototype = {
                checkSignature: function (e) {
                    var t = this.reader.readString(4);
                    if (t !== e) throw new Error("Corrupted zip or bug : unexpected signature (" + a.pretty(t) + ", expected " + a.pretty(e) + ")")
                }, readBlockEndOfCentral: function () {
                    this.diskNumber = this.reader.readInt(2), this.diskWithCentralDirStart = this.reader.readInt(2), this.centralDirRecordsOnThisDisk = this.reader.readInt(2), this.centralDirRecords = this.reader.readInt(2), this.centralDirSize = this.reader.readInt(4), this.centralDirOffset = this.reader.readInt(4), this.zipCommentLength = this.reader.readInt(2), this.zipComment = this.reader.readString(this.zipCommentLength), this.zipComment = l.utf8decode(this.zipComment)
                }, readBlockZip64EndOfCentral: function () {
                    this.zip64EndOfCentralSize = this.reader.readInt(8), this.versionMadeBy = this.reader.readString(2), this.versionNeeded = this.reader.readInt(2), this.diskNumber = this.reader.readInt(4), this.diskWithCentralDirStart = this.reader.readInt(4), this.centralDirRecordsOnThisDisk = this.reader.readInt(8), this.centralDirRecords = this.reader.readInt(8), this.centralDirSize = this.reader.readInt(8), this.centralDirOffset = this.reader.readInt(8), this.zip64ExtensibleData = {};
                    for (var e, t, n, r = this.zip64EndOfCentralSize - 44, i = 0; r > i;) e = this.reader.readInt(2), t = this.reader.readInt(4), n = this.reader.readString(t), this.zip64ExtensibleData[e] = {
                        id: e,
                        length: t,
                        value: n
                    }
                }, readBlockZip64EndOfCentralLocator: function () {
                    if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), this.disksCount > 1) throw new Error("Multi-volumes zip are not supported")
                }, readLocalFiles: function () {
                    var e, t;
                    for (e = 0; e < this.files.length; e++) t = this.files[e], this.reader.setIndex(t.localHeaderOffset), this.checkSignature(o.LOCAL_FILE_HEADER), t.readLocalPart(this.reader), t.handleUTF8(), t.processAttributes()
                }, readCentralDir: function () {
                    var e;
                    for (this.reader.setIndex(this.centralDirOffset); this.reader.readString(4) === o.CENTRAL_FILE_HEADER;) e = new s({zip64: this.zip64}, this.loadOptions), e.readCentralPart(this.reader), this.files.push(e)
                }, readEndOfCentral: function () {
                    var e = this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);
                    if (-1 === e) {
                        var t = !0;
                        try {
                            this.reader.setIndex(0), this.checkSignature(o.LOCAL_FILE_HEADER), t = !1
                        } catch (n) {
                        }
                        throw new Error(t ? "Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html" : "Corrupted zip : can't find end of central directory")
                    }
                    if (this.reader.setIndex(e), this.checkSignature(o.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === a.MAX_VALUE_16BITS || this.diskWithCentralDirStart === a.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === a.MAX_VALUE_16BITS || this.centralDirRecords === a.MAX_VALUE_16BITS || this.centralDirSize === a.MAX_VALUE_32BITS || this.centralDirOffset === a.MAX_VALUE_32BITS) {
                        if (this.zip64 = !0, e = this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR), -1 === e) throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");
                        this.reader.setIndex(e), this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR), this.readBlockZip64EndOfCentralLocator(), this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir), this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END), this.readBlockZip64EndOfCentral()
                    }
                }, prepareReader: function (e) {
                    var t = a.getTypeOf(e);
                    this.reader = "string" !== t || d.uint8array ? "nodebuffer" === t ? new r(e) : new i(a.transformTo("uint8array", e)) : new n(e, this.loadOptions.optimizedBinaryString)
                }, load: function (e) {
                    this.prepareReader(e), this.readEndOfCentral(), this.readCentralDir(), this.readLocalFiles()
                }
            }, t.exports = c
        }, {
            "./nodeBufferReader": 12,
            "./object": 13,
            "./signature": 14,
            "./stringReader": 15,
            "./support": 17,
            "./uint8ArrayReader": 18,
            "./utils": 21,
            "./zipEntry": 23
        }],
        23: [function (e, t) {
            function c(e, t) {
                this.options = e, this.loadOptions = t
            }

            var n = e("./stringReader"), r = e("./utils"), i = e("./compressedObject"), a = e("./object"), o = 0, s = 3;
            c.prototype = {
                isEncrypted: function () {
                    return 1 === (1 & this.bitFlag)
                }, useUTF8: function () {
                    return 2048 === (2048 & this.bitFlag)
                }, prepareCompressedContent: function (e, t, n) {
                    return function () {
                        var r = e.index;
                        e.setIndex(t);
                        var i = e.readData(n);
                        return e.setIndex(r), i
                    }
                }, prepareContent: function (e, t, n, i, a) {
                    return function () {
                        var e = r.transformTo(i.uncompressInputType, this.getCompressedContent()), t = i.uncompress(e);
                        if (t.length !== a) throw new Error("Bug : uncompressed data size mismatch");
                        return t
                    }
                }, readLocalPart: function (e) {
                    var t, n;
                    if (e.skip(22), this.fileNameLength = e.readInt(2), n = e.readInt(2), this.fileName = e.readString(this.fileNameLength), e.skip(n), -1 == this.compressedSize || -1 == this.uncompressedSize) throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");
                    if (t = r.findCompression(this.compressionMethod), null === t) throw new Error("Corrupted zip : compression " + r.pretty(this.compressionMethod) + " unknown (inner file : " + this.fileName + ")");
                    if (this.decompressed = new i, this.decompressed.compressedSize = this.compressedSize, this.decompressed.uncompressedSize = this.uncompressedSize, this.decompressed.crc32 = this.crc32, this.decompressed.compressionMethod = this.compressionMethod, this.decompressed.getCompressedContent = this.prepareCompressedContent(e, e.index, this.compressedSize, t), this.decompressed.getContent = this.prepareContent(e, e.index, this.compressedSize, t, this.uncompressedSize), this.loadOptions.checkCRC32 && (this.decompressed = r.transformTo("string", this.decompressed.getContent()), a.crc32(this.decompressed) !== this.crc32)) throw new Error("Corrupted zip : CRC32 mismatch")
                }, readCentralPart: function (e) {
                    if (this.versionMadeBy = e.readInt(2), this.versionNeeded = e.readInt(2), this.bitFlag = e.readInt(2), this.compressionMethod = e.readString(2), this.date = e.readDate(), this.crc32 = e.readInt(4), this.compressedSize = e.readInt(4), this.uncompressedSize = e.readInt(4), this.fileNameLength = e.readInt(2), this.extraFieldsLength = e.readInt(2), this.fileCommentLength = e.readInt(2), this.diskNumberStart = e.readInt(2), this.internalFileAttributes = e.readInt(2), this.externalFileAttributes = e.readInt(4), this.localHeaderOffset = e.readInt(4), this.isEncrypted()) throw new Error("Encrypted zip are not supported");
                    this.fileName = e.readString(this.fileNameLength), this.readExtraFields(e), this.parseZIP64ExtraField(e), this.fileComment = e.readString(this.fileCommentLength)
                }, processAttributes: function () {
                    this.unixPermissions = null, this.dosPermissions = null;
                    var e = this.versionMadeBy >> 8;
                    this.dir = !!(16 & this.externalFileAttributes), e === o && (this.dosPermissions = 63 & this.externalFileAttributes), e === s && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535), this.dir || "/" !== this.fileName.slice(-1) || (this.dir = !0)
                }, parseZIP64ExtraField: function () {
                    if (this.extraFields[1]) {
                        var e = new n(this.extraFields[1].value);
                        this.uncompressedSize === r.MAX_VALUE_32BITS && (this.uncompressedSize = e.readInt(8)), this.compressedSize === r.MAX_VALUE_32BITS && (this.compressedSize = e.readInt(8)), this.localHeaderOffset === r.MAX_VALUE_32BITS && (this.localHeaderOffset = e.readInt(8)), this.diskNumberStart === r.MAX_VALUE_32BITS && (this.diskNumberStart = e.readInt(4))
                    }
                }, readExtraFields: function (e) {
                    var t, n, r, i = e.index;
                    for (this.extraFields = this.extraFields || {}; e.index < i + this.extraFieldsLength;) t = e.readInt(2), n = e.readInt(2), r = e.readString(n), this.extraFields[t] = {
                        id: t,
                        length: n,
                        value: r
                    }
                }, handleUTF8: function () {
                    if (this.useUTF8()) this.fileName = a.utf8decode(this.fileName), this.fileComment = a.utf8decode(this.fileComment); else {
                        var e = this.findExtraFieldUnicodePath();
                        null !== e && (this.fileName = e);
                        var t = this.findExtraFieldUnicodeComment();
                        null !== t && (this.fileComment = t)
                    }
                }, findExtraFieldUnicodePath: function () {
                    var e = this.extraFields[28789];
                    if (e) {
                        var t = new n(e.value);
                        return 1 !== t.readInt(1) ? null : a.crc32(this.fileName) !== t.readInt(4) ? null : a.utf8decode(t.readString(e.length - 5))
                    }
                    return null
                }, findExtraFieldUnicodeComment: function () {
                    var e = this.extraFields[25461];
                    if (e) {
                        var t = new n(e.value);
                        return 1 !== t.readInt(1) ? null : a.crc32(this.fileComment) !== t.readInt(4) ? null : a.utf8decode(t.readString(e.length - 5))
                    }
                    return null
                }
            }, t.exports = c
        }, {"./compressedObject": 2, "./object": 13, "./stringReader": 15, "./utils": 21}],
        24: [function (e, t) {
            var n = e("./lib/utils/common").assign, r = e("./lib/deflate"), i = e("./lib/inflate"),
                a = e("./lib/zlib/constants"), o = {};
            n(o, r, i, a), t.exports = o
        }, {"./lib/deflate": 25, "./lib/inflate": 26, "./lib/utils/common": 27, "./lib/zlib/constants": 30}],
        25: [function (t, n, r) {
            function d(e, t) {
                var n = new b(t);
                if (n.push(e, !0), n.err) throw n.msg;
                return n.result
            }

            function e(e, t) {
                return t = t || {}, t.raw = !0, d(e, t)
            }

            function f(e, t) {
                return t = t || {}, t.gzip = !0, d(e, t)
            }

            var i = t("./zlib/deflate.js"), a = t("./utils/common"), o = t("./utils/strings"), s = t("./zlib/messages"),
                c = t("./zlib/zstream"), l = 0, u = 4, h = 0, p = 1, m = -1, v = 0, g = 8, b = function (e) {
                    this.options = a.assign({
                        level: m,
                        method: g,
                        chunkSize: 16384,
                        windowBits: 15,
                        memLevel: 8,
                        strategy: v,
                        to: ""
                    }, e || {});
                    var t = this.options;
                    t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new c, this.strm.avail_out = 0;
                    var n = i.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy);
                    if (n !== h) throw new Error(s[n]);
                    t.header && i.deflateSetHeader(this.strm, t.header)
                };
            b.prototype.push = function (e, t) {
                var n, r, s = this.strm, c = this.options.chunkSize;
                if (this.ended) return !1;
                r = t === ~~t ? t : t === !0 ? u : l, s.input = "string" == typeof e ? o.string2buf(e) : e, s.next_in = 0, s.avail_in = s.input.length;
                do {
                    if (0 === s.avail_out && (s.output = new a.Buf8(c), s.next_out = 0, s.avail_out = c), n = i.deflate(s, r), n !== p && n !== h) return this.onEnd(n), this.ended = !0, !1;
                    (0 === s.avail_out || 0 === s.avail_in && r === u) && this.onData("string" === this.options.to ? o.buf2binstring(a.shrinkBuf(s.output, s.next_out)) : a.shrinkBuf(s.output, s.next_out))
                } while ((s.avail_in > 0 || 0 === s.avail_out) && n !== p);
                return r === u ? (n = i.deflateEnd(this.strm), this.onEnd(n), this.ended = !0, n === h) : !0
            }, b.prototype.onData = function (e) {
                this.chunks.push(e)
            }, b.prototype.onEnd = function (e) {
                e === h && (this.result = "string" === this.options.to ? this.chunks.join("") : a.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg
            }, r.Deflate = b, r.deflate = d, r.deflateRaw = e, r.gzip = f
        }, {
            "./utils/common": 27,
            "./utils/strings": 28,
            "./zlib/deflate.js": 32,
            "./zlib/messages": 37,
            "./zlib/zstream": 39
        }],
        26: [function (t, n, r) {
            function d(e, t) {
                var n = new f(t);
                if (n.push(e, !0), n.err) throw n.msg;
                return n.result
            }

            function e(e, t) {
                return t = t || {}, t.raw = !0, d(e, t)
            }

            var i = t("./zlib/inflate.js"), a = t("./utils/common"), o = t("./utils/strings"),
                s = t("./zlib/constants"), c = t("./zlib/messages"), l = t("./zlib/zstream"), u = t("./zlib/gzheader"),
                f = function (e) {
                    this.options = a.assign({chunkSize: 16384, windowBits: 0, to: ""}, e || {});
                    var t = this.options;
                    t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits, 0 === t.windowBits && (t.windowBits = -15)), !(t.windowBits >= 0 && t.windowBits < 16) || e && e.windowBits || (t.windowBits += 32), t.windowBits > 15 && t.windowBits < 48 && 0 === (15 & t.windowBits) && (t.windowBits |= 15), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new l, this.strm.avail_out = 0;
                    var n = i.inflateInit2(this.strm, t.windowBits);
                    if (n !== s.Z_OK) throw new Error(c[n]);
                    this.header = new u, i.inflateGetHeader(this.strm, this.header)
                };
            f.prototype.push = function (e, t) {
                var n, r, c, d, l, u = this.strm, f = this.options.chunkSize;
                if (this.ended) return !1;
                r = t === ~~t ? t : t === !0 ? s.Z_FINISH : s.Z_NO_FLUSH, u.input = "string" == typeof e ? o.binstring2buf(e) : e, u.next_in = 0, u.avail_in = u.input.length;
                do {
                    if (0 === u.avail_out && (u.output = new a.Buf8(f), u.next_out = 0, u.avail_out = f), n = i.inflate(u, s.Z_NO_FLUSH), n !== s.Z_STREAM_END && n !== s.Z_OK) return this.onEnd(n), this.ended = !0, !1;
                    u.next_out && (0 === u.avail_out || n === s.Z_STREAM_END || 0 === u.avail_in && r === s.Z_FINISH) && ("string" === this.options.to ? (c = o.utf8border(u.output, u.next_out), d = u.next_out - c, l = o.buf2string(u.output, c), u.next_out = d, u.avail_out = f - d, d && a.arraySet(u.output, u.output, c, d, 0), this.onData(l)) : this.onData(a.shrinkBuf(u.output, u.next_out)))
                } while (u.avail_in > 0 && n !== s.Z_STREAM_END);
                return n === s.Z_STREAM_END && (r = s.Z_FINISH), r === s.Z_FINISH ? (n = i.inflateEnd(this.strm), this.onEnd(n), this.ended = !0, n === s.Z_OK) : !0
            }, f.prototype.onData = function (e) {
                this.chunks.push(e)
            }, f.prototype.onEnd = function (e) {
                e === s.Z_OK && (this.result = "string" === this.options.to ? this.chunks.join("") : a.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg
            }, r.Inflate = f, r.inflate = d, r.inflateRaw = e, r.ungzip = d
        }, {
            "./utils/common": 27,
            "./utils/strings": 28,
            "./zlib/constants": 30,
            "./zlib/gzheader": 33,
            "./zlib/inflate.js": 35,
            "./zlib/messages": 37,
            "./zlib/zstream": 39
        }],
        27: [function (e, t, n) {
            var r = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;
            n.assign = function (e) {
                for (var t = Array.prototype.slice.call(arguments, 1); t.length;) {
                    var n = t.shift();
                    if (n) {
                        if ("object" != typeof n) throw new TypeError(n + "must be non-object");
                        for (var r in n) n.hasOwnProperty(r) && (e[r] = n[r])
                    }
                }
                return e
            }, n.shrinkBuf = function (e, t) {
                return e.length === t ? e : e.subarray ? e.subarray(0, t) : (e.length = t, e)
            };
            var i = {
                arraySet: function (e, t, n, r, i) {
                    if (t.subarray && e.subarray) return void e.set(t.subarray(n, n + r), i);
                    for (var a = 0; r > a; a++) e[i + a] = t[n + a]
                }, flattenChunks: function (e) {
                    var t, n, r, i, a, o;
                    for (r = 0, t = 0, n = e.length; n > t; t++) r += e[t].length;
                    for (o = new Uint8Array(r), i = 0, t = 0, n = e.length; n > t; t++) a = e[t], o.set(a, i), i += a.length;
                    return o
                }
            }, a = {
                arraySet: function (e, t, n, r, i) {
                    for (var a = 0; r > a; a++) e[i + a] = t[n + a]
                }, flattenChunks: function (e) {
                    return [].concat.apply([], e)
                }
            };
            n.setTyped = function (e) {
                e ? (n.Buf8 = Uint8Array, n.Buf16 = Uint16Array, n.Buf32 = Int32Array, n.assign(n, i)) : (n.Buf8 = Array, n.Buf16 = Array, n.Buf32 = Array, n.assign(n, a))
            }, n.setTyped(r)
        }, {}],
        28: [function (e, t, n) {
            function d(e, t) {
                if (65537 > t && (e.subarray && a || !e.subarray && i)) return String.fromCharCode.apply(null, r.shrinkBuf(e, t));
                for (var n = "", o = 0; t > o; o++) n += String.fromCharCode(e[o]);
                return n
            }

            var r = e("./common"), i = !0, a = !0;
            try {
                String.fromCharCode.apply(null, [0])
            } catch (o) {
                i = !1
            }
            try {
                String.fromCharCode.apply(null, new Uint8Array(1))
            } catch (o) {
                a = !1
            }
            for (var s = new r.Buf8(256), c = 0; 256 > c; c++) s[c] = c >= 252 ? 6 : c >= 248 ? 5 : c >= 240 ? 4 : c >= 224 ? 3 : c >= 192 ? 2 : 1;
            s[254] = s[254] = 1, n.string2buf = function (e) {
                var t, n, i, a, o, s = e.length, c = 0;
                for (a = 0; s > a; a++) n = e.charCodeAt(a), 55296 === (64512 & n) && s > a + 1 && (i = e.charCodeAt(a + 1), 56320 === (64512 & i) && (n = 65536 + (n - 55296 << 10) + (i - 56320), a++)), c += 128 > n ? 1 : 2048 > n ? 2 : 65536 > n ? 3 : 4;
                for (t = new r.Buf8(c), o = 0, a = 0; c > o; a++) n = e.charCodeAt(a), 55296 === (64512 & n) && s > a + 1 && (i = e.charCodeAt(a + 1), 56320 === (64512 & i) && (n = 65536 + (n - 55296 << 10) + (i - 56320), a++)), 128 > n ? t[o++] = n : 2048 > n ? (t[o++] = 192 | n >>> 6, t[o++] = 128 | 63 & n) : 65536 > n ? (t[o++] = 224 | n >>> 12, t[o++] = 128 | n >>> 6 & 63, t[o++] = 128 | 63 & n) : (t[o++] = 240 | n >>> 18, t[o++] = 128 | n >>> 12 & 63, t[o++] = 128 | n >>> 6 & 63, t[o++] = 128 | 63 & n);
                return t
            }, n.buf2binstring = function (e) {
                return d(e, e.length)
            }, n.binstring2buf = function (e) {
                for (var t = new r.Buf8(e.length), n = 0, i = t.length; i > n; n++) t[n] = e.charCodeAt(n);
                return t
            }, n.buf2string = function (e, t) {
                var n, r, i, a, o = t || e.length, c = new Array(2 * o);
                for (r = 0, n = 0; o > n;) if (i = e[n++], 128 > i) c[r++] = i; else if (a = s[i], a > 4) c[r++] = 65533, n += a - 1; else {
                    for (i &= 2 === a ? 31 : 3 === a ? 15 : 7; a > 1 && o > n;) i = i << 6 | 63 & e[n++], a--;
                    a > 1 ? c[r++] = 65533 : 65536 > i ? c[r++] = i : (i -= 65536, c[r++] = 55296 | i >> 10 & 1023, c[r++] = 56320 | 1023 & i)
                }
                return d(c, r)
            }, n.utf8border = function (e, t) {
                var n;
                for (t = t || e.length, t > e.length && (t = e.length), n = t - 1; n >= 0 && 128 === (192 & e[n]);) n--;
                return 0 > n ? t : 0 === n ? t : n + s[e[n]] > t ? n : t
            }
        }, {"./common": 27}],
        29: [function (e, t) {
            function c(e, t, n, r) {
                for (var i = 65535 & e | 0, a = e >>> 16 & 65535 | 0, o = 0; 0 !== n;) {
                    o = n > 2e3 ? 2e3 : n, n -= o;
                    do i = i + t[r++] | 0, a = a + i | 0; while (--o);
                    i %= 65521, a %= 65521
                }
                return i | a << 16 | 0
            }

            t.exports = c
        }, {}],
        30: [function (e, t) {
            t.exports = {
                Z_NO_FLUSH: 0,
                Z_PARTIAL_FLUSH: 1,
                Z_SYNC_FLUSH: 2,
                Z_FULL_FLUSH: 3,
                Z_FINISH: 4,
                Z_BLOCK: 5,
                Z_TREES: 6,
                Z_OK: 0,
                Z_STREAM_END: 1,
                Z_NEED_DICT: 2,
                Z_ERRNO: -1,
                Z_STREAM_ERROR: -2,
                Z_DATA_ERROR: -3,
                Z_BUF_ERROR: -5,
                Z_NO_COMPRESSION: 0,
                Z_BEST_SPEED: 1,
                Z_BEST_COMPRESSION: 9,
                Z_DEFAULT_COMPRESSION: -1,
                Z_FILTERED: 1,
                Z_HUFFMAN_ONLY: 2,
                Z_RLE: 3,
                Z_FIXED: 4,
                Z_DEFAULT_STRATEGY: 0,
                Z_BINARY: 0,
                Z_TEXT: 1,
                Z_UNKNOWN: 2,
                Z_DEFLATED: 8
            }
        }, {}],
        31: [function (e, t) {
            function c() {
                for (var e, t = [], n = 0; 256 > n; n++) {
                    e = n;
                    for (var r = 0; 8 > r; r++) e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1;
                    t[n] = e
                }
                return t
            }

            function d(e, t, r, i) {
                var a = n, o = i + r;
                e = -1 ^ e;
                for (var s = i; o > s; s++) e = e >>> 8 ^ a[255 & (e ^ t[s])];
                return -1 ^ e
            }

            var n = c();
            t.exports = d
        }, {}],
        32: [function (a, c, b) {
            function d(e, t) {
                return e.msg = D[t], t
            }

            function e(e) {
                return (e << 1) - (e > 4 ? 9 : 0)
            }

            function f(e) {
                for (var t = e.length; --t >= 0;) e[t] = 0
            }

            function g(e) {
                var t = e.state, n = t.pending;
                n > e.avail_out && (n = e.avail_out), 0 !== n && (E.arraySet(e.output, t.pending_buf, t.pending_out, n, e.next_out), e.next_out += n, t.pending_out += n, e.total_out += n, e.avail_out -= n, t.pending -= n, 0 === t.pending && (t.pending_out = 0))
            }

            function h(e, t) {
                C._tr_flush_block(e, e.block_start >= 0 ? e.block_start : -1, e.strstart - e.block_start, t), e.block_start = e.strstart, g(e.strm)
            }

            function i(e, t) {
                e.pending_buf[e.pending++] = t
            }

            function j(e, t) {
                e.pending_buf[e.pending++] = t >>> 8 & 255, e.pending_buf[e.pending++] = 255 & t
            }

            function k(e, t, n, r) {
                var i = e.avail_in;
                return i > r && (i = r), 0 === i ? 0 : (e.avail_in -= i, E.arraySet(t, e.input, e.next_in, i, n), 1 === e.state.wrap ? e.adler = S(e.adler, t, i, n) : 2 === e.state.wrap && (e.adler = T(e.adler, t, i, n)), e.next_in += i, e.total_in += i, i)
            }

            function l(e, t) {
                var n, r, i = e.max_chain_length, a = e.strstart, o = e.prev_length, s = e.nice_match,
                    c = e.strstart > e.w_size - de ? e.strstart - (e.w_size - de) : 0, d = e.window, l = e.w_mask,
                    u = e.prev, f = e.strstart + ce, h = d[a + o - 1], p = d[a + o];
                e.prev_length >= e.good_match && (i >>= 2), s > e.lookahead && (s = e.lookahead);
                do if (n = t, d[n + o] === p && d[n + o - 1] === h && d[n] === d[a] && d[++n] === d[a + 1]) {
                    a += 2, n++;
                    do ; while (d[++a] === d[++n] && d[++a] === d[++n] && d[++a] === d[++n] && d[++a] === d[++n] && d[++a] === d[++n] && d[++a] === d[++n] && d[++a] === d[++n] && d[++a] === d[++n] && f > a);
                    if (r = ce - (f - a), a = f - ce, r > o) {
                        if (e.match_start = t, o = r, r >= s) break;
                        h = d[a + o - 1], p = d[a + o]
                    }
                } while ((t = u[t & l]) > c && 0 !== --i);
                return o <= e.lookahead ? o : e.lookahead
            }

            function m(e) {
                var t, n, r, i, a, o = e.w_size;
                do {
                    if (i = e.window_size - e.lookahead - e.strstart, e.strstart >= o + (o - de)) {
                        E.arraySet(e.window, e.window, o, o, 0), e.match_start -= o, e.strstart -= o, e.block_start -= o, n = e.hash_size, t = n;
                        do r = e.head[--t], e.head[t] = r >= o ? r - o : 0; while (--n);
                        n = o, t = n;
                        do r = e.prev[--t], e.prev[t] = r >= o ? r - o : 0; while (--n);
                        i += o
                    }
                    if (0 === e.strm.avail_in) break;
                    if (n = k(e.strm, e.window, e.strstart + e.lookahead, i), e.lookahead += n, e.lookahead + e.insert >= se) for (a = e.strstart - e.insert, e.ins_h = e.window[a], e.ins_h = (e.ins_h << e.hash_shift ^ e.window[a + 1]) & e.hash_mask; e.insert && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[a + se - 1]) & e.hash_mask, e.prev[a & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = a, a++, e.insert--, !(e.lookahead + e.insert < se));) ;
                } while (e.lookahead < de && 0 !== e.strm.avail_in)
            }

            function n(e, t) {
                var n = 65535;
                for (n > e.pending_buf_size - 5 && (n = e.pending_buf_size - 5); ;) {
                    if (e.lookahead <= 1) {
                        if (m(e), 0 === e.lookahead && t === I) return be;
                        if (0 === e.lookahead) break
                    }
                    e.strstart += e.lookahead, e.lookahead = 0;
                    var r = e.block_start + n;
                    if ((0 === e.strstart || e.strstart >= r) && (e.lookahead = e.strstart - r, e.strstart = r, h(e, !1), 0 === e.strm.avail_out)) return be;
                    if (e.strstart - e.block_start >= e.w_size - de && (h(e, !1), 0 === e.strm.avail_out)) return be
                }
                return e.insert = 0, t === L ? (h(e, !0), 0 === e.strm.avail_out ? _e : Ee) : e.strstart > e.block_start && (h(e, !1), 0 === e.strm.avail_out) ? be : be
            }

            function o(e, t) {
                for (var n, r; ;) {
                    if (e.lookahead < de) {
                        if (m(e), e.lookahead < de && t === I) return be;
                        if (0 === e.lookahead) break
                    }
                    if (n = 0, e.lookahead >= se && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + se - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), 0 !== n && e.strstart - n <= e.w_size - de && (e.match_length = l(e, n)), e.match_length >= se) if (r = C._tr_tally(e, e.strstart - e.match_start, e.match_length - se), e.lookahead -= e.match_length, e.match_length <= e.max_lazy_match && e.lookahead >= se) {
                        e.match_length--;
                        do e.strstart++, e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + se - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart; while (0 !== --e.match_length);
                        e.strstart++
                    } else e.strstart += e.match_length, e.match_length = 0, e.ins_h = e.window[e.strstart], e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 1]) & e.hash_mask; else r = C._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++;
                    if (r && (h(e, !1), 0 === e.strm.avail_out)) return be
                }
                return e.insert = e.strstart < se - 1 ? e.strstart : se - 1, t === L ? (h(e, !0), 0 === e.strm.avail_out ? _e : Ee) : e.last_lit && (h(e, !1), 0 === e.strm.avail_out) ? be : ye
            }

            function p(e, t) {
                for (var n, r, i; ;) {
                    if (e.lookahead < de) {
                        if (m(e), e.lookahead < de && t === I) return be;
                        if (0 === e.lookahead) break
                    }
                    if (n = 0, e.lookahead >= se && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + se - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), e.prev_length = e.match_length, e.prev_match = e.match_start, e.match_length = se - 1, 0 !== n && e.prev_length < e.max_lazy_match && e.strstart - n <= e.w_size - de && (e.match_length = l(e, n), e.match_length <= 5 && (e.strategy === V || e.match_length === se && e.strstart - e.match_start > 4096) && (e.match_length = se - 1)), e.prev_length >= se && e.match_length <= e.prev_length) {
                        i = e.strstart + e.lookahead - se, r = C._tr_tally(e, e.strstart - 1 - e.prev_match, e.prev_length - se), e.lookahead -= e.prev_length - 1, e.prev_length -= 2;
                        do ++e.strstart <= i && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + se - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart); while (0 !== --e.prev_length);
                        if (e.match_available = 0, e.match_length = se - 1, e.strstart++, r && (h(e, !1), 0 === e.strm.avail_out)) return be
                    } else if (e.match_available) {
                        if (r = C._tr_tally(e, 0, e.window[e.strstart - 1]), r && h(e, !1), e.strstart++, e.lookahead--, 0 === e.strm.avail_out) return be
                    } else e.match_available = 1, e.strstart++, e.lookahead--
                }
                return e.match_available && (r = C._tr_tally(e, 0, e.window[e.strstart - 1]), e.match_available = 0), e.insert = e.strstart < se - 1 ? e.strstart : se - 1, t === L ? (h(e, !0), 0 === e.strm.avail_out ? _e : Ee) : e.last_lit && (h(e, !1), 0 === e.strm.avail_out) ? be : ye
            }

            function q(e, t) {
                for (var n, r, i, a, o = e.window; ;) {
                    if (e.lookahead <= ce) {
                        if (m(e), e.lookahead <= ce && t === I) return be;
                        if (0 === e.lookahead) break
                    }
                    if (e.match_length = 0, e.lookahead >= se && e.strstart > 0 && (i = e.strstart - 1, r = o[i], r === o[++i] && r === o[++i] && r === o[++i])) {
                        a = e.strstart + ce;
                        do ; while (r === o[++i] && r === o[++i] && r === o[++i] && r === o[++i] && r === o[++i] && r === o[++i] && r === o[++i] && r === o[++i] && a > i);
                        e.match_length = ce - (a - i), e.match_length > e.lookahead && (e.match_length = e.lookahead)
                    }
                    if (e.match_length >= se ? (n = C._tr_tally(e, 1, e.match_length - se), e.lookahead -= e.match_length, e.strstart += e.match_length, e.match_length = 0) : (n = C._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++), n && (h(e, !1), 0 === e.strm.avail_out)) return be
                }
                return e.insert = 0, t === L ? (h(e, !0), 0 === e.strm.avail_out ? _e : Ee) : e.last_lit && (h(e, !1), 0 === e.strm.avail_out) ? be : ye
            }

            function r(e, t) {
                for (var n; ;) {
                    if (0 === e.lookahead && (m(e), 0 === e.lookahead)) {
                        if (t === I) return be;
                        break
                    }
                    if (e.match_length = 0, n = C._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++, n && (h(e, !1), 0 === e.strm.avail_out)) return be
                }
                return e.insert = 0, t === L ? (h(e, !0), 0 === e.strm.avail_out ? _e : Ee) : e.last_lit && (h(e, !1), 0 === e.strm.avail_out) ? be : ye
            }

            function s(e) {
                e.window_size = 2 * e.w_size, f(e.head), e.max_lazy_match = _[e.level].max_lazy, e.good_match = _[e.level].good_length, e.nice_match = _[e.level].nice_length, e.max_chain_length = _[e.level].max_chain, e.strstart = 0, e.block_start = 0, e.lookahead = 0, e.insert = 0, e.match_length = e.prev_length = se - 1, e.match_available = 0, e.ins_h = 0
            }

            function t() {
                this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = Z, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new E.Buf16(2 * ae), this.dyn_dtree = new E.Buf16(2 * (2 * re + 1)), this.bl_tree = new E.Buf16(2 * (2 * ie + 1)), f(this.dyn_ltree), f(this.dyn_dtree), f(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new E.Buf16(oe + 1), this.heap = new E.Buf16(2 * ne + 1), f(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new E.Buf16(2 * ne + 1), f(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0
            }

            function u(e) {
                var t;
                return e && e.state ? (e.total_in = e.total_out = 0, e.data_type = X, t = e.state, t.pending = 0, t.pending_out = 0, t.wrap < 0 && (t.wrap = -t.wrap), t.status = t.wrap ? ue : ve, e.adler = 2 === t.wrap ? 0 : 1, t.last_flush = I, C._tr_init(t), N) : d(e, B)
            }

            function v(e) {
                var t = u(e);
                return t === N && s(e.state), t
            }

            function w(e, t) {
                return e && e.state ? 2 !== e.state.wrap ? B : (e.state.gzhead = t, N) : B
            }

            function x(e, n, r, i, a, o) {
                if (!e) return B;
                var s = 1;
                if (n === H && (n = 6), 0 > i ? (s = 0, i = -i) : i > 15 && (s = 2, i -= 16), 1 > a || a > K || r !== Z || 8 > i || i > 15 || 0 > n || n > 9 || 0 > o || o > $) return d(e, B);
                8 === i && (i = 9);
                var c = new t;
                return e.state = c, c.strm = e, c.wrap = s, c.gzhead = null, c.w_bits = i, c.w_size = 1 << c.w_bits, c.w_mask = c.w_size - 1, c.hash_bits = a + 7, c.hash_size = 1 << c.hash_bits, c.hash_mask = c.hash_size - 1, c.hash_shift = ~~((c.hash_bits + se - 1) / se), c.window = new E.Buf8(2 * c.w_size), c.head = new E.Buf16(c.hash_size), c.prev = new E.Buf16(c.w_size), c.lit_bufsize = 1 << a + 6, c.pending_buf_size = 4 * c.lit_bufsize, c.pending_buf = new E.Buf8(c.pending_buf_size), c.d_buf = c.lit_bufsize >> 1, c.l_buf = 3 * c.lit_bufsize, c.level = n, c.strategy = o, c.method = r, v(e)
            }

            function y(e, t) {
                return x(e, t, Z, Q, J, Y)
            }

            function z(t, n) {
                var a, o, s, c;
                if (!t || !t.state || n > P || 0 > n) return t ? d(t, B) : B;
                if (o = t.state, !t.output || !t.input && 0 !== t.avail_in || o.status === ge && n !== L) return d(t, 0 === t.avail_out ? F : B);
                if (o.strm = t, a = o.last_flush, o.last_flush = n, o.status === ue) if (2 === o.wrap) t.adler = 0, i(o, 31), i(o, 139), i(o, 8), o.gzhead ? (i(o, (o.gzhead.text ? 1 : 0) + (o.gzhead.hcrc ? 2 : 0) + (o.gzhead.extra ? 4 : 0) + (o.gzhead.name ? 8 : 0) + (o.gzhead.comment ? 16 : 0)), i(o, 255 & o.gzhead.time), i(o, o.gzhead.time >> 8 & 255), i(o, o.gzhead.time >> 16 & 255), i(o, o.gzhead.time >> 24 & 255), i(o, 9 === o.level ? 2 : o.strategy >= G || o.level < 2 ? 4 : 0), i(o, 255 & o.gzhead.os), o.gzhead.extra && o.gzhead.extra.length && (i(o, 255 & o.gzhead.extra.length), i(o, o.gzhead.extra.length >> 8 & 255)), o.gzhead.hcrc && (t.adler = T(t.adler, o.pending_buf, o.pending, 0)), o.gzindex = 0, o.status = fe) : (i(o, 0), i(o, 0), i(o, 0), i(o, 0), i(o, 0), i(o, 9 === o.level ? 2 : o.strategy >= G || o.level < 2 ? 4 : 0), i(o, Ce), o.status = ve); else {
                    var l = Z + (o.w_bits - 8 << 4) << 8, u = -1;
                    u = o.strategy >= G || o.level < 2 ? 0 : o.level < 6 ? 1 : 6 === o.level ? 2 : 3, l |= u << 6, 0 !== o.strstart && (l |= le), l += 31 - l % 31, o.status = ve, j(o, l), 0 !== o.strstart && (j(o, t.adler >>> 16), j(o, 65535 & t.adler)), t.adler = 1
                }
                if (o.status === fe) if (o.gzhead.extra) {
                    for (s = o.pending; o.gzindex < (65535 & o.gzhead.extra.length) && (o.pending !== o.pending_buf_size || (o.gzhead.hcrc && o.pending > s && (t.adler = T(t.adler, o.pending_buf, o.pending - s, s)), g(t), s = o.pending, o.pending !== o.pending_buf_size));) i(o, 255 & o.gzhead.extra[o.gzindex]), o.gzindex++;
                    o.gzhead.hcrc && o.pending > s && (t.adler = T(t.adler, o.pending_buf, o.pending - s, s)), o.gzindex === o.gzhead.extra.length && (o.gzindex = 0, o.status = he)
                } else o.status = he;
                if (o.status === he) if (o.gzhead.name) {
                    s = o.pending;
                    do {
                        if (o.pending === o.pending_buf_size && (o.gzhead.hcrc && o.pending > s && (t.adler = T(t.adler, o.pending_buf, o.pending - s, s)), g(t), s = o.pending, o.pending === o.pending_buf_size)) {
                            c = 1;
                            break
                        }
                        c = o.gzindex < o.gzhead.name.length ? 255 & o.gzhead.name.charCodeAt(o.gzindex++) : 0, i(o, c)
                    } while (0 !== c);
                    o.gzhead.hcrc && o.pending > s && (t.adler = T(t.adler, o.pending_buf, o.pending - s, s)), 0 === c && (o.gzindex = 0, o.status = pe)
                } else o.status = pe;
                if (o.status === pe) if (o.gzhead.comment) {
                    s = o.pending;
                    do {
                        if (o.pending === o.pending_buf_size && (o.gzhead.hcrc && o.pending > s && (t.adler = T(t.adler, o.pending_buf, o.pending - s, s)), g(t), s = o.pending, o.pending === o.pending_buf_size)) {
                            c = 1;
                            break
                        }
                        c = o.gzindex < o.gzhead.comment.length ? 255 & o.gzhead.comment.charCodeAt(o.gzindex++) : 0, i(o, c)
                    } while (0 !== c);
                    o.gzhead.hcrc && o.pending > s && (t.adler = T(t.adler, o.pending_buf, o.pending - s, s)), 0 === c && (o.status = me)
                } else o.status = me;
                if (o.status === me && (o.gzhead.hcrc ? (o.pending + 2 > o.pending_buf_size && g(t), o.pending + 2 <= o.pending_buf_size && (i(o, 255 & t.adler), i(o, t.adler >> 8 & 255), t.adler = 0, o.status = ve)) : o.status = ve), 0 !== o.pending) {
                    if (g(t), 0 === t.avail_out) return o.last_flush = -1, N
                } else if (0 === t.avail_in && e(n) <= e(a) && n !== L) return d(t, F);
                if (o.status === ge && 0 !== t.avail_in) return d(t, F);
                if (0 !== t.avail_in || 0 !== o.lookahead || n !== I && o.status !== ge) {
                    var h = o.strategy === G ? r(o, n) : o.strategy === W ? q(o, n) : _[o.level].func(o, n);
                    if ((h === _e || h === Ee) && (o.status = ge), h === be || h === _e) return 0 === t.avail_out && (o.last_flush = -1), N;
                    if (h === ye && (n === O ? C._tr_align(o) : n !== P && (C._tr_stored_block(o, 0, 0, !1), n === R && (f(o.head), 0 === o.lookahead && (o.strstart = 0, o.block_start = 0, o.insert = 0))), g(t), 0 === t.avail_out)) return o.last_flush = -1, N
                }
                return n !== L ? N : o.wrap <= 0 ? M : (2 === o.wrap ? (i(o, 255 & t.adler), i(o, t.adler >> 8 & 255), i(o, t.adler >> 16 & 255), i(o, t.adler >> 24 & 255), i(o, 255 & t.total_in), i(o, t.total_in >> 8 & 255), i(o, t.total_in >> 16 & 255), i(o, t.total_in >> 24 & 255)) : (j(o, t.adler >>> 16), j(o, 65535 & t.adler)), g(t), o.wrap > 0 && (o.wrap = -o.wrap), 0 !== o.pending ? N : M)
            }

            function A(e) {
                var t;
                return e && e.state ? (t = e.state.status, t !== ue && t !== fe && t !== he && t !== pe && t !== me && t !== ve && t !== ge ? d(e, B) : (e.state = null, t === ve ? d(e, U) : N)) : B
            }

            var _, E = a("../utils/common"), C = a("./trees"), S = a("./adler32"), T = a("./crc32"),
                D = a("./messages"), I = 0, O = 1, R = 3, L = 4, P = 5, N = 0, M = 1, B = -2, U = -3, F = -5, H = -1,
                V = 1, G = 2, W = 3, $ = 4, Y = 0, X = 2, Z = 8, K = 9, Q = 15, J = 8, ee = 29, te = 256,
                ne = te + 1 + ee, re = 30, ie = 19, ae = 2 * ne + 1, oe = 15, se = 3, ce = 258, de = ce + se + 1,
                le = 32, ue = 42, fe = 69, he = 73, pe = 91, me = 103, ve = 113, ge = 666, be = 1, ye = 2, _e = 3,
                Ee = 4, Ce = 3, Se = function (e, t, n, r, i) {
                    this.good_length = e, this.max_lazy = t, this.nice_length = n, this.max_chain = r, this.func = i
                };
            _ = [new Se(0, 0, 0, 0, n), new Se(4, 4, 8, 4, o), new Se(4, 5, 16, 8, o), new Se(4, 6, 32, 32, o), new Se(4, 4, 16, 16, p), new Se(8, 16, 32, 32, p), new Se(8, 16, 128, 128, p), new Se(8, 32, 128, 256, p), new Se(32, 128, 258, 1024, p), new Se(32, 258, 258, 4096, p)], b.deflateInit = y, b.deflateInit2 = x, b.deflateReset = v, b.deflateResetKeep = u, b.deflateSetHeader = w, b.deflate = z, b.deflateEnd = A, b.deflateInfo = "pako deflate (from Nodeca project)"
        }, {"../utils/common": 27, "./adler32": 29, "./crc32": 31, "./messages": 37, "./trees": 38}],
        33: [function (e, t) {
            function c() {
                this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1
            }

            t.exports = c
        }, {}],
        34: [function (e, t) {
            var n = 30, r = 12;
            t.exports = function (e, t) {
                var i, a, o, s, c, d, l, u, f, h, p, m, v, g, b, y, _, E, C, S, T, w, D, A, x;
                i = e.state, a = e.next_in, A = e.input, o = a + (e.avail_in - 5), s = e.next_out, x = e.output, c = s - (t - e.avail_out), d = s + (e.avail_out - 257), l = i.dmax, u = i.wsize, f = i.whave, h = i.wnext, p = i.window, m = i.hold, v = i.bits, g = i.lencode, b = i.distcode, y = (1 << i.lenbits) - 1, _ = (1 << i.distbits) - 1;
                e:do {
                    15 > v && (m += A[a++] << v, v += 8, m += A[a++] << v, v += 8), E = g[m & y];
                    t:for (; ;) {
                        if (C = E >>> 24, m >>>= C, v -= C, C = E >>> 16 & 255, 0 === C) x[s++] = 65535 & E; else {
                            if (!(16 & C)) {
                                if (0 === (64 & C)) {
                                    E = g[(65535 & E) + (m & (1 << C) - 1)];
                                    continue t
                                }
                                if (32 & C) {
                                    i.mode = r;
                                    break e
                                }
                                e.msg = "invalid literal/length code", i.mode = n;
                                break e
                            }
                            S = 65535 & E, C &= 15, C && (C > v && (m += A[a++] << v, v += 8), S += m & (1 << C) - 1, m >>>= C, v -= C), 15 > v && (m += A[a++] << v, v += 8, m += A[a++] << v, v += 8), E = b[m & _];
                            n:for (; ;) {
                                if (C = E >>> 24, m >>>= C, v -= C, C = E >>> 16 & 255, !(16 & C)) {
                                    if (0 === (64 & C)) {
                                        E = b[(65535 & E) + (m & (1 << C) - 1)];
                                        continue n
                                    }
                                    e.msg = "invalid distance code", i.mode = n;
                                    break e
                                }
                                if (T = 65535 & E, C &= 15, C > v && (m += A[a++] << v, v += 8, C > v && (m += A[a++] << v, v += 8)), T += m & (1 << C) - 1, T > l) {
                                    e.msg = "invalid distance too far back", i.mode = n;
                                    break e
                                }
                                if (m >>>= C, v -= C, C = s - c, T > C) {
                                    if (C = T - C, C > f && i.sane) {
                                        e.msg = "invalid distance too far back", i.mode = n;
                                        break e
                                    }
                                    if (w = 0, D = p, 0 === h) {
                                        if (w += u - C, S > C) {
                                            S -= C;
                                            do x[s++] = p[w++]; while (--C);
                                            w = s - T, D = x
                                        }
                                    } else if (C > h) {
                                        if (w += u + h - C, C -= h, S > C) {
                                            S -= C;
                                            do x[s++] = p[w++]; while (--C);
                                            if (w = 0, S > h) {
                                                C = h, S -= C;
                                                do x[s++] = p[w++]; while (--C);
                                                w = s - T, D = x
                                            }
                                        }
                                    } else if (w += h - C, S > C) {
                                        S -= C;
                                        do x[s++] = p[w++]; while (--C);
                                        w = s - T, D = x
                                    }
                                    for (; S > 2;) x[s++] = D[w++], x[s++] = D[w++], x[s++] = D[w++], S -= 3;
                                    S && (x[s++] = D[w++], S > 1 && (x[s++] = D[w++]))
                                } else {
                                    w = s - T;
                                    do x[s++] = x[w++], x[s++] = x[w++], x[s++] = x[w++], S -= 3; while (S > 2);
                                    S && (x[s++] = x[w++], S > 1 && (x[s++] = x[w++]))
                                }
                                break
                            }
                        }
                        break
                    }
                } while (o > a && d > s);
                S = v >> 3, a -= S, v -= S << 3, m &= (1 << v) - 1, e.next_in = a, e.next_out = s, e.avail_in = o > a ? 5 + (o - a) : 5 - (a - o), e.avail_out = d > s ? 257 + (d - s) : 257 - (s - d), i.hold = m, i.bits = v
            }
        }, {}],
        35: [function (t, r, a) {
            function d(e) {
                return (e >>> 24 & 255) + (e >>> 8 & 65280) + ((65280 & e) << 8) + ((255 & e) << 24)
            }

            function e() {
                this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new u.Buf16(320), this.work = new u.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0
            }

            function f(e) {
                var t;
                return e && e.state ? (t = e.state, e.total_in = e.total_out = t.total = 0, e.msg = "", t.wrap && (e.adler = 1 & t.wrap), t.mode = N, t.last = 0, t.havedict = 0, t.dmax = 32768, t.head = null, t.hold = 0, t.bits = 0, t.lencode = t.lendyn = new u.Buf32(pe), t.distcode = t.distdyn = new u.Buf32(me), t.sane = 1, t.back = -1, D) : I
            }

            function g(e) {
                var t;
                return e && e.state ? (t = e.state, t.wsize = 0, t.whave = 0, t.wnext = 0, f(e)) : I
            }

            function h(e, t) {
                var n, r;
                return e && e.state ? (r = e.state, 0 > t ? (n = 0, t = -t) : (n = (t >> 4) + 1, 48 > t && (t &= 15)), t && (8 > t || t > 15) ? I : (null !== r.window && r.wbits !== t && (r.window = null), r.wrap = n, r.wbits = t, g(e))) : I
            }

            function i(t, n) {
                var r, i;
                return t ? (i = new e, t.state = i, i.window = null, r = h(t, n), r !== D && (t.state = null), r) : I
            }

            function j(e) {
                return i(e, ge)
            }

            function k(e) {
                if (be) {
                    var t;
                    for (s = new u.Buf32(512), c = new u.Buf32(32), t = 0; 144 > t;) e.lens[t++] = 8;
                    for (; 256 > t;) e.lens[t++] = 9;
                    for (; 280 > t;) e.lens[t++] = 7;
                    for (; 288 > t;) e.lens[t++] = 8;
                    for (y(E, e.lens, 0, 288, s, 0, e.work, {bits: 9}), t = 0; 32 > t;) e.lens[t++] = 5;
                    y(C, e.lens, 0, 32, c, 0, e.work, {bits: 5}), be = !1
                }
                e.lencode = s, e.lenbits = 9, e.distcode = c, e.distbits = 5
            }

            function l(e, t, n, r) {
                var i, a = e.state;
                return null === a.window && (a.wsize = 1 << a.wbits, a.wnext = 0, a.whave = 0, a.window = new u.Buf8(a.wsize)), r >= a.wsize ? (u.arraySet(a.window, t, n - a.wsize, a.wsize, 0), a.wnext = 0, a.whave = a.wsize) : (i = a.wsize - a.wnext, i > r && (i = r), u.arraySet(a.window, t, n - r, i, a.wnext), r -= i, r ? (u.arraySet(a.window, t, n - r, r, 0), a.wnext = r, a.whave = a.wsize) : (a.wnext += i, a.wnext === a.wsize && (a.wnext = 0), a.whave < a.wsize && (a.whave += i))), 0
            }

            function m(e, t) {
                var n, r, i, a, o, s, c, f, h, m, g, j, pe, me, ve, ge, be, ye, _e, Ee, Ce, Se, Te, we, De = 0,
                    Ae = new u.Buf8(4), xe = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
                if (!e || !e.state || !e.output || !e.input && 0 !== e.avail_in) return I;
                n = e.state, n.mode === $ && (n.mode = Y), o = e.next_out, i = e.output, c = e.avail_out, a = e.next_in, r = e.input, s = e.avail_in, f = n.hold, h = n.bits, m = s, g = c, Se = D;
                e:for (; ;) switch (n.mode) {
                    case N:
                        if (0 === n.wrap) {
                            n.mode = Y;
                            break
                        }
                        for (; 16 > h;) {
                            if (0 === s) break e;
                            s--, f += r[a++] << h, h += 8
                        }
                        if (2 & n.wrap && 35615 === f) {
                            n.check = 0, Ae[0] = 255 & f, Ae[1] = f >>> 8 & 255, n.check = v(n.check, Ae, 2, 0), f = 0, h = 0, n.mode = M;
                            break
                        }
                        if (n.flags = 0, n.head && (n.head.done = !1), !(1 & n.wrap) || (((255 & f) << 8) + (f >> 8)) % 31) {
                            e.msg = "incorrect header check", n.mode = ue;
                            break
                        }
                        if ((15 & f) !== P) {
                            e.msg = "unknown compression method", n.mode = ue;
                            break
                        }
                        if (f >>>= 4, h -= 4, Ce = (15 & f) + 8, 0 === n.wbits) n.wbits = Ce; else if (Ce > n.wbits) {
                            e.msg = "invalid window size", n.mode = ue;
                            break
                        }
                        n.dmax = 1 << Ce, e.adler = n.check = 1, n.mode = 512 & f ? z : $, f = 0, h = 0;
                        break;
                    case M:
                        for (; 16 > h;) {
                            if (0 === s) break e;
                            s--, f += r[a++] << h, h += 8
                        }
                        if (n.flags = f, (255 & n.flags) !== P) {
                            e.msg = "unknown compression method", n.mode = ue;
                            break
                        }
                        if (57344 & n.flags) {
                            e.msg = "unknown header flags set", n.mode = ue;
                            break
                        }
                        n.head && (n.head.text = f >> 8 & 1), 512 & n.flags && (Ae[0] = 255 & f, Ae[1] = f >>> 8 & 255, n.check = v(n.check, Ae, 2, 0)), f = 0, h = 0, n.mode = B;
                    case B:
                        for (; 32 > h;) {
                            if (0 === s) break e;
                            s--, f += r[a++] << h, h += 8
                        }
                        n.head && (n.head.time = f), 512 & n.flags && (Ae[0] = 255 & f, Ae[1] = f >>> 8 & 255, Ae[2] = f >>> 16 & 255, Ae[3] = f >>> 24 & 255, n.check = v(n.check, Ae, 4, 0)), f = 0, h = 0, n.mode = U;
                    case U:
                        for (; 16 > h;) {
                            if (0 === s) break e;
                            s--, f += r[a++] << h, h += 8
                        }
                        n.head && (n.head.xflags = 255 & f, n.head.os = f >> 8), 512 & n.flags && (Ae[0] = 255 & f, Ae[1] = f >>> 8 & 255, n.check = v(n.check, Ae, 2, 0)), f = 0, h = 0, n.mode = F;
                    case F:
                        if (1024 & n.flags) {
                            for (; 16 > h;) {
                                if (0 === s) break e;
                                s--, f += r[a++] << h, h += 8
                            }
                            n.length = f, n.head && (n.head.extra_len = f), 512 & n.flags && (Ae[0] = 255 & f, Ae[1] = f >>> 8 & 255, n.check = v(n.check, Ae, 2, 0)), f = 0, h = 0
                        } else n.head && (n.head.extra = null);
                        n.mode = H;
                    case H:
                        if (1024 & n.flags && (j = n.length, j > s && (j = s), j && (n.head && (Ce = n.head.extra_len - n.length, n.head.extra || (n.head.extra = new Array(n.head.extra_len)), u.arraySet(n.head.extra, r, a, j, Ce)), 512 & n.flags && (n.check = v(n.check, r, j, a)), s -= j, a += j, n.length -= j), n.length)) break e;
                        n.length = 0, n.mode = q;
                    case q:
                        if (2048 & n.flags) {
                            if (0 === s) break e;
                            j = 0;
                            do Ce = r[a + j++], n.head && Ce && n.length < 65536 && (n.head.name += String.fromCharCode(Ce)); while (Ce && s > j);
                            if (512 & n.flags && (n.check = v(n.check, r, j, a)), s -= j, a += j, Ce) break e
                        } else n.head && (n.head.name = null);
                        n.length = 0, n.mode = V;
                    case V:
                        if (4096 & n.flags) {
                            if (0 === s) break e;
                            j = 0;
                            do Ce = r[a + j++], n.head && Ce && n.length < 65536 && (n.head.comment += String.fromCharCode(Ce)); while (Ce && s > j);
                            if (512 & n.flags && (n.check = v(n.check, r, j, a)), s -= j, a += j, Ce) break e
                        } else n.head && (n.head.comment = null);
                        n.mode = G;
                    case G:
                        if (512 & n.flags) {
                            for (; 16 > h;) {
                                if (0 === s) break e;
                                s--, f += r[a++] << h, h += 8
                            }
                            if (f !== (65535 & n.check)) {
                                e.msg = "header crc mismatch", n.mode = ue;
                                break
                            }
                            f = 0, h = 0
                        }
                        n.head && (n.head.hcrc = n.flags >> 9 & 1, n.head.done = !0), e.adler = n.check = 0, n.mode = $;
                        break;
                    case z:
                        for (; 32 > h;) {
                            if (0 === s) break e;
                            s--, f += r[a++] << h, h += 8
                        }
                        e.adler = n.check = d(f), f = 0, h = 0, n.mode = W;
                    case W:
                        if (0 === n.havedict) return e.next_out = o, e.avail_out = c, e.next_in = a, e.avail_in = s, n.hold = f, n.bits = h, x;
                        e.adler = n.check = 1, n.mode = $;
                    case $:
                        if (t === T || t === w) break e;
                    case Y:
                        if (n.last) {
                            f >>>= 7 & h, h -= 7 & h, n.mode = ce;
                            break
                        }
                        for (; 3 > h;) {
                            if (0 === s) break e;
                            s--, f += r[a++] << h, h += 8
                        }
                        switch (n.last = 1 & f, f >>>= 1, h -= 1, 3 & f) {
                            case 0:
                                n.mode = X;
                                break;
                            case 1:
                                if (k(n), n.mode = te, t === w) {
                                    f >>>= 2, h -= 2;
                                    break e
                                }
                                break;
                            case 2:
                                n.mode = Q;
                                break;
                            case 3:
                                e.msg = "invalid block type", n.mode = ue
                        }
                        f >>>= 2, h -= 2;
                        break;
                    case X:
                        for (f >>>= 7 & h, h -= 7 & h; 32 > h;) {
                            if (0 === s) break e;
                            s--, f += r[a++] << h, h += 8
                        }
                        if ((65535 & f) !== (f >>> 16 ^ 65535)) {
                            e.msg = "invalid stored block lengths", n.mode = ue;
                            break
                        }
                        if (n.length = 65535 & f, f = 0, h = 0, n.mode = Z, t === w) break e;
                    case Z:
                        n.mode = K;
                    case K:
                        if (j = n.length) {
                            if (j > s && (j = s), j > c && (j = c), 0 === j) break e;
                            u.arraySet(i, r, a, j, o), s -= j, a += j, c -= j, o += j, n.length -= j;
                            break
                        }
                        n.mode = $;
                        break;
                    case Q:
                        for (; 14 > h;) {
                            if (0 === s) break e;
                            s--, f += r[a++] << h, h += 8
                        }
                        if (n.nlen = (31 & f) + 257, f >>>= 5, h -= 5, n.ndist = (31 & f) + 1, f >>>= 5, h -= 5, n.ncode = (15 & f) + 4, f >>>= 4, h -= 4, n.nlen > 286 || n.ndist > 30) {
                            e.msg = "too many length or distance symbols", n.mode = ue;
                            break
                        }
                        n.have = 0, n.mode = J;
                    case J:
                        for (; n.have < n.ncode;) {
                            for (; 3 > h;) {
                                if (0 === s) break e;
                                s--, f += r[a++] << h, h += 8
                            }
                            n.lens[xe[n.have++]] = 7 & f, f >>>= 3, h -= 3
                        }
                        for (; n.have < 19;) n.lens[xe[n.have++]] = 0;
                        if (n.lencode = n.lendyn, n.lenbits = 7, Te = {bits: n.lenbits}, Se = y(_, n.lens, 0, 19, n.lencode, 0, n.work, Te), n.lenbits = Te.bits, Se) {
                            e.msg = "invalid code lengths set", n.mode = ue;
                            break
                        }
                        n.have = 0, n.mode = ee;
                    case ee:
                        for (; n.have < n.nlen + n.ndist;) {
                            for (; De = n.lencode[f & (1 << n.lenbits) - 1], ve = De >>> 24, ge = De >>> 16 & 255, be = 65535 & De, !(h >= ve);) {
                                if (0 === s) break e;
                                s--, f += r[a++] << h, h += 8
                            }
                            if (16 > be) f >>>= ve, h -= ve, n.lens[n.have++] = be; else {
                                if (16 === be) {
                                    for (we = ve + 2; we > h;) {
                                        if (0 === s) break e;
                                        s--, f += r[a++] << h, h += 8
                                    }
                                    if (f >>>= ve, h -= ve, 0 === n.have) {
                                        e.msg = "invalid bit length repeat", n.mode = ue;
                                        break
                                    }
                                    Ce = n.lens[n.have - 1], j = 3 + (3 & f), f >>>= 2, h -= 2
                                } else if (17 === be) {
                                    for (we = ve + 3; we > h;) {
                                        if (0 === s) break e;
                                        s--, f += r[a++] << h, h += 8
                                    }
                                    f >>>= ve, h -= ve, Ce = 0, j = 3 + (7 & f), f >>>= 3, h -= 3
                                } else {
                                    for (we = ve + 7; we > h;) {
                                        if (0 === s) break e;
                                        s--, f += r[a++] << h, h += 8
                                    }
                                    f >>>= ve, h -= ve, Ce = 0, j = 11 + (127 & f), f >>>= 7, h -= 7
                                }
                                if (n.have + j > n.nlen + n.ndist) {
                                    e.msg = "invalid bit length repeat", n.mode = ue;
                                    break
                                }
                                for (; j--;) n.lens[n.have++] = Ce
                            }
                        }
                        if (n.mode === ue) break;
                        if (0 === n.lens[256]) {
                            e.msg = "invalid code -- missing end-of-block", n.mode = ue;
                            break
                        }
                        if (n.lenbits = 9, Te = {bits: n.lenbits}, Se = y(E, n.lens, 0, n.nlen, n.lencode, 0, n.work, Te), n.lenbits = Te.bits, Se) {
                            e.msg = "invalid literal/lengths set", n.mode = ue;
                            break
                        }
                        if (n.distbits = 6, n.distcode = n.distdyn, Te = {bits: n.distbits}, Se = y(C, n.lens, n.nlen, n.ndist, n.distcode, 0, n.work, Te), n.distbits = Te.bits, Se) {
                            e.msg = "invalid distances set", n.mode = ue;
                            break
                        }
                        if (n.mode = te, t === w) break e;
                    case te:
                        n.mode = ne;
                    case ne:
                        if (s >= 6 && c >= 258) {
                            e.next_out = o, e.avail_out = c, e.next_in = a, e.avail_in = s, n.hold = f, n.bits = h, b(e, g), o = e.next_out, i = e.output, c = e.avail_out, a = e.next_in, r = e.input, s = e.avail_in, f = n.hold, h = n.bits, n.mode === $ && (n.back = -1);
                            break
                        }
                        for (n.back = 0; De = n.lencode[f & (1 << n.lenbits) - 1], ve = De >>> 24, ge = De >>> 16 & 255, be = 65535 & De, !(h >= ve);) {
                            if (0 === s) break e;
                            s--, f += r[a++] << h, h += 8
                        }
                        if (ge && 0 === (240 & ge)) {
                            for (ye = ve, _e = ge, Ee = be; De = n.lencode[Ee + ((f & (1 << ye + _e) - 1) >> ye)], ve = De >>> 24, ge = De >>> 16 & 255, be = 65535 & De, !(h >= ye + ve);) {
                                if (0 === s) break e;
                                s--, f += r[a++] << h, h += 8
                            }
                            f >>>= ye, h -= ye, n.back += ye
                        }
                        if (f >>>= ve, h -= ve, n.back += ve, n.length = be, 0 === ge) {
                            n.mode = se;
                            break
                        }
                        if (32 & ge) {
                            n.back = -1, n.mode = $;
                            break
                        }
                        if (64 & ge) {
                            e.msg = "invalid literal/length code", n.mode = ue;
                            break
                        }
                        n.extra = 15 & ge, n.mode = re;
                    case re:
                        if (n.extra) {
                            for (we = n.extra; we > h;) {
                                if (0 === s) break e;
                                s--, f += r[a++] << h, h += 8
                            }
                            n.length += f & (1 << n.extra) - 1, f >>>= n.extra, h -= n.extra, n.back += n.extra
                        }
                        n.was = n.length, n.mode = ie;
                    case ie:
                        for (; De = n.distcode[f & (1 << n.distbits) - 1], ve = De >>> 24, ge = De >>> 16 & 255, be = 65535 & De, !(h >= ve);) {
                            if (0 === s) break e;
                            s--, f += r[a++] << h, h += 8
                        }
                        if (0 === (240 & ge)) {
                            for (ye = ve, _e = ge, Ee = be; De = n.distcode[Ee + ((f & (1 << ye + _e) - 1) >> ye)], ve = De >>> 24, ge = De >>> 16 & 255, be = 65535 & De, !(h >= ye + ve);) {
                                if (0 === s) break e;
                                s--, f += r[a++] << h, h += 8
                            }
                            f >>>= ye, h -= ye, n.back += ye
                        }
                        if (f >>>= ve, h -= ve, n.back += ve, 64 & ge) {
                            e.msg = "invalid distance code", n.mode = ue;
                            break
                        }
                        n.offset = be, n.extra = 15 & ge, n.mode = ae;
                    case ae:
                        if (n.extra) {
                            for (we = n.extra; we > h;) {
                                if (0 === s) break e;
                                s--, f += r[a++] << h, h += 8
                            }
                            n.offset += f & (1 << n.extra) - 1, f >>>= n.extra, h -= n.extra, n.back += n.extra
                        }
                        if (n.offset > n.dmax) {
                            e.msg = "invalid distance too far back", n.mode = ue;
                            break
                        }
                        n.mode = oe;
                    case oe:
                        if (0 === c) break e;
                        if (j = g - c, n.offset > j) {
                            if (j = n.offset - j, j > n.whave && n.sane) {
                                e.msg = "invalid distance too far back", n.mode = ue;
                                break
                            }
                            j > n.wnext ? (j -= n.wnext, pe = n.wsize - j) : pe = n.wnext - j, j > n.length && (j = n.length), me = n.window
                        } else me = i, pe = o - n.offset, j = n.length;
                        j > c && (j = c), c -= j, n.length -= j;
                        do i[o++] = me[pe++]; while (--j);
                        0 === n.length && (n.mode = ne);
                        break;
                    case se:
                        if (0 === c) break e;
                        i[o++] = n.length, c--, n.mode = ne;
                        break;
                    case ce:
                        if (n.wrap) {
                            for (; 32 > h;) {
                                if (0 === s) break e;
                                s--, f |= r[a++] << h, h += 8
                            }
                            if (g -= c, e.total_out += g, n.total += g, g && (e.adler = n.check = n.flags ? v(n.check, i, g, o - g) : p(n.check, i, g, o - g)), g = c, (n.flags ? f : d(f)) !== n.check) {
                                e.msg = "incorrect data check", n.mode = ue;
                                break
                            }
                            f = 0, h = 0
                        }
                        n.mode = de;
                    case de:
                        if (n.wrap && n.flags) {
                            for (; 32 > h;) {
                                if (0 === s) break e;
                                s--, f += r[a++] << h, h += 8
                            }
                            if (f !== (4294967295 & n.total)) {
                                e.msg = "incorrect length check", n.mode = ue;
                                break
                            }
                            f = 0, h = 0
                        }
                        n.mode = le;
                    case le:
                        Se = A;
                        break e;
                    case ue:
                        Se = O;
                        break e;
                    case fe:
                        return R;
                    case he:
                    default:
                        return I
                }
                return e.next_out = o, e.avail_out = c, e.next_in = a, e.avail_in = s, n.hold = f, n.bits = h, (n.wsize || g !== e.avail_out && n.mode < ue && (n.mode < ce || t !== S)) && l(e, e.output, e.next_out, g - e.avail_out) ? (n.mode = fe, R) : (m -= e.avail_in, g -= e.avail_out, e.total_in += m, e.total_out += g, n.total += g, n.wrap && g && (e.adler = n.check = n.flags ? v(n.check, i, g, e.next_out - g) : p(n.check, i, g, e.next_out - g)), e.data_type = n.bits + (n.last ? 64 : 0) + (n.mode === $ ? 128 : 0) + (n.mode === te || n.mode === Z ? 256 : 0), (0 === m && 0 === g || t === S) && Se === D && (Se = L), Se)
            }

            function n(e) {
                if (!e || !e.state) return I;
                var t = e.state;
                return t.window && (t.window = null), e.state = null, D
            }

            function o(e, t) {
                var n;
                return e && e.state ? (n = e.state, 0 === (2 & n.wrap) ? I : (n.head = t, t.done = !1, D)) : I
            }

            var s, c, u = t("../utils/common"), p = t("./adler32"), v = t("./crc32"), b = t("./inffast"),
                y = t("./inftrees"), _ = 0, E = 1, C = 2, S = 4, T = 5, w = 6, D = 0, A = 1, x = 2, I = -2, O = -3,
                R = -4, L = -5, P = 8, N = 1, M = 2, B = 3, U = 4, F = 5, H = 6, q = 7, V = 8, G = 9, z = 10, W = 11,
                $ = 12, Y = 13, X = 14, Z = 15, K = 16, Q = 17, J = 18, ee = 19, te = 20, ne = 21, re = 22, ie = 23,
                ae = 24, oe = 25, se = 26, ce = 27, de = 28, le = 29, ue = 30, fe = 31, he = 32, pe = 852, me = 592,
                ve = 15, ge = ve, be = !0;
            a.inflateReset = g, a.inflateReset2 = h, a.inflateResetKeep = f, a.inflateInit = j, a.inflateInit2 = i, a.inflate = m, a.inflateEnd = n, a.inflateGetHeader = o, a.inflateInfo = "pako inflate (from Nodeca project)"
        }, {"../utils/common": 27, "./adler32": 29, "./crc32": 31, "./inffast": 34, "./inftrees": 36}],
        36: [function (e, t) {
            var n = e("../utils/common"), r = 15, i = 852, a = 592, o = 0, s = 1, c = 2,
                d = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],
                l = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78],
                u = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0],
                f = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
            t.exports = function (e, t, h, p, m, v, g, b) {
                var y, _, E, C, S, T, w, D, A, x = b.bits, I = 0, O = 0, k = 0, R = 0, L = 0, P = 0, N = 0, M = 0,
                    B = 0, U = 0, F = null, H = 0, q = new n.Buf16(r + 1), V = new n.Buf16(r + 1), G = null, j = 0;
                for (I = 0; r >= I; I++) q[I] = 0;
                for (O = 0; p > O; O++) q[t[h + O]]++;
                for (L = x, R = r; R >= 1 && 0 === q[R]; R--) ;
                if (L > R && (L = R), 0 === R) return m[v++] = 20971520, m[v++] = 20971520, b.bits = 1, 0;
                for (k = 1; R > k && 0 === q[k]; k++) ;
                for (k > L && (L = k), M = 1, I = 1; r >= I; I++) if (M <<= 1, M -= q[I], 0 > M) return -1;
                if (M > 0 && (e === o || 1 !== R)) return -1;
                for (V[1] = 0, I = 1; r > I; I++) V[I + 1] = V[I] + q[I];
                for (O = 0; p > O; O++) 0 !== t[h + O] && (g[V[t[h + O]]++] = O);
                if (e === o ? (F = G = g, T = 19) : e === s ? (F = d, H -= 257, G = l, j -= 257, T = 256) : (F = u, G = f, T = -1), U = 0, O = 0, I = k, S = v, P = L, N = 0, E = -1, B = 1 << L, C = B - 1, e === s && B > i || e === c && B > a) return 1;
                for (var z = 0; ;) {
                    z++, w = I - N, g[O] < T ? (D = 0, A = g[O]) : g[O] > T ? (D = G[j + g[O]], A = F[H + g[O]]) : (D = 96, A = 0), y = 1 << I - N, _ = 1 << P, k = _;
                    do _ -= y, m[S + (U >> N) + _] = w << 24 | D << 16 | A | 0; while (0 !== _);
                    for (y = 1 << I - 1; U & y;) y >>= 1;
                    if (0 !== y ? (U &= y - 1, U += y) : U = 0, O++, 0 === --q[I]) {
                        if (I === R) break;
                        I = t[h + g[O]]
                    }
                    if (I > L && (U & C) !== E) {
                        for (0 === N && (N = L), S += k, P = I - N, M = 1 << P; R > P + N && (M -= q[P + N], !(0 >= M));) P++, M <<= 1;
                        if (B += 1 << P, e === s && B > i || e === c && B > a) return 1;
                        E = U & C, m[E] = L << 24 | P << 16 | S - v | 0
                    }
                }
                return 0 !== U && (m[S + U] = I - N << 24 | 64 << 16 | 0), b.bits = L, 0
            }
        }, {"../utils/common": 27}],
        37: [function (e, t) {
            t.exports = {
                2: "need dictionary",
                1: "stream end",
                0: "",
                "-1": "file error",
                "-2": "stream error",
                "-3": "data error",
                "-4": "insufficient memory",
                "-5": "buffer error",
                "-6": "incompatible version"
            }
        }, {}],
        38: [function (a, c, b) {
            function d(e) {
                for (var t = e.length; --t >= 0;) e[t] = 0
            }

            function e(e) {
                return 256 > e ? oe[e] : oe[256 + (e >>> 7)]
            }

            function f(e, t) {
                e.pending_buf[e.pending++] = 255 & t, e.pending_buf[e.pending++] = t >>> 8 & 255
            }

            function g(e, t, n) {
                e.bi_valid > $ - n ? (e.bi_buf |= t << e.bi_valid & 65535, f(e, e.bi_buf), e.bi_buf = t >> $ - e.bi_valid, e.bi_valid += n - $) : (e.bi_buf |= t << e.bi_valid & 65535, e.bi_valid += n)
            }

            function h(e, t, n) {
                g(e, n[2 * t], n[2 * t + 1])
            }

            function i(e, t) {
                var n = 0;
                do n |= 1 & e, e >>>= 1, n <<= 1; while (--t > 0);
                return n >>> 1
            }

            function j(e) {
                16 === e.bi_valid ? (f(e, e.bi_buf), e.bi_buf = 0, e.bi_valid = 0) : e.bi_valid >= 8 && (e.pending_buf[e.pending++] = 255 & e.bi_buf, e.bi_buf >>= 8, e.bi_valid -= 8)
            }

            function k(e, t) {
                var n, r, i, a, o, s, c = t.dyn_tree, d = t.max_code, l = t.stat_desc.static_tree,
                    u = t.stat_desc.has_stree, f = t.stat_desc.extra_bits, h = t.stat_desc.extra_base,
                    p = t.stat_desc.max_length, m = 0;
                for (a = 0; W >= a; a++) e.bl_count[a] = 0;
                for (c[2 * e.heap[e.heap_max] + 1] = 0, n = e.heap_max + 1; G > n; n++) r = e.heap[n], a = c[2 * c[2 * r + 1] + 1] + 1, a > p && (a = p, m++), c[2 * r + 1] = a, r > d || (e.bl_count[a]++, o = 0, r >= h && (o = f[r - h]), s = c[2 * r], e.opt_len += s * (a + o), u && (e.static_len += s * (l[2 * r + 1] + o)));
                if (0 !== m) {
                    do {
                        for (a = p - 1; 0 === e.bl_count[a];) a--;
                        e.bl_count[a]--, e.bl_count[a + 1] += 2, e.bl_count[p]--, m -= 2
                    } while (m > 0);
                    for (a = p; 0 !== a; a--) for (r = e.bl_count[a]; 0 !== r;) i = e.heap[--n], i > d || (c[2 * i + 1] !== a && (e.opt_len += (a - c[2 * i + 1]) * c[2 * i], c[2 * i + 1] = a), r--)
                }
            }

            function l(e, t, n) {
                var r, a, o = new Array(W + 1), s = 0;
                for (r = 1; W >= r; r++) o[r] = s = s + n[r - 1] << 1;
                for (a = 0; t >= a; a++) {
                    var c = e[2 * a + 1];
                    0 !== c && (e[2 * a] = i(o[c]++, c))
                }
            }

            function m() {
                var e, t, n, r, a, o = new Array(W + 1);
                for (n = 0, r = 0; M - 1 > r; r++) for (ce[r] = n, e = 0; e < 1 << J[r]; e++) se[n++] = r;
                for (se[n - 1] = r, a = 0, r = 0; 16 > r; r++) for (de[r] = a, e = 0; e < 1 << ee[r]; e++) oe[a++] = r;
                for (a >>= 7; H > r; r++) for (de[r] = a << 7, e = 0; e < 1 << ee[r] - 7; e++) oe[256 + a++] = r;
                for (t = 0; W >= t; t++) o[t] = 0;
                for (e = 0; 143 >= e;) ie[2 * e + 1] = 8, e++, o[8]++;
                for (; 255 >= e;) ie[2 * e + 1] = 9, e++, o[9]++;
                for (; 279 >= e;) ie[2 * e + 1] = 7, e++, o[7]++;
                for (; 287 >= e;) ie[2 * e + 1] = 8, e++, o[8]++;
                for (l(ie, F + 1, o), e = 0; H > e; e++) ae[2 * e + 1] = 5, ae[2 * e] = i(e, 5);
                le = new he(ie, J, U + 1, F, W), ue = new he(ae, ee, 0, H, W), fe = new he(new Array(0), te, 0, V, Y)
            }

            function n(e) {
                var t;
                for (t = 0; F > t; t++) e.dyn_ltree[2 * t] = 0;
                for (t = 0; H > t; t++) e.dyn_dtree[2 * t] = 0;
                for (t = 0; V > t; t++) e.bl_tree[2 * t] = 0;
                e.dyn_ltree[2 * X] = 1, e.opt_len = e.static_len = 0, e.last_lit = e.matches = 0
            }

            function o(e) {
                e.bi_valid > 8 ? f(e, e.bi_buf) : e.bi_valid > 0 && (e.pending_buf[e.pending++] = e.bi_buf), e.bi_buf = 0, e.bi_valid = 0
            }

            function p(e, t, n, r) {
                o(e), r && (f(e, n), f(e, ~n)), _.arraySet(e.pending_buf, e.window, t, n, e.pending), e.pending += n
            }

            function q(e, t, n, r) {
                var i = 2 * t, a = 2 * n;
                return e[i] < e[a] || e[i] === e[a] && r[t] <= r[n]
            }

            function r(e, t, n) {
                for (var r = e.heap[n], i = n << 1; i <= e.heap_len && (i < e.heap_len && q(t, e.heap[i + 1], e.heap[i], e.depth) && i++, !q(t, r, e.heap[i], e.depth));) e.heap[n] = e.heap[i], n = i, i <<= 1;
                e.heap[n] = r
            }

            function s(t, n, r) {
                var i, a, o, s, c = 0;
                if (0 !== t.last_lit) do i = t.pending_buf[t.d_buf + 2 * c] << 8 | t.pending_buf[t.d_buf + 2 * c + 1], a = t.pending_buf[t.l_buf + c], c++, 0 === i ? h(t, a, n) : (o = se[a], h(t, o + U + 1, n), s = J[o], 0 !== s && (a -= ce[o], g(t, a, s)), i--, o = e(i), h(t, o, r), s = ee[o], 0 !== s && (i -= de[o], g(t, i, s))); while (c < t.last_lit);
                h(t, X, n)
            }

            function t(e, t) {
                var n, i, a, o = t.dyn_tree, s = t.stat_desc.static_tree, c = t.stat_desc.has_stree,
                    d = t.stat_desc.elems, u = -1;
                for (e.heap_len = 0, e.heap_max = G, n = 0; d > n; n++) 0 !== o[2 * n] ? (e.heap[++e.heap_len] = u = n, e.depth[n] = 0) : o[2 * n + 1] = 0;
                for (; e.heap_len < 2;) a = e.heap[++e.heap_len] = 2 > u ? ++u : 0, o[2 * a] = 1, e.depth[a] = 0, e.opt_len--, c && (e.static_len -= s[2 * a + 1]);
                for (t.max_code = u, n = e.heap_len >> 1; n >= 1; n--) r(e, o, n);
                a = d;
                do n = e.heap[1], e.heap[1] = e.heap[e.heap_len--], r(e, o, 1), i = e.heap[1], e.heap[--e.heap_max] = n, e.heap[--e.heap_max] = i, o[2 * a] = o[2 * n] + o[2 * i], e.depth[a] = (e.depth[n] >= e.depth[i] ? e.depth[n] : e.depth[i]) + 1, o[2 * n + 1] = o[2 * i + 1] = a, e.heap[1] = a++, r(e, o, 1); while (e.heap_len >= 2);
                e.heap[--e.heap_max] = e.heap[1], k(e, t), l(o, u, e.bl_count)
            }

            function u(e, t, n) {
                var r, i, a = -1, o = t[1], s = 0, c = 7, d = 4;
                for (0 === o && (c = 138, d = 3), t[2 * (n + 1) + 1] = 65535, r = 0; n >= r; r++) i = o, o = t[2 * (r + 1) + 1], ++s < c && i === o || (d > s ? e.bl_tree[2 * i] += s : 0 !== i ? (i !== a && e.bl_tree[2 * i]++, e.bl_tree[2 * Z]++) : 10 >= s ? e.bl_tree[2 * K]++ : e.bl_tree[2 * Q]++, s = 0, a = i, 0 === o ? (c = 138, d = 3) : i === o ? (c = 6, d = 3) : (c = 7, d = 4))
            }

            function v(e, t, n) {
                var r, i, a = -1, o = t[1], s = 0, c = 7, d = 4;
                for (0 === o && (c = 138, d = 3), r = 0; n >= r; r++) if (i = o, o = t[2 * (r + 1) + 1], !(++s < c && i === o)) {
                    if (d > s) {
                        do h(e, i, e.bl_tree); while (0 !== --s)
                    } else 0 !== i ? (i !== a && (h(e, i, e.bl_tree), s--), h(e, Z, e.bl_tree), g(e, s - 3, 2)) : 10 >= s ? (h(e, K, e.bl_tree), g(e, s - 3, 3)) : (h(e, Q, e.bl_tree), g(e, s - 11, 7));
                    s = 0, a = i, 0 === o ? (c = 138, d = 3) : i === o ? (c = 6, d = 3) : (c = 7, d = 4)
                }
            }

            function w(e) {
                var n;
                for (u(e, e.dyn_ltree, e.l_desc.max_code), u(e, e.dyn_dtree, e.d_desc.max_code), t(e, e.bl_desc), n = V - 1; n >= 3 && 0 === e.bl_tree[2 * ne[n] + 1]; n--) ;
                return e.opt_len += 3 * (n + 1) + 5 + 5 + 4, n
            }

            function x(e, t, n, r) {
                var i;
                for (g(e, t - 257, 5), g(e, n - 1, 5), g(e, r - 4, 4), i = 0; r > i; i++) g(e, e.bl_tree[2 * ne[i] + 1], 3);
                v(e, e.dyn_ltree, t - 1), v(e, e.dyn_dtree, n - 1)
            }

            function y(e) {
                var t, n = 4093624447;
                for (t = 0; 31 >= t; t++, n >>>= 1) if (1 & n && 0 !== e.dyn_ltree[2 * t]) return S;
                if (0 !== e.dyn_ltree[18] || 0 !== e.dyn_ltree[20] || 0 !== e.dyn_ltree[26]) return T;
                for (t = 32; U > t; t++) if (0 !== e.dyn_ltree[2 * t]) return T;
                return S
            }

            function z(e) {
                me || (m(), me = !0), e.l_desc = new pe(e.dyn_ltree, le), e.d_desc = new pe(e.dyn_dtree, ue), e.bl_desc = new pe(e.bl_tree, fe), e.bi_buf = 0, e.bi_valid = 0, n(e)
            }

            function A(e, t, n, r) {
                g(e, (O << 1) + (r ? 1 : 0), 3), p(e, t, n, !0)
            }

            function B(e) {
                g(e, R << 1, 3), h(e, X, ie), j(e)
            }

            function C(e, r, i, a) {
                var c, d, l = 0;
                e.level > 0 ? (e.strm.data_type === I && (e.strm.data_type = y(e)), t(e, e.l_desc), t(e, e.d_desc), l = w(e), c = e.opt_len + 3 + 7 >>> 3, d = e.static_len + 3 + 7 >>> 3, c >= d && (c = d)) : c = d = i + 5, c >= i + 4 && -1 !== r ? A(e, r, i, a) : e.strategy === E || d === c ? (g(e, (R << 1) + (a ? 1 : 0), 3), s(e, ie, ae)) : (g(e, (L << 1) + (a ? 1 : 0), 3), x(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, l + 1), s(e, e.dyn_ltree, e.dyn_dtree)), n(e), a && o(e)
            }

            function D(t, n, r) {
                return t.pending_buf[t.d_buf + 2 * t.last_lit] = n >>> 8 & 255, t.pending_buf[t.d_buf + 2 * t.last_lit + 1] = 255 & n, t.pending_buf[t.l_buf + t.last_lit] = 255 & r, t.last_lit++, 0 === n ? t.dyn_ltree[2 * r]++ : (t.matches++, n--, t.dyn_ltree[2 * (se[r] + U + 1)]++, t.dyn_dtree[2 * e(n)]++), t.last_lit === t.lit_bufsize - 1
            }

            var _ = a("../utils/common"), E = 4, S = 0, T = 1, I = 2, O = 0, R = 1, L = 2, P = 3, N = 258, M = 29,
                U = 256, F = U + 1 + M, H = 30, V = 19, G = 2 * F + 1, W = 15, $ = 16, Y = 7, X = 256, Z = 16, K = 17,
                Q = 18, J = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0],
                ee = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13],
                te = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7],
                ne = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], re = 512,
                ie = new Array(2 * (F + 2));
            d(ie);
            var ae = new Array(2 * H);
            d(ae);
            var oe = new Array(re);
            d(oe);
            var se = new Array(N - P + 1);
            d(se);
            var ce = new Array(M);
            d(ce);
            var de = new Array(H);
            d(de);
            var le, ue, fe, he = function (e, t, n, r, i) {
                this.static_tree = e, this.extra_bits = t, this.extra_base = n, this.elems = r, this.max_length = i, this.has_stree = e && e.length
            }, pe = function (e, t) {
                this.dyn_tree = e, this.max_code = 0, this.stat_desc = t
            }, me = !1;
            b._tr_init = z, b._tr_stored_block = A, b._tr_flush_block = C, b._tr_tally = D, b._tr_align = B
        }, {"../utils/common": 27}],
        39: [function (e, t) {
            function c() {
                this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0
            }

            t.exports = c
        }, {}]
    }, {}, [9])(9)
}),define("devices/wedo/wedo-template", ["../../files", "shared/data-utils", "jszip"], function (e, t, n) {
    var r = {};
    return r.save = function (r, i) {
        for (var a = [], o = [], s = 0; 2 * r > s; s++) {
            var c = String.fromCharCode(65 + s);
            a.push("motor " + c);
            var d = "sensor" + c;
            o.push(["r", d, d])
        }
        var l = new XMLHttpRequest, u = "wedo_xn_template.sb2";
        l.open("GET", "../scratch/" + u, !0), l.responseType = "arraybuffer", l.onload = function (s) {
            var c = l.response, d = new n;
            d.load(c);
            var u = "project.json", f = JSON.parse(d.file(u).asText()), h = f.info.savedExtensions[0];
            t.insertArrayInto(h.menus.translate, a), t.insertArrayInto(h.menus.motor, a), h.blockSpecs = h.blockSpecs.concat(o), h.extensionName = "WeDo x" + r, h.url = "http://www.picaxe.com/s2bot", d.file(u, JSON.stringify(f));
            var p = d.generate({type: "blob"}), m = "wedo_x" + r + " _template.sb2";
            e.saveBlob(m, p, i)
        }, l.onerror = function (e) {
            console.error(u + " was not found")
        }, l.send(null)
    }, r
}),define("vendors/vernier/vernier-names", [], function () {
    return {VERNIER: "vernier", GOMOTION: "gomotion", GOTEMP: "gotemp"}
}),define("vendors/vernier/vernier-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./vernier-names"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, s) {
        if (t == o) {
            var l = i.getPathParts(r), u = l[0], f = "";
            switch ("poll" != u && console.log("handle " + r + "@" + (new Date).toLocaleTimeString()), u) {
                case"poll":
                    d.connection.reset(), f = poll();
                    break;
                case"setColor":
                    c[a.GOTEMP].setLED(l[1]);
                    break;
                default:
                    return void console.log("gotemp-http. cmd " + u + " not recognised")
            }
            f += status(), e.send(t, f)
        }
    }

    function status() {
        var e = c[a.GOTEMP].getConnectionCount() + c[a.GOMOTION].getConnectionCount();
        return 0 == e ? "_problem Chrome helper app not communicating with Vernier" + s : "_success Vernier Connected" + s
    }

    function poll() {
        var e = "", t = c[a.GOTEMP].getTemp(), n = c[a.GOMOTION].getDistance();
        return e += "temperature " + t + s, e += "distance " + n + s, e += "sensor/temperature " + t + s, e += "sensor/distance " + n + s
    }

    var o = 17308;
    e.requestMade.add(handleRequest);
    var s = "\n", c = {}, d = {};
    return d.setDeviceHandler = function (e, t) {
        c[t] = e
    }, d.connection = new r(2e3), n.start(o), d
}),define("devices/gotemp/gotemp-usb", ["../usb-handler", "../../hid", "../../vendors/vernier/vernier-http", "../../vendors/vernier/vernier-names", "signals"], function (e, t, n, r, i) {
    function pollCallback(e) {
        if (null != e) {
            var t = new Uint8Array(e), n = Array.prototype.join.call(t);
            if (n == a) return;
            if (a = n, 0 != (192 & t[0])) ; else {
                var r = t[2], i = t[3], o = 128 & i, c = (127 & i) << 8 | r;
                o && (c = -c), s = .0078125 * c, s = Math.round(10 * s) / 10, d.polled.dispatch(s)
            }
        }
    }

    var a, o = {vendorId: 2295, productId: 2}, s = 0, c = new e(r.GOTEMP, o, pollCallback, 3);
    t.addHandler(c);
    var d = {};
    return d.getConnectionCount = function () {
        return c.connections.length
    }, d.getTemp = function () {
        return s
    }, d.setLED = function (e) {
        var t = c.connections[0].connectionId;
        if (t) {
            var n, i, a;
            e == r.COLORS.RED ? (n = 29, i = 64, a = 16) : e == r.COLORS.GREEN ? (n = 29, i = 128, a = 16) : e == r.COLORS.ORANGE ? (n = 29, i = 0, a = 4) : (n = 29, i = 192, a = 16);
            var o = new Uint8Array([n, i, a, 0, 0, 0, 0]);
            chrome.hid.send(t, 0, o.buffer, function () {
            })
        }
    }, d.polled = new i, n.setDeviceHandler(d, r.GOTEMP), d
}),define("shared/app-utils", [], function () {
    var e = {};
    return e.addCloseHandler = function (e) {
        chrome.runtime.getBackgroundPage(function (t) {
            chrome.app.window.current().onClosed.addListener(function () {
                e(t)
            })
        })
    }, e
}),define("devices/gomotion/gomotion-usb", ["../usb-handler", "../../hid", "shared/app-utils", "../../vendors/vernier/vernier-http", "../../vendors/vernier/vernier-names", "signals"], function (e, t, n, r, i, a) {
    function pollCallback(e) {
        if (null != e) {
            var t = new Uint8Array(e), n = Array.prototype.join.call(t, ",");
            if (n == o) return;
            o = n;
            var r = t[2], i = t[3], a = t[4], s = t[5], d = (127 & s) << 24 | a << 16 | i << 8 | r;
            c = d / 1e6, c = Math.round(1e3 * c) / 1e3, l.polled.dispatch(c)
        }
    }

    function connectedAdded(e) {
        console.log("gomotion. sending initialise command");
        var t = new Uint8Array([26, 2, 0, 0, 0, 0, 0]);
        chrome.hid.send(e.connectionId, 0, t.buffer, function () {
            console.log("gomotion. initialised. setting measurement period set"), t = new Uint8Array([27, 40, 0, 0, 0, 0, 0]), chrome.hid.send(e.connectionId, 0, t.buffer, function () {
                console.log("gomotion. measurement period set. sending start command"), t = new Uint8Array([24, 0, 0, 0, 0, 0, 0]), chrome.hid.send(e.connectionId, 0, t.buffer, function () {
                    console.log("gomotion. start command sent")
                })
            })
        })
    }

    var o, s = {vendorId: 2295, productId: 4}, c = 0, d = new e(i.GOMOTION, s, pollCallback, 3);
    t.addHandler(d), d.connectionAdded.add(connectedAdded), n.addCloseHandler(function (e) {
        var t = d.connections[0];
        if (e.console.log("gomotion. clearing up USB connection"), t) {
            e.console.log("gomotion. sending stop command to " + t.connectionId);
            var n = new Uint8Array([25, 0, 0, 0, 0, 0, 0]);
            e.chrome.hid.send(t.connectionId, 0, n.buffer, function () {
                e.console.log("gomotion. stop command sent")
            })
        }
    });
    var l = {};
    return l.getConnectionCount = function () {
        return d.connections.length
    }, l.getDistance = function () {
        return c
    }, l.getOutputReport = function () {
        return o
    }, l.polled = new a, r.setDeviceHandler(l, i.GOMOTION), l
}),define("usb-command-queue", [], function () {
    function USBCommandQueue(e, t, n) {
        function readyForNext() {
            clearTimeout(i), i = setTimeout(function () {
                a.next()
            }, t)
        }

        function nextCommandInCycle() {
            var e = n[s];
            return s++, s >= n.length && (s = 0), e
        }

        var r, i, a = this, o = [], s = 0;
        a.next = function () {
            var e = o.shift();
            e || (e = nextCommandInCycle()), e && e(readyForNext)
        }, a.queue = function (e) {
            o.push(e)
        }, a.send = function (t, n) {
            n || (n = function () {
            });
            var r = e.connections[0].connectionId;
            chrome.hid.send(r, 0, t.buffer, n)
        }, a.listen = function (t) {
            var n = e.connections[0].connectionId;
            chrome.hid.receive(n, function (e, n) {
                if (chrome.runtime.lastError) return void console.log("poll lastError:" + chrome.runtime.lastError.message);
                var i = new Uint8Array(n), a = Array.prototype.join.call(i);
                a != r && (r = a, t(i))
            })
        }
    }

    return USBCommandQueue
}),define("devices/lpcudb/lpcudb-names", [], function () {
    return {NAME: "lpcudb"}
}),define("devices/lpcudb/lpcudb-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./lpcudb-names"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, a) {
        if (t == o) {
            var c = i.getPathParts(r), l = c[0], u = "";
            switch ("poll" != l && console.log("handle " + r + "@" + (new Date).toLocaleTimeString()), l) {
                case"poll":
                    d.connection.reset(), u = poll();
                    break;
                case"toggleLED":
                    s.toggleLED();
                    break;
                default:
                    return void console.log("gotemp-http. cmd " + l + " not recognised")
            }
            u += i.getStatus("LPCUDB", s.getConnectionCount()), e.send(t, u)
        }
    }

    function poll() {
        var e = "", t = s.getPotValue(), n = s.getButtonValue();
        return e += "pot " + t + c, e += "button " + n + c, e += "sensor/pot " + t + c, e += "sensor/button " + n + c
    }

    var o = 17315;
    e.requestMade.add(handleRequest);
    var s, c = "\n", d = {};
    return d.setDeviceHandler = function (e) {
        s = e
    }, d.connection = new r(2e3), n.start(o), d
}),define("devices/lpcudb/lpcudb-usb", ["../usb-handler", "../../hid", "../../usb-command-queue", "./lpcudb-http", "./lpcudb-names", "signals"], function (e, t, n, r, i, a) {
    function makeCommand(e) {
        var t = 64, n = new Uint8Array(t);
        n[0] = e;
        for (var r = 1; t > r; r++) n[r] = 255;
        return n
    }

    function sendCommand(e, t) {
        h.send(makeCommand(e), t)
    }

    function requestButton(e) {
        h.listen(function (t) {
            var n = t[1];
            c = n, dispatch(), e()
        }), sendCommand(f)
    }

    function requestPot(e) {
        h.listen(function (t) {
            var n = t[1], r = t[2];
            s = r << 8 | n, dispatch(), e()
        }), sendCommand(u)
    }

    function toggleLEDCommand(e) {
        sendCommand(l, e)
    }

    function dispatch() {
        p.polled.dispatch(s, c)
    }

    var o = {vendorId: 1240, productId: 63}, s = 0, c = 0, d = new e(i.NAME, o);
    d.autoPoll = !1, t.addHandler(d), d.connectionAdded.add(function () {
        h.next()
    });
    var l = 128, u = 55, f = 129, h = new n(d, 20, [requestButton, requestPot]), p = {};
    return p.getConnectionCount = function () {
        return d.connections.length
    }, p.getPotValue = function () {
        return s
    }, p.getButtonValue = function () {
        return c
    }, p.toggleLED = function () {
        h.queue(toggleLEDCommand)
    }, p.polled = new a, r.setDeviceHandler(p), p
}),define("devices/picoboard/picoboard-names", [], function () {
    var e = {
        SLIDER: "slider",
        LIGHT: "light",
        SOUND: "sound",
        BUTTON: "button",
        RESISTANCEA: "resistance-A",
        RESISTANCEB: "resistance-B",
        RESISTANCEC: "resistance-C",
        RESISTANCED: "resistance-D"
    }, t = [];
    for (var n in e) t.push(e[n]);
    return {IDS: e, SENSORS: t, NAME: "picoboard"}
}),define("devices/picoboard/picoboard-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./picoboard-names"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, a) {
        if (t == o) {
            var c = i.getPathParts(r), d = c[0], u = "";
            switch ("poll" != d && console.log("handle " + r + "@" + (new Date).toLocaleTimeString()), d) {
                case"poll":
                    l.connection.reset(), u = poll();
                    break;
                default:
                    return void console.log("picoboard-http. cmd " + d + " not recognised")
            }
            u += i.getStatus("Picoboard", s.getConnectionCount()), e.send(t, u)
        }
    }

    function poll() {
        var e = "", t = "";
        return c.forEach(function (n) {
            var r = n + " " + s.getSensor(n) + d;
            e += r, t += "sensor/" + r
        }), e + t
    }

    var o = 17302;
    e.requestMade.add(handleRequest);
    var s, c = a.SENSORS, d = "\n", l = {};
    return l.setDeviceHandler = function (e) {
        s = e
    }, l.connection = new r(2e3), n.start(o), l
}),define("devices/picoboard/picoboard-serial", ["./../../serial/serial", "./picoboard-names", "./picoboard-http", "signals"], function (e, t, n, r) {
    function startPoll() {
        s = setInterval(function () {
            poll()
        }, 50)
    }

    function poll() {
        var e = new Uint8Array(1);
        e[0] = 1, chrome.serial.send(c, e.buffer, function (e) {
            e.error && (console.warn("chrome.serial.send " + e.error), f.disconnect())
        })
    }

    function processData() {
        var n = new Uint8Array(l);
        u[15] = 0;
        for (var r = 0; 9 > r; ++r) {
            var s = 127 & n[2 * r], c = s >> 3, h = 127 & n[2 * r + 1];
            u[c] = ((7 & s) << 7) + h
        }
        d && 4 == u[15] && (clearTimeout(d), d = null, e.connected.dispatch(t.NAME));
        for (var p in o) {
            var m = u[a[p]];
            p == i.light ? m = 25 > m ? 100 - m : Math.round((1023 - m) * (75 / 998)) : p == i.BUTTON ? m = 10 > m ? 0 : 1 : p == i.SOUND ? (m = Math.max(0, m - 18), m = 50 > m ? m / 2 : 25 + Math.min(75, Math.round((m - 50) * (75 / 580)))) : m = 100 * m / 1023, o[p] = Math.round(m)
        }
        f.polled.dispatch(), l = null
    }

    function appendBuffer(e, t) {
        var n = new Uint8Array(e.byteLength + t.byteLength);
        return n.set(new Uint8Array(e), 0), n.set(new Uint8Array(t), e.byteLength), n.buffer
    }

    var i = t.IDS, a = {};
    a[i.SLIDER] = 7, a[i.LIGHT] = 5, a[i.SOUND] = 6, a[i.BUTTON] = 3, a[i.RESISTANCEA] = 4, a[i.RESISTANCEB] = 2, a[i.RESISTANCEC] = 1, a[i.RESISTANCED] = 0;
    var o = {};
    o[i.SLIDER] = 0, o[i.LIGHT] = 0, o[i.SOUND] = 0, o[i.BUTTON] = 0, o[i.RESISTANCEA] = 0, o[i.RESISTANCEB] = 0, o[i.RESISTANCEC] = 0, o[i.RESISTANCED] = 0;
    var s, c, d, l, u = [], f = {};
    return f.selectedPort = null, f.polled = new r, f.getSensor = function (e) {
        return o[e]
    }, f.getConnectionCount = function () {
        return null != c ? 1 : 0
    }, f.connectTo = function (n) {
        var r = {bitrate: 38400, dataBits: "eight", stopBits: "one", parityBit: "no", ctsFlowControl: !1};
        chrome.serial.connect(n, r, function (n) {
            return console.log("connected"), console.dir(n), chrome.runtime.lastError ? (console.error(chrome.runtime.lastError.message), void e.disconnected.dispatch(t.NAME)) : (c = n.connectionId, startPoll(), d = setTimeout(function () {
                console.warn("picoboard connection timed out"), f.disconnect()
            }, 2e3), void chrome.serial.onReceive.addListener(function (e) {
                var t = e.data;
                l = l && 18 != l.byteLength ? appendBuffer(l, t) : new Uint8Array(t), l.byteLength >= 18 && processData()
            }))
        })
    }, f.disconnect = function () {
        clearInterval(s), chrome.serial.disconnect(c, function (n) {
            c = null, e.disconnected.dispatch(t.NAME)
        })
    }, n.setDeviceHandler(f), f
}),define("connection-status", [], function () {
    function ConnectionStatus(e, t, n, r, i) {
        r.connected.add(function (n) {
            n == t && i.getConnectionCount() > 0 && (e.find(".device-connection .connected").show(), e.find(".device-connection .not-connected").hide())
        }), r.disconnected.add(function (n) {
            n == t && 0 == i.getConnectionCount() && (e.find(".device-connection .connected").hide(), e.find(".device-connection .not-connected").show())
        }), n.connection.connected.add(function () {
            e.find(".scratch-connection .connected").show(), e.find(".scratch-connection .not-connected").hide()
        }), n.connection.disconnected.add(function () {
            e.find(".scratch-connection .connected").hide(), e.find(".scratch-connection .not-connected").show()
        })
    }

    return ConnectionStatus
}),define("text", ["module"], function (e) {
    function useDefault(e, t) {
        return void 0 === e || "" === e ? t : e
    }

    function isSamePort(e, t, n, r) {
        if (t === r) return !0;
        if (e === n) {
            if ("http" === e) return useDefault(t, "80") === useDefault(r, "80");
            if ("https" === e) return useDefault(t, "443") === useDefault(r, "443")
        }
        return !1
    }

    var t, n, r, i, a, o = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"],
        s = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im, c = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
        d = "undefined" != typeof location && location.href,
        l = d && location.protocol && location.protocol.replace(/\:/, ""), u = d && location.hostname,
        f = d && (location.port || void 0), h = {}, p = e.config && e.config() || {};
    return t = {
        version: "2.0.15", strip: function (e) {
            if (e) {
                e = e.replace(s, "");
                var t = e.match(c);
                t && (e = t[1])
            } else e = "";
            return e
        }, jsEscape: function (e) {
            return e.replace(/(['\\])/g, "\\$1").replace(/[\f]/g, "\\f").replace(/[\b]/g, "\\b").replace(/[\n]/g, "\\n").replace(/[\t]/g, "\\t").replace(/[\r]/g, "\\r").replace(/[\u2028]/g, "\\u2028").replace(/[\u2029]/g, "\\u2029")
        }, createXhr: p.createXhr || function () {
            var e, t, n;
            if ("undefined" != typeof XMLHttpRequest) return new XMLHttpRequest;
            if ("undefined" != typeof ActiveXObject) for (t = 0; 3 > t; t += 1) {
                n = o[t];
                try {
                    e = new ActiveXObject(n)
                } catch (r) {
                }
                if (e) {
                    o = [n];
                    break
                }
            }
            return e
        }, parseName: function (e) {
            var t, n, r, i = !1, a = e.lastIndexOf("."), o = 0 === e.indexOf("./") || 0 === e.indexOf("../");
            return -1 !== a && (!o || a > 1) ? (t = e.substring(0, a), n = e.substring(a + 1)) : t = e, r = n || t, a = r.indexOf("!"), -1 !== a && (i = "strip" === r.substring(a + 1), r = r.substring(0, a), n ? n = r : t = r), {
                moduleName: t,
                ext: n,
                strip: i
            }
        }, xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/, useXhr: function (e, n, r, i) {
            var a, o, s, c = t.xdRegExp.exec(e);
            return c ? (a = c[2], o = c[3], o = o.split(":"), s = o[1], o = o[0], (!a || a === n) && (!o || o.toLowerCase() === r.toLowerCase()) && (!s && !o || isSamePort(a, s, n, i))) : !0
        }, finishLoad: function (e, n, r, i) {
            r = n ? t.strip(r) : r, p.isBuild && (h[e] = r), i(r)
        }, load: function (e, n, r, i) {
            if (i && i.isBuild && !i.inlineText) return void r();
            p.isBuild = i && i.isBuild;
            var a = t.parseName(e), o = a.moduleName + (a.ext ? "." + a.ext : ""), s = n.toUrl(o),
                c = p.useXhr || t.useXhr;
            return 0 === s.indexOf("empty:") ? void r() : void(!d || c(s, l, u, f) ? t.get(s, function (n) {
                t.finishLoad(e, a.strip, n, r)
            }, function (e) {
                r.error && r.error(e)
            }) : n([o], function (e) {
                t.finishLoad(a.moduleName + "." + a.ext, a.strip, e, r)
            }))
        }, write: function (e, n, r, i) {
            if (h.hasOwnProperty(n)) {
                var a = t.jsEscape(h[n]);
                r.asModule(e + "!" + n, "define(function () { return '" + a + "';});\n")
            }
        }, writeFile: function (e, n, r, i, a) {
            var o = t.parseName(n), s = o.ext ? "." + o.ext : "", c = o.moduleName + s,
                d = r.toUrl(o.moduleName + s) + ".js";
            t.load(c, r, function (n) {
                var r = function (e) {
                    return i(d, e)
                };
                r.asModule = function (e, t) {
                    return i.asModule(e, d, t)
                }, t.write(e, c, r, a)
            }, a)
        }
    }, "node" === p.env || !p.env && "undefined" != typeof process && process.versions && process.versions.node && !process.versions["node-webkit"] && !process.versions["atom-shell"] ? (n = require.nodeRequire("fs"), t.get = function (e, t, r) {
        try {
            var i = n.readFileSync(e, "utf8");
            "\ufeff" === i[0] && (i = i.substring(1)), t(i)
        } catch (a) {
            r && r(a)
        }
    }) : "xhr" === p.env || !p.env && t.createXhr() ? t.get = function (e, n, r, i) {
        var a, o = t.createXhr();
        if (o.open("GET", e, !0), i) for (a in i) i.hasOwnProperty(a) && o.setRequestHeader(a.toLowerCase(), i[a]);
        p.onXhr && p.onXhr(o, e), o.onreadystatechange = function (t) {
            var i, a;
            4 === o.readyState && (i = o.status || 0, i > 399 && 600 > i ? (a = new Error(e + " HTTP status: " + i), a.xhr = o, r && r(a)) : n(o.responseText), p.onXhrComplete && p.onXhrComplete(o, e))
        }, o.send(null)
    } : "rhino" === p.env || !p.env && "undefined" != typeof Packages && "undefined" != typeof java ? t.get = function (e, t) {
        var n, r, i = "utf-8", a = new java.io.File(e), o = java.lang.System.getProperty("line.separator"),
            s = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a), i)), c = "";
        try {
            for (n = new java.lang.StringBuffer, r = s.readLine(), r && r.length() && 65279 === r.charAt(0) && (r = r.substring(1)), null !== r && n.append(r); null !== (r = s.readLine());) n.append(o), n.append(r);
            c = String(n.toString())
        } finally {
            s.close()
        }
        t(c)
    } : ("xpconnect" === p.env || !p.env && "undefined" != typeof Components && Components.classes && Components.interfaces) && (r = Components.classes, i = Components.interfaces, Components.utils["import"]("resource://gre/modules/FileUtils.jsm"), a = "@mozilla.org/windows-registry-key;1" in r, t.get = function (e, t) {
        var n, o, s, c = {};
        a && (e = e.replace(/\//g, "\\")), s = new FileUtils.File(e);
        try {
            n = r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream), n.init(s, 1, 0, !1), o = r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream), o.init(n, "utf-8", n.available(), i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER), o.readString(n.available(), c), o.close(), n.close(), t(c.value)
        } catch (d) {
            throw new Error((s && s.path || "") + ": " + d)
        }
    }), t
}),define("text!partials/_picoboard.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n        <div class="connection device-connection">\r\n            <div class="connected">Picoboard is connected</div>\r\n            <div class="not-connected">Picoboard is not connected</div>\r\n        </div>\r\n        <div class="connection scratch-connection">\r\n            <div class="connected">Scratch is connected</div>\r\n            <div class="not-connected">Scratch is not connected</div>\r\n        </div>\r\n        <div class="table-wrapper">\r\n            <table class="table">\r\n                <colgroup>\r\n                    <col />\r\n                    <col />\r\n                </colgroup>\r\n                <tbody>{sensorHTML}</tbody>\r\n            </table>\r\n        </div>\r\n        </div>\r\n</div>'
}),define("devices/picoboard/picoboard-ui", ["jquery", "signals", "../../ui", "../../serial/serial", "../../connection-status", "./picoboard-names", "./picoboard-http", "./picoboard-serial", "text!partials/_picoboard.html"], function (e, t, n, r, i, a, o, s, c) {
    function updateDisplay() {
        l.forEach(function (t) {
            var n = d + "-" + t;
            e("#" + n + " td").html(s.getSensor(t))
        })
    }

    var d = a.NAME, l = a.SENSORS, u = "";
    l.forEach(function (e) {
        var t = d + "-" + e;
        u += '<tr id="' + t + '">      <th>' + e + ":</th>      <td></td>    </tr>"
    }), c = c.replace("{sensorHTML}", u);
    var f = n.add(d, "Picoboard", c, 2);
    new i(f, d, o, r, s);
    s.polled.add(updateDisplay)
}),define("devices/sphero/sphero-names", [], function () {
    return {NAME: "sphero"}
}),define("devices/sphero/sphero-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./sphero-names"], function (e, t, n, r, i, a) {
    function val(e) {
        return parseFloat(e)
    }

    function getRGB(e) {
        var t = [255, 255, 255];
        switch (e) {
            case"off":
                t = [0, 0, 0];
                break;
            case"red":
                t = [255, 0, 0];
                break;
            case"green":
                t = [0, 255, 0];
                break;
            case"blue":
                t = [0, 0, 255];
                break;
            case"orange":
                t = [255, 165, 0];
                break;
            case"yellow":
                t = [255, 255, 0];
                break;
            case"purple":
                t = [128, 0, 128];
                break;
            case"brown":
                t = [139, 69, 19];
                break;
            case"white":
                t = [255, 255, 255]
        }
        return t
    }

    function handleRequest(t, n, r, a) {
        if (t == o) {
            var u = i.getPathParts(r), f = u[0].toLowerCase(), h = "";
            switch ("poll" != f && console.log("handle " + r + "@" + (new Date).toLocaleTimeString()), f) {
                case"poll":
                    l.connection.reset(), h += "speed " + c.getSpeed() + d, h += i.getBusy(p);
                    break;
                case"reset_all":
                    c.sendHeadingAndSpeed(0, 0), c.sendRgb(0, 0, 0), c.sendTailLedOff();
                    break;
                case"stopmoving":
                    c.sendHeadingAndSpeed(0, 0);
                    break;
                case"setheading":
                    c.sendHeading(val(u[1]));
                    break;
                case"setheadingandspeed":
                    c.sendheadingAndSpeed(val(u[1]), val(u[2]));
                    break;
                case"setheadingandspeedfor":
                    c.sendHeadingAndSpeed(val(u[2]), val(u[3])), i.doAfterDelay(u[1], function () {
                        c.sendHeadingAndSpeed(val(u[2]), 0)
                    }, val(u[4]));
                    break;
                case"settaillightonoroff":
                    var p = u[1];
                    switch (p) {
                        case"on":
                            c.sendTailLedOn();
                            break;
                        case"off":
                            c.sendTailLedOff()
                    }
                    break;
                case"settaillightonfor":
                    c.sendTailLedOn(), i.doAfterDelay(s, u[1], function () {
                        c.sendTailLedOff()
                    }, val(u[2]));
                    break;
                case"setcolor":
                    var p = u[1], m = getRGB(p);
                    c.sendRgb(m[0], m[1], m[2]);
                    break;
                case"setcoloronfor":
                    var p = u[2], m = getRGB(p);
                    c.sendRgb(m[0], m[1], m[2]), doAfterDelay(s, u[1], function () {
                        c.sendRgb(0, 0, 0)
                    }, val(u[3]));
                    break;
                case"setrgbcolor":
                    c.sendRgb(val(u[1]), val(u[2]), val(u[3]));
                    break;
                case"setrgbcoloronfor":
                    c.sendRgb(val(u[3]), val(u[4]), val(u[5])), i.doAfterDelay(s, u[1], function () {
                        c.sendRgb(0, 0, 0)
                    }, val(u[6]));
                    break;
                case"setmotiontimeout":
                    c.sendSetMotionTimeout(1e3 * val(u[1]));
                    break;
                default:
                    return void console.log("sphero-http. cmd " + f + " not recognised")
            }
            h += i.getStatus(s, c.getConnectionCount()), e.send(t, h)
        }
    }

    var o = 17307, s = "Sphero";
    e.requestMade.add(handleRequest);
    var c, d = "\n", l = {};
    return l.setDeviceHandler = function (e) {
        c = e
    }, l.connection = new r(2e3), n.start(o), l
}),define("devices/sphero/sphero-commands", [], function () {
    return {
        setHeading: 1,
        setStabilization: 2,
        setRotationRate: 3,
        setCreationDate: 4,
        getBallRegWebsite: 5,
        reEnableDemo: 6,
        getChassisId: 7,
        setChassisId: 8,
        selfLevel: 9,
        setVdl: 10,
        setDataStreaming: 17,
        setCollisionDetection: 18,
        locator: 19,
        setAccelerometer: 20,
        readLocator: 21,
        setRgbLed: 32,
        setBackLed: 33,
        getRgbLed: 34,
        roll: 48,
        boost: 49,
        move: 50,
        setRawMotors: 51,
        setMotionTimeout: 52,
        setOptionsFlag: 53,
        getOptionsFlag: 54,
        setTempOptionFlags: 55,
        getTempOptionFlags: 56,
        getConfigBlock: 64,
        setSsbParams: 65,
        setDeviceMode: 66,
        setConfigBlock: 67,
        getDeviceMode: 68,
        getSsb: 70,
        setSsb: 71,
        ssbRefill: 72,
        ssbBuy: 73,
        ssbUseConsumeable: 74,
        ssbGrantCores: 75,
        ssbAddXp: 76,
        ssbLevelUpAttr: 77,
        getPwSeed: 78,
        ssbEnableAsync: 79,
        runMacro: 80,
        saveTempMacro: 81,
        saveMacro: 82,
        initMacroExecutive: 84,
        abortMacro: 85,
        macroStatus: 86,
        setMacroParam: 87,
        appendTempMacroChunk: 88,
        eraseOBStorage: 96,
        appendOBFragment: 97,
        execOBProgram: 98,
        abortOBProgram: 99,
        answerInput: 100,
        commitToFlash: 101,
        commitToFlashAlias: 112
    }
}),define("devices/sphero/sphero-serial", ["../../serial/serial", "./sphero-names", "./sphero-http", "./sphero-commands", "signals"], function (e, t, n, r, i) {
    function sendPacket(e, t) {
        var n = Array.prototype.slice.call(arguments, 2), r = c, i = n.length + 1, o = r + t + s + i,
            l = [255, 255, r, t, s, i];
        n.forEach(function (e) {
            l.push(e), o += e
        }), o = o % 256 ^ 255, l.push(o);
        var u = new Uint8Array(l);
        s = s + 1 & 255, chrome.serial.send(a, u.buffer, function (t) {
            console.log("sent data"), t.error && (console.warn("chrome.serial.send " + t.error), d.disconnect()), e && e()
        }), d.updated.dispatch()
    }

    function receiveHandler(e) {
        var t = e.data;
        console.log("onReceive", t)
    }

    var a, o = 0, s = 0, c = 2, d = {};
    return d.updated = new i, d.getSpeed = function () {
        return o
    }, d.sendHeading = function (e) {
        var t = Math.floor(e / 256), n = e % 256, i = 0;
        sendPacket(function () {
            setTimeout(function () {
                sendPacket(null, r.setHeading, 0, 0)
            }, 500)
        }, r.roll, i, t, n, 0)
    }, d.sendHeadingAndSpeed = function (e, t) {
        var n = Math.floor(e / 256), i = e % 256;
        o = t, sendPacket(null, r.roll, t, n, i, t > 0 ? 1 : 0)
    }, d.sendRgb = function (e, t, n) {
        sendPacket(null, r.setRgbLed, e, t, n, 255)
    }, d.sendSetMotionTimeout = function (e) {
        var t = Math.floor(e / 256), n = e % 256;
        sendPacket(null, r.setMotionTimeout, t, n)
    }, d.sendTailLedOff = function () {
        sendPacket(null, r.setBackLed, 0)
    }, d.sendTailLedOn = function () {
        sendPacket(null, r.setBackLed, 255)
    }, d.getConnectionCount = function () {
        return null != a ? 1 : 0
    }, d.connectTo = function (n) {
        console.log("sphero start connect");
        var r = {
            bitrate: 9600,
            dataBits: "eight",
            stopBits: "one",
            parityBit: "no",
            ctsFlowControl: !1,
            bufferSize: 256
        };
        chrome.serial.connect(n, r, function (n) {
            return chrome.runtime.lastError ? (console.error("connection. " + chrome.runtime.lastError.message), void e.disconnected.dispatch(t.NAME)) : (a = n.connectionId, chrome.serial.onReceive.addListener(receiveHandler), void e.connected.dispatch(t.NAME))
        })
    }, d.disconnect = function () {
        chrome.serial.onReceive.removeListener(receiveHandler), chrome.serial.disconnect(a, function (n) {
            a = null, e.disconnected.dispatch(t.NAME)
        })
    }, n.setDeviceHandler(d), d
}),define("shared/data-model", ["signals", "shared/storage"], function (e, t) {
    function DataModel(n) {
        var r = this;
        this.value = null, this.valueSet = new e, this.set = function (e) {
            r.value = e, r.store(), r.valueSet.dispatch(e)
        }, this.store = function () {
            var e = {};
            e[n] = r.value, t.set(e, function () {
            })
        }, this.restore = function (e) {
            t.get([n], function (t) {
                t[n] && (r.value = t[n]), e && e(r.value)
            })
        }
    }

    return DataModel
}),define("shared/serial-ports", ["signals", "./data-model"], function (e, t) {
    function sortPortsByDigits(e) {
        var t = /\D/g;
        e.sort(function (e, n) {
            return parseInt(e.name.replace(t, ""), 10) - parseInt(n.name.replace(t, ""), 10)
        })
    }

    var n = new t("port");
    return n.inited = new e, n.requestList = function (e) {
        var t = [];
        chrome.serial.getDevices(function (r) {
            var i = -1;
            r.forEach(function (e, n) {
                var r = e.path, i = r.replace("/dev/", "");
                0 != i.indexOf("cu.") && (i = i.replace("tty.", ""), t.push({
                    name: i,
                    id: r,
                    displayName: e.displayName,
                    productId: e.productId,
                    vendorId: e.vendorId
                }))
            }), sortPortsByDigits(t);
            for (var i = -1, a = 0; a < t.length; a++) {
                var o = t[a];
                if (n.value == o.id) {
                    i = a;
                    break
                }
                -1 == i && (0 !== o.name.indexOf("COM") && 0 !== o.name.indexOf("usbserial") && 0 !== o.name.indexOf("ttyUSB") || (i = a))
            }
            e(t, i)
        })
    }, n.init = function () {
        n.restore(function () {
            n.inited.dispatch(n.value)
        })
    }, n
}),define("serial/serial-ui", ["jquery", "signals", "shared/serial-ports"], function (e, t, n) {
    e("#port-disconnect").click(function (t) {
        e(t.currentTarget).hide(), a.disconnectRequest.dispatch()
    }), e("#port-connect").click(function (t) {
        e(t.currentTarget).hide(), a.portSelected.dispatch(r)
    });
    var r, i = e("#port-selection .dropdown button");
    i.click(function () {
        a.makePortMenu()
    });
    var a = {};
    return a.portSelected = new t, a.disconnectRequest = new t, a.showConnect = function (t) {
        e("#port-connect").toggle(t)
    }, a.showDisconnect = function (t) {
        e("#port-disconnect").toggle(t)
    }, a.showPortMenu = function (t) {
        e("#port-selection").toggle(t)
    }, a.makePortMenu = function (t, a) {
        n.requestList(function (n) {
            function addOption(e, t) {
                o.append('<li role="presentation"><a data-value="' + e + '" role="menuitem" tabindex="-1" href="#">' + t + "</a></li>")
            }

            var o = e("#port-selection .dropdown ul");
            o.empty();
            var s = -1;
            n.length ? n.forEach(function (e, n) {
                addOption(e.id, e.name), e.id == t && (s = n)
            }) : (addOption("", "No ports available"), o.find("li").addClass("disabled")), o.find("li a").click(function (t) {
                console.log("port selected");
                var n = e(t.currentTarget), o = n.data("value");
                r = o, i.find(".dropdown-label").text(n.text()), a || e("#port-connect").show()
            }), s > -1 && o.find("li a").eq(s).click()
        })
    }, a
}),define("text!partials/_sphero.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n        <div class="connection device-connection">\r\n            <div class="connected">Sphero is connected</div>\r\n            <div class="not-connected">Sphero is not connected</div>\r\n        </div>\r\n        <div class="connection scratch-connection">\r\n            <div class="connected">Scratch is connected</div>\r\n            <div class="not-connected">Scratch is not connected</div>\r\n        </div>\r\n        <div id="sphero-speed" class="disp well">\r\n          <span class="lbl">Speed:</span>\r\n          <span class="val">-</span>\r\n        </div>\r\n      </div>\r\n  </div>'
}),define("devices/sphero/sphero-ui", ["jquery", "signals", "../../ui", "../../serial/serial", "../../serial/serial-ui", "./sphero-names", "./sphero-http", "./sphero-serial", "text!partials/_sphero.html"], function (e, t, n, r, i, a, o, s, c) {
    function isSerialConnected() {
        return s.getConnectionCount() > 0
    }

    function el(t) {
        return e("#pane-" + d + " " + t)
    }

    var d = a.NAME;
    n.add(d, "Sphero", c, 2), r.connected.add(function (e) {
        e == d && isSerialConnected() && (el(".device-connection .connected").show(), el(".device-connection .not-connected").hide())
    }), r.disconnected.add(function (e) {
        e != d || isSerialConnected() || (el(".device-connection .connected").hide(), el(".device-connection .not-connected").show())
    }), o.connection.connected.add(function () {
        el(".scratch-connection .connected").show(), el(".scratch-connection .not-connected").hide()
    }), o.connection.disconnected.add(function () {
        el(".scratch-connection .connected").hide(), el(".scratch-connection .not-connected").show()
    }), s.updated.add(function () {
        e("#sphero-speed .val").text(s.getSpeed())
    })
}),define("devices/sbrick/sbrick-constants", [], function () {
    var e = {
        MOTORA: "motorA",
        MOTORB: "motorB",
        MOTORC: "motorC",
        MOTORD: "motorD",
        LED1: "LED1",
        MOTORE: "motorE",
        MOTORF: "motorF",
        MOTORG: "motorG",
        MOTORH: "motorH",
        LED2: "LED2",
        MOTORI: "motorI",
        MOTORJ: "motorJ",
        MOTORK: "motorK",
        MOTORL: "motorL",
        LED3: "LED3"
    }, t = [];
    for (var n in e) t.push(e[n]);
    return {
        NAME: "sbrick",
        DISPLAY_NAME: "SBrick",
        SMALL_HEADER: "Scanning: switch SBrick power on",
        HANDLER_NAME: "sbrick",
        IDS: e,
        MOTORS: t,
        MAX_CONNECTIONS: 1
    }
}),define("devices/sbrick/sbrick-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./sbrick-constants"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, d) {
        if (t == o) {
            var l = i.getPathParts(r), u = l.shift(), f = "";
            if (s && s.getConnectionCount() > 0) {
                switch (u) {
                    case"poll":
                        f += i.getBusy(a.NAME), c.connection.reset();
                        break;
                    default:
                        s && s.getConnectionCount() > 0 && s.doCommand(u, l)
                }
                f += i.getStatus(a.NAME, s.getConnectionCount())
            } else f = i.getStatus(a.NAME, 0), c.connection.reset();
            e.send(t, f)
        }
    }

    var o = 17310;
    e.requestMade.add(handleRequest);
    var s, c = {};
    return c.setDeviceHandler = function (e) {
        s = e
    }, c.connection = new r(2e3), n.start(o), c
}),define("devices/sbrick/sbrick-ble", ["shared/ble/ble", "../../scratch-utils", "./sbrick-constants", "./sbrick-http", "signals"], function (e, t, n, r, i) {
    function getMotors(e) {
        var t = e.replace(" ", ""), r = n.MOTORS, i = r.indexOf(t);
        return i > -1 ? [d[i]] : d
    }

    function setMotorOn(e, t) {
        var n = getMotors(e);
        n.forEach(function (e) {
            e.on = t
        }), setMotors()
    }

    function setMotors() {
        var e = d.map(function (e) {
            return getMotorSpeedByte(e.on, e.speed, e.dir)
        });
        l.updated.dispatch();
        var t = c.handler.getCommand(s.SET_MOTORS);
        a.addPromise(function () {
            return t.execute.apply(t, e)
        })
    }

    function setLED(e, t) {
        var n;
        "flashing" == t ? n = c.handler.getCommand(s.LED_FLASH) : "green" == t && (n = c.handler.getCommand(s.LED_GREEN)), n && (o[0] = t, l.updated.dispatch(), a.addPromise(function () {
            return n.execute()
        }))
    }

    function getMotorSpeedByte(e, t, n) {
        return t = e ? Math.floor(126 * t / 100) + 1 : 0, t = n >= 0 ? 2 * t + 0 : 2 * t + 1
    }

    var a, o = ["green", "green", "green"];
    require(["promise-chain"], function (e) {
        a = e
    });
    var s, c, d = [{speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}, {
        speed: 100,
        dir: 0,
        on: !1
    }, {speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}, {
        speed: 100,
        dir: 0,
        on: !1
    }, {speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}, {
        speed: 100,
        dir: 0,
        on: !1
    }, {speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}];
    require(["vendor/sbrick"], function (e) {
        s = e.SBrick
    }), e.connected.add(function (e, t) {
        t.handlerId == n.NAME && (c = t)
    }), e.disconnected.add(function (e, t) {
        t == c && (c = null)
    });
    var l = {};
    return l.updated = new i, l.getConnectionCount = function () {
        return c ? 1 : 0
    }, l.getSpeed = function (e) {
        switch (e) {
            case"LED":
            case"LED1":
                return o[0];
            case"LED2":
                return o[1];
            case"LED3":
                return o[2];
            default:
                var t = getMotors(e);
                if (!t[0].on) return "off";
                var n = 1 == t[0].dir ? "this way " : "that way ";
                return n + t[0].speed
        }
    }, l.doCommand = function (e, r) {
        if (!c.handler) return void console.warn("device not ready");
        switch (e) {
            case"reset_all":
                setMotorOn("everything", !1);
                break;
            case"motorOnFor":
                setMotorOn(r[1], !0), t.doAfterDelay(n.NAME, r[0], function () {
                    setMotorOn(r[1], !1)
                }, parseFloat(r[2]));
                break;
            case"motorOn":
                setMotorOn(r[0], !0);
                break;
            case"motorOff":
                setMotorOn(r[0], !1);
                break;
            case"startMotorPower":
                var i = r[0], a = r[1], o = getMotors(i);
                o.forEach(function (e) {
                    e.on = !0, e.speed = a
                }), setMotors();
                break;
            case"setMotorDirection":
                var i = r[0], s = r[1], d = !1, l = 0;
                "this way" == s ? l = 1 : (s = "that way") ? l = -1 : "reverse" == s ? d = !0 : "other way" == s && (d = !0);
                var o = getMotors(i);
                o.forEach(function (e) {
                    e.on = !0, d ? e.dir = -1 == e.dir ? 1 : -1 : e.dir = l
                }), setMotors();
                break;
            case"setLED":
                var u = r[0], f = r[1];
                null == f && (u = "LED 1", f = r[0]), setLED(u, f);
                break;
            default:
                console.warn("doCommand", e, "not recognised")
        }
    }, r.setDeviceHandler(l), l.updated.dispatch(), l
}),define("text!partials/_sbrick.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n      <div class="connection device-connection">\r\n        <div class="connected">SBrick is connected</div>\r\n        <div class="not-connected">SBrick is not connected</div>\r\n      </div>\r\n      <div class="connection scratch-connection">\r\n        <div class="connected">Scratch is connected</div>\r\n        <div class="not-connected">Scratch is not connected</div>\r\n      </div>\r\n        <div class="table-wrapper">\r\n            <table class="table">\r\n                <colgroup>\r\n                    <col />\r\n                    <col />\r\n                </colgroup>\r\n                <tbody>{motorHTML}</tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n'
}),define("devices/sbrick/sbrick-ui", ["jquery", "../../ui", "shared/ble/ble", "../../connection-status", "./sbrick-constants", "./sbrick-http", "./sbrick-ble", "text!partials/_sbrick.html"], function (e, t, n, r, i, a, o, s) {
    function updateDisplay() {
        u.forEach(function (t) {
            var n = c + "-" + t;
            e("#" + n + " td").html(o.getSpeed(t))
        })
    }

    for (var c = i.NAME, d = i.MOTORS, l = i.IDS, u = [], f = [], h = 5 * i.MAX_CONNECTIONS, p = 0; h > p; p++) u[p] = d[p], f[p] = l[p];
    var m = "";
    u.forEach(function (e) {
        var t = c + "-" + e;
        m += '<tr id="' + t + '">      <th>' + e + ":</th>      <td></td>    </tr>"
    }), s = s.replace("{motorHTML}", m);
    var v = t.add(i.NAME, i.DISPLAY_NAME, s, 2);
    new r(v, i.HANDLER_NAME, a, n, o);
    o.updated.add(updateDisplay)
}),define("devices/wedo2/wedo2-constants", [], function () {
    return {
        NAME: "wedo2",
        DISPLAY_NAME: "WeDo 2.0",
        HANDLER_NAME: "wedo2",
        SMALL_HEADER: "Scanning: press green button on WeDo",
        MAX_CONNECTIONS: 3
    }
}),define("devices/wedo2/wedo2-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./wedo2-constants"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, d) {
        if (t == o) {
            var l = i.getPathParts(r), u = l.shift(), f = "";
            if (s && s.getConnectionCount() > 0) {
                switch (u) {
                    case"poll":
                        f = s.getSensorValues(), f += i.getBusy(a.NAME), c.connection.reset();
                        break;
                    default:
                        s.doCommand(u, l)
                }
                f += i.getStatus(a.NAME, s.getConnectionCount())
            } else f = i.getStatus(a.NAME, 0), c.connection.reset();
            e.send(t, f)
        }
    }

    var o = 17311;
    e.requestMade.add(handleRequest);
    var s, c = {};
    return c.setDeviceHandler = function (e) {
        s = e
    }, c.connection = new r(2e3), n.start(o), c
}),define("devices/wedo2/wedo2-ble", ["signals", "shared/data-utils", "shared/ble/ble", "../../scratch-utils", "./wedo2-constants", "./wedo2-http"], function (e, t, n, r, i, a) {
    function getMotors(e) {
        var t = y.indexOf(e);
        return t > -1 ? [b[t]] : b
    }

    function getWeDoIndex(e) {
        var t = _.indexOf(e.toLowerCase());
        return t > -1 ? t : 0
    }

    function startPoll() {
        stopPoll(), C = setInterval(function () {
            E.forEach(function (e, t) {
                S.polled.dispatch(e.handler.state, t)
            })
        }, o)
    }

    function stopPoll() {
        clearInterval(C), C = null
    }

    function writeName(e, t) {
        var n = getWeDoIndex(e), r = E[n].handler;
        if (!r) return void console.warn("writeName. device not ready");
        var i = bleDataUtils.text2array(t), a = r.getCommand(v.SET_NAME);
        p.addPromise(function () {
            return a.execute.apply(a, i)
        })
    }

    function setSoundOn(e, t, n) {
        var r = getWeDoIndex(e), i = E[r].handler;
        if (!i) return void console.warn("setSoundOn. device not ready");
        var a = i.getCommand(v.PLAY_SOUND);
        p.addPromise(function () {
            return a.execute.apply(a, [t, n])
        })
    }

    function setSoundOff(e) {
    }

    function setLed(e, t) {
        var n = getWeDoIndex(e), r = E[n].handler;
        if (!r) return void console.warn("setLed. device not ready");
        var i = r.getCommand(v.SET_LED), a = g.indexOf(t);
        if ("random" == t && (a = Math.floor(10 * Math.random() + 1)), -1 != a) {
            if (c[n] == a) return;
            c[n] = a, p.addPromise(function () {
                return i.execute.apply(i, [a])
            })
        }
    }

    function setMotorOn(e, t) {
        var n = getMotors(e);
        n.forEach(function (e) {
            e.on = t
        }), setMotors()
    }

    function setMotors() {
        for (var e = b.map(function (e) {
            return getMotorSpeedByte(e.on, e.speed, e.dir)
        }), t = E.length, n = 0; t > n; n++) {
            var r = E[n].handler;
            if (!r) return void console.warn("setMotors. device not ready");
            for (var i = 0; 2 > i; i++) {
                var a = 2 * n + i;
                e[a] != d[a] && (d[a] = e[a], addMotorPromise(r, i + 1, e[a]))
            }
        }
    }

    function addMotorPromise(e, t, n) {
        var r = [t, 1, 1, n], i = e.getCommand(v.SET_MOTORS);
        p.addPromise(function () {
            return i.execute.apply(i, r)
        })
    }

    function getMotorSpeedByte(e, t, n) {
        return e ? (t = Math.min(Math.max(t, 0), 100), t = Math.floor(t), 0 > n && (t = 256 - t & 255), t) : 127
    }

    var o = 150, s = "\n", c = [3, 3, 3], d = [0, 0, 0, 0, 0, 0];
    const l = 1, u = 2, f = 3, h = 4;
    var p, m;
    require(["promise-chain", "promise-utils", "data-utils"], function (e, t, n) {
        p = e, m = t.reduce, bleDataUtils = n.dataUtils
    });
    var v, g = ["off", "pink", "purple", "blue", "sky blue", "teal", "green", "yellow", "orange", "red", "white"],
        b = [{speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}, {
            speed: 100,
            dir: 0,
            on: !1
        }, {speed: 100, dir: 0, on: !1}, {speed: 100, dir: 0, on: !1}],
        y = ["motor A", "motor B", "motor C", "motor D", "motor E", "motor F"], _ = ["wedo 1", "wedo 2", "wedo 3"],
        E = [];
    require(["vendor/wedo2"], function (e) {
        v = e.WeDo2
    }), n.connected.add(function (e, t) {
        t.handlerId == i.NAME && (E.push(t), null == C && startPoll())
    }), n.disconnected.add(function (e, n) {
        -1 != E.indexOf(n) && (t.deleteValue(E, n), 0 == E.length && stopPoll())
    });
    var C, S = {};
    return S.polled = new e, S.getConnectionCount = function () {
        return E.length
    }, S.getSensorValues = function () {
        for (var e = "", t = 0, n = 0, r = E.length, i = 0; r > i; i++) {
            var a = E[i].handler;
            if (!a) return e;
            for (var o = 0; 2 > o; o++) {
                var c = 2 * i + o, d = String.fromCharCode(65 + c), p = a.getSensorValue(o);
                switch (a.getSensorType(o)) {
                    case"tilt":
                        n = p;
                        break;
                    case"distance":
                        t = p;
                        break;
                    case"motor":
                        p = b[c].on ? b[c].speed : 0
                }
                var m = "sensor" + d + " " + p + s;
                e += m
            }
            p = a.getSensorValue(6), m = "button" + (i + 1) + " " + (1 == p ? "true" : "false") + s, e += m, p = a.getSensorValue(2), m = "current" + (i + 1) + " " + p + s, m = m.replace("mA", ""), e += m, p = a.getSensorValue(3), m = "voltage" + (i + 1) + " " + p + s, m = m.replace("V", ""), e += m
        }
        switch (e += "distance " + t + s, e += "tilt " + n + s, n) {
            case l:
                e += "isTilted/any true" + s, e += "isTilted/up false" + s, e += "isTilted/down true" + s, e += "isTilted/left false" + s, e += "isTilted/right false" + s;
                break;
            case u:
                e += "isTilted/any true" + s, e += "isTilted/up false" + s, e += "isTilted/down false" + s, e += "isTilted/left false" + s, e += "isTilted/right true" + s;
                break;
            case f:
                e += "isTilted/any true" + s, e += "isTilted/up true" + s, e += "isTilted/down false" + s, e += "isTilted/left false" + s, e += "isTilted/right false" + s;
                break;
            case h:
                e += "isTilted/any true" + s, e += "isTilted/up false" + s, e += "isTilted/down false" + s, e += "isTilted/left true" + s, e += "isTilted/right false" + s;
                break;
            default:
                e += "isTilted/any false" + s, e += "isTilted/up false" + s, e += "isTilted/down false" + s, e += "isTilted/left false" + s, e += "isTilted/right false" + s
        }
        return e
    }, S.doCommand = function (e, t) {
        switch (e) {
            case"reset_all":
                setMotorOn("everything", !1);
                break;
            case"motorOnFor":
                setMotorOn(t[1], !0), r.doAfterDelay(i.NAME, t[0], function () {
                    setMotorOn(t[1], !1)
                }, parseFloat(t[2]));
                break;
            case"motorOn":
                setMotorOn(t[0], !0);
                break;
            case"motorOff":
                setMotorOn(t[0], !1);
                break;
            case"startMotorPower":
                var n = t[0], a = t[1], o = getMotors(n);
                o.forEach(function (e) {
                    e.on = !0, e.speed = a
                }), setMotors();
                break;
            case"setMotorDirection":
                var s, n = t[0], c = t[1];
                switch (c) {
                    case"this way":
                        s = 1;
                        break;
                    case"that way":
                        s = -1;
                        break;
                    case"reverse":
                    case"other way":
                        s = 0;
                        break;
                    default:
                        return
                }
                var o = getMotors(n);
                o.forEach(function (e) {
                    e.on = !0, -1 == s || 1 == s ? e.dir = s : 0 == s && (e.dir = -e.dir)
                }), setMotors();
                break;
            case"setLight":
            case"setLED":
                var d = t[0], l = t[1];
                null == l && (l = "WeDo 1"), setLed(l, d);
                break;
            case"playSound":
                var u = t[1].replace("%23", "#"), f = t[2], h = parseFloat(t[3]), l = t[4];
                null == l && (l = "WeDo 1");
                var p = 0;
                switch (u) {
                    case"C":
                        p = 16.351;
                        break;
                    case"C#":
                    case"Db":
                        p = 17.324;
                        break;
                    case"D":
                        p = 18.354;
                        break;
                    case"D#":
                    case"Eb":
                        p = 19.445;
                        break;
                    case"E":
                        p = 20.601;
                        break;
                    case"F":
                        p = 21.827;
                        break;
                    case"F#":
                    case"Gb":
                        p = 23.124;
                        break;
                    case"G":
                        p = 24.499;
                        break;
                    case"G#":
                    case"Ab":
                        p = 25.956;
                        break;
                    case"A":
                        p = 27.5;
                        break;
                    case"A#":
                    case"Bb":
                        p = 29.135;
                        break;
                    case"B":
                        p = 30.868
                }
                var m = 0;
                switch (f) {
                    case"0":
                        m = Math.floor(1 * p);
                        break;
                    case"1":
                        m = Math.floor(2 * p);
                        break;
                    case"2":
                        m = Math.floor(4 * p);
                        break;
                    case"3":
                        m = Math.floor(8 * p);
                        break;
                    case"4":
                        m = Math.floor(16 * p);
                        break;
                    case"5":
                        m = Math.floor(32 * p);
                        break;
                    case"6":
                        m = Math.floor(64 * p);
                        break;
                    case"7":
                        m = Math.floor(128 * p);
                        break;
                    case"8":
                        m = Math.floor(256 * p)
                }
                setSoundOn(l, m, 1e3 * h), r.doAfterDelay(i.NAME, t[0], function () {
                    setSoundOff(l)
                }, h);
                break;
            case"playNote":
                var m = parseFloat(t[1]), h = parseFloat(t[2]), l = t[3];
                null == l && (l = "WeDo 1"), setSoundOn(l, m, 1e3 * h), r.doAfterDelay(i.NAME, t[0], function () {
                    setSoundOff(l)
                }, h);
                break;
            case"writeName":
                var v = t[0], l = t[1];
                null == l && (l = "WeDo 1"), v && writeName(l, decodeURIComponent(v));
                break;
            default:
                console.warn("doCommand", e, "not recognised")
        }
    }, a.setDeviceHandler(S), S
}),define("text!partials/_wedo2.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n      <div class="connection device-connection">\r\n        <div class="connected">WeDo 2.0 is connected</div>\r\n        <div class="not-connected">WeDo 2.0 is not connected</div>\r\n      </div>\r\n      <div class="connection scratch-connection">\r\n        <div class="connected">Scratch is connected</div>\r\n        <div class="not-connected">Scratch is not connected</div>\r\n      </div>\r\n      <div class="table-wrapper">\r\n        <table class="table">\r\n          <colgroup>\r\n            <col />\r\n            <col />\r\n            <col />\r\n          </colgroup>\r\n          <tbody>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div class="req">\r\n        <div class="now-time"></div>\r\n        <div class="req-path"></div>\r\n        <div class="req-time"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n'
}),define("devices/wedo2/wedo2-ui", ["jquery", "../../ui", "shared/ble/ble", "../../connection-status", "./wedo2-constants", "./wedo2-http", "./wedo2-ble", "text!partials/_wedo2.html"], function (e, t, n, r, i, a, o, s) {
    function getChar(e) {
        return String.fromCharCode(65 + e)
    }

    function getTBody() {
        return e("#pane-" + i.NAME + " tbody")
    }

    function makeSlotGroup(t) {
        var n = "slot-" + (t + "-0"), r = "slot-" + (t + "-1"), i = 2 * t, a = 2 * t + 1,
            o = '<tr id="' + n + '">        <th>' + getChar(i) + '</th>        <td class="slot-type"></td>        <td class="slot-value"></td>      </tr>      <tr id="' + r + '">        <th>' + getChar(a) + '</th>        <td class="slot-type"></td>        <td class="slot-value"></td>      </tr>',
            s = getTBody();
        s.append(o), s.find("tr").sort(function (e, t) {
            return e.id > t.id
        }).appendTo(s);
        var c = [[e("#" + n + " .slot-type"), e("#" + n + " .slot-value")], [e("#" + r + " .slot-type"), e("#" + r + " .slot-value")]];
        return d[t] = c, c
    }

    function reset(e) {
        i.NAME == e && (getTBody().empty(), makeSlotGroup(0))
    }

    var c = t.add(i.NAME, i.DISPLAY_NAME, s, 2), d = (new r(c, i.HANDLER_NAME, a, n, o), []);
    o.polled.add(function (e, t) {
        var n = d[t];
        n || (n = makeSlotGroup(t)), n.forEach(function (t, n) {
            var r = e[n];
            r && (t[0].text(r.type), t[1].text(r.value))
        })
    }), n.disconnected.add(reset), n.connected.add(reset), reset(i.NAME)
}),define("devices/ollie/ollie-constants", [], function () {
    return {NAME: "ollie", DISPLAY_NAME: "Ollie", HANDLER_NAME: "sphero", SMALL_HEADER: "Scanning for Ollie..."}
}),define("devices/ollie/ollie-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./ollie-constants"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, d) {
        if (t == o) {
            var l = i.getPathParts(r), u = l.shift(), f = "";
            if (s && s.getConnectionCount() > 0) {
                switch (u) {
                    case"poll":
                        f += i.getBusy(a.NAME), c.connection.reset();
                        break;
                    default:
                        s && s.getConnectionCount() > 0 && s.doCommand(u, l)
                }
                f += i.getStatus(a.NAME, s.getConnectionCount())
            } else f = i.getStatus(a.NAME, 0), c.connection.reset();
            e.send(t, f)
        }
    }

    var o = 17312;
    e.requestMade.add(handleRequest);
    var s, c = {};
    return c.setDeviceHandler = function (e) {
        s = e
    }, c.connection = new r(2e3), n.start(o), c
}),define("devices/ollie/ollie-ble", ["shared/ble/ble", "../../scratch-utils", "./ollie-constants", "./ollie-http", "signals"], function (e, t, n, r, i) {
    function val(e) {
        return parseFloat(e)
    }

    function getRgb(e) {
        var t = [255, 255, 255];
        switch (e) {
            case"off":
                t = [0, 0, 0];
                break;
            case"red":
                t = [255, 0, 0];
                break;
            case"green":
                t = [0, 255, 0];
                break;
            case"blue":
                t = [0, 0, 255];
                break;
            case"orange":
                t = [255, 165, 0];
                break;
            case"yellow":
                t = [255, 255, 0];
                break;
            case"purple":
                t = [128, 0, 128];
                break;
            case"brown":
                t = [139, 69, 19];
                break;
            case"white":
                t = [255, 255, 255]
        }
        return t
    }

    function setTailLedOn() {
        if (1 != d) {
            d = !0;
            var e = u.handler.getCommand(l.SET_TAIL_ON);
            a.addPromise(function () {
                return e.execute()
            })
        }
    }

    function setTailLedOff() {
        if (0 != d) {
            d = !1;
            var e = u.handler.getCommand(l.SET_TAIL_OFF);
            a.addPromise(function () {
                return e.execute()
            })
        }
    }

    function setRgb(e, t, n) {
        if (c[0] != e || c[1] != t || c[2] != n) {
            c = [e, t, n];
            var r = u.handler.getCommand(l.SET_RGB);
            a.addPromise(function () {
                return r.execute.apply(r, [e, t, n])
            })
        }
    }

    function setHeadingAndSpeed(e, t) {
        s = t, f.updated.dispatch();
        var n = u.handler.getCommand(l.SET_HEADING_SPEED);
        a.addPromise(function () {
            return n.execute.apply(n, [e, t])
        })
    }

    function setHeading(e) {
        var t = u.handler.getCommand(l.SET_HEADING);
        a.addPromise(function () {
            return t.execute.apply(t, [e]);
        })
    }

    function setMotionTimeout(e) {
        var t = u.handler.getCommand(l.SET_MOTION_TIMEOUT);
        a.addPromise(function () {
            return t.execute.apply(t, [e])
        })
    }

    var a, o, s = 0, c = [0, 0, 0], d = !1;
    require(["promise-chain", "promise-utils"], function (e, t) {
        a = e, o = t.reduce
    });
    var l, u;
    require(["vendor/abstract-sphero"], function (e) {
        l = e.AbstractSphero
    }), e.connected.add(function (e, t) {
        (t.displayName == n.DISPLAY_NAME || t.displayName.startsWith("2B-")) && (u = t)
    }), e.disconnected.add(function (e, t) {
        t == u && (u = null)
    });
    var f = {};
    return f.updated = new i, f.getConnectionCount = function () {
        return u ? 1 : 0
    }, f.getSpeed = function () {
        return s
    }, f.doCommand = function (e, r) {
        if (!u.handler) return void console.warn("device not ready");
        switch (e) {
            case"reset_all":
                setHeadingAndSpeed(0, 0), setRgb(0, 0, 0), setTailLedOff();
                break;
            case"stopMoving":
                setHeadingAndSpeed(0, 0);
                break;
            case"setHeading":
                setHeading(val(r[0]));
                break;
            case"setHeadingAndSpeed":
                setHeadingAndSpeed(val(r[0]), val(r[1]));
                break;
            case"setHeadingAndSpeedFor":
                setHeadingAndSpeed(val(r[1]), val(r[2])), t.doAfterDelay(n.NAME, r[0], function () {
                    setHeadingAndSpeed(val(r[1]), 0)
                }, val(r[3]));
                break;
            case"setTailLightOnOrOff":
                var i = r[0];
                switch (i) {
                    case"on":
                        setTailLedOn();
                        break;
                    case"off":
                        setTailLedOff()
                }
                break;
            case"setTailLightOnFor":
                setTailLedOn(), t.doAfterDelay(n.NAME, r[0], function () {
                    setTailLedOff()
                }, val(r[1]));
                break;
            case"setColor":
                var i = r[0], a = getRgb(i);
                setRgb(a[0], a[1], a[2]);
                break;
            case"setColorOnFor":
                var i = r[1], a = getRgb(i);
                setRgb(a[0], a[1], a[2]), t.doAfterDelay(n.NAME, r[0], function () {
                    setRgb(0, 0, 0)
                }, val(r[2]));
                break;
            case"setRgbColor":
                setRgb(val(r[0]), val(r[1]), val(r[2]));
                break;
            case"setRgbColorOnFor":
                setRgb(val(r[1]), val(r[2]), val(r[3])), t.doAfterDelay(n.NAME, r[0], function () {
                    setRgb(0, 0, 0)
                }, val(r[4]));
                break;
            case"setMotionTimeout":
                setMotionTimeout(1e3 * val(r[0]));
                break;
            default:
                return void console.log("ollie cmd " + cmd + " not recognised")
        }
    }, r.setDeviceHandler(f), f
}),define("text!partials/_ollie.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n        <div class="connection device-connection">\r\n            <div class="connected">Ollie is connected</div>\r\n            <div class="not-connected">Ollie is not connected</div>\r\n        </div>\r\n        <div class="connection scratch-connection">\r\n            <div class="connected">Scratch is connected</div>\r\n            <div class="not-connected">Scratch is not connected</div>\r\n        </div>\r\n        <div id="ollie-speed" class="disp well">\r\n          <span class="lbl">Speed:</span>\r\n          <span class="val">-</span>\r\n        </div>\r\n      </div>\r\n  </div>'
}),define("devices/ollie/ollie-ui", ["jquery", "../../ui", "shared/ble/ble", "../../connection-status", "./ollie-constants", "./ollie-http", "./ollie-ble", "text!partials/_ollie.html"], function (e, t, n, r, i, a, o, s) {
    var c = t.add(i.NAME, i.DISPLAY_NAME, s, 2);
    new r(c, i.HANDLER_NAME, a, n, o);
    o.updated.add(function () {
        e("#ollie-speed .val").text(o.getSpeed())
    })
}),define("devices/bb8/bb8-constants", [], function () {
    return {NAME: "bb8", DISPLAY_NAME: "BB8", HANDLER_NAME: "sphero", SMALL_HEADER: "Scanning for BB8..."}
}),define("devices/bb8/bb8-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./bb8-constants"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, d) {
        if (t == o) {
            var l = i.getPathParts(r), u = l.shift(), f = "";
            if (s && s.getConnectionCount() > 0) {
                switch (u) {
                    case"poll":
                        f += i.getBusy(a.NAME), c.connection.reset();
                        break;
                    default:
                        s && s.getConnectionCount() > 0 && s.doCommand(u, l)
                }
                f += i.getStatus(a.NAME, s.getConnectionCount())
            } else f = i.getStatus(a.NAME, 0), c.connection.reset();
            e.send(t, f)
        }
    }

    var o = 17313;
    e.requestMade.add(handleRequest);
    var s, c = {};
    return c.setDeviceHandler = function (e) {
        s = e
    }, c.connection = new r(2e3), n.start(o), c
}),define("devices/bb8/bb8-ble", ["shared/ble/ble", "../../scratch-utils", "./bb8-constants", "./bb8-http", "signals"], function (e, t, n, r, i) {
    function val(e) {
        return parseFloat(e)
    }

    function getRgb(e) {
        var t = [255, 255, 255];
        switch (e) {
            case"off":
                t = [0, 0, 0];
                break;
            case"red":
                t = [255, 0, 0];
                break;
            case"green":
                t = [0, 255, 0];
                break;
            case"blue":
                t = [0, 0, 255];
                break;
            case"orange":
                t = [255, 165, 0];
                break;
            case"yellow":
                t = [255, 255, 0];
                break;
            case"purple":
                t = [128, 0, 128];
                break;
            case"brown":
                t = [139, 69, 19];
                break;
            case"white":
                t = [255, 255, 255]
        }
        return t
    }

    function setTailLedOn() {
        if (1 != d) {
            d = !0;
            var e = u.handler.getCommand(l.SET_TAIL_ON);
            a.addPromise(function () {
                return e.execute()
            })
        }
    }

    function setTailLedOff() {
        if (0 != d) {
            d = !1;
            var e = u.handler.getCommand(l.SET_TAIL_OFF);
            a.addPromise(function () {
                return e.execute()
            })
        }
    }

    function setRgb(e, t, n) {
        if (c[0] != e || c[1] != t || c[2] != n) {
            c = [e, t, n];
            var r = u.handler.getCommand(l.SET_RGB);
            a.addPromise(function () {
                return r.execute.apply(r, [e, t, n])
            })
        }
    }

    function setHeadingAndSpeed(e, t) {
        s = t, f.updated.dispatch();
        var n = u.handler.getCommand(l.SET_HEADING_SPEED);
        a.addPromise(function () {
            return n.execute.apply(n, [e, t])
        })
    }

    function setHeading(e) {
        var t = u.handler.getCommand(l.SET_HEADING);
        a.addPromise(function () {
            return t.execute.apply(t, [e])
        })
    }

    function setMotionTimeout(e) {
        var t = u.handler.getCommand(l.SET_MOTION_TIMEOUT);
        a.addPromise(function () {
            return t.execute.apply(t, [e])
        })
    }

    var a, o, s = 0, c = [0, 0, 0], d = !1;
    require(["promise-chain", "promise-utils"], function (e, t) {
        a = e, o = t.reduce
    });
    var l, u;
    require(["vendor/abstract-sphero"], function (e) {
        l = e.AbstractSphero
    }), e.connected.add(function (e, t) {
        (t.displayName == n.DISPLAY_NAME || t.displayName.startsWith("BB-")) && (u = t)
    }), e.disconnected.add(function (e, t) {
        t == u && (u = null)
    });
    var f = {};
    return f.updated = new i, f.getConnectionCount = function () {
        return u ? 1 : 0
    }, f.getSpeed = function () {
        return s
    }, f.doCommand = function (e, r) {
        if (!u.handler) return void console.warn("device not ready");
        switch (e) {
            case"reset_all":
                setHeadingAndSpeed(0, 0), setRgb(0, 0, 0), setTailLedOff();
                break;
            case"stopMoving":
                setHeadingAndSpeed(0, 0);
                break;
            case"setHeading":
                setHeading(val(r[0]));
                break;
            case"setHeadingAndSpeed":
                setHeadingAndSpeed(val(r[0]), val(r[1]));
                break;
            case"setHeadingAndSpeedFor":
                setHeadingAndSpeed(val(r[1]), val(r[2])), t.doAfterDelay(n.NAME, r[0], function () {
                    setHeadingAndSpeed(val(r[1]), 0)
                }, val(r[3]));
                break;
            case"setTailLightOnOrOff":
                var i = r[0];
                switch (i) {
                    case"on":
                        setTailLedOn();
                        break;
                    case"off":
                        setTailLedOff()
                }
                break;
            case"setTailLightOnFor":
                setTailLedOn(), t.doAfterDelay(n.NAME, r[0], function () {
                    setTailLedOff()
                }, val(r[1]));
                break;
            case"setColor":
                var i = r[0], a = getRgb(i);
                setRgb(a[0], a[1], a[2]);
                break;
            case"setColorOnFor":
                var i = r[1], a = getRgb(i);
                setRgb(a[0], a[1], a[2]), t.doAfterDelay(n.NAME, r[0], function () {
                    setRgb(0, 0, 0)
                }, val(r[2]));
                break;
            case"setRgbColor":
                setRgb(val(r[0]), val(r[1]), val(r[2]));
                break;
            case"setRgbColorOnFor":
                setRgb(val(r[1]), val(r[2]), val(r[3])), t.doAfterDelay(n.NAME, r[0], function () {
                    setRgb(0, 0, 0)
                }, val(r[4]));
                break;
            case"setMotionTimeout":
                setMotionTimeout(1e3 * val(r[0]));
                break;
            default:
                return void console.log("bb8 cmd " + cmd + " not recognised")
        }
    }, r.setDeviceHandler(f), f
}),define("text!partials/_bb8.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n        <div class="connection device-connection">\r\n            <div class="connected">BB8 is connected</div>\r\n            <div class="not-connected">BB8 is not connected</div>\r\n        </div>\r\n        <div class="connection scratch-connection">\r\n            <div class="connected">Scratch is connected</div>\r\n            <div class="not-connected">Scratch is not connected</div>\r\n        </div>\r\n        <div id="bb8-speed" class="disp well">\r\n          <span class="lbl">Speed:</span>\r\n          <span class="val">-</span>\r\n        </div>\r\n      </div>\r\n  </div>'
}),define("devices/bb8/bb8-ui", ["jquery", "../../ui", "shared/ble/ble", "../../connection-status", "./bb8-constants", "./bb8-http", "./bb8-ble", "text!partials/_bb8.html"], function (e, t, n, r, i, a, o, s) {
    var c = t.add(i.NAME, i.DISPLAY_NAME, s, 2);
    new r(c, i.HANDLER_NAME, a, n, o);
    o.updated.add(function () {
        e("#bb8-speed .val").text(o.getSpeed())
    })
}),define("devices/microbit/microbit-constants", [], function () {
    var e = {
        BUTTONA: "button-a",
        BUTTONB: "button-b",
        TILT: "tilt",
        TEMPERATURE: "temperature",
        BEARING: "bearing",
        ACCELERATIONX: "accel-X",
        ACCELERATIONY: "accel-Y",
        ACCELERATIONZ: "accel-Z"
    }, t = [];
    for (var n in e) t.push(e[n]);
    return {
        NAME: "microbit",
        DISPLAY_NAME: "BBC micro:bit",
        HANDLER_NAME: "microbit",
        SMALL_HEADER: "Scanning: connect battery now",
        MAX_CONNECTIONS: 1,
        SENSORS: t
    }
}),define("devices/microbit/microbit-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./microbit-constants"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, d) {
        if (t == o) {
            var l = i.getPathParts(r), u = l.shift(), f = "";
            if (s && s.getConnectionCount() > 0) {
                switch (u) {
                    case"poll":
                        f = s.getSensorValues(), f += i.getBusy(a.NAME), c.connection.reset();
                        break;
                    default:
                        s.doCommand(u, l)
                }
                f += i.getStatus(a.NAME, s.getConnectionCount())
            } else f = i.getStatus(a.NAME, 0), c.connection.reset();
            e.send(t, f)
        }
    }

    var o = 17317;
    e.requestMade.add(handleRequest);
    var s, c = {};
    return c.setDeviceHandler = function (e) {
        s = e
    }, c.connection = new r(2e3), n.start(o), c
}),define("devices/microbit/microbit-ble", ["signals", "shared/data-utils", "shared/ble/ble", "../../scratch-utils", "./microbit-constants", "./microbit-http"], function (e, t, n, i, a, o) {
    function startPoll() {
        stopPoll(), b = setInterval(function () {
            g.forEach(function (e, t) {
                y.polled.dispatch(e.handler.state, t)
            })
        }, s)
    }

    function stopPoll() {
        clearInterval(b), b = null
    }

    function setDisplay(e) {
        var t = g[0].handler;
        if (!t) return void console.warn("setDisplay. device not ready");
        var n = m.text2array(e), r = t.getCommand(v.DISPLAY);
        h.addPromise(function () {
            return r.execute.apply(r, n)
        })
    }

    function setSoundOn(e, t) {
        var n = g[0].handler;
        if (!n) return void console.warn("setSoundOn. device not ready");
        var r = n.getCommand(v.PLAY_SOUND);
        h.addPromise(function () {
            return r.execute.apply(r, [e, t])
        })
    }

    function setSoundOff() {
    }

    var s = 150, c = "\n";
    const d = 1, l = 2, u = 3, f = 4;
    var h, p, m;
    require(["promise-chain", "promise-utils", "data-utils"], function (e, t, n) {
        h = e, p = t.reduce, m = n.dataUtils
    });
    var v, g = [];
    require(["vendor/microbit"], function (e) {
        v = e.Microbit
    }), n.connected.add(function (e, t) {
        t.handlerId == a.NAME && (g.push(t), null == b && startPoll())
    }), n.disconnected.add(function (e, n) {
        -1 != g.indexOf(n) && (t.deleteValue(g, n), 0 == g.length && stopPoll())
    });
    var b, y = {};
    return y.polled = new e, y.getConnectionCount = function () {
        return g.length
    }, y.getSensorValues = function () {
        var e = "", t = 0, n = 0;
        if (!g) return e;
        if (g.length < 1) return 0;
        var i = g[0].handler;
        if (!i) return e;
        switch (n = i.getSensorValue(0), r = "buttonA " + (0 != n ? "true" : "false") + c, e += r, n = i.getSensorValue(1), r = "buttonB " + (0 != n ? "true" : "false") + c, e += r, n = i.getSensorValue(6), r = "temperature " + n + c, e += r, n = i.getSensorValue(7), r = "bearing " + n + c, e += r, n = i.getSensorValue(2), r = "accelerometerX " + n + c, e += r, n = i.getSensorValue(3), r = "accelerometerY " + n + c, e += r, n = i.getSensorValue(4), r = "accelerometerZ " + n + c, e += r, t = i.getSensorValue(5), e += "tilt " + t + c, t) {
            case d:
                e += "isTilted/any true" + c, e += "isTilted/up false" + c, e += "isTilted/down true" + c, e += "isTilted/left false" + c, e += "isTilted/right false" + c;
                break;
            case l:
                e += "isTilted/any true" + c, e += "isTilted/up false" + c, e += "isTilted/down false" + c, e += "isTilted/left false" + c, e += "isTilted/right true" + c;
                break;
            case u:
                e += "isTilted/any true" + c, e += "isTilted/up true" + c, e += "isTilted/down false" + c, e += "isTilted/left false" + c, e += "isTilted/right false" + c;
                break;
            case f:
                e += "isTilted/any true" + c, e += "isTilted/up false" + c, e += "isTilted/down false" + c, e += "isTilted/left true" + c, e += "isTilted/right false" + c;
                break;
            default:
                e += "isTilted/any false" + c, e += "isTilted/up false" + c, e += "isTilted/down false" + c, e += "isTilted/left false" + c, e += "isTilted/right false" + c
        }
        return e
    }, y.doCommand = function (e, t) {
        switch (e) {
            case"reset_all":
                break;
            case"display":
                var n = t[0];
                n && setDisplay(decodeURIComponent(n));
                break;
            case"playSound":
                var r = t[1].replace("%23", "#"), o = t[2], s = parseFloat(t[3]), c = 0;
                switch (r) {
                    case"C":
                        c = 16.351;
                        break;
                    case"C#":
                    case"Db":
                        c = 17.324;
                        break;
                    case"D":
                        c = 18.354;
                        break;
                    case"D#":
                    case"Eb":
                        c = 19.445;
                        break;
                    case"E":
                        c = 20.601;
                        break;
                    case"F":
                        c = 21.827;
                        break;
                    case"F#":
                    case"Gb":
                        c = 23.124;
                        break;
                    case"G":
                        c = 24.499;
                        break;
                    case"G#":
                    case"Ab":
                        c = 25.956;
                        break;
                    case"A":
                        c = 27.5;
                        break;
                    case"A#":
                    case"Bb":
                        c = 29.135;
                        break;
                    case"B":
                        c = 30.868
                }
                var d = 0;
                switch (o) {
                    case"0":
                        d = Math.floor(1 * c);
                        break;
                    case"1":
                        d = Math.floor(2 * c);
                        break;
                    case"2":
                        d = Math.floor(4 * c);
                        break;
                    case"3":
                        d = Math.floor(8 * c);
                        break;
                    case"4":
                        d = Math.floor(16 * c);
                        break;
                    case"5":
                        d = Math.floor(32 * c);
                        break;
                    case"6":
                        d = Math.floor(64 * c);
                        break;
                    case"7":
                        d = Math.floor(128 * c);
                        break;
                    case"8":
                        d = Math.floor(256 * c)
                }
                setSoundOn(d, 1e3 * s), i.doAfterDelay(a.NAME, t[0], function () {
                    setSoundOff()
                }, s);
                break;
            case"playNote":
                var d = parseFloat(t[1]), s = parseFloat(t[2]);
                setSoundOn(d, 1e3 * s), i.doAfterDelay(a.NAME, t[0], function () {
                    setSoundOff()
                }, s);
                break;
            default:
                console.warn("doCommand", e, "not recognised")
        }
    }, y.getSensorValueByName = function (e) {
        if (!g) return 0;
        if (g.length < 1) return 0;
        var t = g[0].handler;
        if (!t) return 0;
        switch (e) {
            case"button-a":
                return t.getSensorValue(0);
            case"button-b":
                return t.getSensorValue(1);
            case"tilt":
                return t.getSensorValue(5);
            case"temperature":
                return t.getSensorValue(6);
            case"bearing":
                return t.getSensorValue(7);
            case"accel-X":
                return t.getSensorValue(2);
            case"accel-Y":
                return t.getSensorValue(3);
            case"accel-Z":
                return t.getSensorValue(4)
        }
    }, o.setDeviceHandler(y), y
}),define("text!partials/_microbit.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n      <div class="connection device-connection">\r\n        <div class="connected">BBC micro:bit is connected</div>\r\n        <div class="not-connected">BBC micro:bit is not connected</div>\r\n      </div>\r\n      <div class="connection scratch-connection">\r\n        <div class="connected">Scratch is connected</div>\r\n        <div class="not-connected">Scratch is not connected</div>\r\n      </div>\r\n      <div class="table-wrapper">\r\n        <table class="table">\r\n            <colgroup>\r\n                <col />\r\n                <col />\r\n            </colgroup>\r\n            <tbody>{sensorHTML}</tbody>\r\n        </table>\r\n      </div>\r\n      <div class="req">\r\n        <div class="now-time"></div>\r\n        <div class="req-path"></div>\r\n        <div class="req-time"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n'
}),define("devices/microbit/microbit-ui", ["jquery", "../../ui", "shared/ble/ble", "../../connection-status", "./microbit-constants", "./microbit-http", "./microbit-ble", "text!partials/_microbit.html"], function (e, t, n, r, i, a, o, s) {
    function reset(t) {
        c == t && d.forEach(function (t) {
            var n = c + "-" + t;
            e("#" + n + " td").html("-")
        })
    }

    var c = i.NAME, d = i.SENSORS, l = "";
    d.forEach(function (e) {
        var t = c + "-" + e;
        l += '<tr id="' + t + '">      <th>' + e + ":</th>      <td></td>    </tr>"
    }), s = s.replace("{sensorHTML}", l);
    var u = t.add(c, i.DISPLAY_NAME, s, 2);
    new r(u, i.HANDLER_NAME, a, n, o);
    o.polled.add(function (t, n) {
        d.forEach(function (t) {
            var n = c + "-" + t;
            e("#" + n + " td").html(o.getSensorValueByName(t))
        })
    }), n.disconnected.add(reset), n.connected.add(reset), reset(c)
}),define("devices/sensortag2/sensortag2-constants", [], function () {
    var e = {
        BUTTON0: "button-0",
        BUTTON1: "button-1",
        HALLSWITCH: "hall-switch",
        TILT: "tilt",
        TEMPERATURE: "temperature",
        TEMPOBJECT: "objectTemp",
        HUMIDITY: "humidity",
        LIGHT: "light",
        PRESSURE: "pressure",
        ACCELERATIONX: "accel-X",
        ACCELERATIONY: "accel-Y",
        ACCELERATIONZ: "accel-Z"
    }, t = [];
    for (var n in e) t.push(e[n]);
    return {
        NAME: "sensortag2",
        DISPLAY_NAME: "SensorTag 2",
        HANDLER_NAME: "sensortag2",
        SMALL_HEADER: "Scanning: press switch now",
        MAX_CONNECTIONS: 1,
        SENSORS: t
    }
}),define("devices/sensortag2/sensortag2-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./sensortag2-constants"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, d) {
        if (t == o) {
            var l = i.getPathParts(r), u = l.shift(), f = "";
            if (s && s.getConnectionCount() > 0) {
                switch (u) {
                    case"poll":
                        f = s.getSensorValues(), f += i.getBusy(a.NAME), c.connection.reset();
                        break;
                    default:
                        s.doCommand(u, l)
                }
                f += i.getStatus(a.NAME, s.getConnectionCount())
            } else f = i.getStatus(a.NAME, 0), c.connection.reset();
            e.send(t, f)
        }
    }

    var o = 17319;
    e.requestMade.add(handleRequest);
    var s, c = {};
    return c.setDeviceHandler = function (e) {
        s = e
    }, c.connection = new r(2e3), n.start(o), c
}),define("devices/sensortag2/sensortag2-ble", ["signals", "shared/data-utils", "shared/ble/ble", "../../scratch-utils", "./sensortag2-constants", "./sensortag2-http"], function (e, t, n, i, a, o) {
    function startPoll() {
        stopPoll(), b = setInterval(function () {
            g.forEach(function (e, t) {
                y.polled.dispatch(e.handler.state, t)
            })
        }, s)
    }

    function stopPoll() {
        clearInterval(b), b = null
    }

    function setLed(e, t) {
        if (g && !(g.length < 1)) {
            var n = g[0].handler;
            if (n) {
                var r = 0;
                switch (e) {
                    case"red LED":
                        r = 1;
                        break;
                    case"green LED":
                        r = 2;
                        break;
                    case"buzzer":
                        r = 4;
                        break;
                    default:
                        r = 7
                }
                var i = n.getCommand(v.SET_LED);
                h.addPromise(function () {
                    return i.execute.apply(i, [r, t])
                })
            }
        }
    }

    var s = 150, c = "\n";
    const d = 1, l = 2, u = 3, f = 4;
    var h, p, m;
    require(["promise-chain", "promise-utils", "data-utils"], function (e, t, n) {
        h = e, p = t.reduce, m = n.dataUtils
    });
    var v, g = [];
    require(["vendor/sensortag2"], function (e) {
        v = e.Sensortag2
    }), n.connected.add(function (e, t) {
        t.handlerId == a.NAME && (g.push(t), null == b && startPoll())
    }), n.disconnected.add(function (e, n) {
        -1 != g.indexOf(n) && (t.deleteValue(g, n), 0 == g.length && stopPoll())
    });
    var b, y = {};
    return y.polled = new e, y.getConnectionCount = function () {
        return g.length
    }, y.getSensorValues = function () {
        var e = "", t = 0, n = 0;
        if (!g) return e;
        if (g.length < 1) return 0;
        var i = g[0].handler;
        if (!i) return e;
        switch (n = i.getSensorValue(0), r = "buttons " + n + c, e += r, n = 1 & i.getSensorValue(0), r = "button0 " + (1 == n ? "true" : "false") + c, e += r, n = 2 & i.getSensorValue(0), r = "button1 " + (2 == n ? "true" : "false") + c, e += r, n = 4 & i.getSensorValue(0), r = "magnetSensed " + (4 == n ? "true" : "false") + c, e += r, n = i.getSensorValue(15), r = "temperature " + n + c, e += r, n = i.getSensorValue(14), r = "objectTemperature" + n + c, e += r, n = i.getSensorValue(12), r = "humidity " + n + c, e += r, n = i.getSensorValue(11), r = "light " + n + c, e += r, n = i.getSensorValue(13), r = "pressure " + n + c, e += r, n = i.getSensorValue(4), r = "accelerometerX " + n + c, e += r, n = i.getSensorValue(5), r = "accelerometerY " + n + c, e += r, n = i.getSensorValue(6), r = "accelerometerZ " + n + c, e += r, t = i.getSensorValue(7), e += "tilt " + t + c, t) {
            case d:
                e += "isTilted/any true" + c, e += "isTilted/up false" + c, e += "isTilted/down true" + c, e += "isTilted/left false" + c, e += "isTilted/right false" + c;
                break;
            case l:
                e += "isTilted/any true" + c, e += "isTilted/up false" + c, e += "isTilted/down false" + c, e += "isTilted/left false" + c, e += "isTilted/right true" + c;
                break;
            case u:
                e += "isTilted/any true" + c, e += "isTilted/up true" + c, e += "isTilted/down false" + c, e += "isTilted/left false" + c, e += "isTilted/right false" + c;
                break;
            case f:
                e += "isTilted/any true" + c, e += "isTilted/up false" + c, e += "isTilted/down false" + c, e += "isTilted/left true" + c, e += "isTilted/right false" + c;
                break;
            default:
                e += "isTilted/any false" + c, e += "isTilted/up false" + c, e += "isTilted/down false" + c, e += "isTilted/left false" + c, e += "isTilted/right false" + c
        }
        return e
    }, y.doCommand = function (e, t) {
        switch (e) {
            case"reset_all":
                setLed("all", !1);
                break;
            case"turnOnFor":
                var n = t[1];
                setLed(n, !0), i.doAfterDelay(a.NAME, t[0], function () {
                    setLed(n, !1)
                }, parseFloat(t[2]));
                break;
            case"turnOn":
                var n = t[0];
                setLed(n, !0);
                break;
            case"turnOff":
                var n = t[0];
                setLed(n, !1)
        }
    }, y.getSensorValueByName = function (e) {
        if (!g) return 0;
        if (g.length < 1) return 0;
        var t = g[0].handler;
        if (!t) return 0;
        switch (e) {
            case"buttons":
                return t.getSensorValue(0);
            case"button-0":
                return 1 & t.getSensorValue(0) ? 1 : 0;
            case"button-1":
                return 2 & t.getSensorValue(0) ? 1 : 0;
            case"hall-switch":
                return 4 & t.getSensorValue(0) ? 1 : 0;
            case"tilt":
                return t.getSensorValue(7);
            case"temperature":
                return t.getSensorValue(15);
            case"objectTemp":
                return t.getSensorValue(14);
            case"humidity":
                return t.getSensorValue(12);
            case"light":
                return t.getSensorValue(11);
            case"pressure":
                return t.getSensorValue(13);
            case"accel-X":
                return t.getSensorValue(4);
            case"accel-Y":
                return t.getSensorValue(5);
            case"accel-Z":
                return t.getSensorValue(6)
        }
    }, o.setDeviceHandler(y), y
}),define("text!partials/_sensortag2.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n      <div class="connection device-connection">\r\n        <div class="connected">SensorTag 2 is connected</div>\r\n        <div class="not-connected">SensorTag 2 is not connected</div>\r\n      </div>\r\n      <div class="connection scratch-connection">\r\n        <div class="connected">Scratch is connected</div>\r\n        <div class="not-connected">Scratch is not connected</div>\r\n      </div>\r\n      <div class="table-wrapper">\r\n        <table class="table">\r\n            <colgroup>\r\n                <col />\r\n                <col />\r\n            </colgroup>\r\n            <tbody>{sensorHTML}</tbody>\r\n        </table>\r\n      </div>\r\n      <div class="req">\r\n        <div class="now-time"></div>\r\n        <div class="req-path"></div>\r\n        <div class="req-time"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n'
}),define("devices/sensortag2/sensortag2-ui", ["jquery", "../../ui", "shared/ble/ble", "../../connection-status", "./sensortag2-constants", "./sensortag2-http", "./sensortag2-ble", "text!partials/_sensortag2.html"], function (e, t, n, r, i, a, o, s) {
    function reset(t) {
        c == t && d.forEach(function (t) {
            var n = c + "-" + t;
            e("#" + n + " td").html("-")
        })
    }

    var c = i.NAME, d = i.SENSORS, l = "";
    d.forEach(function (e) {
        var t = c + "-" + e;
        l += '<tr id="' + t + '">      <th>' + e + ":</th>      <td></td>    </tr>"
    }), s = s.replace("{sensorHTML}", l);
    var u = t.add(c, i.DISPLAY_NAME, s, 2);
    new r(u, i.HANDLER_NAME, a, n, o);
    o.polled.add(function (t, n) {
        d.forEach(function (t) {
            var n = c + "-" + t;
            e("#" + n + " td").html(o.getSensorValueByName(t))
        })
    }), n.disconnected.add(reset), n.connected.add(reset), reset(c)
}),define("devices/thunderboard/thunderboard-constants", [], function () {
    var e = {
        BATTERY: "battery",
        BUTTON0: "button-0",
        BUTTON1: "button-1",
        HALLSWITCH: "hall-switch",
        TILT: "tilt",
        TEMPERATURE: "temperature",
        HUMIDITY: "humidity",
        LIGHT: "light",
        UVLIGHT: "uv-light",
        ACCELERATIONX: "accel-X",
        ACCELERATIONY: "accel-Y",
        ACCELERATIONZ: "accel-Z"
    }, t = [];
    for (var n in e) t.push(e[n]);
    return {
        NAME: "thunderboard",
        DISPLAY_NAME: "ThunderBoard",
        HANDLER_NAME: "thunderboard",
        SMALL_HEADER: "Scanning: power on then button 1",
        MAX_CONNECTIONS: 1,
        SENSORS: t
    }
}),define("devices/thunderboard/thunderboard-http", ["../../server/http", "../../server/flash-http", "../../server/server", "../../server/connection", "../../scratch-utils", "./thunderboard-constants"], function (e, t, n, r, i, a) {
    function handleRequest(t, n, r, d) {
        if (t == o) {
            var l = i.getPathParts(r), u = l.shift(), f = "";
            if (s && s.getConnectionCount() > 0) {
                switch (u) {
                    case"poll":
                        f = s.getSensorValues(), f += i.getBusy(a.NAME), c.connection.reset();
                        break;
                    default:
                        s.doCommand(u, l)
                }
                f += i.getStatus(a.NAME, s.getConnectionCount())
            } else f = i.getStatus(a.NAME, 0), c.connection.reset();
            e.send(t, f)
        }
    }

    var o = 17318;
    e.requestMade.add(handleRequest);
    var s, c = {};
    return c.setDeviceHandler = function (e) {
        s = e
    }, c.connection = new r(2e3), n.start(o), c
}),define("devices/thunderboard/thunderboard-ble", ["signals", "shared/data-utils", "shared/ble/ble", "../../scratch-utils", "./thunderboard-constants", "./thunderboard-http"], function (e, t, n, i, a, o) {
    function startPoll() {
        stopPoll(), b = setInterval(function () {
            g.forEach(function (e, t) {
                y.polled.dispatch(e.handler.state, t)
            })
        }, s)
    }

    function stopPoll() {
        clearInterval(b), b = null
    }

    function setLed(e, t) {
        if (g && !(g.length < 1)) {
            var n = g[0].handler;
            if (n) {
                var r = 0;
                switch (e) {
                    case"blue LED":
                        r = 1;
                        break;
                    case"green LED":
                        r = 4;
                        break;
                    default:
                        r = 5
                }
                var i = n.getCommand(v.SET_LED);
                h.addPromise(function () {
                    return i.execute.apply(i, [r, t])
                })
            }
        }
    }

    var s = 150, c = "\n";
    const d = 1, l = 2, u = 3, f = 4;
    var h, p, m;
    require(["promise-chain", "promise-utils", "data-utils"], function (e, t, n) {
        h = e, p = t.reduce, m = n.dataUtils
    });
    var v, g = [];
    require(["vendor/thunderboard"], function (e) {
        v = e.Thunderboard
    }), n.connected.add(function (e, t) {
        t.handlerId == a.NAME && (g.push(t), null == b && startPoll())
    }), n.disconnected.add(function (e, n) {
        -1 != g.indexOf(n) && (t.deleteValue(g, n), 0 == g.length && stopPoll())
    });
    var b, y = {};
    return y.polled = new e, y.getConnectionCount = function () {
        return g.length
    }, y.getSensorValues = function () {
        var e = "", t = 0, n = 0;
        if (!g) return e;
        if (g.length < 1) return 0;
        var i = g[0].handler;
        if (!i) return e;
        switch (n = i.getSensorValue(0), r = "battery " + (1 == n ? "true" : "false") + c, e += r, n = i.getSensorValue(1), r = "button0 " + (1 == n ? "true" : "false") + c, e += r, n = i.getSensorValue(2), r = "button1 " + (1 == n ? "true" : "false") + c, e += r, n = i.getSensorValue(3), r = "magnetSensed " + (1 == n ? "true" : "false") + c, e += r, n = i.getSensorValue(14), r = "temperature " + n + c, e += r, n = i.getSensorValue(13), r = "humidity " + n + c, e += r, n = i.getSensorValue(11), r = "light " + n + c, e += r, n = i.getSensorValue(12), r = "UVIndex " + n + c, e += r, n = i.getSensorValue(4), r = "accelerometerX " + n + c, e += r, n = i.getSensorValue(5), r = "accelerometerY " + n + c, e += r, n = i.getSensorValue(6), r = "accelerometerZ " + n + c, e += r, t = i.getSensorValue(7), e += "tilt " + t + c, t) {
            case d:
                e += "isTilted/any true" + c, e += "isTilted/up false" + c, e += "isTilted/down true" + c, e += "isTilted/left false" + c, e += "isTilted/right false" + c;
                break;
            case l:
                e += "isTilted/any true" + c, e += "isTilted/up false" + c, e += "isTilted/down false" + c, e += "isTilted/left false" + c, e += "isTilted/right true" + c;
                break;
            case u:
                e += "isTilted/any true" + c, e += "isTilted/up true" + c, e += "isTilted/down false" + c, e += "isTilted/left false" + c, e += "isTilted/right false" + c;
                break;
            case f:
                e += "isTilted/any true" + c, e += "isTilted/up false" + c, e += "isTilted/down false" + c, e += "isTilted/left true" + c, e += "isTilted/right false" + c;
                break;
            default:
                e += "isTilted/any false" + c, e += "isTilted/up false" + c, e += "isTilted/down false" + c, e += "isTilted/left false" + c, e += "isTilted/right false" + c
        }
        return e
    }, y.doCommand = function (e, t) {
        switch (e) {
            case"reset_all":
                setLed("all", !1);
                break;
            case"turnLedOnFor":
                var n = t[1];
                setLed(n, !0), i.doAfterDelay(a.NAME, t[0], function () {
                    setLed(n, !1)
                }, parseFloat(t[2]));
                break;
            case"turnLedOn":
                var n = t[0];
                setLed(n, !0);
                break;
            case"turnLedOff":
                var n = t[0];
                setLed(n, !1)
        }
    }, y.getSensorValueByName = function (e) {
        if (!g) return 0;
        if (g.length < 1) return 0;
        var t = g[0].handler;
        if (!t) return 0;
        switch (e) {
            case"battery":
                return t.getSensorValue(0);
            case"button-0":
                return t.getSensorValue(1);
            case"button-1":
                return t.getSensorValue(2);
            case"hall-switch":
                return t.getSensorValue(3);
            case"tilt":
                return t.getSensorValue(7);
            case"temperature":
                return t.getSensorValue(14);
            case"humidity":
                return t.getSensorValue(13);
            case"light":
                return t.getSensorValue(11);
            case"uv-light":
                return t.getSensorValue(12);
            case"accel-X":
                return t.getSensorValue(4);
            case"accel-Y":
                return t.getSensorValue(5);
            case"accel-Z":
                return t.getSensorValue(6)
        }
    }, o.setDeviceHandler(y), y
}),define("text!partials/_thunderboard.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n      <div class="connection device-connection">\r\n        <div class="connected">ThunderBoard React is connected</div>\r\n        <div class="not-connected">ThunderBoard React is not connected</div>\r\n      </div>\r\n      <div class="connection scratch-connection">\r\n        <div class="connected">Scratch is connected</div>\r\n        <div class="not-connected">Scratch is not connected</div>\r\n      </div>\r\n      <div class="table-wrapper">\r\n        <table class="table">\r\n            <colgroup>\r\n                <col />\r\n                <col />\r\n            </colgroup>\r\n            <tbody>{sensorHTML}</tbody>\r\n        </table>\r\n      </div>\r\n      <div class="req">\r\n        <div class="now-time"></div>\r\n        <div class="req-path"></div>\r\n        <div class="req-time"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n'
}),define("devices/thunderboard/thunderboard-ui", ["jquery", "../../ui", "shared/ble/ble", "../../connection-status", "./thunderboard-constants", "./thunderboard-http", "./thunderboard-ble", "text!partials/_thunderboard.html"], function (e, t, n, r, i, a, o, s) {
    function reset(t) {
        c == t && d.forEach(function (t) {
            var n = c + "-" + t;
            e("#" + n + " td").html("-")
        })
    }

    var c = i.NAME, d = i.SENSORS, l = "";
    d.forEach(function (e) {
        var t = c + "-" + e;
        l += '<tr id="' + t + '">      <th>' + e + ":</th>      <td></td>    </tr>"
    }), s = s.replace("{sensorHTML}", l);
    var u = t.add(c, i.DISPLAY_NAME, s, 2);
    new r(u, i.HANDLER_NAME, a, n, o);
    o.polled.add(function (t, n) {
        d.forEach(function (t) {
            var n = c + "-" + t;
            e("#" + n + " td").html(o.getSensorValueByName(t))
        })
    }), n.disconnected.add(reset), n.connected.add(reset), reset(c)
}),define("controller", ["jquery", "./hid", "shared/ble/ble", "./ui", "./files", "./serial/serial", "./devices/wedo/wedo-usb", "./devices/wedo/wedo-template", "./devices/gotemp/gotemp-usb", "./devices/gomotion/gomotion-usb", "./devices/lpcudb/lpcudb-usb", "./devices/picoboard/picoboard-serial", "./devices/picoboard/picoboard-ui", "./devices/sphero/sphero-serial", "./devices/sphero/sphero-ui", "./devices/sbrick/sbrick-ble", "./devices/sbrick/sbrick-ui", "./devices/wedo2/wedo2-ble", "./devices/wedo2/wedo2-ui", "./devices/ollie/ollie-ble", "./devices/ollie/ollie-ui", "./devices/bb8/bb8-ble", "./devices/bb8/bb8-ui", "./devices/microbit/microbit-ble", "./devices/microbit/microbit-ui", "./devices/sensortag2/sensortag2-ble", "./devices/sensortag2/sensortag2-ui", "./devices/thunderboard/thunderboard-ble", "./devices/thunderboard/thunderboard-ui"], function (e, t, n, r, i, a, o, s, c, d, l, u, f, h, p, m, v, g, b, y, _, E, C, S, T, w, D, A, x) {
    var I;
    e(document).ready(function () {
        function enableTemplateLink() {
            var e = !1;
            switch (r.enableMicrobitLink(!1), I) {
                case"wedo":
                    e = o.getConnectionCount() > 0;
                    break;
                case"lpcudb":
                    e = l.getConnectionCount() > 0;
                    break;
                case"vernier":
                    e = c.getConnectionCount() + d.getConnectionCount() > 0;
                    break;
                case"picoboard":
                    e = u.getConnectionCount() > 0;
                    break;
                case"sphero":
                    e = h.getConnectionCount() > 0;
                    break;
                case"sbrick":
                    e = m.getConnectionCount() > 0;
                    break;
                case"wedo2":
                    e = g.getConnectionCount() > 0;
                    break;
                case"ollie":
                    e = y.getConnectionCount() > 0;
                    break;
                case"bb8":
                    e = E.getConnectionCount() > 0;
                    break;
                case"microbit":
                    r.enableMicrobitLink(!0), e = S.getConnectionCount() > 0;
                    break;
                case"sensortag2":
                    e = w.getConnectionCount() > 0;
                    break;
                case"thunderboard":
                    e = A.getConnectionCount() > 0
            }
            r.enableTemplateLink(e)
        }

        function setAlwaysOnTop(e) {
            chrome.app.window.current().setAlwaysOnTop(e)
        }

        t.initialize(), r.saveTemplateSelected.add(function (t) {
            var n = function () {
                e("#modals").modal("show")
            };
            switch (t) {
                case"wedo":
                    var r = o.getConnectionCount();
                    r > 0 && s.save(r, n);
                    break;
                case"sbrick":
                    var r = m.getConnectionCount(), a = "sbrick";
                    r > 1 && (a += "_x" + r), i.saveLocalFile(a + "_template.sb2", "../scratch/", n);
                    break;
                case"wedo2":
                    var r = g.getConnectionCount(), a = "wedo2";
                    r > 1 && (a += "_x" + r), i.saveLocalFile(a + "_template.sb2", "../scratch/", n);
                    break;
                default:
                    i.saveLocalFile(t + "_template.sb2", "../scratch/", n)
            }
        }), r.saveMicrobitSelected.add(function () {
            i.saveLocalFile("microbit-s2bot.hex", "../scratch/")
        }), r.tabChanged.add(function (e) {
            I = e, enableTemplateLink(e)
        }), r.alwaysOnTopChanged.add(setAlwaysOnTop), t.connected.add(enableTemplateLink), t.disconnected.add(enableTemplateLink), a.connected.add(enableTemplateLink), a.disconnected.add(enableTemplateLink), n.connected.add(enableTemplateLink), n.disconnected.add(enableTemplateLink)
    })
}),define("text!partials/_connecting-anim.html", [], function () {
    return '<div class="modal fade connecting-anim">\r\n  <div class="modal-dialog">\r\n    <div class="modal-content">\r\n      <div class="modal-body">\r\n        <p>Connecting to device</p>\r\n        <div class="progress">\r\n          <div class="progress-bar progress-bar-striped progress-bar-success active" role="progressbar" style="width: 100%"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'
}),define("connecting-anim", ["jquery", "text!partials/_connecting-anim.html"], function (e, t) {
    var n, r = {};
    return r.show = function () {
        n = e(t).modal({backdrop: "static"}).appendTo(e("body"))
    }, r.hide = function () {
        n.on("hidden.bs.modal", function () {
            n.remove()
        }).modal("hide")
    }, r
}),define("serial/serial-controller", ["../ui", "./serial", "./serial-ui", "../connecting-anim", "shared/storage", "../devices/picoboard/picoboard-serial", "../devices/sphero/sphero-serial"], function (e, t, n, r, i, a, o) {
    function setSerialProvider(e) {
        switch (c = e, s = null, e) {
            case"picoboard":
                s = a;
                break;
            case"sphero":
                s = o
        }
        if (s) {
            n.showPortMenu(!0);
            var t = !0;
            s.getConnectionCount() > 0 ? (t = !0, serialConnected()) : serialDisconnected();
            var r = getSerialPortStorageKey();
            i.get([r], function (e) {
                var i = e[r];
                i && n.makePortMenu(i, t)
            })
        } else n.showPortMenu(!1)
    }

    function getSerialPortStorageKey() {
        return c + "-port"
    }

    function serialConnected() {
        r.hide(), n.showConnect(!1), n.showDisconnect(!0)
    }

    function serialDisconnected() {
        r.hide, n.showConnect(!0), n.showDisconnect(!1)
    }

    var s, c;
    n.portSelected.add(function (e) {
        var t = {};
        t[getSerialPortStorageKey()] = e, i.set(t), r.show(), s.connectTo(e)
    }), n.disconnectRequest.add(function () {
        s.disconnect()
    }), e.tabChanged.add(function (e) {
        setSerialProvider(e);
    }), t.connected.add(function () {
        serialConnected()
    }), t.disconnected.add(function () {
        serialDisconnected()
    })
}),define("ble/ble-controls-ui", ["jquery", "signals"], function (e, t) {
    var n = e("#ble-find"), r = e("#ble-stop"), i = e("#ble-test"), a = {};
    return a.searchButtonClicked = new t, a.stopButtonClicked = new t, a.testButtonClicked = new t, n.click(function () {
        a.searchButtonClicked.dispatch()
    }), r.click(function () {
        a.stopButtonClicked.dispatch()
    }), i.click(function () {
        a.testButtonClicked.dispatch()
    }), a.enableFindButton = function () {
        n.removeClass("disabled").addClass("btn-success").text("Scan for devices")
    }, a.showSearchButton = function (e) {
        n.toggle(e)
    }, a.showStopButton = function (e) {
        r.toggle(e)
    }, a.showTestButton = function (e) {
        i.toggle(e)
    }, a
}),define("text!shared/partials/_ble-search-dialog.html", [], function () {
    return '<div class="modal fade ble-search-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\r\n  <div class="modal-dialog" role="document">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n        <button type="button" data-toggle="tooltip" title="Reset" class="btn btn-default btn-small btn-reset">\r\n            <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>\r\n        </button>\r\n        <span class="small-header">{small-header}</span> \r\n      </div>\r\n      <div class="modal-body">\r\n        <div id="device-list" class="list-group">\r\n          <!--<a href="#" v-for="device in foundDevices" v-on:click="select($index)" v-bind:class="{\'connected\':device.state == 2, \'pending\': device.state == 1}" class="list-group-item">\r\n            <span v-if="device.state == 2" class="device-tick glyphicon glyphicon-ok" aria-hidden="true"></span>\r\n            <span class="device-name">{{ device.name }}</span>\r\n            <span class="device-address">{{device.macAddress}}</span>\r\n            <span v-if="device.state == 1" class="device-pending">Initialising...</span>\r\n            <span v-if="device.state == 2" class="device-disconnect glyphicon glyphicon-remove-circle" aria-hidden="true"></span>\r\n          </a>-->\r\n        </div>\r\n      </div>\r\n      <div class="modal-footer">\r\n        <button type="button" class="btn btn-default btn-small btn-close" data-dismiss="modal" aria-label="Close"> Close </button>\r\n      </div>\r\n      </div>\r\n  </div>\r\n</div>\r\n'
}),define("text!shared/partials/_ble-device-item.html", [], function () {
    return '<a href="#" class="list-group-item" data-toggle="tooltip" title="Click to connect/disconnect">\r\n  <span class="device-tick glyphicon glyphicon-ok" aria-hidden="true"></span>\r\n  <span class="device-name">{name}</span>\r\n  <span class="device-address">{address}</span>\r\n  <span class="device-pending">Initialising...</span>\r\n  <span class="device-disconnect glyphicon glyphicon-remove-circle" aria-hidden="true"></span>\r\n</a>\r\n'
}),define("shared/ble/ble-search-ui", ["jquery", "signals", "text!shared/partials/_ble-search-dialog.html", "text!shared/partials/_ble-device-item.html"], function (e, t, n, r) {
    var i, a = "disabled", o = {}, s = {};
    return s.itemClicked = new t, s.closed = new t, s.resetButtonClicked = new t, s.shown = new t, s.selectedDevice = null, s.show = function (t) {
        i = e(n.replace("{small-header}", t)).modal({backdrop: "static"}).appendTo(e("body")), i.find(".close").click(function () {
            s.closed.dispatch()
        }), i.find(".btn-close").click(function () {
            s.closed.dispatch()
        }), i.find(".btn-reset").click(function () {
            s.resetButtonClicked.dispatch()
        }), i.on("hidden.bs.modal", function () {
            i.remove()
        }), s.shown.dispatch()
    }, s.addDevice = function (t, n, c) {
        var d = e(i).find("#device-list"), l = e(r.replace("{name}", t).replace("{address}", n));
        c ? l.prependTo(d) : l.appendTo(d), l.click(function () {
            e(this).hasClass(a) || s.itemClicked.dispatch(n)
        }), l.toggleClass(a, !c), o[n] = l
    }, s.updateDevice = function (e, t) {
        var n = o[e];
        n.toggleClass("connected", t >= 2), n.toggleClass("pending", 1 == t)
    }, s.deleteItem = function (e) {
        var t = o[e];
        t.remove()
    }, s.clearItems = function () {
        var e = Object.keys(o);
        e.forEach(function (e) {
            var t = o[e];
            t.remove(), delete o[e]
        })
    }, s
}),define("shared/ble/ble-search-controller", ["./ble", "./ble-search-ui"], function (e, t) {
    function findByAddress(e, t) {
        return e.find(function (e) {
            return e.macAddress == t
        })
    }

    function deviceFound(n) {
        var r = e.getSelectedDevices().length;
        t.addDevice(n.displayName, n.macAddress, n.handlerId == e.getActiveHandlerId() && r < e.getMaxConnections())
    }

    function scanDeviceUpdated(e) {
        t.updateDevice(e.macAddress, e.state)
    }

    function addConnectedItems() {
        t.clearItems(), n.connectedDevices.forEach(function (e) {
            t.addDevice(e.displayName, e.macAddress, !0), t.updateDevice(e.macAddress, e.state)
        })
    }

    var n, r, i;
    e.ready.add(function (e, t) {
        n = e, i = t
    }), require(["promise-chain"], function (e) {
        r = e
    });
    var a = !1;
    t.shown.add(function () {
        a = !0, addConnectedItems(), r.addPromise(function () {
            return n.startScanning()
        }), n.onDeviceFound.add(deviceFound), n.onDeviceConnected.add(scanDeviceUpdated), n.onDeviceDisconnected.add(scanDeviceUpdated)
    }), t.closed.add(function () {
        a = !1, r.addPromise(function () {
            return n.stopScanning()
        }), n.onDeviceFound.remove(deviceFound), n.onDeviceConnected.remove(scanDeviceUpdated), n.onDeviceDisconnected.remove(scanDeviceUpdated)
    }), t.resetButtonClicked.add(function () {
        r.addPromise(function () {
            return n.reset().then(function () {
                return t.clearItems(), n.startScanning()
            })
        })
    }), t.itemClicked.add(function (e) {
        var o = findByAddress(n.foundDevices, e);
        return o || (o = findByAddress(n.connectedDevices, e)), o ? void(o.state >= 2 ? r.addPromise(function () {
            return i.disconnect(o.macAddress).then(function () {
                t.deleteItem(o.macAddress)
            })
        }) : 0 == o.state && (t.updateDevice(o.macAddress, 1), r.addPromise(function () {
            return i.connect(o.macAddress, {persistent: !1})["catch"](function (e) {
                console.warn("couldn't connect")
            }).then(function () {
                return a ? (addConnectedItems(), n.startScanning()) : Promise.resolve()
            })
        }))) : void console.error("Couldn't find selected device")
    })
}),define("text!partials/_ble-test-dialog.html", [], function () {
    return '<div class="modal fade ble-test-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\r\n  <div class="modal-dialog" role="document">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">Test commands</h4>\r\n      </div>\r\n      <div class="modal-body">\r\n        <div class="device-commands list-group">\r\n          <!--<button v-for="command in deviceData.handler.testCommandNames" v-on:click="executeCommandAt(deviceData.handler, $index)" class="list-group-item">{{command}}</button>-->\r\n        </div>\r\n        <!--<ul class="device-values list-group">\r\n          <li class="list-group-item active">Port values</li>\r\n          !--<li v-for="port in deviceData.handler.state" class="list-group-item">{{port.type}}:{{port.value}}</li>--\r\n        </ul>-->\r\n      </div>\r\n      <div class="modal-footer">\r\n        <button type="button" class="btn btn-default btn-small btn-close" data-dismiss="modal" aria-label="Close"> Close </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'
}),define("ble/ble-test-ui", ["jquery", "signals", "text!partials/_ble-test-dialog.html"], function (e, t, n) {
    var r, i = {};
    return i.commandClicked = new t, i.closed = new t, i.show = function () {
        r = e(n).modal({backdrop: "static"}).appendTo(e("body")), r.on("hidden.bs.modal", function () {
            r.remove(), i.closed.dispatch()
        });
        for (var t = r.find(".device-commands"), a = 0; a < arguments.length; a += 3) {
            var o = arguments[a + 1],
                s = '<div class="list-group-item list-group-item-info">' + arguments[a] + " (" + o + ")</div>";
            e(s).appendTo(t);
            var c = arguments[a + 2];
            c.forEach(function (n) {
                var r = '<button class="list-group-item">' + n + "</button>",
                    a = i.commandClicked.dispatch.bind(i.commandClicked, o, n);
                e(r).appendTo(t).click(function () {
                    a()
                })
            })
        }
    }, i
}),define("ble/ble-controller", ["shared/data-utils", "../ui", "shared/ble/ble", "./ble-controls-ui", "shared/ble/ble-search-ui", "shared/ble/ble-search-controller", "./ble-test-ui", "../devices/sbrick/sbrick-constants", "../devices/wedo2/wedo2-constants", "../devices/ollie/ollie-constants", "../devices/bb8/bb8-constants", "../devices/microbit/microbit-constants", "../devices/sensortag2/sensortag2-constants", "../devices/thunderboard/thunderboard-constants", "../devices/sbrick/sbrick-http", "../devices/wedo2/wedo2-http", "../devices/ollie/ollie-http", "../devices/bb8/bb8-http", "../devices/microbit/microbit-http", "../devices/sensortag2/sensortag2-http", "../devices/thunderboard/thunderboard-http"], function (e, t, n, r, i, a, o, s, c, d, l, u, f, h, p, m, v, g, b, y, _) {
    function addDevice(e, t) {
        C[e.NAME] = e, S[e.NAME] = t.connection
    }

    function setDeviceButtonState() {
        var e = n.getSelectedDevices().length > 0 && !T.isConnected;
        r.showTestButton(e), r.showStopButton(!1)
    }

    function stopHttpListen() {
        T && (T.connected.remove(setDeviceButtonState, this), T.disconnected.remove(setDeviceButtonState, this), T = null)
    }

    function resetSelectedDevices() {
        n.getSelectedDevices().forEach(function (e) {
            A.addPromise(function () {
                e.handler.getCommand("RESET").execute()
            })
        })
    }

    var r, o, i, E, C = {}, S = {};
    addDevice(s, p), addDevice(c, m), addDevice(d, v), addDevice(l, g), addDevice(u, b), addDevice(f, y), addDevice(h, _);
    var T, w, D, A;
    require(["facade", "promise-chain"], function (e, t) {
        var i = new e.Facade;
        i.init().then(function () {
            w = i.getDeviceManager(), D = i.getBle(), n.init(i), r.enableFindButton()
        }), A = t
    }), n.connected.add(function (e, t) {
        setDeviceButtonState()
    }), n.disconnected.add(function (e) {
        setDeviceButtonState()
    }), t.tabChanged.add(function (e) {
        w && w.reset(), stopHttpListen(), E = e;
        var t = C[e];
        t ? (r.showSearchButton(!0), n.setActiveHandler(t.HANDLER_NAME || e, t.MAX_CONNECTIONS || 1), T = S[e], T.connected.add(setDeviceButtonState, this), T.disconnected.add(setDeviceButtonState, this), setDeviceButtonState()) : null != n.getActiveHandlerId() && (n.setActiveHandler(null), r.showSearchButton(!1), r.showTestButton(!1), r.showStopButton(!1))
    }), r.stopButtonClicked.add(function () {
        resetSelectedDevices()
    }), r.searchButtonClicked.add(function () {
        var e, t = "Scanning for devices...";
        E && (e = C[E]), e && e.SMALL_HEADER && (t = e.SMALL_HEADER), i.show(t)
    }), r.testButtonClicked.add(function () {
        var e = [];
        n.getSelectedDevices().forEach(function (t) {
            e = e.concat([t.displayName, t.macAddress, t.handler.testCommandNames])
        }), o.show.apply(this, e)
    }), o.closed.add(function () {
        resetSelectedDevices()
    }), o.commandClicked.add(function (e, t) {
        var n = w.connectedDevices.find(function (t) {
            return t.macAddress == e
        });
        A.addPromise(function () {
            return n.handler.getCommand(t).execute()
        })
    })
}),define("text!partials/_wedo.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n      <div class="connection device-connection">\r\n        <div class="connected">WeDo is connected</div>\r\n        <div class="not-connected">WeDo is not connected</div>\r\n      </div>\r\n      <div class="connection scratch-connection">\r\n        <div class="connected">Scratch is connected</div>\r\n        <div class="not-connected">Scratch is not connected</div>\r\n      </div>\r\n      <div class="table-wrapper">\r\n        <table class="table">\r\n          <colgroup>\r\n            <col />\r\n            <col />\r\n            <col />\r\n          </colgroup>\r\n          <tbody>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div class="req">\r\n        <div class="now-time"></div>\r\n        <div class="req-path"></div>\r\n        <div class="req-time"></div>\r\n      </div>\r\n    </div>\r\n  </div>'
}),define("devices/wedo/wedo-ui", ["jquery", "../../hid", "../../ui", "./wedo-names", "./wedo-usb", "./wedo-http", "text!partials/_wedo.html"], function (e, t, n, r, i, a, o) {
    function usbConnectionChange() {
        var t = i.getConnectionCount();
        if (t > 0) {
            var n = (t > 1 ? t + " WeDos are" : "WeDo is") + " connected";
            e("#pane-wedo .device-connection .connected").text(n).show(), e("#pane-wedo .device-connection .not-connected").hide()
        } else e("#pane-wedo .device-connection .connected").hide(), e("#pane-wedo .device-connection .not-connected").show();
        getTBody().empty(), s = [], makeSlotGroup(0)
    }

    function getChar(e) {
        return String.fromCharCode(65 + e)
    }

    function getTBody() {
        return e("#pane-" + c + " tbody")
    }

    function makeSlotGroup(t) {
        var n = "slot-" + (t + "-0"), r = "slot-" + (t + "-1"), i = 2 * t, a = 2 * t + 1,
            o = '<tr id="' + n + '">        <th>' + getChar(i) + '</th>        <td class="slot-type"></td>        <td class="slot-value"></td>      </tr>      <tr id="' + r + '">        <th>' + getChar(a) + '</th>        <td class="slot-type"></td>        <td class="slot-value"></td>      </tr>';
        getTBody().append(o), getTBody().find("tr").sort(function (e, t) {
            return e.id > t.id
        }).appendTo(getTBody());
        var c = [[e("#" + n + " .slot-type"), e("#" + n + " .slot-value")], [e("#" + r + " .slot-type"), e("#" + r + " .slot-value")]];
        return s[t] = c, c
    }

    function isOutput(e) {
        return e == r.MOTOR || e == r.LIGHTBRICK || e == r.SERVO
    }

    function isSensor(e) {
        return e == r.MOTION || e == r.TILT
    }

    function isOpen(e) {
        return e == r.OPEN
    }

    var s = [], c = r.NAME;
    n.add(c, "WeDo 1.0", o, 0), t.connected.add(usbConnectionChange, this), t.disconnected.add(usbConnectionChange, this), a.connection.connected.add(function () {
        e("#pane-wedo .scratch-connection .connected").show(), e("#pane-wedo .scratch-connection .not-connected").hide()
    }), a.connection.disconnected.add(function () {
        e("#pane-wedo .scratch-connection .connected").hide(), e("#pane-wedo .scratch-connection .not-connected").show()
    }), i.polled.add(function (e, t, n) {
        function getDisplay(n) {
            var r = e[n].type, i = e[n].value;
            isOpen(r) && (i = "---"), isOutput(r) && (i = t[n].isOn ? t[n].power : "off");
            var a = isSensor(r);
            return r = r.toLowerCase(), a && (r += " sensor"), {type: r, value: i}
        }

        var r = s[n];
        r || (r = makeSlotGroup(n));
        var i = getDisplay(0), a = getDisplay(1);
        r[0][0].text(i.type), r[0][1].text(i.value), r[1][0].text(a.type), r[1][1].text(a.value)
    }), makeSlotGroup(0)
}),define("text!partials/_vernier.html", [], function () {
    return '<div class="panel-status panel panel-default">\r\n    <div class="panel-body">\r\n      <div class="connection device-connection">\r\n        <div class="connected">Vernier devices connected</div>\r\n        <div class="not-connected">Vernier devices not connected</div>\r\n      </div>\r\n      <div class="connection scratch-connection">\r\n        <div class="connected">Scratch is connected</div>\r\n        <div class="not-connected">Scratch is not connected</div>\r\n      </div>\r\n      <div id="gotemp-disp" class="disp well">\r\n        <span class="lbl">Temperature:</span>\r\n        <span class="val">-</span>\r\n      </div>\r\n      <div id="gomotion-disp" class="disp well">\r\n        <span class="lbl">Distance:</span>\r\n        <span class="val">-</span>\r\n      </div>\r\n    </div>\r\n  </div>'
}),define("vendors/vernier/vernier-ui", ["jquery", "../../hid", "../../ui", "./vernier-names", "./vernier-http", "../../devices/gotemp/gotemp-usb", "../../devices/gomotion/gomotion-usb", "text!partials/_vernier.html"], function (e, t, n, r, i, a, o, s) {
    function getConnections() {
        return a.getConnectionCount() + o.getConnectionCount()
    }

    function updateTemp(t) {
        e("#gotemp-disp .val").html(t.toFixed(1) + " &deg;C")
    }

    function updateDistance(t) {
        e("#gomotion-disp .val").html(t)
    }

    var c = r.VERNIER;
    n.add(c, "Vernier", s, 1), t.connected.add(function (t) {
        getConnections() > 0 && (e("#pane-vernier .device-connection .connected").show(), e("#pane-vernier .device-connection .not-connected").hide())
    }), t.disconnected.add(function (t) {
        0 == getConnections() && (e("#pane-vernier .device-connection .connected").hide(), e("#pane-vernier .device-connection .not-connected").show())
    }), i.connection.connected.add(function () {
        e("#pane-vernier .scratch-connection .connected").show(), e("#pane-vernier .scratch-connection .not-connected").hide()
    }), i.connection.disconnected.add(function () {
        e("#pane-vernier .scratch-connection .connected").hide(), e("#pane-vernier .scratch-connection .not-connected").show()
    }), a.polled.add(updateTemp), o.polled.add(updateDistance)
}),require.config({
    shim: {bootstrap: {deps: ["jquery"]}},
    paths: {
        bootstrap: "../bower_components/bootstrap/dist/js/bootstrap.min",
        jquery: "../bower_components/jquery/dist/jquery.min",
        signals: "../bower_components/js-signals/dist/signals.min",
        requireLib: "../bower_components/requirejs/require",
        text: "../bower_components/text/text",
        jszip: "../bower_components/jszip/dist/jszip.min",
        partials: "../partials",
        shared: "../lib/shared",
        bglib: "../bower_components/bglib/bglib",
        bleadvertise: "../bower_components/bleadvertise/index",
        "buffer-data-utils": "../bower_components/buffer-data-utils/index",
        "lib/bglib-responses": "../bower_components/bglib/lib/bglib-responses",
        "lib/bglib-errors": "../bower_components/bglib/lib/bglib-errors",
        "lib/bglib-events": "../bower_components/bglib/lib/bglib-events",
        "lib/packet": "../bower_components/bleadvertise/lib/packet",
        "lib/parser": "../bower_components/bleadvertise/lib/parser",
        "lib/serializer": "../bower_components/bleadvertise/lib/serializer",
        bleLib: "../lib/ble/dist/ble"
    }
}),require(["bootstrap", "bleLib", "./ui", "bglib", "./controller", "./serial/serial-controller", "./ble/ble-controller", "./server/flash-http", "./devices/wedo/wedo-ui", "./devices/picoboard/picoboard-ui", "./devices/sphero/sphero-ui", "./vendors/vernier/vernier-ui"], function (e, t, n) {
    n.activate()
}),define("main", function () {
});